var pageWidth,pageHeight,postResize,lastResizeTime=0,basePage={width:600,height:500,scale:1,scaleX:1,scaleY:1,initialScale:!0},pixelRatio=1,containerRatio=1,zoomRatio=1;function getPageSize(){lastResizeTime=Date.now(),pageHeight=$("#mainContainer").height(),pageWidth=$("#mainContainer").width(),console.log("getPageSite h: "+pageHeight+" w:"+pageWidth),basePage.initialScale=!1;var e=1,t=1;basePage.initialScale=!1,e=pageWidth/basePage.width,t=pageHeight/basePage.height,basePage.scaleX=e,basePage.scaleY=t,basePage.scale=e>t?t:e,containerRatio=basePage.scale,helpers.common.setZoomRatio(containerRatio*zoomRatio),console.log("container Ratio "+containerRatio),$("#gameArea").attr("width",pageWidth).attr("height",pageHeight),$("#staticArea").attr("width",pageWidth).attr("height",pageHeight),$("#coverCanvas").attr("width",pageWidth).attr("height",pageHeight),game.const.canvasOffsetX=Math.max(0,(pageWidth-pixelRatio*game.const.gameW)/2),game.const.canvasOffsetY=Math.max(0,(pageHeight-pixelRatio*game.const.gameH)/2),console.log("canvas offset X: "+game.const.canvasOffsetX);var a=Math.floor((basePage.width*basePage.scale-basePage.width)/2);a=basePage.scale>1?-a:e<=t?0:-a;$("#mainContent");if(gameStarted){var s=game.data.currentView;game.data.currentView=!1,game.switchTo(s)}}function exitHandler(){(document.webkitIsFullScreen||document.mozFullScreen||null!==document.msFullscreenElement)&&getPageSize()}console.log("scale: "+basePage.scale),$(document).ready((function(){setTimeout((function(){getPageSize()}),50)})),$(window).resize((function(){clearTimeout(postResize),postResize=setTimeout(getPageSize,100)})),document.addEventListener&&(document.addEventListener("fullscreenchange",exitHandler),document.addEventListener("mozfullscreenchange",exitHandler),document.addEventListener("MSFullscreenChange",exitHandler),document.addEventListener("webkitfullscreenchange",exitHandler));var currentLanguage="en",addLangPrefix="L:";addLangPrefix="";var langPaddingChar="D",addLangPadding=.5;function getLine(e,...t){if(void 0===langLines[e])return"Undefined Line: "+e;let a;if(void 0===langLines[e][currentLanguage]){if(void 0===langLines[e].en)return"Undefined Line Key: "+e;a=langLines[e].en}else a=langLines[e][currentLanguage];if(!1===a)return!1;if(t.length>0&&(a=a.format(...t)),!1!==addLangPadding)for(var s=Math.ceil(a.length*addLangPadding),r=0;r<s;)s-r>17?(a+=langPaddingChar.repeat(17)+" ",r+=17):(a+=langPaddingChar.repeat(s-r),r+=s-r);return isArray(a)?($.each(a,(function(e,t){a[e]=addLangPrefix+t})),a):addLangPrefix+a}addLangPadding=!1;var textLines={steam_page_short_desc:"Simpocalypse is a post-apocalyptic civilization simulator game, where you manage & lead your settlement to become a global empire!",steam_page_desc_t1:"Simpocalypse is a post-apocalyptic civilization simulator game, where you manage your settlement to become a global empire!",steam_page_desc_t2:"[b]-> Survive the post-apocalyptic times [/b]\n        Establish strong fundamentals for your settlement to survive! Explore, scavenge and rebuild society from scratch in harsh post-apocalyptic conditions.\n        Manage limited resources, recover from natural and social disasters as you expand into dangerous territories to restore the world order as you see fit!\n        \n        [b]->Rebuild the pillars of modern civilization[/b]\n        Recovery of modern social, economic and military structure is crucial to start thriving instead of just surviving!\n        \n        [b]-> Manage your citizens to create a powerful establishment[/b]\n        Every powerful settlement requires great maintenance, workers, scavengers, builders, soldiers,… to survive different events through time and grow the empire despite any challenges and threats it faces.\n        \n        [b]-> Choose your own path with a massive research tree and Advance your civilization into the new heights[/b]\n        Uncover the research tree to unlock new buildings, skills and perks. Will you succeed in global expansion or bring your civilization extinct? The path is up to you...\n        \n        [b]-> Trade the Global Market to your advantage[/b]\n        All resources are tradable in a demand/supply driven market where your actions can affect it. Manipulate and trade the market to become a global tycoon!",steam_page_desc_t3:"[b]-> Post-apocalyptic world conquering - Dominate & Control the World[/b]\n        The new world order has been established, new leaders have taken over the territories. Will you choose military pressure, use your wealth or maybe a more diplomatic route to world domination?\n        \n        [b]-> Speed up and automate gameplay actions[/b]\n        Utilize the Time-lapse feature which lets you vastly speed up time and help automate more and more of the gameplay as you dive deeper into its many mechanics – Play at your own pace!\n        \n        So, do you have the skills to run a successful settlement and lead it to become a global empire?",steam_page_discord_title:"OFFICIAL DISCORD - CHAT WITH US!",steam_page_add_to_wishlist:"ADD TO YOUR WISHLIST",steam_page_early_access_why:"Simpocalypse has a lot of depth with different mechanics where balancing things well is crucial to deliver a great gaming experience. With Early Access, we want to ensure we have enough time to work with our players to properly balance and adjust features, as well as ensure a great player onboarding so new players are not overwhelmed by the depth, but rather eased into the game's replayable simulation experience! It will also give us the option to expand the game features and make sure they are built off a great foundation.",steam_page_early_access_how_long:"3-6 months. \n\nIf during EA we would consider extending late-game content beyond our current roadmap, then we might extend EA a bit more to ensure full release contains that. But EA, at all stages, will be fully playable and offer a complete experience.",steam_page_early_access_difference:"There are a few main things we want to properly polish during EA: balance, adjust features, player onboarding, and good and clear UI. We want to add/expand on features, such as adding a ton of Achievements, different game modes, improve on replayability, extend late-game content, add more automation and quality of life features as well as translate the game into as many languages as possible!",steam_page_early_access_state:"The core features and “main goal” of the game are finished – you start through managing a few citizens, to eventually conquering the full world! The game already has 13 bigger content groups you unlock over time, 10 resources, 13 civilization stats to balance, 9 citizen jobs, 25 different buildings, 81 different research upgrades, a prestige with perk point system, A massive world to conquer (7 continents,  400+ regions, 8000+ territories, 72000+ zones). A single playthrough requires 20+ hours of active time WHILE utilizing the time-lapse feature with up to x10 sped-up game time. If you enjoy replayability with prestige and speed-running combined with the procedural world generation and random events, it can easily offer 100+ hours of potential playtime.",steam_page_early_access_pricing:"We plan to gradually increase the price as we ship new content and features.",steam_page_early_access_community:"We take community feedback to heart. It is the best way to make the best game possible! The most important feedback to us is regarding game balance and onboarding as the game has a ton of depth and various ways to play. But we also have plans to expand the game where fresh ideas from the community are gold to us. We have an active discord channel, where not only do we take feedback, but we will also run various private playtests, share sneak peeks & Work In Progress, and will also run events, contests, and more! You can also give feedback on the steam community board, but if you want a more direct chat with us and other players, then make sure to join our Discord!",lang_name_en:"English",lang_name_zh:"Chinese (Simplified)",lang_name_de:"German",lang_name_nl:"Dutch",lang_name_it:"Italian",lang_name_pl:"Polish",lang_name_sp:"Spanish",lang_name_kr:"Korean",lang_name_fr:"French",lang_name_pt:"Portuguese",thousands_divider:",",decimals_separator:".",btn_new_game:"NEW GAME",btn_play:"PLAY",btn_continue_play:"CONTINUE PLAYING",btn_continue:"CONTINUE",btn_select:"SELECT",btn_cancel:"CANCEL",btn_try_again:"TRY AGAIN",btn_load:"LOAD FILE",btn_feedback:"<b>FEEDBACK</b> / BUG REPORTS",btn_sign_up:"SIGN UP",btn_build:"BUILD",btn_upgrade:"UPGRADE",btn_upgrade_locked:"UPGRADE LOCKED!",btn_upgrades_maxed:"UPGRADES MAXED!",btn_add_investment:"ADD INVESTMENT",btn_prestige:"PRESTIGE",btn_clear_all:"CLEAR ALL",btn_default:"DEFAULT",setting_language:"Language",setting_language_desc:"Game Language",setting_fullscreen:"Fullscreen mode",setting_fullscreen_desc:"Disable/Enable fullscreen mode",setting_sound:"Sounds",setting_sound_desc:"Enable/Disable sounds",setting_music:"Music",setting_music_desc:"Enable/disable music",setting_buy_amount:"Build Amount",setting_buy_amount_desc:"How many Buildings you build at once",setting_assign_amount:"Assign Amount",setting_assign_amount_desc:"How many citizens you assign at once",setting_timelapse_config_visible:"Show Config",setting_timelapse_config_visible_desc:"Show/Hide timelapse config",setting_productivity_drop:"Productivity Drop",setting_productivity_drop_desc:"If productivity drops twice in a row, timelapse will pause so you can readjust",setting_health_drop:"Health Drop",setting_health_drop_desc:"If health drops twice in a row, timelapse will pause so you can readjust",setting_auto_rations:"Auto Rations",setting_auto_rations_desc:"Automatically assigns/unassigns enough citizens (if available) to scavenge for food and water to just cover for your current needs.",setting_auto_explore:"Auto Switch Explore Terriotory",setting_auto_explore_desc:"Automate switching to unexplored territories",setting_carry_over_explore:"Auto Carry-Over Explorers",setting_carry_over_explore_desc:"Automatically Carry over extra explorers to new unexplored territories",setting_auto_attack_section:"AUTO ATTACK SECTIONS",setting_auto_attack_section_desc:"After a battle of a section ends, you will automatically enter a new section battle (chosen at random based on lowest section power). You can stop this within 5 seconds after a battle ends.",setting_auto_attack_territory:"AUTO SWITCH TERRITORY",setting_auto_attack_territory_desc:"After a territory is conquered, you will automatically start invading a new territory (chose at random based on lowest relative power). You can stop this within 5 seconds after a battle ends.",setting_auto_refill_formation:"AUTO REFILL FORMATION",setting_auto_refill_formation_desc:"After a battle of a section ends, this will automatically refill your formation with troops (first to last), if there are any left.",setting_hide_completed_objectives:"HIDE all completed",setting_hide_completed_objectives_desc:"Hide all completed objectives",setting_show_quick_notification:"Show quick notifications",setting_show_quick_notification_desc:"Show last notifications at the bottom",setting_filter_notes_explorers:"Explorer trips",setting_filter_notes_explorers_desc:"Show Explorer trips",setting_filter_notes_warnings:"Warnings",setting_filter_notes_warnings_desc:"Show all warnings",setting_hide_map_objectives:"Hide map objectives",setting_hide_map_objectives_desc:"Hide map objectives",setting_show_objective_hints:"Show hints",setting_show_objective_hints_desc:"Show objective hints",setting_show_game_hints:"Show Game hints",setting_show_game_hints_desc:"Show game hints that guide you to next objective (in most cases)",setting_hide_warning_icons:"Hide Warning icons",setting_hide_warning_icons_desc:"Hide various warning icons in top menu",setting_hide_resource_animations:"Hide Resource Animations",setting_hide_resource_animations_desc:"Hide animations on citizens gained, explore trips and build costs",setting_hide_tooltips:"Hide tooltips",setting_hide_tooltips_desc:"Hides tooltips that are meant to help players learn (i.e. on icons)",setting_hide_all_tooltips:"Hide ALL tooltips",setting_hide_all_tooltips_desc:"Hides ALL tooltips, even functional ones on i.e. territories",setting_hide_research_buy_hint:"Hide research buy hints",setting_hide_research_buy_hint_desc:"Don't show hints after buying researches",setting_research_quick_buy:"Quick research",setting_research_quick_buy_desc:"Do researches without showing full research details",setting_hide_research_glow_tip:"Hide suggested research glow",setting_hide_research_glow_tip_desc:"Hide glow for finding suggested research quickly",setting_hide_buy_territory_prompt:"Hide buy territory prompt",setting_hide_buy_territory_prompt_desc:"Hide buy territory prompt confirmation",setting_hide_view_categories:"Hide view categories on maps",setting_hide_view_categories_desc:"Hide stats on maps",setting_hide_map_navigation:"Hide Map navigation",setting_hide_map_navigation_desc:"Hide Map navigation",setting_hide_overlay:"Hide overlay",setting_hide_overlay_desc:"Hides overlay (top menus/info, left menu...)",setting_hide_notifications:"Hide notifications UI",setting_hide_notifications_desc:"Hides notifications UI fully",setting_show_top_ui:"Force Show top UI",setting_show_top_ui_desc:"Force Show top UI",setting_show_bottom_ui:"Force Show bottom UI",setting_show_bottom_ui_desc:"Force Show bottom UI",setting_show_tutorials:"Show tutorials",setting_show_tutorials_desc:"Show side tutorials",setting_show_world_grid:"Show world grid",setting_show_world_grid_desc:"Show world center grid",setting_show_attackable_regions:"Show attackable continents",setting_show_attackable_regions_desc:"Show attackable continents on world",setting_master_toggle:"All sounds",setting_master_toggle_desc:"Toggle all sounds",setting_music_level:"Music",setting_music_level_desc:"Global music setting",setting_sound_level:"Sounds",setting_sound_level_desc:"Global sounds setting",setting_event_sounds:"Events sound",setting_event_sounds_desc:"Event sound desc",setting_battle_sounds:"Battle sounds",setting_battle_sounds_desc:"Battle sounds desc",setting_battle_won_lost_sounds:"Battle won/lost sounds",setting_battle_won_lost_sounds_desc:"Battle won/lost sounds desc",setting_research_qol:"Research QoL",setting_research_qol_desc:"Research QoL desc",setting_hotkeys_speed_up:"Speed up game time",setting_hotkeys_speed_down:"Speed down game time",setting_hotkeys_close_popup:"Close open popup/open in-game menu if none open",setting_hotkeys_but_amount_one:"Hold to change buy amount to 1",setting_hotkeys_but_amount_ten:"Hold to change buy amount to 10",sett_group_notification_filters:'<span class="sub-header semi">Notification filters</span>',sett_group_attacks_automation:"Attack automation options",sett_group_timelapse_config:"Timelapse Config",sett_group_timelapse_warnings:"Warnings",sett_group_research_qol:"RESEARCH QoL",sett_group_all_sounds:"ALL SOUNDS",sett_group_specific_sounds:"SPECIFIC SOUNDS",sett_group_general:"GENERAL",categories_sounds:"SOUNDS",categories_general:"GENERAL",categories_research_qol:"RESEARCH QoL",categories_hotkeys:"HOTKEYS",qol_options_buy_amount_label:"Build amount",qol_options_assign_amount_label:"Assign amount",view:"View",on:"ON",off:"OFF",queue:"Queue",empty:"empty",idle:"idle",stats:"Stats",buy_settings:"(QoL) Settings",citizens:"Citizens: ",max:"Max: ",max_capacity:"Max citizen capacity: ",efficiency:"Efficiency: ",productivity:"Productivity: ",event_bonus:"Event bonus: ",research_bonus:"Research bonus: ",queue_and_next:"Queued: {0} (Next in: {1}s)",workers:"WORKERS: ",lvl:"LvL ",production_rate:"Production rate: ",production_bonus:"Production bonus: +",currently_producing:"Currently producing: ",currently_building:"Currently building: ",next:"NEXT: ",seconds_left:"s left",costs_water:" {0} {1} natural water source",costs_mining:"Needs {0} Mining deposit",selected:"SELECTED",choose:"CHOOSE",back:"BACK",build_queue:"Build queue:",select:"SELECT",go_back_small:"Go back",new_note:" new!",ok:"OK",yes:"YES",no:"NO",to_main_menu:"BACK TO MENU",loading_info_images:"Loading images ",loading_info_videos:"Loading videos ",loading_info_initialize:"Initializing ",err_init_game_save:"Problem initializing this game save. <br />Error details:",err_download_save:"Problem Downloading save game file <br />Error:",err_decoding_save:"Problem Decoding save file! <br />Error:",err_parsing_save:"Problem parsing save file! <br />Error:",err_init_resources:"Problem initializing this game save resources Data. <br />Error details:",err_suggest_reset:'<p style="color: yellow;">* Cause of this is likely incompatible old saves, so deleting your old save would fix this issue.</p>',starting_story_text1:"The world as you knew it is gone...<newline>‌‌ <newline>Human greed inevitably led to a nuclear war <newline>‌‌ <newline>... If not by the blasts, nuclear radiation killed <newline>most of the population.",starting_story_text2:"After 10 years the radiation settled down enough for small groups of <newline> survivors to start coming out of their nuclear shelters <newline>‌‌ <newline> - you are the leader of one of them.",starting_story_text3:"Everything is ruined, resources seem gone! But this must not be our <newline> end! Explore and establish your settlement to survive... Good luck!",menu_demo_version:"DEMO VERSION",menu_steam_note:"Standalone game with all unlocked features is coming to STEAM on December 15th 2020!",menu_steam_note2:"Full version is coming to STEAM on December 15th 2020!",menu_steam_note_released:"Get the full version of Simpocalypse on Steam today!",menu_analytics_note:"*During alpha stage we are collecting some basic gameplay (not personal!) analytics to help us balance the game better and help us find any possible bugs. Thank you for your understanding :)",menu_get_full_version:"GET THE FULL VERSION",menu_community:"Community",menu_reddit:"Reddit",menu_facebook:"Facebook",menu_twitter:"Twitter",menu_patron:"Become a patron",menu_translate:"Help Translate",menu_join_discord:"Join official Discord Server",menu_sign_up:"SIGN UP for pre-BETA & BETA testing!",menu_enter_email:"enter your email here...",menu_game_time:"Game Time: ",menu_total:"Total ",menu_ago:" ago",demo_version:"Demo version supports only one save game at a time. Please remove existing one or Wishlist us on Steam (it will support many more save slots when released)",hard_reset:"Start over from scratch, removing ALL of your progress. Do you want to do a Hard Reset now?",soft_reset:"Start over from scratch, but 50% of your game time will carry over that you can timelapse through! Do you want to Start Over now?",only_one_save:"Demo version supports only one save game at a time. Please remove existing one or Wishlist us on Steam (it will support many more save slots when released)",wishlist_simpocalypse:"Wishlist Simpocalypse on Steam!",join_discord_simpocalypse:"Join Simpocalypse Discord channel!",starting_resources:"STARTING BOOSTS",can_unlock:"* You can unlock different perks and settings later in the game (coming soon!)",faster_builders:"+ {0} faster builders (suggested)",mining_rate_bonus:"+ {0} mining rate",knowledge_gain:"+ {0} knowledge gain",citizen_gain:"+ {0} citizen gain",lower_spread:" {0} lower market spread",wood_gain:"+ {0} wood gain",water_gain:"+ {0} water gain",select_home:"Select your Home continent:",pick_start:"PICK YOUR STARTING SETTINGS",starting_boost_starting_citizens:"Starting Citizens",starting_boost_starting_resources:"Starting Rations",starting_boost_food_gain_mx:"Food Gain Boost",starting_boost_water_gain_mx:"Water Gain Boost",starting_boost_wood_gain_mx:"Wood Gain Boost",starting_boost_energy_gain_mx:"Energy Gain Boost",starting_boost_mining_rate_gain_mx:"Mining Rate Boost",distribute_all_perks:"* To proceed you must distribute all perk points",perk_points_to_distribute:"Perk points to distribute: ",per_point:"+{0} per point",settings:"SETTINGS",main_menu:"MAIN MENU",game_paused:"Game paused",continents_africa:"Africa",continents_australia:"Australia",continents_europe:"Europe",continents_asia:"Asia",continents_north_america:"North America",continents_south_america:"South America",continents_antarctica:"Antarctica",view_cat_world:"World",view_cat_world_desc:"Explore territories for resources, expand and advance your civilization!",view_cat_world_unlock_note:"Build some army to unlock!",view_cat_social:"Social",view_cat_social_desc:"Handle pillars of every civilization, such as public buildings and workers",view_cat_social_unlock_note:"Research a house to unlock!",view_cat_army:"Army",view_cat_army_desc:"Start amassing an army of tanks so you can challenge and expand to neighboring territories",view_cat_army_unlock_note:"Learn to build a War Factory to unlock!",view_cat_economic:"Economic",view_cat_economic_desc:"Start thriving rather than surviving - build up a strong economic presence that will have your people flourish!",view_cat_economic_unlock_note:"Research a factory to unlock!",param_objectives:"Objectives - Check your current progress and get direction on what to do next!",view_resources:"Resources",view_resources_desc:"Find, gather and produce resources!",view_resources_unlock_note:"Start exploring your area to unlock!",view_research:"Research",view_research_desc:"Learn to build new buildings, technologies and civilization boosts",view_research_unlock_note:"Assign some citizens to collect wood to unlock!",view_territories:"Map",view_territories_desc:"Expand to dangerous territories and explore them for more resources!",view_territories_unlock_note:"Explore at least 2.5% of your territory!",view_world:"World",view_world_desc:"Expand to dangerous territories and explore them for more resources!",view_world_unlock_note:"Fully conquer the first region to unlock!",view_public_jobs:"Public Jobs",view_public_jobs_desc:"Assign different tasks to your citizens here",view_public_jobs_unlock_note:"Learn how to build a house in research to unlock!",view_public_buildings:"Public Buildings",view_public_buildings_desc:"Build various buildings that help control your civ!",view_public_buildings_unlock_note:"Learn how to build a house in research to unlock!",view_produce:"Produce",view_produce_desc:"Produce weapons to allow you to expand to dangerous territories",view_produce_unlock_note:"Build a War Factory to unlock",view_manage_plans:"Manage Plans",view_manage_plans_desc:"Manage plans here",view_manage_plans_unlock_note:"Build a war factory to unlock!",view_factories:"Factories",view_factories_desc:"Factories can produce various very useful products!",view_factories_unlock_note:"Research a factory to unlock!",view_change_product:"Change Product",view_change_product_desc:"Change which products to produce here",view_change_product_unlock_note:"Build your products",view_product_stock:"Product Stock",view_product_stock_desc:"Check your product stock and what products can do for your citizens!",view_product_stock_unlock_note:"Build a factory to unlock!",view_global_market:"Global Market",view_global_market_desc:"Trade your products on the global market!",view_global_market_unlock_note:"Build a factory to unlock!",view_build_queue:"Build Queue",view_build_queue_desc:"Queue of your products",view_build_queue_unlock_note:"Build a war factory to unlock!",view_types_economic:"Economic",view_types_conquest:"Conquest",stats_health:"Health",stats_sickness:"Sickness rate",stats_happiness:"Happiness",stats_morale:"Morale",stats_malnourishment:"Malnourishment",stats_toxicity:"Water toxicity",stats_timelapse:"Timelapse",stats_productivity:"Citizen Productivity",stats_connectivity:"Connectivity",stats_products:"Products",stats_maintenance:"Maintenance",stats_infamy:"Infamy",stats_notoriety:"Notoriety",stats_diplomacy:"Diplomacy",stats_infamy_desc:"Infamy determines how dangerous enemies consider your civilization to be - the higher, the faster they will grow the military power. The more agressive your military expansion, the faster it will grow.<br /><br /> Every day of no battling, will reduce infamy by {0}",stats_notoriety_desc:"Notoriety determines how aggressive enemies consider your civilization to be in terms of economic expansion - the higher, the faster they will grow their economy and be harder to buy. <br /><br /> Every day of no economic takeovers, will reduce notoriety by {0}",stats_diplomacy_desc:"Diplomacy helps reduce negative actions of your military or economic expansion. Diplomacy helps reduce negative effects of infamy and notoriety by its rate. Having diplomacy over {0} will also increase the rate of infamy and notoriety reduction by up to {1}<br /><br /> Each military or economic takeover will reduce diplomacy by {2}",stats_military_power:"Global military power",stats_military_power_desc:"Determines by how much military power of enemies grows each week.",stats_economic_power:"Global economic power",stats_economic_power_desc:"Determines by how much economic power(territory costs) of enemies grows each week.",res_citizens:"Citizens",res_citizens_desc:"These are your people! Take care of them",res_population:"Max population",res_population_desc:"Your current total population, population cap and idle citizens (available to assign to various tasks).",res_population_extra_desc:"Extra population space is required to attract new citizens each day!",res_population_gain:"Max population",res_population_gain_desc:"Your current total population, population cap and idle citizens (available to assign to various tasks).",res_population_gain_extra_desc:"Extra population space is required to attract new citizens each day!",res_tiles:"Build spots",res_tiles_desc:"Build spots available - required for building buildings.",res_mining_deposits:"Mining Deposits",res_mining_deposits_desc:"Area we can mine for resources",res_water_sources:"Natural water sources",res_water_sources_desc:"Rivers, lakes and streak provide an endless(?) supply of water!",res_knowledge:"Knowledge",res_knowledge_desc:"With knowledge you will gather Research Points as your people become smarter. These are used to unlock new buildings and advance your civilization.",res_knowledge_extra_desc:"By default, you gain 0.01 knowledge/s per citizen, which can be improved by hiring teachers or researchers. As you gather enough knowledge, you gain a research point.",res_research_points:"Research Points",res_research_points_desc:"Research Points allow you to upgrade your civilization",res_research_points_extra_desc:"Requires a certain number of knowledge, and the requirement is raised by 1.5x every point",res_perk_points:"Perk Points",res_perk_points_desc:"Perk Points are required to unlock some of the Research Upgrades, as well as give you powerful Starting Boosts",res_perk_points_extra_desc:'You will receive {0}  "pending" Perk Points for every year you survive, and from various achievements. To claim these pending points you will need to perform a prestige.',res_food:"Food rations",res_food_desc:"Food rations keep citizens alive!",res_food_extra_desc:"Each citizen needs {0} food rations/day to stay healthy. To attract a new citizen each day, you need an extra of 30 extra rations available!",res_water:"Water",res_water_desc:"Required for quenching thirst and running various buildings...",res_water_extra_desc:"Each citizen needs {0} water rations/day to stay healthy. High water toxicity increases citizen sickness rate.",res_wood:"Wood",res_wood_desc:"Required for builds like houses and farms.",res_energy:"Energy",res_energy_desc:"No energy, no internet :O! Also it's needed for things like production of some buildings and tanks.",res_gold:"Gold",res_gold_desc:"Gold is very shiny, but can also buy you a ton of stuff and power!",res_stone:"Stone",res_stone_desc:"A sturdy material required for buildings, roads...",res_iron:"Iron",res_iron_desc:"Required for producing some buildings and tanks.",res_uranium:"Uranium",res_uranium_desc:"A glowy radioactive material. Cool to have!",buildings_house:"House",buildings_house_desc:"Provides roof over your citizens and is required to attract new ones!",buildings_road:"Road",buildings_road_desc:"Improves connectivity of your cities, which increase overall productivity. Each road adds up to 1% (total cap = 100%), multiplied by road coverage<br /> (1 road covers up to 100 used tiles)",buildings_farm:"Farm",buildings_farm_desc:"Provides a basic renewable source of plant based food, which requires a source of water to grow.",buildings_cattle_farm:"Cattle Farm",buildings_cattle_farm_desc:"Provides an abundant renewable source of food - sorry vegans! Food and water is required to keep it running.",buildings_genetic_farm:"Genetic Farm",buildings_genetic_farm_desc:"Provides fast-produced genetically modified food - hopefully it's healthy. Requires energy and water to run.",buildings_pump_manual:"Manual pump",buildings_pump_manual_desc:"Provides a basic renewable water supply, requiring only an operator.",buildings_pump_automated:"Automated pump",buildings_pump_automated_desc:"A more efficient way to gather water if you have electricity available, but takes up space!",buildings_rain_collector:"Rain collector",buildings_rain_collector_desc:"Let it rain! Set up giant water collectors in unused space for a renewable water source.",buildings_filtering_station:"Filtering station",buildings_filtering_station_desc:"Filter used up water sources to reduce its toxicity levels.",buildings_planted_forest:"Planted forest",buildings_planted_forest_desc:"Planted forests provide renewable wood supply. Requires watering and some wood for reseeding.",buildings_pine_forest:"Pine forest",buildings_pine_forest_desc:"Pine forests provide renewable wood supply at a quick rate. Requires some watering and wood to regrow.",buildings_genetic_forest:"Genetic forest",buildings_genetic_forest_desc:"Genetic forests grow extremely fast, but are expensive to maintain, requiring both energy and water.",buildings_thermal_plant:"Thermal plant",buildings_thermal_plant_desc:"Turn that wood into loads of energy!",buildings_solar_panels:"Solar Panel",buildings_solar_panels_desc:"Provides renewable clean energy with no upkeep cost",buildings_hydro_plant:"Hydro plant",buildings_hydro_plant_desc:"Provides renewable energy but pollutes the water",buildings_nuclear_plant:"Nuclear plant",buildings_nuclear_plant_desc:"Provides tons of renewable energy but risky if it explodes. Requires ample amount of water, energy and some uranium to keep running",buildings_mining_plant:"Mining plant",buildings_mining_plant_desc:"Dig the earth for valuable minerals you need to advance your civilization. Water is required to keep drills spinning",buildings_school:"School",buildings_school_desc:"Provides jobs for teachers, who help increase the rate at which you gain knowledge",buildings_hospital:"Hospital",buildings_hospital_desc:"Provides jobs for doctors, who keep your citizens healthy and productive.",buildings_fire_station:"Fire Station",buildings_fire_station_desc:"Provides jobs for firemen, who help quickly get rid of fires when they occur.",buildings_police_station:"Police Station",buildings_police_station_desc:"Let there be order! Provides jobs for policemen, who help maintain order, keep morale high by smothering riots..",buildings_research_center:"Research Center",buildings_research_center_desc:"Researchers help your civilization gain knowledge additional knowledge quickly!",buildings_embassy:"Embassy",buildings_embassy_desc:"Diplomats help your civilization improve diplomacy which can have a big effect on your economic and military relations!",buildings_factory:"Factory",buildings_factory_desc:"Gives you the ability to produce various items that can positively affect your people and be sold on global markets as well!",buildings_war_factory:"War Factory",buildings_war_factory_desc:"Give you ability to produce tank which are needed to keep your borders safe and enable you to expand your empire!",jobs_explorer:"Explorers",jobs_explorer_desc:"Explore the area for resources and other things that might be crucial to your survival. The more you have assigned, the more resources they will find each trip!",jobs_builder:"Builders",jobs_builder_desc:"Builders reduce build times. They also maintain the infrastructure needed to achieve the highest productivity possible",jobs_teacher:"Teacher",jobs_teacher_desc:"Each teacher increases knowledge gain per citizen by 0.01",jobs_doctor:"Doctor",jobs_doctor_desc:"Each doctor can cover for 100 citizens, and reduces rate of sickness",jobs_fireman:"Fireman",jobs_fireman_desc:"Helps take out fires quickly when they happen, preventing damage from spreading!",jobs_policeman:"Policeman",jobs_policeman_desc:"Keeps people under control and keeps morale high - one policeman can handle up to 500 citizens",jobs_researcher:"Researcher",jobs_researcher_desc:"Produces knowledge at a fast rate (1/s). Effect is multiplied by Teacher Bonus per citizen!",jobs_diplomat:"Diplomat",jobs_diplomat_desc:"Helps improve relations with other territories, reducing the negative impact of economic and military expansion",products_clothing:"Clothing",products_clothing_desc:"Increases happiness and productivity of people!",products_tv:"TV",products_tv_desc:"Increases happiness and productivity of people!",products_computer:"Computer",products_computer_desc:"Increases happiness and productivity of people!",products_phone:"Phone",products_phone_desc:"Increases happiness but reduces productivity of people!",products_car:"Car",products_car_desc:"Increases connectivity of people",products_base_produce_rate:" Base produce rate: {0} /s",obj_group_0_title:"Explore your surroundings & gather crucial resources to survive!",obj_group_0_end_text:"Great! You've set up some of the basics to survive, and found some wood and building spots!",obj_group_0_tip:"TIP: Assigning more citizens to a task will result in work done faster!",obj_0_0_desc:"Start exploring",obj_0_0_hint:"Click on the Explore icon on the map",obj_0_1_desc:"Assign explorers to Find Food and Water",obj_0_1_hint:"Assign some citizens to automatically explore the area for resources. The more you assign, the more resource they will find!",obj_0_2_desc:"Scavenge/collect some Food",obj_0_2_hint:"Assign some citizens to collect/scavenge the food you found",obj_0_3_desc:"Scavenge/collect some Water",obj_0_3_hint:"Assign some citizens to scavenge/collect the water you found",obj_0_4_desc:"Find wood and space to build on",obj_0_4_hint:"Keep exploring to find some wood and space to build on. The more explorers you have, the faster the search progresses.",obj_group_1_title:"Building materials & attracting survivors",obj_group_1_end_text:"Well done! Growing your settlement is key to progressing and thriving.",obj_group_1_tip:"TIP: Ensure you are gathering enough water and food at all times!",obj_1_1_desc:"Scavenge/collect wood",obj_1_1_hint:"Assign some citizens to scavenge/collect some wood",obj_1_2_desc:"Learn how to build a house in Research",obj_1_2_hint:"While your citizens collect wood, use the knowledge of your citizens to learn how to build a house in the research tab",obj_1_3_desc:"Build your first house",obj_1_3_hint:"You now have everything you need to build a house. It will give you space to attract more citizens! (Open the Social tab and go to Public buildings)",obj_1_4_desc:"Check objectives details & hints",obj_1_4_hint:"If you ever get stuck, make sure to check the objective popup to help steer you in the right direction. You can also disable in-game visibility hints here.",obj_1_5_desc:"Build five more houses",obj_1_5_hint:"Building more houses allows you to attract more survivors and grow your settlement.",obj_1_6_desc:"Assign 5 citizens to scavenge food",obj_1_6_hint:"Assign 5 citizens to scavenge food and water. More citizens, more mouths to feed!",obj_1_7_desc:"Assign 5 citizens to scavenge water",obj_1_7_hint:"Assign 5 citizens to scavenge water. More citizens, more mouths to feed!",obj_group_11_title:"There is strength in numbers",obj_group_11_end_text:"Amazing job! You just passed a total of 50 citizens, and now you are not just a settlement, but a small village!",obj_group_11_tip:"TIP: Build more houses while ensuring you are collecting enough food and water",obj_11_0_desc:"Grow your population to at least 50 citizens",obj_11_0_hint:"To attract new citizens you must have enough population space (build houses) and extra rations of food and water. More citizens = More mouths to feed!",obj_group_2_title:"Building the basics of a sustainable city",obj_group_2_end_text:"Well done! You are no longer fully reliant on just finding and collecting resources.",obj_group_2_tip:"TIP: Focus on renewable sources, but also make the most of exploring and collecting!",obj_2_0_desc:"Set up a renewable water source",obj_2_0_hint:"After your citizens find a water source, make sure to learn how to build a manual pump in the research tab, then build one. Having a renewable water source is VERY important!",obj_2_1_desc:"Assign a citizen to operate a water pump",obj_2_1_hint:"Most buildings require workers assigned to them in order to produce - Go and assign a citizen to work on the manual pump so it will start gathering water.",obj_2_2_desc:"Build your first farm",obj_2_2_hint:"Great! Now that you have the water sorted, you should also learn how to manage a farm, as that will be your basic renewable food source. Unlock it in research tab, then build at least one",obj_2_3_desc:"Grow a planted forest",obj_2_3_hint:"To make sure you don't run out of wood, you should learn how to plant a forest in the research tab, then build one.",obj_group_3_title:"Exploration is part of civilization advancements!",obj_group_3_end_text:"You are well on your way to turning your village into a small city!",obj_group_3_tip:"TIP: QoL settings make your life easier, as you can build or assign multiple citizens at a time to any task!",obj_3_0_desc:"Assign 10 citizens to explore",obj_3_0_hint:"Don't forget – keep exploring the map! Assign at least 10 citizen to explore, so you can find resources a bit more quickly to help you grow.",obj_3_1_desc:"Explore at least 2.5% of your territory",obj_3_1_hint:"To speed this up assign more explorers, while making sure to keep your citizens nourished and healthy by making sure you're always producing enough food and water!",obj_3_2_desc:"Assign at least 10 builders",obj_3_2_hint:"To speed up all build times you can assign some citizens to become builders. Builders also handle maintenance which is important for high productivity of your citizens.",obj_3_3_desc:"Build at least 20 houses in total",obj_3_3_hint:"You should build some more houses so you can support more citizens.",obj_group_4_title:"Stop surviving, begin thriving",obj_group_4_end_text:"You've set up some important fundamentals to start thriving, not just surviving - Great job!",obj_group_4_tip:"TIP: You can speed up game-time using Timelapse if you feel it is taking a while to gather resources for your next objective.",obj_4_0_desc:"Build a mining plant",obj_4_0_hint:"To really boost up your progress, you should learn how to build a mining plant which will provide you with better building materials like stone and iron!",obj_4_1_desc:"Assign 10 workers to the mining plant",obj_4_1_hint:"Mining plants require workers to mine effectively. Assign at least 10 workers",obj_4_2_desc:"Build a school and assign 10 teachers",obj_4_2_hint:"Research, build a school and assign 10 teachers, as that will help you gain more knowledge faster, so you can then research more things.",obj_4_3_desc:"Upgrade your mining plant to mine iron",obj_4_3_hint:"To be able to advance your buildings, you will need to start mining iron. Research ability to upgrade your mining plant so it can start extracting iron from mined dirt.",obj_4_4_desc:"Build a hospital",obj_4_4_hint:"As you expand you should research and build a hospital so you can assign some doctors to keep your citizens healthy and prevent a drop in health and productivity.",obj_group_12_title:"Let's build a city!",obj_group_12_end_text:"You are hell of a leader - you now have over 1000 citizens, which means that you are now a leader of a small city!",obj_group_12_tip:"TIP: Build more houses while ensuring you are collecting enough food and water",obj_12_0_desc:"Grow your population to at least 1000 citizens",obj_12_0_hint:"To attract new citizens you must have enough population space (build houses) and extra rations of food and water. More citizens = More mouths to feed!",obj_group_5_title:"Securing your borders",obj_group_5_end_text:"You now revealed everything there is to reveal in your territory! Time to expand perhaps?",obj_group_5_tip:!1,obj_5_0_desc:"Find at least 2 tank parts by exploring",obj_5_0_hint:"Keep exploring to find tank parts you can use to design plans for tanks to produce - find at least 2 parts.",obj_5_1_desc:"Build a War factory",obj_5_1_hint:"Research and build a war factory so you can produce weapons to secure yourself and expand to other territories.",obj_5_2_desc:"Design and Produce 5 tanks",obj_5_2_hint:"Use the tank parts to design a tank (click Manage Plans), and then produce 5 tanks as your starting army",obj_5_3_desc:"Assign 10 policeman",obj_5_3_hint:"Build a police station and assign 10 policemen, as that will help you keep morale high as you expand and grow your settlement!",obj_5_4_desc:"Fully explore your first territory",obj_5_4_hint:"Fully explore your first territory - you can assign more explorers to speed up this process.",obj_group_6_title:"To expand, one must conquer",obj_group_6_end_text:"Your fellow citizens applaud your success in recent battles!",obj_group_6_tip:"TIP: Don't neglect expanding your infrastructure as you expand to other territories.",obj_6_0_desc:"Conquer another territory",obj_6_0_hint:"This requires an army of tanks, and for you to conquer at least half of each territory to own it. Simply select a territory on the map to attack one.",obj_6_1_desc:"Start exploring the new territory",obj_6_1_hint:"Start exploring a new territory you conquered to find more resources and space to expand on",obj_6_2_desc:"Conquer 3 territories",obj_6_2_hint:"Make sure to build more tanks, and see if you got any better parts for stronger tanks. Make sure to check research for useful upgrades to increase the power of your army!",obj_group_7_title:"Economy is a an important part of a civilization",obj_group_7_end_text:"Economy is a an important part of a civilization",obj_group_7_tip:"TIP: With appropriate licenses researched, you can have the power to bribe territories and expand with no blood spilt!",obj_7_0_desc:"Build a Factory",obj_7_0_hint:"Now that you've secured some territories by expanding, you might want to look into improving your economy and improve the livelihood of your people. Build a Factory so you can start producing various useful products!",obj_7_1_desc:"Stock up on 100 pieces of clothing",obj_7_1_hint:"Produce and stock up on at least 100 pieces of clothing in your factory",obj_7_2_desc:"Learn how to produce TVs",obj_7_2_hint:"Research ability to build TVs in the Research tab",obj_7_3_desc:"Gain 10k gold by selling products on the global market",obj_7_3_hint:"Gain 10k gold by selling products on the global market - keep an eye on what might be the most profitable for you!",obj_group_8_title:"Resistance is futile!",obj_group_8_end_text:"You are becoming a true conqueror. Can anyone stand in your way?",obj_group_8_tip:"TIP: Make sure to upgrade your corpuses.",obj_8_0_desc:"Conquer 5 territories in your region!",obj_8_0_hint:"Make sure to upgrade your tanks whenever possible",obj_8_1_desc:"Conquer 10 territories in your region!",obj_8_1_hint:"It is possible to conquer territories with economic strength (gold) as well! You will need to unlock a specific research upgrade for this though :)",obj_8_2_desc:"Conquer 15 territories in your region!",obj_8_2_hint:"Conquer 15 territories in your region! Use military (or gold to buy them off)",obj_group_9_title:"Path to global domination",obj_group_9_end_text:"You are well on your way to conquer the World! But... you have to get the full version for that, as it has much more content.",obj_group_9_tip:"TIP: Get standalone version on Steam with more content and features!.",obj_9_0_desc:"Fully conquer your region",obj_9_0_hint:"Fully conquer your region by conquering/buying all territories within. The power of territories grows with time so do not hesitate!",obj_9_1_desc:"Check the world map",obj_9_1_hint:"Open the world map (the map icon in map navigation is now available!)",obj_9_2_desc:"Start attacking a new region",obj_9_2_hint:"Choose which region you will attack next in the world map",obj_9_3_desc:"Fully conquer the new region",obj_9_3_hint:"Conquer all territories within this region",obj_9_4_desc:"Fully conquer a 3rd region",obj_9_4_hint:"Fully conquer a 3rd region",obj_group_10_title:"Path to global domination",obj_group_10_end_text:"You are well on your way to conquer the World! But... you have to get the full version for that, as it has much more content.",obj_group_10_tip:"TIP: Get standalone version on Steam with more content and features!.",obj_10_0_desc:"Fully conquer your region",obj_10_0_hint:"Fully conquer your region by conquering/buying all territories within it. The power of territories grows with time so do not hesitate!",click_to_place_colony:"Click on a region to build the colony on",change_per_week:"(x {0}/week)",unlock_in_research:"Unlock in research",upgrade_in_research:"Upgrade in research",setup_colonies:"Setup colonies to expand faster:",military_colony_upper:"MILITARY COLONY",economic_colony_upper:"ECONOMIC COLONY",colony_conquer_successful:'Region {0} {1} colony was successful! You were refunded remaining funds and the colony generated profits on your investment of {2}<div class="icon gold tiny"></div>',colony_conquer_unsuccessful:"Region {0} {1} colony was unsuccessful! Enemies recovered fully.",colony_auto_extended_note:"Colony auto-extended to grid {0}",colony_details_t1:"Begin a {0} colony (Region: {1})",colony_details_t2:"Nearest player region: {0} <br/>",colony_details_t3:"Initial Colony investement:  <br />",colony_details_t4:'Investment total: {0}</span><div class="icon tiny gold"></div><br />',colony_details_t5:'Capital left: {0}</span><div class="icon tiny gold"></div><br />',colony_details_t6:'Minimum colony investment: {0}</span><div class="icon tiny gold"></div><br />',colony_risk_short:"Risk: {0}%<br/>",colony_risk:"Risk: {0}% ({1}%)<br/>",colony_profit_short:'Payout Profit: {0}<div class="icon tiny gold"></div><br/>',colony_profit:'Payout Profit: {0}<div class="icon tiny gold"></div>: {1}%({2}%)<br/>',colony_control_rate:"Control rate: {0}%<br/><br/>",colony_cr_change:"CR change per day: {0}%<br/><br/>",colony_auto_expand:"Auto Expand",colony_invest_in:"INVEST IN COLONY",colony_click_to_place:"(Click to place)",cont_conquered:"Continent conquered",cont_conquered_desc:"You fully conquered continent {0} - Well done!",cont_reward_rations_reduction:"Eradicated Hunger",cont_reward_rations_reduction_desc:"{0}% less rations required by citizens",cont_reward_cost_mx_reduction:"Corruption",cont_reward_cost_mx_reduction_desc:"Global economic power reduced by {0}%",cont_reward_power_mx_reduction:"Espionage",cont_reward_power_mx_reduction_desc:"Global military power reduced by {0}%",cont_reward_earthquake_immunity:"Shock Absorption",cont_reward_earthquake_immunity_desc:"Full immunity from Earthquakes - you won't even feel them anymore!",cont_reward_water_sources_increase:"River Engineering",cont_reward_water_sources_increase_desc:"Expand all existing and future water sources found by {0}%",cont_reward_farm_winter_immunity:"Evergreen Crops",cont_reward_farm_winter_immunity_desc:"Farm production not hindered during winter",cont_reward_zones_required_reduction:"The Art of War",cont_reward_zones_required_reduction_desc:"Drive enemies out of territories with {0} less zone conquered!",cont_reward_exp_gain_increase:"Improved Tactics",cont_reward_exp_gain_increase_desc:"Tank corpuses experience gain increased by {0}%",cont_reward_zone_loot_increase:"Warehouse Looting",cont_reward_zone_loot_increase_desc:"Spoils of conquering zones increased by {0}%",cont_reward_lower_diplomacy_reduction:"Policital Bribes",cont_reward_lower_diplomacy_reduction_desc:"Diplomacy reduced by economic or military takeovers reduced by {0}%",cont_reward_demolish_refund_rate:"Material Recycling",cont_reward_demolish_refund_rate_desc:"Demolishing buildings will refund {0}% more resources",cont_reward_scavenging_rate_increase_increase:"Bigger Backpacks",cont_reward_scavenging_rate_increase_increase_desc:"Increases scavenging rate of all scavengers by {0}%",ach_new_title:"<span>New achievement!</span> <br /> ",ach_achieved:"Time: ",ach_last_achieved:"Best time: ",ach_continent_conquer:"Conquer continents",ach_continent_conquer_desc:"Conquer {0}",ach_total_citizens:"Civilization Growth",ach_total_citizens_desc0:"Settlement of {0} citizens",ach_total_citizens_desc1:"Village of {0} citizens",ach_total_citizens_desc2:"Town of {0} citizens",ach_total_citizens_desc3:"City of {0} citizens",ach_total_citizens_desc4:"Metropolis of {0} citizens",ach_reward:'Reward: <span class="reward-amount"> +{0} </span>',ach_reward_none:'Reward: <span class="reward-amount"> / </span>',ach_no_times:"No times yet",ach_last_times:"Last three times: ",event_note_summer:"Summer is coming!",event_note_summer_sub:"Time to expand your farms!",event_note_summer_desc:"Summer will start in 30 days - it is the best time to grow crops - farms will yield 50% more during summer! Summer also brings higher risks of fires, so you should recruit more firemen.",event_note_summer_action_required:"Maximize fast summer growth by building extra farms.",event_note_winter:"Winter is coming!",event_note_winter_sub:"winter is coming!",event_note_winter_desc:"Winter will start in 30 days - you might want to stock up on food, or build more genetic farms, as regular farms will yield 50% less. Demand for food will also go up during winter, maybe you can stock up and profit off that?",event_note_winter_action_required:"Stock up on additional food to last through the winter",event_summer:"Summer is here!",event_summer_sub:"Time to expand your farms!",event_summer_desc:"Summer just started! It is the best time to grow crops - farms will yield 50% more during summer! Summer also brings higher risks of fires, so you should recruit more firemen.",event_summer_action_required:"Build additional farms to maximize food production!",event_summer_end_title:"Summer is over",event_summer_end_desc:"Summer is over! Farms yield is back to normal, but hopefully you made the most of the fast growth!",event_winter:"Winter is here!",event_winter_sub:"Winter is here!",event_winter_desc:"Winter just started Hope you stocked up on food, or built more genetic farms, as regular farms will yield 50% less. Demand for food will also go up during winter, maybe you can stock up and profit off that?",event_winter_action_required:"Stock up on food and food production for the winter!",event_winter_end_title:"Winter is over",event_winter_end_desc:"Winter is over! Farms yield is finally back to normal, hopefully you managed during this harsh period!",event_fire:"Small flames can turn into a wild fire",event_fire_sub:"Raging fires!",event_fire_desc:"Fires have been spotted in some buildings! You should assign more firemen so this doesn't get out of control! Fires can destroy your buildings and especially devastate your Pine Forests!",event_fire_action_required:"Assign more firemen to take out the fires quickly",event_fire_end_title:"Fires have been contained!",event_fire_end_desc:"Fires have subsided - hopefully the damage done was not too great!",event_riot:"A small group started a riot",event_riot_sub:"Handle riots quickly!",event_riot_desc:"A small group of your citizen has started rioting because of... who knows - You know you are a perfect leader! But... Make sure to deal with it so it doesn't become a bigger issue! Assign more policemen, or just improve things people are rioting about.",event_riot_action_required:"Assign more policemen to control the riot quickly",event_riot_end_title:"Riots have been contained!",event_riot_end_desc:"Riots have subsided - hopefully the damage done was not too great!",event_market_crash:"A big new company is emerging",event_market_crash_sub:"Time to profit?",event_market_crash_desc:"There is news of the biggest {0} companies merging, to drive down their production costs. You might want to consider taking the opportunity and sell off your {0} while price is still stable.",event_market_crash_end_title:"Bear market hype has subsided",event_market_crash_end_desc:"The market crash seems to have stopped. Hopefully you managed to make some profits of it!",event_market_crash_action_required:!1,event_earthquake:"Earthquake detected!",event_earthquake_sub:"Earthquake detected!",event_earthquake_desc:"Earthquake with a Richter scale of {0} was just detected - everybody felt it! Your maintenance dropped by {1}% and some buildings were potentially destroyed (check notifications for details).",event_earthquake_end_title:!1,event_earthquake_action_required:!1,event_extortion:"You are being extorted!",event_extortion_sub:"Pay up bi***!",event_extortion_desc:"A group of people is threatening you to start a fire if you don't pay them {0} immediately.",event_extortion_end_title:!1,event_extortion_action_required:!1,stats_names_max_hp:"Max HP",stats_names_dmg:"Damage",stats_names_rate_of_fire:"Rate of fire",stats_names_armor:"Armor",stats_names_deflection:"Deflection",stats_names_armor_piercing:"Armor piercing",stats_names_accuracy:"Accuracy",res_desc_for:"{0} for {1}",res_0_extra_desc:"Unlock building:",res_1_extra_desc:"Unlock building:",res_2_extra_desc:"Unlock building:",res_3_extra_desc:"Unlock building:",res_4_extra_desc:"Unlock building:",res_5_extra_desc:"Unlock building:",res_5_extra_desc2:'Unlocks and provides a source of stone (<div class="icon small stone"></div>)',res_6_extra_desc:"Unlock building:",res_7_extra_desc:"Unlock building:",res_8_extra_desc:"Unlock building:",res_9_extra_desc:"Unlock building:",res_10_extra_desc:"Unlock building:",res_11_extra_desc:"Unlock building:",res_12_extra_desc:"Unlock building:",res_13_extra_desc:"Unlock building:",res_14_extra_desc:"Unlock building:",res_20_extra_desc:"Bonus production:",res_21_extra_desc:"Bonus production:",res_22_extra_desc:"Bonus production:",res_23_extra_desc:"Bonus production:",res_24_extra_desc:"Bonus production:",res_25_extra_desc:"Bonus production:",res_26_extra_desc:"Bonus production:",res_27_extra_desc:"Bonus production:",res_28_extra_desc:"Bonus production:",res_29_extra_desc:"Bonus production:",res_30_extra_desc:"Bonus production:",res_40_extra_desc:"Mining Plant Upgrade Lvl 1",res_40_extra_desc2:'Unlocks a source of iron (<div class="icon small iron"></div>)',res_41_extra_desc:"Mining Plant Upgrade Lvl 2",res_41_extra_desc2:'Unlocks a source of uranium (<div class="icon small uranium"></div>)',res_42_extra_desc:"Unlocks War Factory Upgrade Lvl 1",res_42_extra_desc2:"Unlocks an extra Corpus slot, as well as allows you to have more workers to build tanks up to 100% faster!",res_43_extra_desc:"Unlocks War Factory Upgrade Lvl 2",res_43_extra_desc2:"Unlocks two extra Corpus slots, as well as allows you to have more workers to build tanks up to 200% faster!",res_44_extra_desc:"Unlocks Factory Upgrade Lvl 1",res_44_extra_desc2:"Allows you to have more workers to produce items up to 100% faster!",res_45_extra_desc:"Unlocks Factory Upgrade Lvl 2",res_45_extra_desc2:"Allows you to have more workers to produce items up to 200% faster!",res_50_extra_desc:"Gain licensing required to build an extra mining plant!",res_51_extra_desc:"Gain licensing required to build an extra factory!",res_100_extra_desc:"Unlock building:",res_101_extra_desc:"Unlock building:",res_102_extra_desc:"Unlock building:",res_103_extra_desc:"Unlock building:",res_104_extra_desc:"Unlock building:",res_105_extra_desc:"Unlock building:",res_106_extra_desc:"Unlock building:",res_120_desc:"Increases max possible daily population growth.",res_120_extra_desc:"Faster pop. gain",res_130_desc:"Increases max possible daily population growth.",res_130_extra_desc:"Coverage increase",res_131_desc:"Increases max possible daily population growth.",res_131_extra_desc:"Coverage increase",res_132_desc:"Increases max possible daily population growth.",res_132_extra_desc:"Coverage increase",res_133_desc:"Increases knowledge gain bonus from citizens",res_133_extra_desc:"Knowledge gain bonus",res_134_desc:"Increases knowledge gained by researchers",res_134_extra_desc:"Knowledge gain bonus",res_200_extra_desc:"Unlock building:",res_201_extra_desc:"Unlock product:",res_202_extra_desc:"Unlock product:",res_204_extra_desc:"Unlock product:",res_205_extra_desc:"Unlock product:",res_220_extra_desc:"Unlock ability to trade water",res_221_extra_desc:"Unlock ability to trade food",res_222_extra_desc:"Unlock ability to trade wood",res_223_extra_desc:"Unlock ability to trade energy",res_224_extra_desc:"Unlock ability to trade stone",res_225_extra_desc:"Unlock ability to trade iron",res_226_extra_desc:"Unlock ability to trade uranium",res_250_desc:"Bribe your enemies out of their territories",res_250_extra_desc:"Unlock economic Map view & ability to buy territories",res_251_desc:"Take over enemy regions by investing in their economy",res_251_extra_desc:"Unlock ability to buy an economic colony, that help you infilitrate enemy economy and expand beyond your borders!",res_300_extra_desc:"Unlock building:",res_310_extra_desc:"Unlock timelapse speed",res_311_extra_desc:"Unlock timelapse speed",res_312_extra_desc:"Unlock timelapse speed",res_313_extra_desc:"Unlock timelapse speed",res_320_extra_desc:"Automate rations",res_321_extra_desc:"Detect health drop",res_322_extra_desc:"Detect productivity drop",res_323_extra_desc:"Automate switching to unexplored territories",res_324_extra_desc:"Automatically Carry over extra explorers to new unexplored territories",res_350_extra_desc:"Find and utilize tank parts with EXTRA ARMOR, that reduces enemy shell damage",res_351_extra_desc:"Find and utilize tank parts with EXTRA ARMOR PIERCING, that negate enemy armor strength",res_352_extra_desc:"Find and utilize tank parts with EXTRA DEFLECTION, that have a chance to deflect enemy shells",res_360_extra_desc:"Find and utilize tank turrets with ANTI ARMOR SHELLS, which reduce chance to be deflected by 50%",res_361_extra_desc:"Find and utilize tank turrets with SHRAPNEL SHELLS, which ricochet and damage surrounding targets",res_362_extra_desc:"Find and utilize tank turrets with RAIL GUN technology, which can pierce through and damage multiple tanks",res_370_extra_desc:"Unlock extra formation slots",res_371_extra_desc:"Unlock ability to reinforce your troops during battles",res_390_desc:"Launch invasions beyond your borders to take strategic positions",res_390_extra_desc:"Unlock ability to begin a military invasion, that help you breach enemy lines and expand beyond your borders!",objective_completed:"OBJECTIVE COMPLETED!",explore_results:"Explorers found ",explore_results_message0:"{0} this trip!",explore_results_message1:"Explorers found nothing this trip",explore_results_message2:"Territory {0} has been fully explored!",explorers_found_resources:"Resources found!",param_has_to_be_res:"Ability to access economic view has to be researched (buy territories)",prices_update:"* Prices update every 1st of the month",fully_explored:"FULLY EXPLORED!",exploring:"EXPLORING ",scavenging:"SCAVENGING: ",to_scavenge:"To scavenge: ",scavengers:"SCAVENGERS: ",mineables:"MINEABLES",deposits:"Deposits: ",active:"Active: ",water_courses:"WATER SOURCES",natural:"NATURAL: ",artificial:"ARTIFICIAL: ",water_toxicity:"WATER TOXICITY: ",natural_water_source:"natural water source",mining_deposit:"Mining deposit",mining_rate:"Mining rate: ",produce_rate:"Produce rate: ",nothing:"Nothing",dirt_left:"Dirt left: ",threshold:"Threshold: ",miners:"MINERS: ",mining_demolish:"<br />Mining deposit depleted! Demolish mining plant so you can build a new one on another deposit!",mining_upgrade:"<br />Mining deposit depleted - Upgrade to extend mining depth!",region:"region",territory:"territory",conquer_progress0:"Continents TO CONQUER: <span>0/7</span>",conquer_progress1:"Territories TO CONQUER: ",conquer_progress2:"Currently exploring: Territory ",conquer_progress3:"Last battled for: Territory ",conquer_progress4:"Zones to conquer: ",research_points:"Available: <span> {0} </span>",legend:"LEGEND",faster_build_time:"{0} % faster build time",maintenance_coverage:"Maintenance coverage: ",maintenance_status:"Maintenance status: ",faster_build:" ( {0} % faster build)",policeman_coverage:"Policeman coverage: ",diplomat_coverage:"Diplomat coverage: ",road_coverage:"Road coverage: {0}%",connectivity_bonus:"Connectivity Bonus: {0}%",gain_per_citizen:"Gain/citizen",stat_maxed:" (Maxed!)",stat_per_day:"(+{0}%/day)",end_battle_message0:"You lost - maybe try again, or try to conquer a less defended grid...",end_battle_message1:"You lost - but you managed to weaken their force for next time!",end_battle_message2:"Great job! You drove enemy attack back - this territory is safe... for now!",end_battle_notification:'"You lost " {0} " brave citizens in battle :(", \'danger\')',post_tile_conquer_message0:"Great job! You conquered 50% of the territory sections, and drove the enemy out of this territory. It is now under your control!",post_tile_conquer_message1:"Great job! You won this grid - keep on going to drive the enemy out of this territory!",post_tile_conquer_message2:"Spoils of battle! {0} {1} plundered from enemy!",deflected:"Deflected!",crew_added:"{0} crew added!",crew_removed:"{0} crew removed!",all_spots_filled:"All spots filled! Well done!",flee_battle:"FLEE BATTLE",battle_active:"Battle active",reinforcements:"reinforcements",stop:"Stop!",auto_attack_in:'Auto attack next territory <span>{0}</span> in: <span class="time">5s</span>',auto_attack_tileX:'Auto attack tile <span>{0}</span> in: <span class="time">5s</span>',confirmation_flee:"You sure you want to flee the scene and all those fancy fights?",pick_a_leading_tank:"Pick a leading tank on the battlefield!",disable_leader:"Disable leader and drag Corpuses on the battlefield first!",drag_and_drop_corpus:"Drag and drop Corpuses on the battlefield!",no_aura_yet:"Your Corpuses have no Aura yet, upgrade!",corpus_first:"Select a Corpus first, then set a Leader tank!!",main_note0:"Pick a leading tank on the battlefield!",main_note1:"All battlefield spots filled!",main_note2:"Drag and drop Corpuses on the battlefield!",main_note3:"Go to Army tab and produce some tanks first before you can go to battle!",main_note4:"Go to Army tab, build your first War Factory and produce at least one tank!",corpus_upgrades:"CORPUS<br /> UPGRADES",no_tanks:"Corpus has no tanks",corpus_not_available:"Corpus not yet available",build_costs:"Build costs",corpus:"corpus",corpus_cap:"Corpus",tanks:"tanks",corpus_leader:"corpus leader",spots:"SPOTS: ",randomize_squadrons:"RANDOMIZE SQUADRONS",clear_formations:"CLEAR ALL FORMATIONS",auras_left:"{0} left",formation_power:"UNIT FORMATION POWER:",crew_fighting:"Crew fighting:",idle_citizens:"Idle citizens: ",enter_battle:"ENTER<br /> BATTLE",no_start:"Don't want to start the battle yet? ",go_back:"GO BACK",custom_tank:"Custom tank",tanks_amount:"({0} tanks)",select_parts_for_tank:"Select a HULL and a TURRET for this corpus from the parts on the left side!",crew_required:"Crew required",corpus_capacity:" corpus capacity",corpus_upgrades_blank:"CORPUS UPGRADE",upgrade_points:"Upgrade points",distribute:"distribute",plan:"PLAN # {0} - You currently have no design created yet for this plan. Click on CREATE PLANS to design one from your available parts to then be able to produce them!",hp:"HP",dmg:"DMG",rof:"RoF",to_next_level:"To next level: ",plus1:" (+1 upgrade point)",xp:"XP",specific1:" Tanks",no_plan_chosen:"No plan chosen. Manage plans to establish this corpus.",produce_tank:"PRODUCE ({0})",build_war_factory:"Before you can make any army tanks, you'll first need to build a war factory and then design any plans from parts you've collected.",x_tanks_amount:"<span>{0} x</span> tank for corpus {1}<span>{2}s left</span>",no_tanks_in_queue:"There are no tanks in production queue currently.",production_queue:"Production queue:",build_requires:"Build requires: ",add_to_inventory:"ADD TO INVENTORY",currently_selected:"CURRENTLY SELECTED",no_parts_yet:"You don't have any {0} {1} parts yet. Keep exploring to find some, as this part type is needed to finish creating the design plan.",corpus_number:"CORPUS#",pending_parts:"PENDING PARTS: ",inventory_parts:"INVENTORY PARTS: ",design_plan:"DESIGN PLAN ",only_one_tank_type:"A corpus can only have one tank type. If you want to change it you have to scrap all existing tanks of the corpus. <br />Remove all tanks and half of the corpus' experience?",reset_upgrade_points_clear:"Resetting upgrade points for this corpus will also reset your battlefield positions. Are you sure?",only_ten_items:"You can only have 10 items of each type at any one time. When full, if you want to use a pending part one you will need to scrap at least one of the current ones.",crew_needed:"Crew needed: ",aura_upgrade:"Aura upgrade",max_squadron_size:"Max squadron size: ",tanks_needed_title:"Tanks needed to go to battle!",tanks_needed_text1:"You need to build some tanks first before entering a battle! You can do that in the War Factory!",tanks_needed_text2:"* You can unlock War Factory in Research section",pending_parts_text0:"You can only have 10 items of each type at the time. If you want to use a pending part one you will need to scrap at least one of the current ones.",hull:"HULL",turret:"TURRET",change:"CHANGE",not_working:"(Not working!)",product_stock:' (<span class="product-stock">{0}</span> in stock)',average_price:"Average price: ",sell_price:"Sell Price: ",sell_price_blank:"Sell Price",buy_price:"Buy Price: ",buy_price_blank:"Buy Price",market_orders:"Market Orders",spread:"Spread: ",trade:"TRADE",products:"PRODUCTS",resources:"RESOURCES",sell:"SELL: ",include_citizen:"Include citizen-owned",buy:"BUY:",avg_price:"Avg. Price: ",market_cap:"Market cap: ",only_have1:"You only have {0} {1} available",only_have2:'You only have {0} <div class="icon tiny gold"></div> available',new_order:"GRAPH VIEW",buy_blank:"BUY",sell_blank:"SELL",order_average:"Order average price: ",min_efficiency:"Min. Efficiency: ",market_text1:"I want to sell:",market_text2:"I want to spend:",market_text3:"Receive approximately: ",market_text4:"Receive approximately: ",market_text5:"Computer price",milestones_happiness:"Happiness",milestones_productivity:"Productivity",milestones_connectivity:"Connectivity: ",events_end_notification0:"Event {0} has ended!",events_end_notification1:" You took the right measures to minimize the damage quickly!",events_end_notification2:" You do not take threats lightly and you stood your ground. However, they started a fire, so make sure to deal with it ASAP to prevent any further damage!",events_end_notification3:' You paid the group extorting you {0} <div class="icon tiny {1} "></div> and they dropped their threats.',event_intensivities:'Intensity of Event " {0}" has changed by {1}',event_morale_changed:"Morale changed by riot has changed by {0}",event_maintanance_changed:"Maintenance changed by riot has changed by {0}",event_market_changed:"Market Price crashed as supply increased by {0} due to current market events",morale_effect:"Scares your citizen, reduces {0} by {1}% every day",chance_of_burning:"{0}% chance of burning down.",chance_for:"{0}% chance for ",fire_effect:"A fire will be started in your city if you don't comply!!",malnourishment1:"Your people ate and drank well -> Malnourishment {0}%",malnourishment2:"There was a lack of food/water rations -> Malnourishment +{0}%",citizens_die:'You lost {0} idle <div class="icon citizens small"></div> due to health issues',workers_die:"You lost {0} {1} workers due to health issues",scavangers_die:"You lost {0} {1} scavengers due to health issues",attracted_citizens:'{0} <div class="icon small citizens"></div> attracted by your growing city!',battle_speed_capped:"Speed capped to x3 during battles to ensure correct simulation. (temporary limit)",perk_points_gained:"You got {0} Perk Points for surviving another {1} days - Well Done!",mini_popup_end_of_demo:"You've reached the end of this demo version, you can not attack any more regions! However you can keep exploring and building your numbers up with whatever resources/territories you have available.",all_buildings:"All buildings: ",settings_title:"Game settings",settings_text0:"Useful actions:",settings_text1:"GAME ACTIONS",settings_text1_1:"HARD RESET",settings_text2:"Please start/continue a game to enable settings (temporary alpha requirement)",settings_text3:"Thanks for trying out Simpocalypse - the game is still in <b>alpha stage</b>, but we have HUGE plans with it, as the theme it's set in presents so many opportunities for cool and engaging mechanics, and we're thrilled to continue working on it!<br /><br />Below you can see our basic roadmap to give you an idea of the scale of the game we're aiming for. We're very open to any and all suggestions/ideas, as we'll be running various alpha & beta stages to help shape it into an amazing game with the help of our community :)<br /><br />",settings_text4:"<p>You can follow and be a part of our development on Discord:</p>",settings_text5:'<div class="main-features">MAIN PLANNED FEATURES / GAME ROADMAP:</div><ul><li>A much bigger research tree and automation options</li><li>Random events (diplomacy/war/economic/world goals, zombie/virus outbreaks...)</li><li>Citizen enhancements (specialization in jobs like army, implants...) </li><li>Interesting mini-prestiges such as re-education of citizens, “transcending to a higher tech age”, “improving infrastructure” etc.</li><li>“Time-lapse” feature broadly extended</li><li>More battle mechanics, active skills, passive/idle features, more tank customizability</li><li>Various game endings/routes with Diplomacy, Economic, War play routes</li><li>Various modes/Difficulties (i.e. No AI attacks might benefit a more idle player)</li><li>Randomized game seeding & sharing so you and others can replay potential cool game seeds with interesting AI choices and random events</li><li>Procedural generation of worlds, random events, giving you a ton of replayability!</li></ul>',settings_text6:"ABOUT US",settings_text7:"General settings (linked to this device) ",settings_text8:"CREDITS",settings_text9:"A game published and developed by: ",language_title:"SELECT LANGUAGE",game_over_title:"All of your citizens died :(",game_over_text0:'<p>Ugh seems like all of your citizens died!</p><p>Remember that citizens will start dying off if your health drops too low - keeping them nourished with food and water is your top priority! Make sure to also handle water toxicity, and hire doctors to deal with all kinds of health issues</p><p>While exploring can get you a ton of food and water to scavenge, it is not sustainable - so make sure to build some farms and tap into natural water sources as soon as possible!</p><div class="button-timed transition-3s disabled" data-action-type="try_again" cursorType="pointer" data-after="TRY AGAIN">TRY AGAIN</div><p>* If you\'re having any problems make sure to <a href="https://discord.gg/ZZDvEuR" target="_blank" onclick="storeClickEvent({type: \'discord\', firedFrom: \'game_over\'});">join our Discord</a> where we can help you out - we know the game guidance and balance might be way off right now :)</p>',game_over2_title:"Your civilization is no more!",game_over2_seq0_text0:"OH NO! All of your citizens died and your civilization is lost!",game_over2_seq0_text1:"You were humanity's best hope to re-establish a prosperous world.",game_over2_seq0_text2:"<b>What went wrong?</b>",game_over2_seq0_text3:"Remember that citizens will start dying off if your health drops too low - keeping them nourished with food and water is your top priority! Make sure to also handle drops in maintenance, morale, water toxicity/sickness when they come around <br />* You can find more info about them by hovering over warning icons on Health and Productivity when they show up",game_over2_seq1_text0:"This can not be. This is unacceptable! You must go back in time and try again!<br />(Yes, Time travel was just invented)",game_over2_seq1_text1:"Humanity must survive as otherwise... the game is over :(",game_over2_seq2_text0:"We grant you... the power of hindsight and some perk points so you can start again, better prepared.",game_over2_seq2_text0_v2:"We grant you... only the power of hindsight this time. We've already granted you perk points x5 times - you didn't think you can just indefinitely farm them by losing, did you?",game_over2_seq2_text1:"GO NOW, Save humanity!",mission_set:"MISSION SET ",next_mission:"NEXT MISSION",objectives_title:"OBJECTIVES",objectives_text0:"HOW TO PLAY?",objectives_text1:"Achievements are Coming soon",objectives_text2:"Challenges are Coming soon",objectives_text3:"SETTLEMENT",objectives_text4:"ACHIEVEMENTS",objectives_text5:"CHALLENGES",help_title:"HOW TO PLAY",help_text0:"General: How to play",help_text1:"general",battle_results_text0:"BATTLE WON!",battle_results_text1:"BATTLE LOST!",battle_results_text2:"FLEED BATTLE!",battle_results_text3:"You looted: ",battle_results_text4:"Lost: ",battle_results_text5:"Combined gain: {0} upgrade points!",battle_start_title:"BATTLEFIELD",battle_start_text0:"The battle is about to start...",corpus_upgrades_title:"CORPUS UPGRADES",corpus_upgrades_text0:" tanks",corpus_upgrades_text1:"UPGRADE POINTS: ",corpus_upgrades_text2:"STAT<br /> BOOSTS",corpus_upgrades_text3:"SQUADRON<br /> BOOSTS",corpus_upgrades_text4:"RESET POINTS",corpus_upgrades_text5:"Home continent bonus:",corpus_upgrades_text6:" WORKERS: ",corpus_upgrades_text7:"Current output:",corpus_upgrades_text8:"Max production/consumption(at 100% output): ",corpus_upgrades_text9:"Output:",notifications_title:"NOTIFICATIONS",notifications_text0:"ACTIVE Events:",notifications_text1:"Started: ",notifications_text2:"Ends: ",notifications_text3:"Intensity",notifications_text4:"Trend: ",notifications_text5:"PAST Events:",notifications_text6:"Event ended: ",notifications_text7:"ACTIONS",notifications_text8:"EVENTS",notifications_text9:"Currently there are no active events!",event_details_title:"RANDOM EVENT - SAVE YOUR SETTLEMENT!",event_details_text0:"What will you do? ",event_details_text1:"PAY UP!",event_details_text2:"DECLINE",event_details_text3:"GOT IT",event_details_text4:"Suggested action: ",event_details_text5:"Event effects:",event_details_text6:"Great job! ",param_trend:"Predicted intensity change end of day based on current state of prevention methods",corpus_upgrades_dmg_title:"Damage",corpus_upgrades_health_title:"Health",corpus_upgrades_maxSquadronSize_title:"Max Squadron size",corpus_upgrades_squadronAura_title:"Squadron Aura",corpus_upgrades_auraAmount_title:"HP",corpus_upgrades_auraSize_title:"Size",dev_panel_title:"DEVELOPER PANEL",dev_panel_text0:" Quick/all reveal + 100k resources:",dev_panel_text1:"ADD",dev_panel_text2:" Quick resources (no research!)",dev_panel_text3:"SAVE GAME",dev_panel_text4:" Reset Game: ",dev_panel_text5:"HARD RESET",dev_panel_text6:" Export research changes: ",dev_panel_text7:"EXPORT",dev_panel_text8:"Select Resource To Add: ",dev_panel_text9:"Add urgent resources(citizens, food, water, energy):",dev_panel_text10:"Add war factory and tanks",dev_panel_text11:"Add TimeSaved:",dev_panel_text12:"Games speed: ",dev_panel_text13:"UI/UX settings: ",main_objective_title:"DEMO - Limited Content!",main_objective_text0:"Well done conquering your first territory!",main_objective_text1:"We just wanted to thank you for trying out our demo version of the game! The demo still has some content ahead so you can keep playing, but you are getting closer to the end now. <br /><br/>If you enjoy the game, make sure to wishlist us on Steam so you are notified when the full game launches with better balance and more content. It would help us a ton - thank you :)",final_objective_title:"DEMO - Out Of Content!",final_objective_text0:"Congrats - you made it to the very end of the demo of Simpocalypse!",final_objective_text1:"Thank you! <br /> GamexGames team",final_objective_text2:"We hope you enjoyed a taste of what's to come in the full version on Steam! Make sure to wishlist us so you are notified when the game comes out!",final_objective_text3:'We\'d also highly appreciate you taking a minute to answer a quick feedback survey to help us make the game better: <a href="https://forms.gle/a4fzQRQCmGYjsjhv5" target="_blank" onclick="storeClickEvent({type: \'feedback\', firedFrom: \'final_objective\'});">LINK</a> . <br/>If you\'d like to more actively contribute to the game\'s development, or just have a chat with us, make sure to join our Discord <a href="https://discord.gg/ZZDvEuR" target="_blank" onclick="storeClickEvent({type: \'discord\', firedFrom: \'final_objective\'});">LINK</a> :)',wishlist_progress_faster_title:"PROGRESS FASTER",wishlist_progress_faster_desc:"Current maxed x4 speed-ups, increased to up to x10!",wishlist_unlimited_save_files_title:"UNLIMITED SAVE FILES",wishlist_unlimited_save_files_desc:"As many as you wish!",wishlist_new_research_title:"NEW RESEARCH BUILDINGS & STUFF",wishlist_new_research_desc:"Fully optimize resources, world conquering, speed-ups",wishlist_more_content_title:"MORE CONTENT: World conquering",wishlist_more_content_desc:"Massive Gameplay Extension: Get Access to Enemy Invasions, Setting Colonies and World Domination",wishlist_unlock_prestige_title:"UNLOCK PRESTIGE & PERK POINTS",wishlist_unlock_prestige_desc:"Collect Perk Points for every Continent conquered, and transform them into boosters",wishlist_extra_goals_title:"EXTRA GOALS & ACHIEVEMENTS",wishlist_extra_goals_desc:"Complete more stuff and collect extra badges!",wishlist_support_us_title:"SUPPORT US",wishlist_support_us_desc:"Want more updates for Simpocalypse?",steam_note_time_played_title:"Enjoying the game so far?",steam_note_time_played_subtitle:"You've been playing the DEMO for {0} hours",steam_note_time_played_text:"Add the game to your wishlist on Steam to get notified once the FULL VERSION is released (it means a lot to us!)",steam_note_text1:"No, thanks!",steam_note_text2:"Add to<br /> WISHLIST",demo:"DEMO",full:"FULL",steam_note_text0:"<p>You've been playing the game for <b> {0} </b></p><p><b>Wishlist us on Steam</b>, it means a lot to us!</p><p>*Steam version will have even more content for you to play - Thank you! :)</p>",starting_note_title:"Establish your settlement!",starting_note_text0:"<p>Get out of your shelter and start exploring for resources to survive the post-apocalyptic era.</p><p>Your group of survivors is small, but maybe you can find others! Start by exploring the area around your shelter.</p>",qol_title:"Quality of Life (QoL) - quick settings",demolish_title:"Demolish building",demolish_text0:"Demolish this building for {0}% return of material build costs.<br /><br /> How many would you like to demolish?",demolish_text1:"Resources gained by demolishing <span> {0} </span> building(s):",demolish_text2:"DEMOLISH",demolish_text3:"You don't have any buildings to demolish",timelapse_config_title:"Timelapse configuration",research_legend_text0:"Unlocks",research_legend_text1:"Stat modifier",research_legend_text2:"Active skills",research_legend_text3:"Automation (QoL)",research_legend_text4:"Misc",research_details_title:"Research Upgrade",research_details_text0:"Learn how to build a {0}",research_details_text1:"Helps reduce water toxicity by increases toxicity threshold",research_details_text2:"Learn how to produce a {0}",research_details_text3:"License to trade {0}",research_details_text4:"Gain licensing required to trade {0} on the global market!",research_details_text5:"Faster timelapse speed",research_details_text6:"More timelapse configs!",research_details_text7:"Unlock config to {0}",research_details_text8:"Tank part stat upgrade",research_details_text9:"Tank weapon upgrade",research_details_text10:"Improve your army",research_details_text11:"Current: ",research_details_text12:"This upgrade is not available in the demo version. Consider getting the standalone Steam version for the full experience!",research_details_text13:" (Researched: ",research_details_text14:"{0} researched",research_details_text15:"{0} Total Citizens",research_details_text16:"Unlock requirements: ",research_details_text17:"Research maxed!",research_details_text18:"RESEARCH",research_details_text19:"Upgrade also costs: {0} Perk Points",research_details_text20:"Survive your first year to get first Perk Points and unlock Prestige!",research_details_text21:"Time left: ",research_details_text22:"Total: ",research_details_text23:"Available for Research: ",research_details_text24:"Pending: ",research_details_text25:"Perk Points",research_details_text26:"Only available in FULL version",research_details_text27:"GET IT ON STEAM",perk_points_details_title:"Perk Points And Boosters",perk_points_details_desc:'Perk Points give you the ability to upgrade your civilization in groundbreaking ways. Perk points are gained passively for every year your survive, as well as for reaching certain achievements.<br />All Perk Points gained go into a pending state first, which can be claimed by doing a "Prestige"',perk_points_details_active_boosts:"Active Starting Boosts: ",perk_points_details_adjusted_note:"* Perk Points and boosts can be adjusted at the start of every Prestige",starting_video_skip:"Click To Skip {0}",dom_refresh_text0:"Min. Efficiency: ",dom_refresh_text1:"Battle Starts in {0} seconds",dom_refresh_text2:"FULLY EXPLORED!",dom_refresh_text4:" (Next in: ",dom_refresh_text3:"Queued: ",dom_refresh_text5:"Requires War factory workers to produce!",dom_refresh_text6:"EMPTY",dom_refresh_text7:"Timelapse was paused because productivity dropped twice in a row.",dom_refresh_text8:"Timelapse was paused because health dropped twice in a row.",dom_refresh_text9:"Timelapse was paused because you ran out of saved time.",dom_refresh_text10:"RUN",new_event:"New Event!",new_mission:"New Mission!",mission_x:"Mission {0}",completed:"Completed!",prod_drop_title:"Warning - Productivity dropped!",prod_drop_status:"Attention required!",prod_drop_subtitle:"Productivity drop detected. Left unattended this can have severe consequences for your civilization!",prod_drop_pt1:"Hover over productivity icon for more details",prod_drop_pt2:"TIP: Make sure you have enough builders keeping maintenance high",health_drop_title:"Warning - Health dropped!",health_drop_status:"Attention required!",health_drop_subtitle:"Health drop detected. Left unattended this can have severe consequences on your civilization!",health_drop_pt1:"Hover over health icon for more details",health_drop_pt2:"TIP: Make sure you are producing enough food and water",drop_cause:"CAUSE: ",drop_resolution:"RESOLUTION: ",drop_cause_sickness:"Increased sickness rate, caused by high water toxicity.",drop_resolution_sickness:"Assign more doctors and build more Filtering Stations to reduce water toxicity.",drop_cause_morale:"Low morale of your citizens.",drop_resolution_morale:"Assign more policemen who maintain order and improve morale.",drop_cause_malnourishment:"Malnourishment of your citizens.",drop_resolution_malnourishment:"Ensure your are producing enough food and water. Remove workers from buildings using up water if need be.",drop_cause_health:"Reduced citizen health ({0})",drop_resolution_health:"",drop_resolution_health2:"Hover over health icon for more details.",drop_cause_maintenance:"Reduced maintenance status of your infrastructure.",drop_resolution_maintenance:"Assign more builders who also handle maintenance.",potential_drop_causes:"Potential drop causes (hover over icon on the left to see stats breakdown):",population_capped:"Population capped",population_capped_desc:"All of your population space is taken. To attract new citizens and grow you will need to build more houses.",citizens_idling:"Over 20% citizens idling!",citizens_idling_desc:"You should find these idle citizens some jobs, as otherwise they might become only a burden to your survival efforts!",prestige_title:"PRESTIGE",prestige_status:"Advance your civilization",prestige_subtitle:"Prestige to claim any pending Perk Points which can be used for various research upgrades and starting boosts. You will start from scratch but with powerful new boosts to help you rebuild into an even more powerful civilization.",prestige_pt1:"Claim {0} pending perk points",prestige_pt2:"Start from scratch, but with all your automation unlocks",post_prestige_title:"PRESTIGE PERFORMED",post_prestige_status:"Rebuild from scratch",post_prestige_subtitle:"Well done! You prestiged and claimed {0} Perk Points! <br />While prestige takes away your past progress, it is the correct long-term decision to build an even stronger civilization!",post_prestige_pt1:"Distribute Perk points into powerful bonuses",post_prestige_pt2:"Check for any new powerful Automation Research upgrades you can now unlock",listeners_text0:"Are you sure you want to delete this game save?",listeners_text1:"Select which of your areas to explore.",listeners_text2:"Are you sure you want to remove this part from the main inventory?",listeners_text3:"Are you sure you want to remove this part from the pending inventory?",listeners_text4:"Start over from scratch, removing ALL of your progress. Do you want to do a Hard Reset now?",listeners_text5:"Out of tanks! Get some more in War Factory!",listeners_text6:"Not enough idle citizens to fill another tank.",listeners_text7:"All battlefield spots filled!",listeners_text8:"All auras set! Good job!",listeners_text9:"Are you sure you want to extend to this continent?",listeners_text10:"Do you want to buy this territory for ",old_save_reset:"*NOTE: Due to a big game update your old save had to be reset as its no longer compatible.",demolish_building_text0:'{0} {1} were destroyed<br/><div class="icon small citizens"></div> {2} inside were killed',demolish_building_text1:'{0} {1} were destroyed, but luckily no one was working there while it happened!"',play:"PLAY",pause:"PAUSE",show_overlay_text0:"Timelapse feature has to be researched first. It allows you to speed up game time at your will and even automate many things!",show_overlay_text1:"Choose config, timelapse speed and press RUN to begin!",show_overlay_text2:"Speed: ",show_overlay_text3:"RUN",show_overlay_text4:"Simulating time at x{0} speed!",show_overlay_text5:"Choose config, timelapse speed and press RUN to begin!",show_objective_text0:"NEW OBJECTIVE!",show_completed_note_text:"OBJECTIVE COMPLETED!",show_tooltip_text0:'<div class="name">Game time</div> This is game time! Enemy AI, resources and events will scale with time/as years pass',show_tooltip_text1:'<div class="name">Timelapse</div> Pause or speed up time to your liking to optimize your management, and automate some aspect of it.',show_tooltip_text2:"Start over from scratch, but 50% of your game time will carry over that you can timelapse through! <br /><br /><i>Note: This is just a temporary alpha feature - actual prestige will have other effects as well</i>",show_tooltip_text3:"Start over from scratch, removing ALL of your progress!",show_tooltip_text4:"When you're running out of tanks call for Reinforcements and get some more!",show_tooltip_text5:"You currently don't have this corpus available. Upgrade War Factory to get it!",show_tooltip_text6:"Corpus stats(per tank)",show_tooltip_text7:"Pending parts stash is full. Remove the ones you like the least to make room for the new ones(found by your explorers)",show_tooltip_text8:"Each corpus that has an Aura needs a leader! Turn the leader selection on(bellow the circle), select the Corpus you want to set and pick the best positioned tank to get an aura! That's it!",show_tooltip_text9:"Knowledge/s: ",show_tooltip_text10:"(Home continent gain bonus: ",show_tooltip_text11:"Next point at: ",show_tooltip_text12:"Research Points: ",show_tooltip_text13:"Toxicity: ",show_tooltip_text14:"Gains/s: ",show_tooltip_text15:"Consumption/s: ",show_tooltip_text16:"Absolute/s: ",show_tooltip_text17:'<div class="name">Health</div>Health represents the chance of your people dying, is it affected by many other stats:',show_tooltip_text18:"Citizen fatality rates based on health: ",show_tooltip_text19:"Above {0}% : {1}% deaths/day<br />",show_tooltip_text20:"* Morale can't drop below 20%",show_tooltip_text21:'<div class="name">Citizen productivity</div>Citizen productivity affects how well your citizens perform all tasks. It is affected by:',show_tooltip_text22:"* Productivity can go above 100%, minimum is 30%",show_tooltip_text23:"This is a resources type: ",show_tooltip_text24:"You need idle citizen to assign more. TIP: build more houses to increase your max population and attract more.",show_tooltip_text25:"You need more resources to be able to build this.",show_tooltip_text26:"Attack & expand to {0} for more resources and power!",show_tooltip_text27:"To expand to this continent you first have to finish conquering your current one.",show_tooltip_text28:"Region: ",show_tooltip_text29:"Territory ",show_tooltip_text30:"Under enemy control",show_tooltip_text31:"Your control rate: ",show_tooltip_text32:"Relative power: ",show_tooltip_text33:"Under your control",show_tooltip_text34:"Your control rate: ",show_tooltip_text35:"Explored: ",show_tooltip_text36:"To explore this territory you must first invade and conquer it!",show_tooltip_text37:"Click to have your explorers focus on exploring this territory",show_tooltip_text38:"Control a neighboring territory to be able to invade",show_tooltip_text39:"Territory bonus: x",show_tooltip_text40:"Section ",show_tooltip_text41:"Section bonus: +",show_tooltip_text42:"Learn how to build a {0}",show_tooltip_text43:"Helps reduce water toxicity by increasing the toxicity threshold",show_tooltip_text44:"Learn how to produce a {0}",show_tooltip_text45:"License to trade {0}",show_tooltip_text46:"Gain licensing required to trade {0} on the global market!",show_tooltip_text47:"Unlock config to {0}",show_tooltip_text48:"This upgrade is not available in the demo version. Consider getting the standalone Steam version for the full experience!",show_tooltip_text49:"Unlock requirements:",show_tooltip_text50:"Pause or unpause the game",show_tooltip_text51:"Continent: ",show_tooltip_text52:"Each tank needs a crew. If you don't have enough idle citizens try choosing another corpus tank that needs less crew or get some more by building more houses!",show_tooltip_text53:"This territory is fully explored.",not_whitelisted:"This game is not whitelisted to be used on this domain.",site_owner:"If you are the site owner and would like this game to be whitelisted for your domain, please contact us at info@gamex-studio.si",just_learned:"You've just learned how to build a {0}. You can build it in the {1} view. <br /><br />Would you like to go there now?",detailed_stats_title:"Detailed stats",start_exploring:"START EXPLORING!",grid_buy:"BUY!",grid_invade:"INVADE!",already_exploring:"Already exploring this area",explored:"Explored: ",to_battle:"TO BATTLE!",enemy_power:"Enemy power: ",quick_tut_text0:"NEED HELP?",quick_tut_text1:"Current objective:",quick_tut_text2:"TUTORIAL",quick_start_exploring:"Explore your surroundings",quick_start_exploring_desc:"There have to be resources we can use around here...",quick_assign_explorers:"Assign some explorers",quick_assign_explorers_desc:"Assign some citizens to focus on exploring and look for resources",quick_assign_food:"There is no shame in scavenging",quick_assign_food_desc:"Assign citizens to start collecting food your explorers will find.",quick_assign_water:"Water and Food are critical!",quick_assign_water_desc:"Drinking water can be tough to find after the nuclear fallout. Assign citizens to scavenge any you can find!",quick_build_house:"A place to call home",quick_build_house_desc:"Research how to and then build a house, so you have a safe place to stay. Having housing can attract other survivors as well - there is strength in numbers!",quick_check_objectives:"Check objectives",quick_check_objectives_desc:"We HAVE to improve and regrow these desolate lands. If you get stuck check various objectives you should pursue!",quick_manage_plans:"Build an army",quick_manage_plans_desc:"To build tanks, you first have to design them via parts you found, then produce them.",quick_conquer_territory:"Expanding by force",quick_conquer_territory_desc:"To conquer a territory, you have to conquer at least half of its zones. Tanks are you main force!",languages_settings_note:'*Note: all translations are crowd translated, so don\'t be harsh on us.<br />Couldn\'t find your language on the list? <br /> Send us a request or help use improve the quality of translations by joining the cause here: <a href="https://www.localizor.com/simpocalypse" target="_blank">https://www.localizor.com/simpocalypse</a>'},langLines={};$.each(textLines,(function(e,t){void 0===langLines[e]?langLines[e]={en:t}:void 0===langLines[e].en?(langLines[e].en=t,console.log("langLines issue - key: "+e+" has EN value undefined")):langLines[e].en=t}));var languagesLoaded=["en"];function loadLanguage(e,t){languagesLoaded.indexOf(e)>-1?t():LoadFile(assetPath+"assets/langs/"+(e+"_lang.json"),"text","text/plain;charset=utf-8",(function(a){var s=JSON.parse(a);$.each(s,(function(t,a){void 0!==langLines[t]&&(langLines[t][e]=a)})),t()}))}function LoadFile(e,t,a,s){var r=new XMLHttpRequest;r.addEventListener("progress",(function(e){e.lengthComputable&&Math.trunc(e.loaded/e.total*100)})),r.addEventListener("error",(function(){console.log("Error:",this.status)})),r.addEventListener("timeout",(function(){console.log("File reading timed out!")})),r.addEventListener("abort",(function(){console.log("File reading cancelled by user!")})),r.addEventListener("load",(function(){4==this.readyState&&200==this.status&&s(this.response)}),!1),r.open("GET",e,!0),r.overrideMimeType(a),r.responseType=t,r.timeout=1e4,r.send()}function prepareLinesForGoogle(){var e=[];return $.each(textLines,(function(t,a){e.push({id:t,context:"",en:a}),void 0!==langLines[t]&&$.each(langLines[t],(function(a,s){"en"!==t&&(e[e.length-1][a]=s)}))})),e}function prepareLinesForLocalizor(e){var t={};return $.each(langLines,(function(a,s){void 0!==s[e]&&(t[a]=s[e])})),t}var gameConstants={width:1120,height:630,gameW:1120,gameH:630,canvasOffsetX:0,canvasOffsetY:40,minPixelRatio:.5,maxPixelRatio:1.5,pixelRatioLimits:{world:{min:1,max:6}},gameGrids:{regions:{cols:50,rows:28,gridW:50,gridH:44},territories:{cols:5,rows:4,gridW:100,gridH:100},zones:{cols:3,rows:3,gridW:100,gridH:100}},maxPendingParts:100,continents:{africa:{perm_bonus:{build_bonus:.3},center:{x:1875,y:1075},gridRefs:[],conqueredGrids:[]},australia:{perm_bonus:{mining_rate:.2},center:{x:3200,y:1640},gridRefs:[],conqueredGrids:[]},europe:{perm_bonus:{knowledge_gain:.2},center:{x:1900,y:300},gridRefs:[],conqueredGrids:[]},asia:{perm_bonus:{citizen_gain:.3},center:{x:2600,y:440},gridRefs:[],conqueredGrids:[]},north_america:{perm_bonus:{lower_spread:.5},center:{x:580,y:420},gridRefs:[],conqueredGrids:[]},south_america:{perm_bonus:{wood_gain:.3},center:{x:930,y:1400},gridRefs:[],conqueredGrids:[]},antarctica:{perm_bonus:{water_gain:.4},center:{x:2070,y:2360},gridRefs:[],conqueredGrids:[]}},startTimestamp:9466848e5,realToGameTime:3600,attackPlayerEvery:864e5,exploredSpotsCap:2e4,maxCalculationTime:6e4,regainTimeRatioOnLoss:.5,happinessDangerPercent:.1,happinessLoseRatio:.1,steamGamePrice:3.99,specialEventDates:{ea_release_date:{start:0,end:1608048e3},discounts:{steam:[{start:1608048e3,end:1608652800,discount_percent:20,final_price:3.19}]}},taskPriorities:{other:{cycleTime:1,tasks:{explorers:{},buildQueue:{},produceQueue:{},eventsState:{},daily:{}}},regular:{cycleTime:1e3,tasks:{scavengers:{},buildings:{},citizens:{},stats:{}}}},buildingsCycleOrder:["rain_collector","pump_manual","solar_panels","hydro_plant","planted_forest","farm","cattle_farm","pine_forest","thermal_plant","pump_automated","genetic_farm","genetic_forest","mining_plant","nuclear_plant","war_factory","factory","filtering_station","house","road","school","hospital","police_station","fire_station","research_center","embassy"],views:{resources:{tag:"resources",revealed:!1},public_jobs:{tag:"public_jobs",revealed:!1},public_buildings:{tag:"public_buildings",revealed:!1},produce:{tag:"produce",revealed:!1},world:{tag:"world",revealed:!1},territories:{tag:"territories",revealed:!1,viewTypes:["conquest","economic"]},research:{tag:"research",revealed:!1},factories:{tag:"factories",revealed:!1},global_market:{tag:"global_market",revealed:!1},build_queue:{tag:"build_queue",revealed:!1},change_product:{tag:"change_product",revealed:!0},product_stock:{tag:"product_stock",revealed:!1},manage_plans:{tag:"manage_plans",revealed:!1}},viewCategories:{world:{tag:"world",icon:"world",revealed:!0,defaultView:"resources",views:["resources","research","territories"]},social:{tag:"social",icon:"social",revealed:!1,defaultView:"public_buildings",views:["public_buildings","public_jobs"]},army:{tag:"army",icon:"attack",revealed:!1,defaultView:"produce",views:["produce","manage_plans"]},economic:{tag:"economic",icon:"economy",revealed:!1,defaultView:"factories",views:["factories","product_stock","global_market"]}},settings:{language:{type:"boolean",default:"en",possibleValues:["en","zh","de","it","nl","pl","sp","kr","fr","pt"],global:!0},fullscreen:{type:"boolean",default:!1,possibleValues:[!1,!0],global:!0},sound:{type:"boolean",default:!0,possibleValues:[!1,!0],global:!0},music:{type:"boolean",default:!0,possibleValues:[!1,!0],global:!0},buy_amount:{type:"boolean",default:1,possibleValues:[1,10,100,"max","ocd"]},assign_amount:{type:"boolean",default:1,possibleValues:[1,10,100,"10_percent","50_percent","max","ocd"]},timelapse_config_visible:{type:"boolean",default:!1,possibleValues:[!1,!0]},productivity_drop:{type:"boolean",default:!0,possibleValues:[!1,!0],requires:{type:"research",subType:"timelapse_config"}},health_drop:{type:"boolean",default:!0,possibleValues:[!1,!0],requires:{type:"research",subType:"timelapse_config"}},auto_rations:{type:"boolean",default:!1,possibleValues:[!1,!0],requires:{type:"research",subType:"timelapse_config"}},auto_explore:{type:"boolean",default:!1,possibleValues:[!1,!0],requires:{type:"research",subType:"timelapse_config"}},carry_over_explore:{type:"boolean",default:!1,possibleValues:[!1,!0],requires:{type:"research",subType:"timelapse_config"}},auto_attack_section:{type:"boolean",default:!1,possibleValues:[!1,!0]},auto_attack_territory:{type:"boolean",default:!1,possibleValues:[!1,!0]},auto_refill_formation:{type:"boolean",default:!1,possibleValues:[!1,!0]},hide_completed_objectives:{type:"boolean",default:!1,possibleValues:[!1,!0]},show_quick_notification:{type:"boolean",default:!0,possibleValues:[!1,!0]},filter_notes_explorers:{type:"boolean",default:!0,possibleValues:[!1,!0]},filter_notes_warnings:{type:"boolean",default:!0,possibleValues:[!1,!0]},hide_map_objectives:{type:"boolean",default:!1,possibleValues:[!1,!0]},show_objective_hints:{type:"boolean",default:!0,possibleValues:[!1,!0]},show_game_hints:{type:"boolean",default:!0,possibleValues:[!1,!0]},hide_warning_icons:{type:"boolean",default:!1,possibleValues:[!1,!0]},hide_resource_animations:{type:"boolean",default:!1,possibleValues:[!1,!0],global:!0},hide_map_panel_bottom:{type:"boolean",default:!1,possibleValues:[!1,!0],global:!1},hide_tooltips:{type:"boolean",default:!1,possibleValues:[!1,!0],global:!0},hide_all_tooltips:{type:"boolean",default:!1,possibleValues:[!1,!0],global:!0},hide_research_buy_hint:{type:"boolean",default:!1,possibleValues:[!1,!0],global:!0},research_quick_buy:{type:"boolean",default:!1,possibleValues:[!1,!0],global:!0},hide_research_glow_tip:{type:"boolean",default:!1,possibleValues:[!1,!0],global:!0},hide_buy_territory_prompt:{type:"boolean",default:!1,possibleValues:[!1,!0],global:!0},hide_view_categories:{type:"boolean",default:!1,possibleValues:[!1,!0]},hide_map_navigation:{type:"boolean",default:!1,possibleValues:[!1,!0]},hide_overlay:{type:"boolean",default:!1,possibleValues:[!1,!0]},hide_notifications:{type:"boolean",default:!1,possibleValues:[!1,!0]},show_top_ui:{type:"boolean",default:!1,possibleValues:[!1,!0]},show_bottom_ui:{type:"boolean",default:!1,possibleValues:[!1,!0]},show_tutorials:{type:"boolean",default:!0,possibleValues:[!1,!0],global:!0},show_world_grid:{type:"boolean",default:!0,possibleValues:[!1,!0]},show_attackable_regions:{type:"boolean",default:!0,possibleValues:[!1,!0]},master_toggle:{type:"boolean",default:!0,possibleValues:[!1,!0],global:!0},music_level:{type:"linear",default:1,possibleValues:[!1,!0],global:!0},sound_level:{type:"linear",default:1,possibleValues:[!1,!0],global:!0}},settingsGroups:{notification_filters:{settings:["filter_notes_explorers","filter_notes_warnings"]},attacks_automation:{settings:["auto_attack_section","auto_attack_territory","auto_refill_formation"]},timelapse_config:{settings:["auto_rations","auto_explore","carry_over_explore"]},timelapse_warnings:{settings:["productivity_drop","health_drop"]},all_sounds:{settings:["master_toggle","music_level","sound_level"]},research_qol:{settings:["hide_research_buy_hint","research_quick_buy","hide_research_glow_tip"]},general:{settings:["fullscreen","hide_tooltips","hide_all_tooltips","hide_buy_territory_prompt","show_game_hints","show_tutorials","hide_warning_icons","hide_resource_animations","show_quick_notification","show_objective_hints"]}},settingsCategories:{sounds:{setting_groups:["all_sounds"]},general:{setting_groups:["general"]},research_qol:{setting_groups:["research_qol"]}},qolOptions:{buy_amount:{settings:[{subType:1,label:"1"},{subType:10,label:"10"},{subType:100,label:"100"},{subType:"max",label:"MAX"},{subType:"ocd",label:"OCD"}]},assign_amount:{settings:[{subType:1,label:"1"},{subType:10,label:"10"},{subType:"10_percent",label:"10%"},{subType:"50_percent",label:"50%"},{subType:"max",label:"MAX"},{subType:"ocd",label:"OCD"}]}},baseFormationSize:3,baseCitizens:15,healthDeathRatios:[[.8,1e-4],[.3,2e-4],[.1,.001],[0,.1]],stats:{health:{revealed:!1,min:0,max:1},sickness:{min:0,max:1},happiness:{min:0,max:1e100},morale:{min:0,max:1e100},malnourishment:{min:0,max:1},toxicity:{min:0,max:1},timelapse:{revealed:!0},productivity:{revealed:!1,min:0,max:1e100},connectivity:{min:0,max:1e100},products:{min:0,max:1e100},maintenance:{min:0,max:1},infamy:{min:0,max:1e100},notoriety:{min:0,max:1e100},diplomacy:{min:0,max:1e100}},jobs:{revealed:!0,explorer:{cycleTime:5e3,revealed:!0,public:!1,requires:!1},builder:{cycleTime:1e3,revealed:!0,public:!0,requires:!1},teacher:{cycleTime:1e3,revealed:!0,public:!0,requires:"school"},doctor:{cycleTime:1e3,revealed:!0,public:!0,requires:"hospital"},fireman:{cycleTime:1e3,revealed:!0,public:!0,requires:"fire_station"},policeman:{cycleTime:1e3,revealed:!0,public:!0,requires:"police_station"},researcher:{cycleTime:1e3,revealed:!0,public:!0,requires:"research_center"},diplomat:{cycleTime:1e3,revealed:!0,public:!0,requires:"embassy"}},resources:{revealed:!0,citizens:{gatherable:!1,revealed:!0,cycleTime:8e3,cycleTime2:24e3},population:{gatherable:!1,revealed:!0,cycleTime:1e3},tiles:{gatherable:!1,revealed:!1,cycleTime:1e3},mining_deposits:{gatherable:!1,extended:!0,revealed:!1,cycleTime:1e3},water_sources:{gatherable:!1,revealed:!1,cycleTime:1e3},knowledge:{revealed:!1,extended:!0,gatherable:!1,cycleTime:1e3},research_points:{revealed:!1,extended:!0,gatherable:!1,cycleTime:1e3,base_cost:2,cost_mx:1.7},perk_points:{revealed:!1,extended:!0,gatherable:!1,cycleTime:1e3},food:{revealed:!1,extended:!0,gatherable:!0,cycleTime:1e3,buildings:["farm","cattle_farm","genetic_farm"],base_price:.01,min_price:.005,max_price:.05},water:{revealed:!1,extended:!0,gatherable:!0,cycleTime:1e3,buildings:["pump_manual","pump_automated","rain_collector","filtering_station"],base_price:.02,min_price:.01,max_price:.09},wood:{revealed:!1,extended:!0,gatherable:!0,cycleTime:1e3,buildings:["planted_forest","pine_forest","genetic_forest"],base_price:.04,min_price:.02,max_price:.15},energy:{revealed:!1,extended:!0,gatherable:!0,cycleTime:1e3,buildings:["thermal_plant","solar_panels","hydro_plant","nuclear_plant"],base_price:.05,min_price:.03,max_price:.35},gold:{revealed:!1,extended:!0,gatherable:!1,cycleTime:1e3,buildings:!1},stone:{revealed:!1,gatherable:!0,cycleTime:1e3,base_price:.08,min_price:.03,max_price:.5},iron:{revealed:!1,gatherable:!0,cycleTime:1e3,base_price:.4,min_price:.1,max_price:2},uranium:{revealed:!1,gatherable:!0,cycleTime:1e3,base_price:15,min_price:10,max_price:50}},buildings:{house:{unlocked:!1,public:!0,fullRefresh:!1,buyAmount:1,buildTime:1e4,costs:{build:{wood:20,tiles:1}},gains:{population:{max:5}}},road:{unlocked:!1,public:!0,fullRefresh:!1,buyAmount:1,buildTime:1e5,costs:{build:{wood:5e3,stone:2e3,iron:1e3,tiles:1}},gains:{connectivity:.01}},farm:{unlocked:!1,fullRefresh:!1,buyAmount:1,buildTime:3e4,costs:{build:{wood:100,tiles:3},operational:{wood:2,water:1}},gains:{food:{genRate:5},citizen_capacity:1},effects:{vulnerability:{type:"weather"}}},cattle_farm:{unlocked:!1,fullRefresh:!1,buyAmount:1,buildTime:1e5,costs:{build:{wood:250,tiles:5},operational:{food:10,water:5}},gains:{food:{genRate:35},citizen_capacity:3}},genetic_farm:{unlocked:!1,fullRefresh:!1,buyAmount:1,buildTime:3e5,costs:{build:{wood:2e3,stone:500,iron:1e3,tiles:10},operational:{energy:50,water:15}},gains:{food:{genRate:100},citizen_capacity:10}},pump_manual:{unlocked:!1,fullRefresh:!1,buyAmount:1,buildTime:1e4,costs:{build:{water_sources:1,wood:50}},gains:{water:{genRate:2},citizen_capacity:1}},pump_automated:{unlocked:!1,fullRefresh:!1,buyAmount:1,buildTime:5e4,costs:{build:{water_sources:5,wood:500,stone:300,tiles:1},operational:{energy:20}},gains:{water:{genRate:20},citizen_capacity:1}},rain_collector:{unlocked:!1,fullRefresh:!1,buyAmount:1,buildTime:1e5,costs:{build:{wood:1e3,stone:1e3,iron:500,tiles:10}},gains:{water:{genRate:5}}},filtering_station:{unlocked:!1,fullRefresh:!1,buyAmount:1,buildTime:3e5,costs:{build:{wood:2e3,stone:1e3,iron:500,tiles:5}},gains:!1,effects:{benefits:{type:"water_toxicity",amount:100}}},planted_forest:{unlocked:!1,fullRefresh:!1,buyAmount:1,buildTime:3e4,costs:{build:{wood:100,tiles:10},operational:{water:1}},gains:{wood:{genRate:10},citizen_capacity:2}},pine_forest:{unlocked:!1,fullRefresh:!1,buyAmount:1,buildTime:1e5,costs:{build:{wood:1e3,tiles:20},operational:{water:5,wood:10}},gains:{wood:{genRate:40},citizen_capacity:3},effects:{vulnerability:{type:"fires"}}},genetic_forest:{unlocked:!1,fullRefresh:!1,buyAmount:1,buildTime:3e5,costs:{build:{wood:3e3,stone:1e3,iron:500,tiles:5},operational:{water:5,energy:50}},gains:{wood:{genRate:150},citizen_capacity:20}},thermal_plant:{unlocked:!1,fullRefresh:!1,buyAmount:1,buildTime:1e5,costs:{build:{wood:1e3,stone:500,tiles:10},operational:{wood:100}},gains:{energy:{genRate:50},citizen_capacity:20}},solar_panels:{unlocked:!1,fullRefresh:!1,buyAmount:1,buildTime:1e5,costs:{build:{wood:1e3,iron:500,tiles:2}},gains:{energy:{genRate:4}}},hydro_plant:{unlocked:!1,fullRefresh:!1,buyAmount:1,buildTime:2e5,costs:{build:{water_sources:50,wood:2e3,stone:5e3,iron:1e3,tiles:5}},gains:{energy:{genRate:600},citizen_capacity:50},effects:{vulnerability:{type:"toxicity"}}},nuclear_plant:{unlocked:!1,fullRefresh:!1,buyAmount:1,buildTime:5e7,costs:{build:{wood:1e5,stone:2e4,iron:5e4,tiles:100},operational:{water:200,energy:1e3,uranium:.01}},gains:{energy:{genRate:2e4},citizen_capacity:500}},mining_plant:{unlocked:!1,fullRefresh:!1,buyAmount:1,buildTime:5e4,costs:{build:{mining_deposits:1,wood:500,tiles:5},operational:{water:5,wood:20}},gains:{dirt_available:1e7,dig_rate:20,citizen_capacity:10},dirt_composition:{stone:1},upgrades:[{name:"Dig deeper 1",costs:{build:{wood:5e3,stone:1e3,tiles:10},operational:{water:10,energy:20,wood:20}},gains:{dirt_available:1e8,dig_rate:50,citizen_capacity:30},dirt_composition:{stone:.8,iron:.2}},{name:"Dig deeper 2",costs:{build:{wood:2e4,stone:6e3,iron:4e3,tiles:10},operational:{water:50,energy:500,wood:50}},gains:{dirt_available:1e9,dig_rate:180,citizen_capacity:100},dirt_composition:{stone:.74,iron:.25,uranium:.01}}]},school:{unlocked:!1,public:!0,fullRefresh:!1,buyAmount:1,buildTime:5e4,costs:{build:{wood:500,stone:300,tiles:10}},gains:{citizen_capacity:10},provides_jobs:"teacher"},hospital:{unlocked:!1,public:!0,fullRefresh:!1,buyAmount:1,buildTime:1e5,costs:{build:{wood:3e3,stone:2e3,iron:1e3,tiles:10}},gains:{citizen_capacity:10},provides_jobs:"doctor"},police_station:{unlocked:!1,public:!0,fullRefresh:!1,buyAmount:1,buildTime:2e5,costs:{build:{wood:5e3,stone:3e3,iron:2e3,tiles:10}},gains:{citizen_capacity:10},provides_jobs:"policeman"},fire_station:{unlocked:!1,public:!0,fullRefresh:!1,buyAmount:1,buildTime:5e5,costs:{build:{wood:3e3,stone:5e3,iron:2e3,tiles:10}},gains:{citizen_capacity:20},provides_jobs:"fireman"},research_center:{unlocked:!1,public:!0,fullRefresh:!1,buyAmount:1,buildTime:12e5,costs:{build:{wood:2e4,stone:1e4,iron:1e4,tiles:30}},gains:{citizen_capacity:10},provides_jobs:"researcher"},embassy:{unlocked:!1,public:!0,fullRefresh:!1,buyAmount:1,buildTime:1e6,costs:{build:{wood:5e4,stone:2e4,iron:1e4,tiles:30}},gains:{citizen_capacity:5},provides_jobs:"diplomat"},factory:{unlocked:!1,fullRefresh:!1,buyAmount:1,buildTime:2e6,costs:{build:{wood:4e4,stone:2e4,iron:15e3,tiles:50},operational:{energy:500}},gains:{produce_rate:1,citizen_capacity:100},upgrades:[{name:"Bigger factory 1",costs:{build:{wood:1e5,stone:3e4,iron:2e3,tiles:50},operational:{energy:700}},gains:{citizen_capacity:50,produce_rate:2}},{name:"Bigger factory 2",costs:{build:{wood:2e5,stone:5e4,iron:3e4,tiles:100},operational:{energy:2e3}},gains:{citizen_capacity:100,produce_rate:5}}]},war_factory:{unlocked:!1,fullRefresh:!1,buyAmount:1,buildTime:5e5,costs:{build:{wood:2e4,stone:7e3,iron:2e3,tiles:20},operational:{energy:500}},gains:{produce_rate:1,citizen_capacity:50,plans_capacity:1},upgrades:[{name:"Bigger war factory 1",costs:{build:{wood:5e5,stone:2e4,iron:1e4,tiles:50},operational:{energy:1e3}},gains:{citizen_capacity:100,produce_rate:1,plans_capacity:1}},{name:"Bigger war factory 2",costs:{build:{wood:1e5,stone:4e4,iron:2e4,tiles:100},operational:{energy:2e3}},gains:{citizen_capacity:200,produce_rate:3,plans_capacity:2}}]}},objectiveGroups:[{langID:0,objectives:[{conditions:[{type:"start_exploring",amount:1}],sideTutorial:"start_exploring"},{conditions:[{type:"resolve",sub1:"state.jobs.explorer.workers",amount:1}],tutorial:[["world","resources",["workers","jobs","explorer"]]],sideTutorial:"assign_explorers"},{conditions:[{type:"resolve",sub1:"state.resources.food.workers",amount:1}],tutorial:[["world","resources",["workers","resources","food"]]],sideTutorial:"assign_food"},{conditions:[{type:"resolve",sub1:"state.resources.water.workers",amount:1}],tutorial:[["world","resources",["workers","resources","water"]]],sideTutorial:"assign_water"},{conditions:[{type:"resolve",sub1:"state.resources.wood.extra",amount:1},{type:"resolve",sub1:"state.resources.tiles.total",amount:1}]}],postMission:{}},{langID:1,langObjIDextra:1,objectives:[{conditions:[{type:"resolve",sub1:"state.resources.wood.workers",amount:1}],reveals:["research","knowledge"],tutorial:[["world","resources",["workers","resources","wood"]]]},{conditions:[{type:"resolve",sub1:"state.researchUpgrades.100",reqUpgrade:100,amount:1}],reveals:["social","public_jobs","public_buildings","builder"],tutorial:[["world","research",["research",100,1]]],sideTutorial:"build_house"},{conditions:[{type:"resolve",sub1:"state.buildings.house.avl",amount:1}],tutorial:[["social","public_buildings",["buildings","house",!1]]]},{conditions:[{type:"open_popup",sub1:"objectives",amount:1}],tutorial:[["world","resources",["open_popup","objectives",1]]],sideTutorial:"check_objectives"},{conditions:[{type:"resolve",sub1:"state.buildings.house.avl",amount:6}],tutorial:[["social","public_buildings",["buildings","house",!1]]]},{conditions:[{type:"resolve",sub1:"state.resources.food.workers",amount:5}],tutorial:[["world","resources",["workers","resources","food"]]]},{conditions:[{type:"resolve",sub1:"state.resources.water.workers",amount:5}],tutorial:[["world","resources",["workers","resources","water"]]]}],postMission:{}},{langID:11,objectives:[{conditions:[{type:"resolve",sub1:"state.resources.citizens.total",amount:50}]}],postMission:{}},{langID:2,objectives:[{conditions:[{type:"resolve",sub1:"state.buildings.pump_manual.avl",reqUpgrade:0,amount:1}],tutorial:[["world","research",["research",0,1]],["world","resources",["buildings","pump_manual",!1]]]},{conditions:[{type:"resolve",sub1:"state.buildings.pump_manual.workers",amount:1}],tutorial:[["world","resources",["workers","buildings","pump_manual"]]]},{conditions:[{type:"resolve",sub1:"state.buildings.farm.avl",reqUpgrade:2,amount:1}],tutorial:[["world","research",["research",2,1]],["world","resources",["buildings","farm",!1]]]},{conditions:[{type:"resolve",sub1:"state.buildings.planted_forest.avl",reqUpgrade:3,amount:1}],tutorial:[["world","research",["research",3,1]],["world","resources",["buildings","planted_forest",!1]]]}],postMission:{}},{langID:3,objectives:[{conditions:[{type:"resolve",sub1:"state.jobs.explorer.workers",amount:10}],reveals:["health","productivity","show_all_territories"],tutorial:[["world","resources",["workers","jobs","explorer"]]]},{conditions:[{type:"explore_progress",amount:.025}]},{conditions:[{type:"resolve",sub1:"state.jobs.builder.workers",amount:10}],tutorial:[["social","public_jobs",["workers","jobs","builder"]]]},{conditions:[{type:"resolve",sub1:"state.buildings.house.avl",amount:20}]}],postMission:{image:"buy_settings"}},{langID:4,objectives:[{conditions:[{type:"resolve",sub1:"state.buildings.mining_plant.length",reqUpgrade:5,amount:1}],tutorial:[["world","research",["research",5,1]],["world","resources",["buildings","mining_plant",0]]]},{conditions:[{type:"resolve",sub1:"state.buildings.mining_plant.0.workers",amount:10}],tutorial:[["world","resources",["workers","buildings","mining_plant"]]]},{conditions:[{type:"resolve",sub1:"state.jobs.teacher.workers",reqUpgrade:102,amount:10}],tutorial:[["world","research",["research",102,1]],["social","public_buildings",["buildings","school",!1]],["social","public_jobs",["workers","jobs","teacher"]]]},{conditions:[{type:"resolve",sub1:"state.buildings.mining_plant.0.level",reqUpgrade:40,amount:2}],tutorial:[["world","research",["research",40,1]],["world","resources",["level","mining_plant",1]]]},{conditions:[{type:"resolve",sub1:"state.buildings.hospital.avl",reqUpgrade:103,amount:1}],reveals:["explorables_parts"],tutorial:[["world","research",["research",103,1]],["social","public_buildings",["buildings","hospital",!1]]]}],postMission:{image:"timelapse"}},{langID:12,objectives:[{conditions:[{type:"resolve",sub1:"state.resources.citizens.total",amount:1e3}]}],postMission:{}},{langID:5,objectives:[{conditions:[{type:"resolve",sub1:"state.parts.length",amount:2}],reveals:["war","produce"]},{conditions:[{type:"resolve",sub1:"state.buildings.war_factory.length",reqUpgrade:300,amount:1}],reveals:["manage_plans"],tutorial:[["world","research",["research",300,1]],["army","produce",["buildings","war_factory",0]]]},{conditions:[{type:"tanks_built",amount:5}],sideTutorial:"manage_plans"},{conditions:[{type:"resolve",sub1:"state.jobs.policeman.workers",reqUpgrade:105,amount:10}],tutorial:[["world","research",["research",105,1]],["social","public_buildings",["buildings","police_station",!1]],["social","public_jobs",["workers","jobs","policeman"]]]},{conditions:[{type:"explore_progress",amount:1}]}],postMission:{}},{langID:6,objectives:[{conditions:[{type:"resolve",sub1:"data.playerOwnedTers",amount:2}],sideTutorial:"conquer_territory"},{conditions:[{type:"explore_new_territory",amount:1}]},{conditions:[{type:"resolve",sub1:"data.playerOwnedTers",amount:3}],reveals:["economic","factories"]}],postMission:{}},{langID:7,objectives:[{conditions:[{type:"resolve",sub1:"state.buildings.factory.length",reqUpgrade:200,amount:1}],reveals:["global_market","product_stock","gold"],tutorial:[["world","research",["research",200,1]],["economic","factories",["buildings","factory",0]]]},{conditions:[{type:"resolve",sub1:"state.products.clothing.avl",amount:100}]},{conditions:[{type:"resolve",sub1:"state.researchUpgrades.204",reqUpgrade:204,amount:1}],tutorial:[["world","research",["research",204,1]]]},{conditions:[{type:"resolve",sub1:"state.resources.gold.amount",amount:1e4}]}],postMission:{}},{langID:8,objectives:[{conditions:[{type:"resolve",sub1:"data.playerOwnedTers",amount:5}]},{conditions:[{type:"resolve",sub1:"data.playerOwnedTers",amount:10}]},{conditions:[{type:"resolve",sub1:"data.playerOwnedTers",amount:15}]}],postMission:{}},{langID:9,objectives:[{conditions:[{type:"region_conquered",amount:1}],reveals:["world"]},{conditions:[{type:"open_view",sub1:"world",amount:1}]},{conditions:[{type:"player_owned_regions",amount:2}]},{conditions:[{type:"region_conquered",amount:2}]},{conditions:[{type:"region_conquered",amount:3}]}],postMission:{}},{langID:10,objectives:[{conditions:[{type:"wishlist_on_steam",amount:1}]}]}],wishlist:["progress_faster","unlimited_save_files","new_research","more_content","unlock_prestige","extra_goals","support_us"],products:{clothing:{unlocked:!0,datasetID:0,produce_rate:.1,base_price:30,min_price:5,max_price:60,milestones:[{required_rate:.2,effects:{happiness:.01,productivity:.02}},{required_rate:.5,effects:{happiness:.03,productivity:.05}},{required_rate:1,effects:{happiness:.05,productivity:.1}}]},tv:{unlocked:!1,datasetID:0,produce_rate:.015,base_price:150,min_price:80,max_price:400,milestones:[{required_rate:.2,effects:{happiness:.01,productivity:.02}},{required_rate:.5,effects:{happiness:.03,productivity:.05}},{required_rate:1,effects:{happiness:.05,productivity:.1}}]},computer:{unlocked:!1,datasetID:0,produce_rate:.007,base_price:500,min_price:200,max_price:1e3,milestones:[{required_rate:.2,effects:{happiness:.01,productivity:.02}},{required_rate:.5,effects:{happiness:.03,productivity:.05}},{required_rate:1,effects:{happiness:.05,productivity:.1}}]},phone:{unlocked:!1,datasetID:1,produce_rate:.01,base_price:400,min_price:100,max_price:800,milestones:[{required_rate:.3,effects:{happiness:.02,productivity:-.01}},{required_rate:.6,effects:{happiness:.05,productivity:-.03}},{required_rate:1,effects:{happiness:.1,productivity:-.05}}]},car:{unlocked:!1,datasetID:2,produce_rate:5e-4,base_price:2e4,min_price:5e3,max_price:5e4,milestones:[{required_rate:.2,effects:{connectivity:.05}},{required_rate:.5,effects:{connectivity:.1}},{required_rate:1,effects:{connectivity:.3}}]}},explorables:[{type:"food",avl:!0,weight:80,min:80,max:150,perTerCap:3e6},{type:"water",avl:!0,weight:80,min:80,max:150,perTerCap:3e6},{type:"wood",avl:!0,weight:50,min:80,max:150,perTerCap:3e6},{type:"energy",avl:!0,weight:20,min:200,max:500,perTerCap:1e7},{type:"tiles",avl:!0,weight:20,min:5,max:20,perTerCap:2e3},{type:"parts",avl:!0,weight:10,min:1,max:1,perTerCap:3},{type:"mining_deposits",avl:!0,weight:5,min:1,max:1,perTerCap:5},{type:"water_sources",avl:!0,weight:10,min:1,max:1,perTerCap:300}],exploreOrder:[{received:!1,type:"food"},{received:!1,type:"water"},{received:!1,type:"wood"},{received:!1,type:"tiles"},{received:!1,type:"water_sources"},{received:!1,type:"mining_deposits"},{received:!1,type:"parts"}],exploreRolls:[10,50],instructions:{general:{},resources:{},research:{},world:{},public_jobs:{},public_buildings:{},factories:{},product_stock:{},global_market:{},produce:{},create_plans:{},battle_select:{},setup_troops:{},battle:{}},baseEnemyPowerMX:1.01,baseEconomyCostMX:1.01,infamyPowerMXspan:.1,notorietyCostMXspan:.1,infamyIncreaseByBattle:.01,infamyDailyReduction:.005,notorietyIncreaseByPurchase:.01,notorietyDailyReduction:.005,diplomacyReducesPowerMX:.5,diplomacyReducesCostMX:.5,diplomacyReductionByBattle:.005,diplomacyReductionByPurchase:.005,diplomacyMinForExtraReduction:.5,diplomacyInfamyReductionMX:1,diplomacyNotorietyReductionMX:1,coloniesMaxDistance:15,coloniesBaseRisk:.1,coloniesRiskPerDistance:.05,coloniesBasePay:.1,coloniesPayBonusPerDistance:.02,coloniesBaseConquerDays:10,coloniesControlBaseMax:.2,coloniesControlDistanceMax:5,coloniesControlDistanceDivisor:3,coloniesMinInvestment:1e7,coloniesControlLossPerDay:.01,militaryColonyInfamyDailyIncrease:.05,economicColonyNotorietyDailyIncrease:.05,coloniesDiplomacyDailyReduction:.02,baseEnemyHP:100,enemyHPmx:1.5,gameTimeHPmx:1.05,artillery:{mg_1:{startsIn:1e3,duration:1e4,damage:2,fireRate:100,w:30,h:30,animType:1},gun_1:{startsIn:2e3,duration:5e3,damage:40,fireRate:1e3,w:40,h:40,animType:0}},corpusLevelScalingMX:2,corpusUpgrades:[{tag:"dmg",type:"numeric",subType:"percentage",values:[1],displayColumn:"left"},{tag:"health",type:"numeric",subType:"percentage",values:[1],displayColumn:"left"},{tag:"maxSquadronSize",type:"numeric",subType:"squadron",values:[1],displayColumn:"right"},{tag:"squadronAura",type:"values",subType:"",values:["dmg","hp"],displayColumn:"right"},{tag:"auraAmount",type:"numeric",subType:"percentage",values:[1],displayColumn:"right"},{tag:"auraSize",type:"numeric",subType:"digit",values:[1],displayColumn:"right"}],corpusUpgradesGains:{dmg:{gain:5},health:{gain:5},maxSquadronSize:{gain:5},auraAmount:{gain:5},auraSize:{gain:1}},auraEffectRadius:100,srapnelEffectRadius:100,squadronSize:[1,2,3,5,6,7,8,10,15,20,30,50,75,100,200,500,1e3,2e3,5e3,1e4,5e4,1e5,1e6,1e7],statsNames:{},partsMaxAmount:10,corpusTemplate:{id:0,parts:{hull:!1,turret:!1},stats:{rate_of_fire:0,max_hp:{min:0,max:0},dmg:{min:0,max:0},armor_piercing:{min:0,max:0},accuracy:{min:60,max:60},armor:{min:1,max:1},deflection:{min:1,max:1}},costs:{iron:0,energy:0},crew:4,buildTime:45e3,name:"Custom tank",projectileData:{type:"shell_1",speed:1e3,damage:33,min_dmg:33,max_dmg:46},fireRate:0,maxHp:0,tanksAmount:0,level:0,lastPoints:0,nextPoints:0,expPoints:0,upgPoints:0,upgrades:{dmg:0,health:0,maxSquadronSize:0,auraType:"dmg",auraAmount:0,auraSize:1}},units:{tank_1:{subType:"tank_1",maxHp:100,fireRate:1e3,projectileData:{type:"shell_1",speed:1e3,damage:10,min_dmg:5,max_dmg:15}},tank_2:{subType:"tank_2",maxHp:200,fireRate:1500,projectileData:{type:"shell_2",speed:600,damage:35,min_dmg:20,max_dmg:50}},tank_3:{subType:"tank_3",maxHp:250,fireRate:1e3,projectileData:{type:"shell_1",speed:600,damage:30,min_dmg:30,max_dmg:40}}},formationSlots:18,formationSlotsEnemy:6,partTypes:["hull","turret"],partSubTypes:["allround","defensive","mobile","offensive"],partStatTypes:["max_hp","dmg"],partRarities:[{rarity:"common",id:0,weight:80,mx:1},{rarity:"uncommon",id:1,weight:15,mx:2},{rarity:"rare",id:2,weight:5,mx:3}],partStatAmmoType:["regular","rail","srapnel","anti_armor"],ammoPartRarities:[{rarity:"common",id:0,weight:75,mx:1},{rarity:"uncommon",id:1,weight:15,mx:2},{rarity:"rare",id:2,weight:7,mx:3},{rarity:"very_rare",id:3,weight:3,mx:4}],partSubTypeStats:{hull:{allround:{max_hp:{min:30,max:150},dmg:{min:3,max:8,min_spread:2,max_spread:3},armor:{min:10,max:30},deflection:{min:10,max:30,min_spread:2,max_spread:5}},defensive:{max_hp:{min:50,max:200},dmg:{min:2,max:5,min_spread:1,max_spread:3},armor:{min:20,max:40},deflection:{min:20,max:40,min_spread:2,max_spread:5}},mobile:{max_hp:{min:15,max:120},dmg:{min:2,max:7,min_spread:2,max_spread:4},armor:{min:0,max:10},deflection:{min:30,max:50,min_spread:2,max_spread:5}},offensive:{max_hp:{min:20,max:100},dmg:{min:3,max:10,min_spread:2,max_spread:5},armor:{min:5,max:25},deflection:{min:5,max:25,min_spread:2,max_spread:5}}},turret:{allround:{dmg:{min:3,max:5,min_spread:2,max_spread:8},armor_piercing:{min:5,max:35,min_spread:2,max_spread:8},accuracy:{min:60,max:100}},defensive:{dmg:{min:3,max:4,min_spread:1,max_spread:5},armor_piercing:{min:0,max:30,min_spread:2,max_spread:8},accuracy:{min:60,max:90}},mobile:{dmg:{min:3,max:4,min_spread:2,max_spread:3},armor_piercing:{min:0,max:25,min_spread:2,max_spread:8},accuracy:{min:70,max:80}},offensive:{dmg:{min:3,max:15,min_spread:2,max_spread:10},armor_piercing:{min:15,max:50,min_spread:2,max_spread:8},accuracy:{min:80,max:100}}}},partCosts:{hull:{citizens:{min:2,max:4},max_hp:{iron:5,energy:10},dmg:{iron:4,energy:5}},turret:{citizens:{min:1,max:2},max_hp:{iron:5,energy:10},dmg:{iron:30,energy:50}}},maxPlans:5,territory:{boostChances:[{type:"nothing",subType:"nothing",avl:!0,weight:100,min:0,max:0},{type:"higher_explore_chance",subType:"food",avl:!0,weight:50,min:2,max:4},{type:"higher_explore_chance",subType:"water",avl:!0,weight:50,min:2,max:4},{type:"higher_explore_chance",subType:"wood",avl:!0,weight:30,min:2,max:4},{type:"higher_explore_chance",subType:"parts",avl:!0,weight:20,min:1,max:5}]},zone:{boostChances:[{type:"nothing",subType:"nothing",avl:!0,weight:100,min:0,max:0},{type:"resource",subType:"food",avl:!0,weight:50,min:500,max:1e4},{type:"resource",subType:"water",avl:!0,weight:50,min:500,max:1e4},{type:"resource",subType:"wood",avl:!0,weight:30,min:600,max:1e4},{type:"resource",subType:"iron",avl:!0,weight:20,min:400,max:5e3},{type:"parts",subType:"parts",avl:!0,weight:20,min:1,max:1}]},eventCategories:["instant","in_advance","instant_decision"],eventTypes:{instant:["earthquake"],in_advance:["riot","fire","market_crash"],seasonal:["note_summer","note_winter"],instant_decision:["extortion"]},eventParams:{note_summer:{eventType:"seasonal",appearCondition:{type:"after_start_game_time",amount:0},frequency:{type:"fixed",minDays:365,startDate:"5-21"},durMinDays:1,durMaxDays:1,startParams:{threshold:{min:1,max:1},intensity:1},effects:{fireNewEvent:"summer"}},note_winter:{eventType:"seasonal",appearCondition:{type:"after_start_game_time",amount:0},frequency:{type:"fixed",minDays:365,startDate:"11-21"},durMinDays:30,durMaxDays:30,startParams:{threshold:{min:1,max:1},intensity:1},effects:{fireNewEvent:"winter"}},summer:{eventType:"seasonal",appearCondition:{type:"after_start_game_time",amount:0},frequency:{type:"fixed",minDays:365},durMinDays:92,durMaxDays:92,startParams:{threshold:{min:1,max:1},intensity:1},effects:{effectsBuildings:{types:["farm"],bonusType:"gain_mx",bonusEffect:.5}}},winter:{eventType:"seasonal",appearCondition:{type:"after_start_game_time",amount:0},frequency:{type:"fixed",minDays:365},durMinDays:91,durMaxDays:91,startParams:{threshold:{min:1,max:1},intensity:1},effects:{effectsBuildings:{types:["farm","cattle_farm"],bonusType:"gain_mx",bonusEffect:-.5}}},fire:{eventType:"in_advance",appearCondition:{type:"building_required",subType:"fire_station",amount:1},frequency:{type:"random",minDays:20},durMinDays:2,durMaxDays:60,startParams:{thresholdType:"fireman",threshold:{min:100,max:3e3},minChance:.05,maxChance:1,intensity:.05},effects:{destroyBuildings:{types:["any"],highRiskTypes:["pine_forest","genetic_farm"],baseChance:.1,highRiskMX:5}}},riot:{eventType:"in_advance",appearCondition:{type:"building_required",subType:"police_station",amount:1},frequency:{type:"random",minDays:20},durMinDays:2,durMaxDays:30,startParams:{thresholdType:"policeman",threshold:{min:100,max:2e3},minChance:.05,maxChance:1,intensity:.05},effects:{effectsStat:{type:"morale",baseChance:-.05}}},market_crash:{actionRequired:!1,eventType:"in_advance",appearCondition:{type:"building_required",subType:"factory",amount:1},frequency:{type:"random",minDays:40},durMinDays:2,durMaxDays:30,startParams:{thresholdType:"market",threshold:{min:10,max:1e3},minChance:.05,maxChance:1,intensity:.05},effects:{crashMarketPrice:{types:["resources","products"]}}},earthquake:{actionRequired:!1,eventType:"instant",appearCondition:{type:"after_start_game_time",amount:90},frequency:{type:"random",minDays:30},durMinDays:0,durMaxDays:0,startParams:{thresholdType:"earthquake",threshold:{min:1,max:100},minChance:.05,maxChance:1,intensity:.05},effects:{destroyBuildings:{types:["any"],highRiskTypes:["house"],baseChance:.1,highRiskMX:2},effectsStat:{type:"maintenance",baseChance:.5}}},extortion:{actionRequired:!1,eventType:"instant_decision",appearCondition:{type:"resource_required",subType:"gold",amount:1e4},frequency:{type:"random",minDays:30},durMinDays:0,durMaxDays:0,startParams:{thresholdType:"extortion",threshold:{min:10,max:50},minChance:.05,maxChance:1,intensity:.05},effects:{fireNewEvent:"fire"}}},achievements:{total_citizens:{list:{100:{reward_amount:0,reward_type:"perk_points",desc_var:"0"},500:{reward_amount:0,reward_type:"perk_points",desc_var:"1"},1e3:{reward_amount:0,reward_type:"perk_points",desc_var:"2"},5e3:{reward_amount:1,reward_type:"perk_points",desc_var:"2"},1e4:{reward_amount:1,reward_type:"perk_points",desc_var:"3"},1e5:{reward_amount:1,reward_type:"perk_points",desc_var:"3"},1e6:{reward_amount:1,reward_type:"perk_points",desc_var:"3"},1e7:{reward_amount:1,reward_type:"perk_points",desc_var:"4"},1e8:{reward_amount:1,reward_type:"perk_points",desc_var:"4"},1e9:{reward_amount:1,reward_type:"perk_points",desc_var:"4"}}},continent_conquer:{list:{africa:{reward_amount:10,reward_type:"perk_points"},australia:{reward_amount:10,reward_type:"perk_points"},europe:{reward_amount:10,reward_type:"perk_points"},asia:{reward_amount:10,reward_type:"perk_points"},north_america:{reward_amount:10,reward_type:"perk_points"},south_america:{reward_amount:10,reward_type:"perk_points"},antarctica:{reward_amount:10,reward_type:"perk_points"}}}},continentRewards:{rations_reduction:{amount:.3},cost_mx_reduction:{amount:.2},power_mx_reduction:{amount:.2},earthquake_immunity:{amount:1},water_sources_increase:{amount:.3},farm_winter_immunity:{amount:1},zones_required_reduction:{amount:1,not_percent:!0},exp_gain_increase:{amount:.5},zone_loot_increase:{amount:2},lower_diplomacy_reduction:{amount:.5},demolish_refund_rate:{amount:.3},scavenging_rate_increase:{amount:3}},startingBoosts:{starting_citizens:{type:"starting_citizens",subType:"starting_citizens",perPoint:5,cur:0},starting_resources:{type:"starting_resources",subType:"starting_resources",perPoint:500,cur:0},food_gain_mx:{type:"resource_gain_mx",subType:"food",perPoint:.1,cur:0},water_gain_mx:{type:"resource_gain_mx",subType:"water",perPoint:.1,cur:0},wood_gain_mx:{type:"resource_gain_mx",subType:"wood",perPoint:.1,cur:0},energy_gain_mx:{type:"resource_gain_mx",subType:"energy",perPoint:.1,cur:0},mining_rate_gain_mx:{type:"resource_gain_mx",subType:"mining_rate",perPoint:.1,cur:0}},perkPointsEveryXDays:365,perkPointsCycleGain:5,researchUpgrades:{0:{id:0,mainCategory:"resources",category:"building_unlock",type:"resources",subType:"water",subID:"pump_manual",cost:1},1:{id:1,mainCategory:"resources",category:"building_unlock",type:"resources",subType:"water",subID:"pump_automated",cost:10,requires:[{type:"research_upgrade",subType:5}]},2:{id:2,mainCategory:"resources",category:"building_unlock",type:"resources",subType:"food",subID:"farm",cost:5},3:{id:3,mainCategory:"resources",category:"building_unlock",type:"resources",subType:"wood",subID:"planted_forest",cost:5,requires:[{type:"total_citizens",subType:50}]},4:{id:4,mainCategory:"resources",category:"building_unlock",type:"resources",subType:"food",subID:"cattle_farm",cost:5,requires:[{type:"research_upgrade",subType:1}]},5:{id:5,mainCategory:"resources",category:"building_unlock",type:"resources",subType:"mining",subID:"mining_plant",cost:50,requires:[{type:"total_citizens",subType:100}]},6:{id:6,mainCategory:"resources",category:"building_unlock",type:"effect",subType:"water",subID:"filtering_station",cost:100},7:{id:7,mainCategory:"resources",category:"building_unlock",type:"resources",subType:"food",subID:"genetic_farm",cost:50,requires:[{type:"research_upgrade",subType:5},{type:"research_upgrade",subType:106}]},8:{id:8,mainCategory:"resources",category:"building_unlock",type:"resources",subType:"wood",subID:"genetic_forest",cost:50,requires:[{type:"research_upgrade",subType:5},{type:"research_upgrade",subType:106}]},9:{id:9,mainCategory:"resources",category:"building_unlock",type:"resources",subType:"energy",subID:"hydro_plant",cost:80,requires:[{type:"total_citizens",subType:1e3}]},10:{id:10,mainCategory:"resources",category:"building_unlock",type:"resources",subType:"energy",subID:"nuclear_plant",cost:500,demoLocked:!0,requires:[{type:"total_citizens",subType:5e4},{type:"research_upgrade",subType:106}]},11:{id:11,mainCategory:"resources",category:"building_unlock",type:"resources",subType:"energy",subID:"thermal_plant",cost:50,requires:[{type:"research_upgrade",subType:5}]},12:{id:12,mainCategory:"resources",category:"building_unlock",type:"resources",subType:"energy",subID:"solar_panels",cost:80,requires:[{type:"research_upgrade",subType:106}]},13:{id:13,mainCategory:"resources",category:"building_unlock",type:"resources",subType:"wood",subID:"pine_forest",cost:50,requires:[{type:"research_upgrade",subType:1}]},14:{id:14,mainCategory:"resources",category:"building_unlock",type:"resources",subType:"water",subID:"rain_collector",cost:30,requires:[{type:"total_citizens",subType:1e3}]},20:{id:20,mainCategory:"resources",category:"building_bonus",type:"effect",subType:"water",subID:"rain_collector",cost:1,buyLimit:5,effects:[{type:"gain_mx",amount:.05}]},21:{id:21,mainCategory:"resources",category:"building_bonus",type:"effect",subType:"energy",subID:"hydro_plant",cost:1,buyLimit:5,effects:[{type:"gain_mx",amount:.05}]},22:{id:22,mainCategory:"resources",category:"building_bonus",type:"effect",subType:"wood",subID:"planted_forest",cost:1,buyLimit:5,effects:[{type:"gain_mx",amount:.05}]},23:{id:23,mainCategory:"resources",category:"building_bonus",type:"effect",subType:"wood",subID:"pine_forest",cost:1,buyLimit:5,effects:[{type:"gain_mx",amount:.05}]},24:{id:24,mainCategory:"resources",category:"building_bonus",type:"effect",subType:"wood",subID:"genetic_forest",cost:1,buyLimit:5,effects:[{type:"gain_mx",amount:.05}]},25:{id:25,mainCategory:"resources",category:"building_bonus",type:"effect",subType:"energy",subID:"thermal_plant",cost:1,buyLimit:5,effects:[{type:"gain_mx",amount:.05}]},26:{id:26,mainCategory:"resources",category:"building_bonus",type:"effect",subType:"energy",subID:"solar_panels",cost:1,buyLimit:5,effects:[{type:"gain_mx",amount:.05}]},27:{id:27,mainCategory:"resources",category:"building_bonus",type:"effect",subType:"energy",subID:"nuclear_plant",cost:1,buyLimit:5,effects:[{type:"gain_mx",amount:.05}]},28:{id:28,mainCategory:"resources",category:"building_bonus",type:"effect",subType:"food",subID:"farm",cost:1,buyLimit:5,effects:[{type:"gain_mx",amount:.05}]},29:{id:29,mainCategory:"resources",category:"building_bonus",type:"effect",subType:"food",subID:"cattle_farm",cost:1,buyLimit:5,effects:[{type:"gain_mx",amount:.05}]},30:{id:30,mainCategory:"resources",category:"building_bonus",type:"effect",subType:"food",subID:"genetic_farm",cost:1,buyLimit:5,effects:[{type:"gain_mx",amount:.05}]},40:{id:40,mainCategory:"resources",category:"building_upgrade",type:"effect",subType:"mining",subID:"mining_plant",cost:1,effects:[{type:"building_upgrade",amount:1}],requires:[{type:"research_upgrade",subType:11}]},41:{id:41,mainCategory:"resources",category:"building_upgrade",type:"effect",subType:"mining",subID:"mining_plant",cost:1,demoLocked:!0,effects:[{type:"building_upgrade",amount:2}]},42:{id:42,mainCategory:"war",category:"building_upgrade",type:"effect",subType:"war_factory",subID:"war_factory",cost:1,effects:[{type:"building_upgrade",amount:1}]},43:{id:43,mainCategory:"war",category:"building_upgrade",type:"effect",subType:"war_factory",subID:"war_factory",cost:1,effects:[{type:"building_upgrade",amount:2}],requires:[{type:"research_upgrade",subType:106}]},44:{id:44,mainCategory:"economy",category:"building_upgrade",type:"effect",subType:"factory",subID:"factory",cost:1,effects:[{type:"building_upgrade",amount:1}]},45:{id:45,mainCategory:"economy",category:"building_upgrade",type:"effect",subType:"factory",subID:"factory",cost:1,effects:[{type:"building_upgrade",amount:2}]},50:{id:50,mainCategory:"resources",category:"building_limit",type:"effect",subType:"mining_plant",subID:"mining_plant",cost:1,effects:[{type:"building_limit",amount:1}]},51:{id:51,mainCategory:"economy",category:"building_limit",type:"effect",subType:"factory",subID:"factory",cost:1,effects:[{type:"building_limit",amount:1}]},100:{id:100,mainCategory:"social",category:"building_unlock",type:"social",subType:"house",subID:"house",cost:1},101:{id:101,mainCategory:"social",category:"building_unlock",type:"social",subType:"road",subID:"road",cost:10,requires:[{type:"research_upgrade",subType:5}]},102:{id:102,mainCategory:"social",category:"building_unlock",type:"social",subType:"school",subID:"school",cost:20,requires:[{type:"research_upgrade",subType:1},{type:"research_upgrade",subType:5},{type:"total_citizens",subType:200}]},103:{id:103,mainCategory:"social",category:"building_unlock",type:"social",subType:"hospital",subID:"hospital",cost:50,requires:[{type:"total_citizens",subType:500}]},104:{id:104,mainCategory:"social",category:"building_unlock",type:"social",subType:"fire_station",subID:"fire_station",cost:50},105:{id:105,mainCategory:"social",category:"building_unlock",type:"social",subType:"police_station",subID:"police_station",cost:50},106:{id:106,mainCategory:"social",category:"building_unlock",type:"social",subType:"research_center",subID:"research_center",cost:100,requires:[{type:"total_citizens",subType:5e3}]},107:{id:107,mainCategory:"social",category:"building_unlock",type:"social",subType:"embassy",subID:"embassy",cost:100,demoLocked:!0,requires:[{type:"total_citizens",subType:2e4}]},120:{id:120,mainCategory:"social",category:"stat_bonus",type:"social",subType:"stat_bonus",subID:"population_gain",cost:1,effects:[{type:"population_gain",amount:.05}],requires:[{type:"total_citizens",subType:500}]},130:{id:130,mainCategory:"social",category:"stat_bonus",type:"social",subType:"stat_bonus",subID:"doctor",cost:1,buyLimit:5,effects:[{type:"coverage_increase",amount:10}]},131:{id:131,mainCategory:"social",category:"stat_bonus",type:"social",subType:"stat_bonus",subID:"policeman",cost:1,buyLimit:5,effects:[{type:"coverage_increase",amount:50}]},132:{id:132,mainCategory:"social",category:"stat_bonus",type:"social",subType:"stat_bonus",subID:"fireman",cost:1,buyLimit:5,effects:[{type:"coverage_increase",amount:50}]},133:{id:133,mainCategory:"social",category:"stat_bonus",type:"social",subType:"stat_bonus",subID:"teacher",cost:1,buyLimit:5,effects:[{type:"gain_mx",amount:.1}]},134:{id:134,mainCategory:"social",category:"stat_bonus",type:"social",subType:"stat_bonus",subID:"researcher",cost:1,buyLimit:20,effects:[{type:"gain_mx",amount:.2}]},200:{id:200,mainCategory:"economy",category:"building_unlock",type:"economic",subType:"factory",subID:"factory",cost:1e3,requires:[{type:"research_upgrade",subType:5},{type:"research_upgrade",subType:11},{type:"total_citizens",subType:1e4}]},201:{id:201,mainCategory:"economy",category:"product_unlock",type:"economic",subType:"computer",subID:"computer",cost:100,demoLocked:!0},202:{id:202,mainCategory:"economy",category:"product_unlock",type:"economic",subType:"car",subID:"car",cost:500,demoLocked:!0},204:{id:204,mainCategory:"economy",category:"product_unlock",type:"economic",subType:"tv",subID:"tv",cost:200,requires:[{type:"research_upgrade",subType:106}]},205:{id:205,mainCategory:"economy",category:"product_unlock",type:"economic",subType:"phone",subID:"phone",cost:100},220:{id:220,mainCategory:"economy",category:"resource_unlock",type:"economic",subType:"resources",subID:"water",cost:100,effects:[{type:"market_unlock"}]},221:{id:221,mainCategory:"economy",category:"resource_unlock",type:"economic",subType:"resources",subID:"food",cost:100,effects:[{type:"market_unlock"}]},222:{id:222,mainCategory:"economy",category:"resource_unlock",type:"economic",subType:"resources",subID:"wood",cost:100,demoLocked:!0,effects:[{type:"market_unlock"}]},223:{id:223,mainCategory:"economy",category:"resource_unlock",type:"economic",subType:"resources",subID:"energy",cost:100,demoLocked:!0,effects:[{type:"market_unlock"}]},224:{id:224,mainCategory:"economy",category:"resource_unlock",type:"economic",subType:"resources",subID:"stone",cost:100,demoLocked:!0,effects:[{type:"market_unlock"}]},225:{id:225,mainCategory:"economy",category:"resource_unlock",type:"economic",subType:"resources",subID:"iron",cost:100,demoLocked:!0,effects:[{type:"market_unlock"}]},226:{id:226,mainCategory:"economy",category:"resource_unlock",type:"economic",subType:"resources",subID:"uranium",cost:100,demoLocked:!0,effects:[{type:"market_unlock"}]},250:{id:250,mainCategory:"economy",category:"actions",type:"economic",subType:"buy_territories",subID:"buy_territories",cost:100,effects:[{type:"buy_territories"}]},251:{id:251,mainCategory:"economy",category:"actions",type:"economic",subType:"buy_economic_colonies",subID:"buy_economic_colonies",cost:100,demoLocked:!0,buyLimit:3,effects:[{type:"buy_economic_colonies"}],requires:[{type:"research_upgrade",subType:107},{type:"total_citizens",subType:1e5}]},300:{id:300,mainCategory:"war",category:"building_unlock",type:"army",subType:"war_factory",subID:"war_factory",cost:100,requires:[{type:"research_upgrade",subType:5},{type:"research_upgrade",subType:11},{type:"total_citizens",subType:2e3}]},310:{id:310,mainCategory:"qol",category:"timelapse_speed",type:"automation",subType:"timelapse_speed",subID:"timelapse",cost:100,amount:3},311:{id:311,mainCategory:"qol",category:"timelapse_speed",type:"automation",subType:"timelapse_speed",subID:"timelapse",cost:100,amount:4,perkCost:2,demoLocked:!0},312:{id:312,mainCategory:"qol",category:"timelapse_speed",type:"automation",subType:"timelapse_speed",subID:"timelapse",cost:100,amount:5,perkCost:5,demoLocked:!0},313:{id:313,mainCategory:"qol",category:"timelapse_speed",type:"automation",subType:"timelapse_speed",subID:"timelapse",cost:100,amount:10,perkCost:20,demoLocked:!0},320:{id:320,mainCategory:"qol",category:"timelapse_config",type:"automation",subType:"timelapse_config",subID:"auto_rations",cost:100,effects:[{type:"auto_rations"}]},321:{id:321,mainCategory:"qol",category:"timelapse_config",type:"automation",subType:"timelapse_config",subID:"health_drop",cost:100,effects:[{type:"health_drop"}]},322:{id:322,mainCategory:"qol",category:"timelapse_config",type:"automation",subType:"timelapse_config",subID:"productivity_drop",cost:100,effects:[{type:"productivity_drop"}]},323:{force:!0,id:323,mainCategory:"qol",category:"timelapse_config",type:"automation",subType:"timelapse_config",subID:"auto_explore",cost:100,demoLocked:!0,effects:[{type:"auto_explore"}]},324:{force:!0,id:324,mainCategory:"qol",category:"timelapse_config",type:"automation",subType:"timelapse_config",subID:"carry_over_explore",cost:100,perkCost:50,demoLocked:!0,effects:[{type:"carry_over_explore"}]},350:{force:!0,id:350,mainCategory:"war",category:"part_stats",type:"part_stats",subType:"part_stats",subID:"armor",cost:1,effects:[{type:"armor",amount:1}]},351:{force:!0,id:351,mainCategory:"war",category:"part_stats",type:"part_stats",subType:"part_stats",subID:"armor_piercing",cost:1,effects:[{type:"armor_piercing",amount:1}]},352:{force:!0,id:352,mainCategory:"war",category:"part_stats",type:"part_stats",subType:"part_stats",subID:"deflection",cost:1,effects:[{type:"deflection",amount:1}]},360:{force:!0,id:360,mainCategory:"war",category:"ammo_types",type:"ammo_types",subType:"ammo_types",subID:"anti_armor",cost:1,effects:[{type:"anti_armor",amount:1}]},361:{force:!0,id:361,mainCategory:"war",category:"ammo_types",type:"ammo_types",subType:"ammo_types",subID:"srapnel",cost:1,effects:[{type:"srapnel",amount:1}]},362:{force:!0,id:362,mainCategory:"war",category:"ammo_types",type:"ammo_types",subType:"ammo_types",subID:"rail",cost:1,effects:[{type:"rail",amount:1}]},370:{force:!0,id:370,mainCategory:"war",category:"army_unlocks",type:"formation_slots",subType:"formation_slots",subID:"formation_slots",cost:1,buyLimit:15,effects:[{type:"formation_slots",amount:1}]},371:{force:!0,id:371,mainCategory:"war",category:"army_unlocks",type:"reinforcement",subType:"reinforcement",subID:"reinforcement",cost:1,buyLimit:2,effects:[{type:"reinforcement",amount:1}]},390:{id:390,mainCategory:"war",category:"actions",type:"army",subType:"buy_military_colonies",subID:"buy_military_colonies",cost:100,demoLocked:!0,buyLimit:3,effects:[{type:"buy_military_colonies"}],requires:[{type:"research_upgrade",subType:107},{type:"total_citizens",subType:1e5}]}},corpusStatsNames:{accuracy:"accuracy",armor:"armor",armor_piercing:"armor piercing",deflection:"deflection",dmg:"damage"},researchUpgradesNodes:{0:{upgradeID:0,tag:"0 upgrade",xP:-32,yP:-100,x:0,y:0,w:80,h:80,startNodePos:1,children:[1,2,3]},1:{upgradeID:1,tag:"1 upgrade",xP:-320,yP:-70,x:0,y:0,w:64,h:64,startNodePos:!1,children:[14,9]},14:{upgradeID:14,tag:"14 upgrade",xP:-150,yP:-100,x:0,y:0,w:64,h:64,startNodePos:!1,children:[6,20]},6:{upgradeID:6,tag:"6 upgrade",xP:-150,yP:-100,x:0,y:0,w:64,h:64,startNodePos:!1,children:[]},20:{upgradeID:20,tag:"20 upgrade",xP:-250,yP:0,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},9:{upgradeID:9,tag:"9 upgrade",xP:-250,yP:30,x:0,y:0,w:64,h:64,startNodePos:!1,children:[21]},21:{upgradeID:21,tag:"21 upgrade",xP:-200,yP:0,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},2:{upgradeID:2,tag:"2 upgrade",xP:100,yP:-100,x:0,y:0,w:80,h:80,startNodePos:!1,children:[28,4,7]},28:{upgradeID:28,tag:"28 upgrade",xP:150,yP:-200,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},4:{upgradeID:4,tag:"4 upgrade",xP:150,yP:-60,x:0,y:0,w:64,h:64,startNodePos:!1,children:[29]},29:{upgradeID:29,tag:"29 upgrade",xP:150,yP:-100,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},7:{upgradeID:7,tag:"7 upgrade",xP:200,yP:50,x:0,y:0,w:64,h:64,startNodePos:!1,children:[30]},30:{upgradeID:30,tag:"30 upgrade",xP:200,yP:0,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},3:{upgradeID:3,tag:"3 upgrade",xP:-120,yP:-230,x:0,y:0,w:80,h:80,startNodePos:!1,children:[13,22,5,11]},13:{upgradeID:13,tag:"13 upgrade",xP:-170,yP:-100,x:0,y:0,w:64,h:64,startNodePos:!1,children:[23,8]},23:{upgradeID:23,tag:"23 upgrade",xP:-170,yP:0,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},8:{upgradeID:8,tag:"8 upgrade",xP:-100,yP:-100,x:0,y:0,w:64,h:64,startNodePos:!1,children:[24]},24:{upgradeID:24,tag:"24 upgrade",xP:-200,yP:-100,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},22:{upgradeID:22,tag:"22 upgrade",xP:-100,yP:70,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},5:{forceChildren:!0,upgradeID:5,tag:"5 upgrade",xP:0,yP:-100,x:0,y:0,w:80,h:80,startNodePos:!1,children:[40,50]},40:{force:!0,upgradeID:40,tag:"40 upgrade",xP:0,yP:-100,x:0,y:0,w:64,h:64,startNodePos:!1,children:[41]},41:{upgradeID:41,tag:"41 upgrade",xP:0,yP:-100,x:0,y:0,w:64,h:64,startNodePos:!1,children:[]},50:{force:!0,upgradeID:50,tag:"50 upgrade",xP:150,yP:-100,x:0,y:0,w:64,h:64,startNodePos:!1,children:[]},11:{forceChildren:!0,upgradeID:11,tag:"11 upgrade",xP:200,yP:-100,x:0,y:0,w:80,h:80,startNodePos:!1,children:[25,12,10]},25:{upgradeID:25,tag:"25 upgrade",xP:0,yP:-150,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},12:{upgradeID:12,tag:"12 upgrade",xP:-150,yP:-100,x:0,y:0,w:64,h:64,startNodePos:!1,children:[26]},26:{upgradeID:26,tag:"26 upgrade",xP:-150,yP:-100,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},10:{upgradeID:10,tag:"10 upgrade",xP:150,yP:-100,x:0,y:0,w:64,h:64,startNodePos:!1,children:[27]},27:{upgradeID:27,tag:"27 upgrade",xP:150,yP:-100,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},100:{upgradeID:100,tag:"100 upgrade",xP:120,yP:-32,x:0,y:0,w:80,h:80,startNodePos:2,children:[120,101,102]},120:{upgradeID:120,tag:"120 upgrade",xP:200,yP:-100,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},101:{upgradeID:101,tag:"101 upgrade",xP:200,yP:0,x:0,y:0,w:64,h:64,startNodePos:!1,children:[]},102:{upgradeID:102,tag:"102 upgrade",xP:100,yP:100,x:0,y:0,w:64,h:64,startNodePos:!1,children:[103,106,133]},133:{upgradeID:133,tag:"133 upgrade",xP:200,yP:0,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},103:{forceChildren:!0,upgradeID:103,tag:"103 upgrade",xP:-150,yP:100,x:0,y:0,w:64,h:64,startNodePos:!1,children:[105,130]},130:{upgradeID:130,tag:"130 upgrade",xP:-45,yP:-100,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},105:{forceChildren:!0,force:!0,upgradeID:105,tag:"105 upgrade",xP:1,yP:100,x:0,y:0,w:64,h:64,startNodePos:!1,children:[104,131]},131:{upgradeID:131,tag:"131 upgrade",xP:200,yP:0,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},104:{forceChildren:!0,force:!0,upgradeID:104,tag:"104 upgrade",xP:3,yP:104,x:0,y:0,w:64,h:64,startNodePos:!1,children:[132]},132:{upgradeID:132,tag:"132 upgrade",xP:200,yP:0,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},106:{forceChildren:!0,force:!0,upgradeID:106,tag:"106 upgrade",xP:150,yP:100,x:0,y:0,w:64,h:64,startNodePos:!1,children:[107,134]},107:{upgradeID:107,tag:"106 upgrade",xP:150,yP:100,x:0,y:0,w:64,h:64,startNodePos:!1,children:[]},134:{upgradeID:134,tag:"134 upgrade",xP:200,yP:0,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},200:{upgradeID:200,tag:"200 upgrade",xP:-120,yP:-32,x:0,y:0,w:80,h:80,startNodePos:4,children:[202,204,44,51,220,250]},202:{upgradeID:202,tag:"202 upgrade",xP:-200,yP:-50,x:0,y:0,w:64,h:64,startNodePos:!1,children:[]},204:{upgradeID:204,tag:"204 upgrade",xP:-200,yP:50,x:0,y:0,w:64,h:64,startNodePos:!1,children:[201,205]},205:{upgradeID:205,tag:"205 upgrade",xP:-200,yP:0,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},201:{upgradeID:201,tag:"201 upgrade",xP:-200,yP:100,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},44:{upgradeID:44,tag:"44 upgrade",xP:0,yP:100,x:0,y:0,w:40,h:40,startNodePos:!1,children:[45]},45:{upgradeID:45,tag:"45 upgrade",xP:0,yP:100,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},51:{upgradeID:51,tag:"51 upgrade",xP:0,yP:-100,x:0,y:0,w:64,h:64,startNodePos:!1,children:[]},220:{upgradeID:220,tag:"220 upgrade",xP:-200,yP:-100,x:0,y:0,w:64,h:64,startNodePos:!1,children:[221,224]},221:{upgradeID:221,tag:"221 upgrade",xP:-200,yP:0,x:0,y:0,w:64,h:64,startNodePos:!1,children:[222]},222:{upgradeID:222,tag:"222 upgrade",xP:-200,yP:0,x:0,y:0,w:40,h:40,startNodePos:!1,children:[223]},223:{upgradeID:223,tag:"223 upgrade",xP:-200,yP:0,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},224:{upgradeID:224,tag:"224 upgrade",xP:-200,yP:100,x:0,y:0,w:40,h:40,startNodePos:!1,children:[225]},225:{upgradeID:225,tag:"225 upgrade",xP:-200,yP:0,x:0,y:0,w:40,h:40,startNodePos:!1,children:[226]},226:{upgradeID:226,tag:"226 upgrade",xP:-200,yP:0,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},250:{forceChildren:!0,force:!0,upgradeID:250,tag:"250 upgrade",xP:-64,yP:116,x:0,y:0,w:80,h:80,startNodePos:!1,children:[251]},251:{upgradeID:251,tag:"251 upgrade",xP:-54,yP:116,x:0,y:0,w:80,h:80,startNodePos:!1,children:[]},300:{forceChildren:!0,force:!0,upgradeID:300,tag:"300 upgrade",xP:-38,yP:99,x:0,y:0,w:80,h:80,startNodePos:3,children:[42,310,370]},42:{forceChildren:!0,force:!0,upgradeID:42,tag:"42 upgrade",xP:-107,yP:111,x:0,y:0,w:64,h:64,startNodePos:!1,children:[43,350]},43:{forceChildren:!0,force:!0,upgradeID:43,tag:"43 upgrade",xP:-111,yP:100,x:0,y:0,w:64,h:64,startNodePos:!1,children:[360,390]},360:{forceChildren:!0,force:!0,upgradeID:360,tag:"360 upgrade",xP:12,yP:100,x:0,y:0,w:40,h:40,startNodePos:!1,children:[361]},361:{forceChildren:!0,force:!0,upgradeID:361,tag:"361 upgrade",xP:0,yP:100,x:0,y:0,w:40,h:40,startNodePos:!1,children:[362]},362:{forceChildren:!0,force:!0,upgradeID:362,tag:"362 upgrade",xP:0,yP:100,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},390:{force:!0,upgradeID:390,tag:"390 upgrade",xP:-125,yP:100,x:0,y:0,w:80,h:80,startNodePos:!1,children:[]},350:{forceChildren:!0,force:!0,upgradeID:350,tag:"350 upgrade",xP:12,yP:115,x:0,y:0,w:40,h:40,startNodePos:!1,children:[351]},351:{forceChildren:!0,force:!0,upgradeID:351,tag:"351 upgrade",xP:0,yP:100,x:0,y:0,w:40,h:40,startNodePos:!1,children:[352]},352:{forceChildren:!0,force:!0,upgradeID:352,tag:"352 upgrade",xP:0,yP:100,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},310:{force:!0,forceChildren:!0,upgradeID:310,tag:"310 upgrade",xP:150,yP:100,x:0,y:0,w:80,h:80,startNodePos:!1,children:[311,320,323]},311:{upgradeID:311,tag:"311 upgrade",xP:0,yP:100,x:0,y:0,w:40,h:40,startNodePos:!1,children:[312]},312:{upgradeID:312,tag:"312 upgrade",xP:0,yP:100,x:0,y:0,w:40,h:40,startNodePos:!1,children:[313]},313:{upgradeID:313,tag:"313 upgrade",xP:0,yP:100,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},320:{force:!0,upgradeID:320,tag:"320 upgrade",xP:-60,yP:117,x:0,y:0,w:40,h:40,startNodePos:!1,children:[321]},321:{upgradeID:321,tag:"321 upgrade",xP:0,yP:100,x:0,y:0,w:40,h:40,startNodePos:!1,children:[322]},322:{upgradeID:322,tag:"322 upgrade",xP:0,yP:100,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},323:{force:!0,upgradeID:323,tag:"323 upgrade",xP:100,yP:103,x:0,y:0,w:64,h:64,startNodePos:!1,children:[324]},324:{force:!0,upgradeID:324,tag:"324 upgrade",xP:0,yP:103,x:0,y:0,w:64,h:64,startNodePos:!1,children:[]},370:{force:!0,forceChildren:!0,upgradeID:370,tag:"370 upgrade",xP:20,yP:131,x:0,y:0,w:40,h:40,startNodePos:!1,children:[371]},371:{force:!0,upgradeID:371,tag:"371 upgrade",xP:0,yP:100,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]}},startNodes:{1:{x:0,y:-90,w:1,h:1},2:{x:103,y:0,w:1,h:1},3:{x:0,y:90,w:1,h:1},4:{x:-103,y:0,w:1,h:1}},gameCredits:{music:{title:"Music",entries:[{name:"Kevin MacLeod",additions:["Long Note Two","Crossing the Chasm"],type:"general"}]},graphics:{title:"Graphics",entries:[{name:"Gamex Games",additions:[],type:"general"},{name:"macrovector",additions:["Gold vector"],type:"general"},{name:"Bonshaiheldin",additions:["Battle auras"],type:"general"}]},sounds:{title:"Sounds",entries:[{name:"InspectorJ",additions:["Heartbeat, Regular, Single","Dramatic Organ","Motor, Small, Fast, Front"],type:"link",links:["https://freesound.org/people/InspectorJ/sounds/485076/","https://freesound.org/people/InspectorJ/sounds/401707/","https://freesound.org/people/InspectorJ/sounds/485355/"]},{name:"Treasure Sounds",additions:["Item pickup"],type:"link",links:["https://freesound.org/people/TreasureSounds/sounds/332629/"]},{name:"broumbroum",additions:["sf3-sfx-menu-validate"],type:"link",links:["https://freesound.org/people/broumbroum/sounds/50565/"]},{name:"LoafDV",additions:["Large Earthquake"],type:"link",links:["https://freesound.org/people/LoafDV/sounds/148002/"]},{name:"thatjeffcarter",additions:["Warhouse Noise"],type:"link",links:["https://freesound.org/people/thatjeffcarter/sounds/106109/"]},{name:"Iwiploppenisse",additions:["Explosion"],type:"link",links:["https://freesound.org/people/Iwiploppenisse/sounds/156031/"]},{name:"Tuig",additions:["Dutch Stock Exchange"],type:"link",links:["https://freesound.org/people/Tuig/sounds/35030/"]},{name:"imagery2",additions:["keyboard typing long looping"],type:"link",links:["https://freesound.org/people/imagery2/sounds/456906/"]},{name:"Bertrof",additions:["Game sound correct"],type:"link",links:["https://freesound.org/people/Bertrof/sounds/131660/"]},{name:"CGEffex",additions:["Ricochet"],type:"link",links:["https://freesound.org/people/CGEffex/sounds/96629/"]},{name:"JoniHeinonen",additions:["Tanks, heavy trucks, warfare"],type:"link",links:["https://freesound.org/people/JoniHeinonen/sounds/161878/"]},{name:"nixeno",additions:["NixenoFX EP2"],type:"link",links:["https://freesound.org/people/nixeno/sounds/440582/"]},{name:"humanoide9000",additions:["Victory fanfare"],type:"link",links:["https://freesound.org/people/humanoide9000/sounds/466133/"]}]},specialThanks:{title:"Special thanks",entries:[{name:"Christopher Sneider",additions:[],type:"general"},{name:"orlan12fish",additions:[],type:"general"},{name:"DomingoX6",additions:[],type:"general"},{name:"Kumkang Lee <br />(kumkang.lee.89@gmail.com)",additions:["Korean translations"],type:"general"},{name:"freak300",additions:[],type:"general"},{name:"Goby",additions:[],type:"general"},{name:"platonman1",additions:[],type:"general"},{name:"matas3",additions:[],type:"general"},{name:"fgomes81",additions:[],type:"general"},{name:"qazplm",additions:[],type:"general"},{name:"dremis",additions:[],type:"general"},{name:"Hoppa61",additions:[],type:"general"},{name:"liberdeus",additions:[],type:"general"},{name:"Broft",additions:[],type:"general"},{name:"jeuxjeux20",additions:[],type:"general"},{name:"joeri",additions:[],type:"general"},{name:"Bogotamrg",additions:[],type:"general"}]}},resourceBuildings:[]},defaultAppState={settings:{},stats:{}},defaultGameState={gameVersion:"0.4.9.4",startedPlayingTimestamp:0,saveID:!1,gameSeed:!1,seedStates:{main:!1,biomes:!1},gameStats:{prestigesDone:{amount:0,resets:!1},playTime:{current:0,total:0,resets:!1},conquered:{total:{continents:0,regions:0,territories:0,zones:0},current:{continents:0,regions:0,territories:0,zones:0}}},timesGivenFreePerksOnLoss:0,achievements:{},alreadyRevealed:[],exploreResults:{total:{}},lastAttackOnPlayer:0,cumulativeDeathRatio:0,lastBattledTerritory:!1,homeContinent:!1,lockedContinents:["africa","australia","europe","asia","north_america","south_america","antarctica"],timeMXes:{powerMX:1,costMX:1},lastActions:{dailyCycleTime:0,weeklyCycleTime:0,battleFought:0,territoryPurchase:0},homeGridRefs:{regions:!1,territories:!1},gameGrids:{regions:{},territories:{},zones:{}},currentAttackedRegion:!1,currentParentGrids:{continent:!1,regions:!1,territories:!1,zones:!1},lastTerritoryPriceUpdate:0,objectives:{currentGroup:0,objectiveGroups:[]},stats:{health:1,sickness:0,happiness:1,morale:1,malnourishment:0,toxicity:0,productivity:1,connectivity:0,products:0,maintenance:1,infamy:0,notoriety:0,diplomacy:0},currentCorpusSize:1,jobs:{explorer:{workers:0,lastCycle:0,lastDisplayUpdate:0,region:!1,territory:!1,working:!1},builder:{workers:0,lastCycle:0,working:!0},factory_worker:{workers:0,lastCycle:0,working:!0},teacher:{workers:0,lastCycle:0,working:!0},doctor:{workers:0,lastCycle:0,working:!0},fireman:{workers:0,lastCycle:0,working:!0},policeman:{workers:0,lastCycle:0,working:!0},researcher:{workers:0,lastCycle:0,working:!0},diplomat:{workers:0,lastCycle:0,working:!0}},resources:{population:{total:10,lastCycle:0},citizens:{total:10,lastCycle:0,lastCycle2:0,idle:10},tiles:{total:0,lastCycle:0,amount:0},mining_deposits:{total:0,lastCycle:0,amount:0},water_sources:{total:0,lastCycle:0,amount:0},knowledge:{total:0,lastCycle:0,amount:0},research_points:{amount:0,total:0},perk_points:{amount:0,total:0,pending:0,in_research:0,lastCycle:0},food:{amount:1e3,lastCycle:0,workers:0,working:!1,renew:{avl:0,max:0,rate:0},extra:0,price_history:[],demand:0,supply:0,baseDSratio:.5,minPrice:0,maxPrice:0},water:{amount:1e3,lastCycle:0,workers:0,working:!1,renew:{avl:0,max:0,rate:0},extra:0,price_history:[],demand:0,supply:0,baseDSratio:.5,minPrice:0,maxPrice:0},wood:{amount:0,lastCycle:0,workers:0,working:!1,renew:{avl:0,max:0,rate:0},extra:0,price_history:[],demand:0,supply:0,baseDSratio:.5,minPrice:0,maxPrice:0},energy:{amount:0,lastCycle:0,workers:0,working:!1,renew:{avl:0,max:0,rate:0},extra:0,price_history:[],demand:0,supply:0,baseDSratio:.5,minPrice:0,maxPrice:0},gold:{amount:0,lastCycle:0,workers:0,working:!1,renew:{avl:0,max:0,rate:0},extra:0},stone:{amount:0,renew:{avl:0,max:0,rate:0},extra:0,price_history:[],demand:0,supply:0,baseDSratio:.5,minPrice:0,maxPrice:0},iron:{amount:0,renew:{avl:0,max:0,rate:0},extra:0,price_history:[],demand:0,supply:0,baseDSratio:.5,minPrice:0,maxPrice:0},uranium:{amount:0,lastCycle:0,renew:{avl:0,max:0,rate:0},extra:0,price_history:[],demand:0,supply:0,baseDSratio:.5,minPrice:0,maxPrice:0}},buildings:{house:{avl:0},road:{avl:0},farm:{avl:0,eff:0,workers:0},cattle_farm:{avl:0,eff:0,workers:0},genetic_farm:{avl:0,eff:0,workers:0},pump_manual:{avl:0,eff:0,workers:0},pump_automated:{avl:0,eff:0,workers:0},rain_collector:{avl:0,eff:0},filtering_station:{avl:0},planted_forest:{avl:0,eff:0,workers:0},pine_forest:{avl:0,eff:0,workers:0},genetic_forest:{avl:0,eff:0,workers:0},thermal_plant:{avl:0,eff:0,workers:0},solar_panels:{avl:0,eff:0},hydro_plant:{avl:0,eff:0,workers:0},nuclear_plant:{avl:0,eff:0,workers:0},mining_plant:[],school:{avl:0},hospital:{avl:0},fire_station:{avl:0},police_station:{avl:0},research_center:{avl:0},embassy:{avl:0},factory:[],war_factory:[]},marketData:{lastCycle:0,lastDemandCycle:0},tradeHistory:[],products:{clothing:{avl:0,price_history:[],demand:0,supply:0,baseDSratio:.5,minPrice:0,maxPrice:0},tv:{avl:0,price_history:[],demand:0,supply:0,baseDSratio:.5,minPrice:0,maxPrice:0},computer:{avl:0,price_history:[],demand:0,supply:0,baseDSratio:.5,minPrice:0,maxPrice:0},phone:{avl:0,price_history:[],demand:0,supply:0,baseDSratio:.5,minPrice:0,maxPrice:0},car:{avl:0,price_history:[],demand:0,supply:0,baseDSratio:.5,minPrice:0,maxPrice:0}},events:{lastCycle:0,fireNextEvent:0,list:[]},continentRewards:[],startingBoosts:{},additionalBoosts:{},researchUpgrades:{},buildQueue:[],produceQueue:[],corpuses:[],gameObjects:[],nextPartID:3,parts:[{id:1,used:!1,type:"hull",subType:"allround",rarityID:0,stats:{max_hp:{min:100,max:100},dmg:{min:3,max:5},armor:{min:0,max:0},deflection:{min:0,max:0}},costs:{iron:170,energy:110},crew:3},{id:2,ammoType:"regular",used:!1,type:"turret",subType:"allround",rarityID:0,stats:{dmg:{min:3,max:9},armor_piercing:{min:0,max:0},accuracy:{min:70,max:70}},costs:{iron:60,energy:60},crew:1}],units:{},unitFormation:[],partsPending:[],formationCrewTotal:0,colonies:{military:{},economic:{}},attacks:{},defenses:{}};function setChildrenPositions(e){if(e.length<=0)return;var t=[];let a,s;for(var r=0;r<e.length;r++){a=gameConstants.researchUpgradesNodes[e[r]],a.x=a.parentNode.x+a.xP,a.y=a.parentNode.y+a.yP;for(var i=0;i<a.children.length;i++)s=gameConstants.researchUpgradesNodes[a.children[i]],s.parentNode=a;t=t.concat(a.children)}depth++,setChildrenPositions(t)}function updateNodeObjectPositions(){$.each(game.data.researchNodes,(function(e,t){var a=t.nodeRef;t.x=a.x,t.y=a.y}))}$.each(gameConstants.resources,(function(e,t){void 0!==t.buildings&&(gameConstants.resourceBuildings=gameConstants.resourceBuildings.concat(t.buildings))}));var globalCollidableNodesIDs=[];function getCollidableNodes(e){var t=[];return!1===e.startNodePos&&$.each(game.const.researchUpgradesNodes,(function(a,s){s.upgradeID!==e.upgradeID&&s.upgradeID!==e.parentNode.upgradeID&&(isAncestor(e,s)||t.push(s))})),t}function getNodeIDs(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a].upgradeID);return t}function isAncestor(e,t){for(var a=t.parentNode;void 0!==a&&void 0!==a.upgradeID;){if(a.upgradeID===e.upgradeID)return!0;a=a.parentNode}return!1}function changeNodeParent(e,t){e.xP=e.x-t.x,e.yP=e.y-t.y;var a=game.const.researchUpgradesNodes[e.parentNode.upgradeID].children.indexOf(e.upgradeID);game.const.researchUpgradesNodes[e.parentNode.upgradeID].children.splice(a,1),game.const.researchUpgradesNodes[t.upgradeID].children.push(e.upgradeID),delete e.parentNode,e.parentNode=t,updateBranchMainCategory([e.upgradeID],game.const.researchUpgrades[t.upgradeID].mainCategory)}function updateBranchMainCategory(e,t){if(!(e.length<=0)){for(var a,s=[],r=0;r<e.length;r++)a=gameConstants.researchUpgradesNodes[e[r]],game.const.researchUpgrades[a.upgradeID].mainCategory=t,s=s.concat(a.children);updateBranchMainCategory(s,t)}}function cleanUpResearchUpgradesConstForExport(){var e={};return $.each(game.const.researchUpgradesNodes,(function(t,a){e[t]={upgradeID:a.upgradeID,tag:a.tag,xP:a.xP,yP:a.yP,x:0,y:0,w:a.w,h:a.h,startNodePos:a.startNodePos,children:a.children}})),e}function exportResearchNodeChanges(){var e={researchUpgrades:game.const.researchUpgrades,researchUpgradesNodes:cleanUpResearchUpgradesConstForExport()};console.save(e,"research_upgrade_changes.js")}!function(e){e.save=function(t,a){if(t){a||(a="console.json"),"object"==typeof t&&(t=JSON.stringify(t,void 0,4));var s=new Blob([t],{type:"text/json"}),r=document.createEvent("MouseEvents"),i=document.createElement("a");i.download=a,i.href=window.URL.createObjectURL(s),i.dataset.downloadurl=["text/json",i.download,i.href].join(":"),r.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(r)}else e.error("Console.save: No data")}}(console);var forceUpdateUpgrades={};$.each(gameConstants.researchUpgrades,(function(e,t){void 0!==t.force&&!0===t.force&&(forceUpdateUpgrades[e]=$.extend(!0,{},t))}));var forceUpdateNodes={};$.each(gameConstants.researchUpgradesNodes,(function(e,t){void 0!==t.force&&!0===t.force&&(forceUpdateNodes[e]=$.extend(!0,{},t))}));var forceChildrenNodes={};$.each(gameConstants.researchUpgradesNodes,(function(e,t){void 0!==t.forceChildren&&!0===t.forceChildren&&(forceChildrenNodes[e]=$.extend(!0,{},t))}));var adjsutedResearchUpgrades={0:{id:0,mainCategory:"resources",category:"building_unlock",type:"resources",subType:"water",subID:"pump_manual",cost:1,extraDesc:"Unlock building:"},1:{id:1,mainCategory:"resources",category:"building_unlock",type:"resources",subType:"water",subID:"pump_automated",cost:10,extraDesc:"Unlock building:",requires:[{type:"research_upgrade",subType:5,reqMet:!0}]},2:{id:2,mainCategory:"resources",category:"building_unlock",type:"resources",subType:"food",subID:"farm",cost:5,extraDesc:"Unlock building:"},3:{id:3,mainCategory:"resources",category:"building_unlock",type:"resources",subType:"wood",subID:"planted_forest",cost:5,extraDesc:"Unlock building:"},4:{id:4,mainCategory:"resources",category:"building_unlock",type:"resources",subType:"food",subID:"cattle_farm",cost:5,extraDesc:"Unlock building:",requires:[{type:"research_upgrade",subType:1,reqMet:!0}]},5:{id:5,mainCategory:"resources",category:"building_unlock",type:"resources",subType:"mining",subID:"mining_plant",cost:50,extraDesc:"Unlock building:"},6:{id:6,mainCategory:"resources",category:"building_unlock",type:"effect",subType:"water",subID:"filtering_station",cost:100,extraDesc:"Unlock building:"},7:{id:7,mainCategory:"resources",category:"building_unlock",type:"resources",subType:"food",subID:"genetic_farm",cost:50,extraDesc:"Unlock building:",requires:[{type:"research_upgrade",subType:5,reqMet:!0}]},8:{id:8,mainCategory:"resources",category:"building_unlock",type:"resources",subType:"wood",subID:"genetic_forest",cost:50,extraDesc:"Unlock building:",requires:[{type:"research_upgrade",subType:5,reqMet:!0}]},9:{id:9,mainCategory:"resources",category:"building_unlock",type:"resources",subType:"energy",subID:"hydro_plant",cost:80,extraDesc:"Unlock building:"},10:{id:10,mainCategory:"resources",category:"building_unlock",type:"resources",subType:"energy",subID:"nuclear_plant",cost:500,extraDesc:"Unlock building:"},11:{id:11,mainCategory:"resources",category:"building_unlock",type:"resources",subType:"energy",subID:"thermal_plant",cost:50,extraDesc:"Unlock building:",requires:[{type:"research_upgrade",subType:5,reqMet:!0}]},12:{id:12,mainCategory:"resources",category:"building_unlock",type:"resources",subType:"energy",subID:"solar_panels",cost:80,extraDesc:"Unlock building:"},13:{id:13,mainCategory:"resources",category:"building_unlock",type:"resources",subType:"wood",subID:"pine_forest",cost:50,extraDesc:"Unlock building:"},14:{id:14,mainCategory:"resources",category:"building_unlock",type:"resources",subType:"water",subID:"rain_collector",cost:30,extraDesc:"Unlock building:"},20:{id:20,mainCategory:"resources",category:"building_bonus",type:"effect",subType:"water",subID:"rain_collector",cost:1,extraDesc:"Bonus production",buyLimit:5,effects:[{type:"gain_mx",amount:.05}]},21:{id:21,mainCategory:"resources",category:"building_bonus",type:"effect",subType:"energy",subID:"hydro_plant",cost:1,extraDesc:"Bonus production",buyLimit:5,effects:[{type:"gain_mx",amount:.05}]},22:{id:22,mainCategory:"resources",category:"building_bonus",type:"effect",subType:"wood",subID:"planted_forest",cost:1,extraDesc:"Bonus production",buyLimit:5,effects:[{type:"gain_mx",amount:.05}]},23:{id:23,mainCategory:"resources",category:"building_bonus",type:"effect",subType:"wood",subID:"pine_forest",cost:1,extraDesc:"Bonus production",buyLimit:5,effects:[{type:"gain_mx",amount:.05}]},24:{id:24,mainCategory:"resources",category:"building_bonus",type:"effect",subType:"wood",subID:"genetic_forest",cost:1,extraDesc:"Bonus production",buyLimit:5,effects:[{type:"gain_mx",amount:.05}]},25:{id:25,mainCategory:"resources",category:"building_bonus",type:"effect",subType:"energy",subID:"thermal_plant",cost:1,extraDesc:"Bonus production",buyLimit:5,effects:[{type:"gain_mx",amount:.05}]},26:{id:26,mainCategory:"resources",category:"building_bonus",type:"effect",subType:"energy",subID:"solar_panels",cost:1,extraDesc:"Bonus production",buyLimit:5,effects:[{type:"gain_mx",amount:.05}]},27:{id:27,mainCategory:"resources",category:"building_bonus",type:"effect",subType:"energy",subID:"nuclear_plant",cost:1,extraDesc:"Bonus production",buyLimit:5,effects:[{type:"gain_mx",amount:.05}]},28:{id:28,mainCategory:"resources",category:"building_bonus",type:"effect",subType:"food",subID:"farm",cost:1,extraDesc:"Bonus production",buyLimit:5,effects:[{type:"gain_mx",amount:.05}]},29:{id:29,mainCategory:"resources",category:"building_bonus",type:"effect",subType:"food",subID:"cattle_farm",cost:1,extraDesc:"Bonus production",buyLimit:5,effects:[{type:"gain_mx",amount:.05}]},30:{id:30,mainCategory:"resources",category:"building_bonus",type:"effect",subType:"food",subID:"genetic_farm",cost:1,extraDesc:"Bonus production",buyLimit:5,effects:[{type:"gain_mx",amount:.05}]},40:{id:40,mainCategory:"resources",category:"building_upgrade",type:"effect",subType:"mining",subID:"mining_plant",cost:1,extraDesc:"Mining Plant Upgrade Lvl 1",effects:[{type:"building_upgrade",amount:1}],requires:[{type:"research_upgrade",subType:11}]},41:{id:41,mainCategory:"resources",category:"building_upgrade",type:"effect",subType:"mining",subID:"mining_plant",cost:1,extraDesc:"Mining Plant Upgrade Lvl 2",effects:[{type:"building_upgrade",amount:2}]},42:{force:!0,id:42,mainCategory:"war",category:"building_upgrade",type:"effect",subType:"war_factory",subID:"war_factory",cost:1,extraDesc:"War Factory Upgrade Lvl 1",effects:[{type:"building_upgrade",amount:1}]},43:{force:!0,id:43,mainCategory:"war",category:"building_upgrade",type:"effect",subType:"war_factory",subID:"war_factory",cost:1,extraDesc:"War Factory Upgrade Lvl 2",effects:[{type:"building_upgrade",amount:2}]},44:{force:!0,id:44,mainCategory:"economy",category:"building_upgrade",type:"effect",subType:"factory",subID:"factory",cost:1,extraDesc:"Factory Upgrade Lvl 1",effects:[{type:"building_upgrade",amount:1}]},45:{force:!0,id:45,mainCategory:"economy",category:"building_upgrade",type:"effect",subType:"factory",subID:"factory",cost:1,extraDesc:"Factory Upgrade Lvl 2",effects:[{type:"building_upgrade",amount:2}]},50:{force:!0,id:50,mainCategory:"resources",category:"building_limit",type:"effect",subType:"mining_plant",subID:"mining_plant",cost:1,extraDesc:"Mining Plant Limit",effects:[{type:"building_limit",amount:1}]},51:{force:!0,id:51,mainCategory:"economy",category:"building_limit",type:"effect",subType:"factory",subID:"factory",cost:1,extraDesc:"Factory Buildings Limit",effects:[{type:"building_limit",amount:1}]},100:{id:100,mainCategory:"social",category:"building_unlock",type:"social",subType:"house",subID:"house",cost:1,extraDesc:"Unlock building:"},101:{id:101,mainCategory:"social",category:"building_unlock",type:"social",subType:"road",subID:"road",cost:10,extraDesc:"Unlock building:",requires:[{type:"research_upgrade",subType:5,reqMet:!0}]},102:{id:102,mainCategory:"social",category:"building_unlock",type:"social",subType:"school",subID:"school",cost:20,extraDesc:"Unlock building:",requires:[{type:"research_upgrade",subType:1,reqMet:!0},{type:"research_upgrade",subType:5,reqMet:!0}]},103:{id:103,mainCategory:"social",category:"building_unlock",type:"social",subType:"hospital",subID:"hospital",cost:50,extraDesc:"Unlock building:"},104:{id:104,mainCategory:"social",category:"building_unlock",type:"social",subType:"fire_station",subID:"fire_station",cost:50,extraDesc:"Unlock building:"},105:{id:105,mainCategory:"social",category:"building_unlock",type:"social",subType:"police_station",subID:"police_station",cost:50,extraDesc:"Unlock building:"},106:{id:106,mainCategory:"social",category:"building_unlock",type:"social",subType:"research_center",subID:"research_center",cost:100,extraDesc:"Unlock building:"},120:{id:120,mainCategory:"social",category:"stat_bonus",type:"social",subType:"stat_bonus",subID:"population_gain",cost:1,desc:"Increases max possible daily population growth.",extraDesc:"Faster pop. gain",effects:[{type:"population_gain",amount:.05}],requires:[{type:"total_citizens",subType:500,reqMet:!1}]},130:{id:130,mainCategory:"social",category:"stat_bonus",type:"social",subType:"stat_bonus",subID:"doctor",cost:1,desc:"Increases max possible daily population growth.",extraDesc:"Coverage increase",buyLimit:5,effects:[{type:"coverage_increase",amount:10}]},131:{id:131,mainCategory:"social",category:"stat_bonus",type:"social",subType:"stat_bonus",subID:"policeman",cost:1,desc:"Increases max possible daily population growth.",extraDesc:"Coverage increase",buyLimit:5,effects:[{type:"coverage_increase",amount:50}]},132:{id:132,mainCategory:"social",category:"stat_bonus",type:"social",subType:"stat_bonus",subID:"fireman",cost:1,desc:"Increases max possible daily population growth.",extraDesc:"Coverage increase",buyLimit:5,effects:[{type:"coverage_increase",amount:50}]},133:{id:133,mainCategory:"social",category:"stat_bonus",type:"social",subType:"stat_bonus",subID:"teacher",cost:1,desc:"Increases knowledge gain bonus from citizens",extraDesc:"Knowledge gain bonus",buyLimit:5,effects:[{type:"gain_mx",amount:.1}]},134:{id:134,mainCategory:"social",category:"stat_bonus",type:"social",subType:"stat_bonus",subID:"researcher",cost:1,desc:"Increases knowledge gained by researchers",extraDesc:"Knowledge gain bonus",buyLimit:5,effects:[{type:"gain_mx",amount:.1}]},200:{id:200,mainCategory:"economy",category:"building_unlock",type:"economic",subType:"factory",subID:"factory",cost:1e3,extraDesc:"Unlock building:",requires:[{type:"research_upgrade",subType:5,reqMet:!0},{type:"research_upgrade",subType:11,reqMet:!0},{type:"total_citizens",subType:2e3,reqMet:!1}]},201:{id:201,mainCategory:"economy",category:"product_unlock",type:"economic",subType:"computer",subID:"computer",cost:100,extraDesc:"Unlock product:"},202:{id:202,mainCategory:"economy",category:"product_unlock",type:"economic",subType:"car",subID:"car",cost:500,extraDesc:"Unlock product:"},204:{id:204,mainCategory:"economy",category:"product_unlock",type:"economic",subType:"tv",subID:"tv",cost:200,extraDesc:"Unlock product:"},205:{id:205,mainCategory:"economy",category:"product_unlock",type:"economic",subType:"phone",subID:"phone",cost:100,extraDesc:"Unlock product:"},220:{id:220,mainCategory:"economy",category:"resource_unlock",type:"economic",subType:"resources",subID:"water",cost:100,extraDesc:"Unlock ability to trade water:",effects:[{type:"market_unlock"}]},221:{id:221,mainCategory:"economy",category:"resource_unlock",type:"economic",subType:"resources",subID:"food",cost:100,extraDesc:"Unlock ability to trade food:",effects:[{type:"market_unlock"}]},222:{id:222,mainCategory:"economy",category:"resource_unlock",type:"economic",subType:"resources",subID:"wood",cost:100,extraDesc:"Unlock ability to trade wood:",effects:[{type:"market_unlock"}]},223:{id:223,mainCategory:"economy",category:"resource_unlock",type:"economic",subType:"resources",subID:"energy",cost:100,extraDesc:"Unlock ability to trade energy:",effects:[{type:"market_unlock"}]},224:{id:224,mainCategory:"economy",category:"resource_unlock",type:"economic",subType:"resources",subID:"stone",cost:100,extraDesc:"Unlock ability to trade stone:",effects:[{type:"market_unlock"}]},225:{id:225,mainCategory:"economy",category:"resource_unlock",type:"economic",subType:"resources",subID:"iron",cost:100,extraDesc:"Unlock ability to trade iron:",effects:[{type:"market_unlock"}]},226:{id:226,mainCategory:"economy",category:"resource_unlock",type:"economic",subType:"resources",subID:"uranium",cost:100,extraDesc:"Unlock ability to trade uranium:",effects:[{type:"market_unlock"}]},250:{id:250,mainCategory:"economy",category:"actions",type:"economic",subType:"buy_territories",subID:"buy_territories",cost:100,extraDesc:"Unlock ability to buy territories",effects:[{type:"buy_territories"}]},300:{id:300,mainCategory:"war",category:"building_unlock",type:"army",subType:"war_factory",subID:"war_factory",cost:100,extraDesc:"Unlock building:",requires:[{type:"research_upgrade",subType:5,reqMet:!0},{type:"research_upgrade",subType:11,reqMet:!0},{type:"total_citizens",subType:1e3,reqMet:!1}]},310:{id:310,mainCategory:"war",category:"timelapse_speed",type:"automation",subType:"timelapse_speed",subID:"timelapse",cost:100,extraDesc:"Unlock timelapse speed",amount:3},311:{id:311,mainCategory:"war",category:"timelapse_speed",type:"automation",subType:"timelapse_speed",subID:"timelapse",cost:100,extraDesc:"Unlock timelapse speed",amount:5},312:{id:312,mainCategory:"war",category:"timelapse_speed",type:"automation",subType:"timelapse_speed",subID:"timelapse",cost:100,extraDesc:"Unlock timelapse speed",amount:10},313:{id:313,mainCategory:"war",category:"timelapse_speed",type:"automation",subType:"timelapse_speed",subID:"timelapse",cost:100,extraDesc:"Unlock timelapse speed",amount:20},320:{id:320,mainCategory:"war",category:"timelapse_config",type:"automation",subType:"timelapse_config",subID:"auto_rations",cost:100,extraDesc:"Automate rations",effects:[{type:"auto_rations"}]},321:{id:321,mainCategory:"war",category:"timelapse_config",type:"automation",subType:"timelapse_config",subID:"health_drop",cost:100,extraDesc:"Detect health drop",effects:[{type:"health_drop"}]},322:{id:322,mainCategory:"war",category:"timelapse_config",type:"automation",subType:"timelapse_config",subID:"productivity_drop",cost:100,extraDesc:"Detect productivity drop",effects:[{type:"productivity_drop"}]}},adjustedResearchUpgradeNodes={0:{upgradeID:0,tag:"0 upgrade",xP:-38,yP:-137,x:0,y:0,w:80,h:80,startNodePos:1,children:[1,2,3]},1:{upgradeID:1,tag:"1 upgrade",xP:-258,yP:-106,x:0,y:0,w:64,h:64,startNodePos:!1,children:[14,9]},2:{upgradeID:2,tag:"2 upgrade",xP:245,yP:-102,x:0,y:0,w:80,h:80,startNodePos:!1,children:[28,4,7]},3:{upgradeID:3,tag:"3 upgrade",xP:1,yP:-229,x:0,y:0,w:80,h:80,startNodePos:!1,children:[13,22,5,11]},4:{upgradeID:4,tag:"4 upgrade",xP:220,yP:-89,x:0,y:0,w:64,h:64,startNodePos:!1,children:[29]},5:{upgradeID:5,tag:"5 upgrade",xP:-1,yP:-174,x:0,y:0,w:80,h:80,startNodePos:!1,children:[40,50]},6:{upgradeID:6,tag:"6 upgrade",xP:-194,yP:-108,x:0,y:0,w:64,h:64,startNodePos:!1,children:[]},7:{upgradeID:7,tag:"7 upgrade",xP:223,yP:8,x:0,y:0,w:64,h:64,startNodePos:!1,children:[30]},8:{upgradeID:8,tag:"8 upgrade",xP:-228,yP:-100,x:0,y:0,w:64,h:64,startNodePos:!1,children:[24]},9:{upgradeID:9,tag:"9 upgrade",xP:-221,yP:-3,x:0,y:0,w:64,h:64,startNodePos:!1,children:[21]},10:{upgradeID:10,tag:"10 upgrade",xP:213,yP:-92,x:0,y:0,w:64,h:64,startNodePos:!1,children:[27]},11:{upgradeID:11,tag:"11 upgrade",xP:235,yP:-108,x:0,y:0,w:80,h:80,startNodePos:!1,children:[25,12,10]},12:{upgradeID:12,tag:"12 upgrade",xP:8,yP:-131,x:0,y:0,w:64,h:64,startNodePos:!1,children:[26]},13:{upgradeID:13,tag:"13 upgrade",xP:-255,yP:-111,x:0,y:0,w:64,h:64,startNodePos:!1,children:[23,8]},14:{upgradeID:14,tag:"14 upgrade",xP:-221,yP:-102,x:0,y:0,w:64,h:64,startNodePos:!1,children:[6,20]},20:{upgradeID:20,tag:"20 upgrade",xP:-77,yP:10,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},21:{upgradeID:21,tag:"21 upgrade",xP:-77,yP:11,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},22:{upgradeID:22,tag:"22 upgrade",xP:-79,yP:63,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},23:{upgradeID:23,tag:"23 upgrade",xP:15,yP:94,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},24:{upgradeID:24,tag:"24 upgrade",xP:13,yP:94,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},25:{upgradeID:25,tag:"25 upgrade",xP:22,yP:102,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},26:{upgradeID:26,tag:"26 upgrade",xP:102,yP:-34,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},27:{upgradeID:27,tag:"27 upgrade",xP:14,yP:97,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},28:{upgradeID:28,tag:"28 upgrade",xP:21,yP:111,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},29:{upgradeID:29,tag:"29 upgrade",xP:99,yP:14,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},30:{upgradeID:30,tag:"30 upgrade",xP:9,yP:93,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},40:{upgradeID:40,tag:"40 upgrade",xP:6,yP:-99,x:0,y:0,w:64,h:64,startNodePos:!1,children:[41]},41:{upgradeID:41,tag:"41 upgrade",xP:-3,yP:-100,x:0,y:0,w:64,h:64,startNodePos:!1,children:[]},42:{upgradeID:42,tag:"42 upgrade",xP:-107,yP:123,x:0,y:0,w:40,h:40,startNodePos:!1,children:[43]},43:{upgradeID:43,tag:"43 upgrade",xP:-111,yP:88,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},44:{upgradeID:44,tag:"44 upgrade",xP:82,yP:161,x:0,y:0,w:40,h:40,startNodePos:!1,children:[45]},45:{upgradeID:45,tag:"45 upgrade",xP:-42,yP:124,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},50:{upgradeID:50,tag:"50 upgrade",xP:125,yP:-60,x:0,y:0,w:64,h:64,startNodePos:!1,children:[]},51:{upgradeID:51,tag:"51 upgrade",xP:-59,yP:146,x:0,y:0,w:64,h:64,startNodePos:!1,children:[250]},100:{upgradeID:100,tag:"100 upgrade",xP:108,yP:-42,x:0,y:0,w:80,h:80,startNodePos:2,children:[120,101,102]},101:{upgradeID:101,tag:"101 upgrade",xP:213,yP:6,x:0,y:0,w:64,h:64,startNodePos:!1,children:[]},102:{upgradeID:102,tag:"102 upgrade",xP:206,yP:99,x:0,y:0,w:64,h:64,startNodePos:!1,children:[103,133,106]},103:{upgradeID:103,tag:"103 upgrade",xP:-107,yP:49,x:0,y:0,w:64,h:64,startNodePos:!1,children:[104,130]},104:{upgradeID:104,tag:"104 upgrade",xP:1,yP:89,x:0,y:0,w:64,h:64,startNodePos:!1,children:[105,132]},105:{upgradeID:105,tag:"105 upgrade",xP:3,yP:104,x:0,y:0,w:64,h:64,startNodePos:!1,children:[131]},106:{upgradeID:106,tag:"106 upgrade",xP:185,yP:88,x:0,y:0,w:64,h:64,startNodePos:!1,children:[134]},120:{upgradeID:120,tag:"120 upgrade",xP:19,yP:-75,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},130:{upgradeID:130,tag:"130 upgrade",xP:-76,yP:13,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},131:{upgradeID:131,tag:"131 upgrade",xP:-79,yP:11,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},132:{upgradeID:132,tag:"132 upgrade",xP:-81,yP:12,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},133:{upgradeID:133,tag:"133 upgrade",xP:97,yP:9,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},134:{upgradeID:134,tag:"134 upgrade",xP:-85,yP:12,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},200:{upgradeID:200,tag:"200 upgrade",xP:-205,yP:-41,x:0,y:0,w:80,h:80,startNodePos:4,children:[204,44,220,51]},201:{upgradeID:201,tag:"201 upgrade",xP:-184,yP:140,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},202:{upgradeID:202,tag:"202 upgrade",xP:-50,yP:125,x:0,y:0,w:64,h:64,startNodePos:!1,children:[]},204:{upgradeID:204,tag:"204 upgrade",xP:-211,yP:145,x:0,y:0,w:64,h:64,startNodePos:!1,children:[201,205,202]},205:{upgradeID:205,tag:"205 upgrade",xP:-187,yP:18,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},220:{upgradeID:220,tag:"220 upgrade",xP:9,yP:-122,x:0,y:0,w:64,h:64,startNodePos:!1,children:[221,224]},221:{upgradeID:221,tag:"221 upgrade",xP:-213,yP:6,x:0,y:0,w:64,h:64,startNodePos:!1,children:[222]},222:{upgradeID:222,tag:"222 upgrade",xP:-199,yP:14,x:0,y:0,w:40,h:40,startNodePos:!1,children:[223]},223:{upgradeID:223,tag:"223 upgrade",xP:-200,yP:0,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},224:{upgradeID:224,tag:"224 upgrade",xP:-209,yP:131,x:0,y:0,w:40,h:40,startNodePos:!1,children:[225]},225:{upgradeID:225,tag:"225 upgrade",xP:-200,yP:2,x:0,y:0,w:40,h:40,startNodePos:!1,children:[226]},226:{upgradeID:223,tag:"223 upgrade",xP:-200,yP:0,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},250:{upgradeID:250,tag:"250 upgrade",xP:-64,yP:116,x:0,y:0,w:80,h:80,startNodePos:!1,children:[]},300:{upgradeID:300,tag:"300 upgrade",xP:-38,yP:99,x:0,y:0,w:80,h:80,startNodePos:3,children:[42,310]},310:{upgradeID:310,tag:"310 upgrade",xP:254,yP:207,x:0,y:0,w:80,h:80,startNodePos:!1,children:[311,320]},311:{upgradeID:311,tag:"311 upgrade",xP:22,yP:116,x:0,y:0,w:40,h:40,startNodePos:!1,children:[312]},312:{upgradeID:312,tag:"312 upgrade",xP:2,yP:103,x:0,y:0,w:40,h:40,startNodePos:!1,children:[313]},313:{upgradeID:313,tag:"313 upgrade",xP:0,yP:102,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]},320:{upgradeID:320,tag:"320 upgrade",xP:-98,yP:117,x:0,y:0,w:40,h:40,startNodePos:!1,children:[321]},321:{upgradeID:321,tag:"321 upgrade",xP:0,yP:100,x:0,y:0,w:40,h:40,startNodePos:!1,children:[322]},322:{upgradeID:322,tag:"322 upgrade",xP:0,yP:100,x:0,y:0,w:40,h:40,startNodePos:!1,children:[]}};$.each(adjsutedResearchUpgrades,(function(e,t){gameConstants.researchUpgrades[e].mainCategory=t.mainCategory})),$.each(adjustedResearchUpgradeNodes,(function(e,t){gameConstants.researchUpgradesNodes[e].xP=t.xP,gameConstants.researchUpgradesNodes[e].yP=t.yP,gameConstants.researchUpgradesNodes[e].children=t.children})),$.each(forceChildrenNodes,(function(e,t){gameConstants.researchUpgradesNodes[e].children=t.children})),jQuery.extend(gameConstants.researchUpgrades,forceUpdateUpgrades),jQuery.extend(gameConstants.researchUpgradesNodes,forceUpdateNodes);var depth=0,startingNodeList=[];$.each(gameConstants.researchUpgradesNodes,(function(e,t){if(!1!==t.startNodePos){var a=gameConstants.startNodes[t.startNodePos];t.x=a.x,t.y=a.y,t.parentNode=a,startingNodeList.push(e)}})),setChildrenPositions(startingNodeList),function(){for(var e=["webkit","moz","ms","o"],t=null,a=0;a<e.length&&!window.requestAnimationFrame&&!window.cancelAnimationFrame;a++)t=e[a],window.requestAnimationFrame=window.requestAnimationFrame||window[t+"RequestAnimationFrame"],window.cancelAnimationFrame=window.cancelAnimationFrame||window[t+"CancelAnimationFrame"]||window[t+"CancelRequestAnimationFrame"];if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var s=0;window.requestAnimationFrame=function(e,t){var a=window.performance.now(),r=Math.max(s+16,a);return setTimeout((function(){e(s=r)}),r-a)},window.cancelAnimationFrame=clearTimeout}}();var game,canvasRef,canvasCtx,platformPlayed,looptimeMX=1,lastPrint=0,lastLoopTime=0,fps=0,musicPlaying=!1,c=0,forceDrawAll=!0,forceUpdateDisplay=!1,tetaPehta="brezveze",playTime=0,parsedParentHostname="",counts=0,fpsLogs={maxLogs:100,data:[],lastDone:0},gameLoop={pausedLoop:!1,pausedLoopAt:!1,pausedGame:!1,pausedGameAt:!1,started:!1,gameLoopStarted:!1,tasks:[],start:function(){gameLoop.loop(performance.now()),gameLoop.started=!0},pause:function(e){var t=this.pausedGame;this.pausedGame=!this.pausedGame,isUndefined(e)||(this.pausedGame=e),t&&!this.pausedGame&&gameInited?fireThirdPartyAction("gameplay_start",{}):!t&&this.pausedGame&&gameInited&&fireThirdPartyAction("gameplay_stop",{}),!1===this.pausedGame?this.loop(performance.now()):this.pausedGameAt=performance.now()},pauseLoop:function(e){this.pausedLoop=!this.pausedLoop,isUndefined(e)||(this.pausedLoop=e),!1===this.pausedLoop?this.loop(performance.now()):this.pausedLoopAt=performance.now()},loop:function(e){if(!gameLoop.pausedLoop){var t=(e-lastLoopTime)/1e3;lastLoopTime=e,fpsLogs.data.push(e),fpsLogs.lastDone=e,fpsLogs.data.length>fpsLogs.maxLogs&&fpsLogs.data.splice(0,1);var a=1/((fpsLogs.lastDone-fpsLogs.data[0])/fpsLogs.data.length/1e3);t>0&&(fps=1/t,$("#fps span").html(fps.formatNumber(2,2)+"<br/>Avg: "+a.formatNumber(2,2))),lastPrint+1e3<e&&(lastPrint=e);var s=0;gameLoop.pausedGame||!1===gameLoop.pausedGameAt||(s=e-gameLoop.pausedGameAt);for(var r=0;r<gameLoop.tasks.length;r++){var i=gameLoop.tasks[r];if(!i.isGameLoop||!gameLoop.pausedGame){i.isGameLoop&&s>0&&e-i.lastLoopTime>5&&(i.lastLoopTime+=s);var o=e-i.lastLoopTime+i.reserve;if(i.minInterval<o){i.lastLoopTime=e;var n=Math.floor(o/i.minInterval);if(i.addReserve){var d=o%i.minInterval;i.reserve=d}var c=o-i.reserve;"function"==typeof game[i.callFunc]&&game[i.callFunc](c*looptimeMX,n)}}}gameLoop.pausedGame||!1===gameLoop.pausedGameAt||(gameLoop.pausedGameAt=!1),requestAnimationFrame(gameLoop.loop)}}};String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,(function(t,a){return void 0!==e[a]?e[a]:t}))}),String.prototype.ucwords=function(){return this.toLowerCase().replace(/\b[a-z]/g,(function(e){return e.toUpperCase()}))},String.prototype.formatNumber=function(e,t){return this.toString()};const defaultMinDecimals=0,defaultMaxDecimals=2;function krscenmaticek2(e){let t=e=>e.split("").map((e=>e.charCodeAt(0))),a=e=>("0"+Number(e).toString(16)).substr(-2),s=a=>t(e).reduce(((e,t)=>e^t),a);return e=>e.split("").map(t).map(s).map(a).join("")}function chunkSubstr(e,t,a){const s=Math.min(a,Math.ceil(e.length/t)),r=new Array(s);for(let a=0,i=0;a<s;++a,i+=t)r[a]=e.substr(i,t);return r}Number.prototype.formatNumber=function(e,t,a,s){if(void 0===a&&(a=!1),void 0===s&&(s=!1),!isFinite(this))return Number.MAX_VALUE.formatNumber(e,t,a);void 0===e&&(e=2),a&&e>=3&&(e=2),void 0===t&&(t=0),a&&t>=3&&(t=2),t>e&&(e=t);var r="";this>=0?s&&(r="+"):r="-";var i=Math.abs(this),o="SCI",n="us-US";const d=["","K","M","B","T","q","Q","s","S","O","N","d","U","D","!","@","#","$","%","^","&","*","e66","e69","e72","e75","e78","e81","e84","e87","e90","e93","e96","e99","e102","e105","e108","e111","e114","e117","e120","e123","e126","e129","e132","e135","e138","e141","e144","e147","e150","e153","e156","e159","e162","e165","e168","e171","e174","e177","e180","e183","e186","e189","e192","e195","e198","e201","e204","e207","e210","e213","e216","e219","e222","e225","e228","e231","e234","e237","e240","e243","e246","e249","e252","e255","e258","e261","e264","e267","e270","e273","e276","e279","e282","e285","e288","e291","e294","e297","e300","e303","e306","e309","e312"],c=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];var l,g,m,u,p="";if(i<Math.pow(10,12)&&(o="SUF"),i<=1e3)return i<1e3&&!a&&i%1==0?r+i.toString():r+i.toLocaleString(n,{minimumFractionDigits:t,maximumFractionDigits:e});switch(o){case"SUF":return l=Math.floor(Math.log(i)/Math.log(10)),g=Math.floor(l/3),r+(i/(m=Math.pow(10,3*g))).toLocaleString(n,{minimumFractionDigits:t,maximumFractionDigits:e})+d[g];case"ENG":return l=Math.floor(Math.log(i)/Math.log(10)),u=3*(g=Math.floor(l/3)),r+(i/(m=Math.pow(10,3*g))).toLocaleString(n,{minimumFractionDigits:t,maximumFractionDigits:e})+"e"+u;case"SCI":return l=Math.floor(Math.log(i)/Math.log(10)),r+(i/(m=Math.pow(10,l))).toLocaleString(n,{minimumFractionDigits:t,maximumFractionDigits:e})+"e"+l;case"AB":return l=Math.floor(Math.log(i)/Math.log(10))-12,g=Math.floor(l/3),m=Math.pow(10,3*g+12),p=c[Math.floor(g/26)]+c[Math.floor(g%26)],r+(i/m).toLocaleString(n,{minimumFractionDigits:t,maximumFractionDigits:e})+p}return"NaN"},audio={defaultVolumes:{},sound:{enabled:!0},music:{enabled:!0},backgroundIndex:!1,readAudio:function(e){return new Audio(assetPath+e)},stopAudio:function(e){e.duration>0&&!e.paused&&(e.pause(),e.currentTime=0)},playAudio:function(e,t){(t||this.soundEnabled())&&(this.stopAudio(e),e.play())},enableSound:function(){this.sound.enabled=!0},disableSound:function(){this.sound.enabled=!1},soundEnabled:function(){return this.sound.enabled},enableMusic:function(){this.music.enabled=!0},disableMusic:function(){this.music.enabled=!1},musicEnabled:function(){return this.music.enabled},stopSound:function(e){var t=this.sound.sounds[e];void 0!==t&&this.stopAudio(t[t[0]])},stopMusic:function(e){var t=this.music.musics[e];void 0!==t&&this.stopAudio(t[t[0]])},play:function(e,t){if(void 0!==e){var a=e[t];if(void 0===a)return;if(a.length<2)return;if(a.length>2){for(var s=a[0];s===a[0];)s=parseInt(Math.random()*(a.length-1))+1;"background"===t&&!1!==this.backgroundIndex&&(s=this.backgroundIndex),a[0]=s}var r=a[a[0]];r.duration>0&&!r.paused&&!r.ended&&r.readyState>2||this.playAudio(a[a[0]],!0)}},playSound:function(e){this.soundEnabled()&&this.play(this.sound.sounds,e)},playMusic:function(e){this.musicEnabled()&&this.play(this.music.musics,e)},stopAll:function(e){var t=e;for(var a in t)if(t.hasOwnProperty(a)&&"enabled"!==a){var s=t[a];this.stopAudio(s[s[0]])}},stopAllSounds:function(){this.stopAll(this.sound.sounds)},stopAllMusic:function(){this.stopAll(this.music.musics)},isPlaying:function(e,t){var a=e[t];if(a.length<2)return!1;var s=a[a[0]];return s.duration>0&&!s.paused&&!s.ended&&s.readyState>2},isSoundPlaying:function(e){return!!this.soundEnabled()&&this.isPlaying(this.sound.sounds,e)},isMusicPlaying:function(e){return!!this.musicEnabled()&&this.isPlaying(this.music.musics,e)},startBackgroundMusic:function(){if(!this.musicEnabled())return!1;this.isMusicPlaying("background")||this.playMusic("background")},forceStartBackgroundMusic:function(e){this.backgroundIndex=e,this.stopAllMusic(),this.startBackgroundMusic()},refreshSoundVolumes:function(e){var t,a,s;"sound"===e?(t=this.sound.sounds,a=audio.defaultSoundVolumes,s=game.data.settings.sound_level):(t=this.music.musics,a=audio.defaultMusicVolumes,s=game.data.settings.music_level);for(var r=Object.keys(a),i=Object.keys(t),o=0;o<i.length;o++)if(!r.includes(i[o]))if(Array.isArray(t[i[o]]))for(var n=1;n<t[i[o]].length;n++)t[i[o]][n].volume=s;else t[i[o]][1].volume=s;$.each(a,(function(e,r){if(Array.isArray(a[e]))for(var i=1;i<a[e].length;i++)t[e][i].volume=a[e][i]*s;else t[e][1].volume=a[e]*s}))},init:function(){var e=document.createElement("audio"),t=".mp3";for(e.canPlayType&&e.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/,"")&&(t=".ogg"),t=".mp3",this.sound.sounds={},this.sound.sounds.click=[1,this.readAudio("assets/sounds/496760__malle99__click-short0.mp3"),this.readAudio("assets/sounds/496760__malle99__click-short1.mp3"),this.readAudio("assets/sounds/496760__malle99__click-short2.mp3")],this.sound.sounds.tab=[1,this.readAudio("assets/sounds/256116__kwahmah-02__click"+t)],this.sound.sounds.up=[1,this.readAudio("assets/sounds/171697__nenadsimic_short1"+t),this.readAudio("assets/sounds/171697__nenadsimic-short2"+t),this.readAudio("assets/sounds/171697__nenadsimic-short3"+t)],this.sound.sounds.down=[1,this.readAudio("assets/sounds/339129__indigoray__beep-select-short0"+t),this.readAudio("assets/sounds/339129__indigoray__beep-select-short1"+t),this.readAudio("assets/sounds/339129__indigoray__beep-select-short2"+t)],this.sound.sounds.trash=[1,this.readAudio("assets/sounds/450779__kyles__brown-paper-bag"+t)],this.sound.sounds.metalicTrash=[1,this.readAudio("assets/sounds/450779__kyles__brown-paper-bag"+t)],this.sound.sounds.demolition=[1,this.readAudio("assets/sounds/182398__schafferdavid__demolition2"+t)],this.sound.sounds.inventory=[1,this.readAudio("assets/sounds/106109__thatjeffcarter__clanking-warehouse-2"+t)],this.sound.sounds.settings=[1,this.readAudio("assets/sounds/267910__chemicatz__bike"+t)],this.sound.sounds.objectiveCompleted=[1,this.readAudio("assets/sounds/50565__broumbroum"+t)],this.sound.sounds.positiveSound=[1,this.readAudio("assets/sounds/332629_item-pickup"+t)],this.sound.sounds.positiveSound2=[1,this.readAudio("assets/sounds/440582__nixeno__nixenofx"+t)],this.sound.sounds.popupBigSound=[1,this.readAudio("assets/sounds/244266__unfa"+t)],this.sound.sounds.enterSection=[1,this.readAudio("assets/sounds/244266__unfa__unfa"+t)],this.sound.sounds.corpusDestroyedExplosion=[1,this.readAudio("assets/sounds/156031__iwiploppenisse__explosion"+t)],this.sound.sounds.battleWon=[1,this.readAudio("assets/sounds/battle_win"+t)],this.sound.sounds.closePopup=[1,this.readAudio("assets/sounds/504146__joao-janz__opening-and-closing-dvd-case-1-3"+t)],this.sound.sounds.popupNotification=[1,this.readAudio("assets/sounds/415763__thebuilder15__doorbell-notification"+t)],this.sound.sounds.stockMarket=[1,this.readAudio("assets/sounds/35030__tuig__dutch-stock-exchange"+t)],this.sound.sounds.factory=[1,this.readAudio("assets/sounds/412204__editboy23__factory-with-robotic-arm-movements-and-metal-sounds"+t)],this.sound.sounds.productStock=[1,this.readAudio("assets/sounds/456906__imagery2__keyboard-typing-long-looping-gkz4ubvu"+t)],this.sound.sounds.randomizeTanks=[1,this.readAudio("assets/sounds/264981__renatalmar__sfx-magic"+t)],this.sound.sounds.battleLost=[1,this.readAudio("assets/sounds/409269__wertstahl__014-bad-news"+t)],this.sound.sounds.spotsFilled=[1,this.readAudio("assets/sounds/131660__bertrof__game-sound-correct"+t)],this.sound.sounds.ricochet=[1,this.readAudio("assets/sounds/96629__cgeffex__ricochet-metal"+t),this.readAudio("assets/sounds/96629__cgeffex__ricochet-metal-pitch"+t)],this.sound.sounds.tankDestroyed=[1,this.readAudio("assets/sounds/352143__unfa__clean-explosions"+t)],this.sound.sounds.clearFormation=[1,this.readAudio("assets/sounds/161878__joniheinonen__war-leopard-tank-passing-by-close-leopard-tank-passing-by-changes-gears-0001"+t)],this.sound.sounds.tankShot1=[1,this.readAudio("assets/sounds/161341__qubodup__howitzer"+t),this.readAudio("assets/sounds/161341__qubodup__howitzer-pitch0"+t),this.readAudio("assets/sounds/161341__qubodup__howitzer-cutted"+t)],this.sound.sounds.payBribe=[1,this.readAudio("assets/sounds/178097__madvedj__banknote-counter"+t)],this.sound.sounds.declineBribe=[1,this.readAudio("assets/sounds/478262__tannersound__decline-buzz-beep"+t)],this.sound.sounds.earthquake=[1,this.readAudio("assets/sounds/148002__loafdv__large-earthquake"+t)],this.sound.sounds.healthDrop=[1,this.readAudio("assets/sounds/485076__inspectorj__heartbeat-regular-single-01-01-loop(1)"+t)],this.sound.sounds.riot=[1,this.readAudio("assets/sounds/316640__bevibeldesign__angry-mob-loop"+t)],this.sound.sounds.fire=[1,this.readAudio("assets/sounds/405592__johnlavine333__siren-carpeted-hallway-direct"+t)],this.sound.sounds.winterGust=[1,this.readAudio("assets/sounds/474220__audioenabled__wind-winter"+t)],this.sound.sounds.fullyExplored=[1,this.readAudio("assets/sounds/511484__mattleschuck__success-bell"+t)],this.sound.sounds.radioactivity=[1,this.readAudio("assets/sounds/328381__leonelmail__radioactive-machine"+t)],this.sound.sounds.productivityDrop=[1,this.readAudio("assets/sounds/353925__dr-skitz__boo"+t)],this.sound.sounds.marketCrash=[1,this.readAudio("assets/sounds/466133__humanoide9000__victory-fanfare"+t)],this.sound.sounds.endBattleTotalUpg=[1,this.readAudio("assets/sounds/397355__plasterbrain__tada-fanfare-a"+t)],this.sound.sounds.extortion=[1,this.readAudio("assets/sounds/401707__inspectorj__dramatic-organ-b"+t)],this.sound.sounds.summer=[1,this.readAudio("assets/sounds/485355__inspectorj__motor-small-fast-front-04-01-loop"+t)],this.sound.sounds.typing=[1,this.readAudio("assets/sounds/18142_1464355089_1"+t),this.readAudio("assets/sounds/18142_1464355089_2"+t),this.readAudio("assets/sounds/18142_1464355089_3"+t),this.readAudio("assets/sounds/18142_1464355089_4"+t)],this.sound.sounds.typing_space=[1,this.readAudio("assets/sounds/18142_1464355089_1"+t)],this.sound.sounds.closePopup[1].volume=.4,this.sound.sounds.stockMarket[1].volume=.6,this.sound.sounds.factory[1].volume=.35,this.sound.sounds.corpusDestroyedExplosion[1].volume=.7,this.sound.sounds.spotsFilled[1].volume=.7,this.sound.sounds.summer[1].volume=.7,this.sound.sounds.positiveSound2[1].volume=.35,this.sound.sounds.objectiveCompleted[1].volume=.75,this.sound.sounds.productivityDrop[1].volume=.6,i=1;i<this.sound.sounds.typing.length;i++)this.sound.sounds.typing[i].volume=.3,this.sound.sounds.typing[i].volume=1;for(this.sound.sounds.typing_space[1].volume=.3,this.music.musics={},this.music.musics.background=[1,this.readAudio("assets/sounds/main_background"+t),this.readAudio("assets/sounds/timelapse_bg1"+t),this.readAudio("assets/sounds/crossing-the-chasm-by-kevin-macleod-from-filmmusic-io"+t)],i=1;i<this.music.musics.background.length;i++)this.music.musics.background[i].addEventListener("ended",function(){this.startBackgroundMusic(this)}.bind(this));for(this.defaultSoundVolumes={closePopup:.4,stockMarket:.6,factory:.35,corpusDestroyedExplosion:.7,spotsFilled:.7,summer:.7,positiveSound2:.35,objectiveCompleted:.75,productivityDrop:.6,typing_space:.3,typing:[]},i=1;i<this.sound.sounds.typing.length;i++)this.defaultSoundVolumes.typing[i]=.3;for(this.defaultMusicVolumes={},this.defaultMusicVolumes.background=[],i=1;i<this.music.musics.background.length;i++)this.defaultMusicVolumes.background[i]=.7,3===i&&(this.defaultMusicVolumes.background[i]=.25)}};var startResult="",joinedResult="";function krscenmaticek(e){let t=e=>e.split("").map((e=>e.charCodeAt(0))),a=e=>("0"+Number(e).toString(16)).substr(-2),s=a=>t(e).reduce(((e,t)=>e^t),a);function r(e,i){if(Array.isArray(e)||(joinedResult="",e=chunkSubstr(e,1e4,100)),e.length>0){var o=function(e){return e.split("").map(t).map(s).map(a).join("")}(e[0]);joinedResult+=o,e.shift(),e.length>0?setTimeout(r.bind(null,e,i),30):i(joinedResult)}else i(joinedResult)}return(e,t)=>r(e,t)}function tristokosmatih(e){let t=e=>e.split("").map((e=>e.charCodeAt(0))),a=(t(e),a=>t(e).reduce(((e,t)=>e^t),a));return e=>e.match(/.{1,2}/g).map((e=>parseInt(e,16))).map(a).map((e=>String.fromCharCode(e))).join("")}function Event(e){this.name=e,this.callbacks=[]}function Reactor(){this.events={}}function randomIntFromInterval(e,t){return e===t?e:Math.floor(Math.random()*(t-e+1)+e)}function randomFloatFromInterval(e,t){return e===t?e:Math.random()*(t-e)+e}function randomItemFromArray(e){return e[Math.floor(Math.random()*e.length)]}function randomPropertyFromObject(e){var t=Object.keys(e);return e[t[t.length*Math.random()<<0]]}function randomItemsFromArray(e,t){return e.sort((()=>.5-Math.random())).slice(0,t)}function randomItemsFromObject(e,t){let a=Object.keys(e).sort((()=>.5-Math.random())).slice(0,t);for(var s={},r=0;r<a.length;r++)s[a[r]]=e[a[r]];return s}function convertToDate(e,t,a){a=void 0!==a&&a;var s=new Date(e),r=s.getFullYear(),i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][s.getMonth()],o=s.getDate(),n=s.getHours(),d=o+" "+i+" "+r+(!1!==a?"<br />":" ")+n+":00";return t&&(d=o+" "+i+" "+n+":00"),d}function convertTime(e,t){var a=void 0!==t.pad&&t.pad,s=void 0!==t.minSize?t.minSize:"s",r=void 0!==t.formatLength?t.formatLength:"small",i=void 0!==t.rawData&&t.rawData;e<.1&&(e=0);var o={small:{d:"d",h:"h",m:"m",s:"s"},mid:{d:" days",h:" hours",m:"min",s:"sec"},long:{d:" days",h:" hours",m:"minutes",s:"seconds"}}[r],n=parseInt(e/86400),d=parseInt(e%86400/3600),c=parseInt(e%3600/60),l=(e=Math.floor(e%60*10)/10,"");return"small"!==r&&(l=" "),i?{d:str_pad(n,a),h:str_pad(d,a),m:str_pad(c,a),s:str_pad(e,a)}:l+=n>99?n+o.d:n>0||"h"===s?str_pad(n,a)+o.d+" "+str_pad(d,a)+o.h:d>0||"m"===s?str_pad(d,a)+o.h+" "+str_pad(c,a)+o.m:c>0?str_pad(c,a)+o.m+" "+str_pad(e,a)+o.s:str_pad(e,a)+o.s}function str_pad(e,t){return t?e:String("00"+e).slice(-2)}Event.prototype.registerCallback=function(e){this.callbacks.push(e)},Reactor.prototype.registerEvent=function(e){var t=new Event(e);this.events[e]=t},Reactor.prototype.dispatchEvent=function(e,t){this.events[e].callbacks.forEach((function(e){e(t)}))},Reactor.prototype.addEventListener=function(e,t){this.events[e].registerCallback(t)},String.prototype.parseNumber=function(){return Number(this.replace(/^\D+/g,""))},Number.prototype.roundTo=function(e){return Number(Math.round(this+"e"+e)+"e-"+e)};var isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function isUndefined(e){return void 0===e}function invalidNumberValue(e){return!!isNaN(e)||(void 0===e||(null===e||(e>=Number.MAX_VALUE||!isFinite(e))))}var typerLastTime=0;function textTyper(e){this.currentIndex=0,this.typeChars=e.typeChars,this.text=e.text,this.textParts=this.text.split(" "),this.speed=e.speed,this.speedChars=e.speedChars,this.$parent=e.parent,!1!==this.$parent&&(this.$parent=$(this.$parent)),this.storeInVar=e.storeInVar,this.callback=e.callback,this.delay=e.delay,this.sound=e.sound,this.delayLine=200,this.typedText="",this.fadeOutStart=e.fadeOutStart,this.fadeOutEnd=e.fadeOutEnd,this.timeout=null,this.returnTimestampsData=e.returnTimestampsData,this.timestampData=[],this.forceStopTyping=function(){this.forceStop=!0,clearTimeout(this.timeout)},typeNextWord=function(e,t){var a=t[0];t.splice(0,1);var s=(0!==e.currentIndex?" ":"")+a;!1!==e.$parent?e.$parent.append(s):e.typedText+=s,e.currentIndex++,t.length>0&&!e.forceStop?e.timeout=setTimeout(typeNextWord.bind(null,e,t),e.speed):"function"==typeof e.callback&&e.callback()},typeNextChar=function(e,t){var a=t[0],s=!1,r=0;if("<"===a){var i=t.indexOf(">");if(a=t.substring(0,i+1),t=t.substring(i+1),"<newline>"===a)a="\n",r=e.delayLine;else{var o=t.indexOf(">");a+=t.substring(0,o+1),t=t.substring(o+1)}}else t=t.substring(1),s="typing"," "===a&&(s=!1);if(!1!==e.$parent?e.$parent.append(a):e.typedText+=a,e.returnTimestampsData){var n=e.delay,d=e.speedChars+r;e.timestampData.length>0&&(n=e.timestampData[e.timestampData.length-1].total_delay+d),e.timestampData.push({char:a,delay:d,total_delay:n,sound_type:s})}e.currentIndex++,t.length>0&&!e.forceStop?e.returnTimestampsData||e.speedChars<=10&&e.currentIndex%2==1?typeNextChar(e,t):e.timeout=setTimeout(typeNextChar.bind(null,e,t),e.speedChars+r):"function"==typeof e.callback&&e.callback(),!e.returnTimestampsData&&e.sound&&!1!==s&&audio.playSound(s)},this.typeChars?this.returnTimestampsData?typeNextChar(this,this.text):setTimeout(typeNextChar.bind(null,this,this.text),this.delay):setTimeout(typeNextWord.bind(null,this,this.textParts),this.delay)}var soundsFired=0,lastSoundTypeFired=!1,lastSoundFiredAt=0;function getTyperTextToPrint(e,t){var a,s="";e.nextPrintIndex>0&&(s=e.typedText.slice(0,e.nextPrintIndex).toString());for(var r=0,i=!1,o=e.nextPrintIndex;o<e.timestampData.length&&t>=(a=e.timestampData[o]).total_delay+e.startedTime;o++)r=o+1,s+=a.char,i=a.sound_type;r>e.nextPrintIndex&&(e.nextPrintIndex=r,(lastSoundFiredAt+50<performance.now()||lastSoundTypeFired!==i)&&e.sound&&!1!==i&&(lastSoundFiredAt=performance.now(),lastSoundTypeFired=i,audio.playSound(i),soundsFired++));return s}var minimumLogLevel=3;function customLog(e,t){switch(void 0===t&&(t="debug"),t){case"verbose":case"debug":minimumLogLevel<1&&console.log(e);break;case"info":minimumLogLevel<2&&console.warn(e);break;case"warning":minimumLogLevel<3&&console.warn(e);break;case"error":minimumLogLevel<4&&console.error(e)}}function resolveObject(e,t=self,a="."){return(Array.isArray(e)?e:e.split(a)).reduce(((e,t)=>e&&e[t]),t)}var filesLoaded=0;function tryGameInit(e){e>filesLoaded||!imageLoader.allLoaded?setTimeout(tryGameInit.bind(null,e),100):gameInited?console.log("game already inited!"):(console.log("initing game from tryGameInit"),game.fireInitWithErrorCheck())}var $formParent,imgProjectionBase64="data:image/png;base64,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",imageSizeReference={},cachedCanvases={},unitRotationAngle=30,imageLoader={allLoaded:!1,imagesTotal:0,imagesLoaded:0,images:{preloadUI:[{img:!1,src:"assets/images/simpocalypse_logo.png"},{img:!1,src:"assets/images/main_menu/line_below_logo.png"},{img:!1,src:"assets/images/main_menu/steam_icon_playpage.png"},{img:!1,src:"assets/images/main_menu/steam_playpage_empty.png"},{img:!1,src:"assets/images/main_menu/discord_icon.png"},{img:!1,src:"assets/images/main_menu/64_64_playpage_icons_updated.png"},{img:!1,src:"assets/images/backgrounds/BG_test7.jpg"},{img:!1,src:"assets/images/sprite_menu_icons_128_128.png"},{img:!1,src:"assets/images/new/popup_bg.png"},{img:!1,src:"assets/images/main_menu/play_button_playpage.png"},{img:!1,src:"assets/images/main_menu/playpage_button_big_grey.png"},{img:!1,src:"assets/images/main_menu/playpage_button_small_grey.png"},{img:!1,src:"assets/images/new/build_upgrade_button.png"},{img:!1,src:"assets/images/new/buttons_updated.png"},{img:!1,src:"assets/images/onboarding/tutorial_images.png"},{img:!1,src:"assets/images/new/flags_sprite_new.png"},{img:!1,src:"assets/images/onboarding/mission_icons_sprite.png"}],resourceIcons:{img:!1,src:"assets/images/resources_sprite_64_64.png"},extraIcons:{img:!1,src:"assets/images/extra_icons.png"},gameIcons:{img:!1,src:"assets/images/game_icons_all.png"},mapIcons:{img:!1,src:"assets/images/new/map_icons_new_cut2.png"},tankParts:{img:!1,src:"assets/images/units/tank_parts_sprite.png"},buttons:[{img:!1,src:"assets/images/new/tank_to_max_combat.png"}],healthBars:[{img:!1,src:"assets/images/new/bars_combat_att_def.png"}],units:[{img:!1,src:"assets/images/units/tank_1_base.png"},{img:!1,src:"assets/images/units/tank_1_turret.png"},{img:!1,src:"assets/images/units/tank_1_base_destroyed.png"},{img:!1,src:"assets/images/units/tank_1_turret_destroyed.png"},{img:!1,src:"assets/images/units/tank_2_base.png"},{img:!1,src:"assets/images/units/tank_2_turret.png"},{img:!1,src:"assets/images/units/tank_2_base_destroyed.png"},{img:!1,src:"assets/images/units/tank_2_turret_destroyed.png"}],auras:[{img:!1,src:"assets/images/units/dmg2_aura.png"},{img:!1,src:"assets/images/units/dmg2_aura_50op.png"},{img:!1,src:"assets/images/units/hp_aura.png"},{img:!1,src:"assets/images/units/hp_aura_50op.png"},{img:!1,src:"assets/images/units/aura_example1.png"},{img:!1,src:"assets/images/units/aura_example7.png"},{img:!1,src:"assets/images/units/aura_example8.png"},{img:!1,src:"assets/images/new/auras_sprite_combat.png"}],trash:{img:!1,src:"assets/images/new/trash_on_combat.png"},shells:[{img:!1,src:"assets/images/shell_1.png"},{img:!1,src:"assets/images/shell_2.png"}],leaderTankBorder:{img:!1,src:"assets/images/new/tank_select_border.png"},animations:[{img:!1,src:"assets/images/animations/explosion1.png"},{img:!1,src:"assets/images/animations/explosion2.png"},{img:!1,src:"assets/images/animations/smokesprite_2_smaller.png"},{img:!1,src:"assets/images/new/auras_sprite_combat.png"},{img:!1,src:"assets/images/animations/building_animations_new_opt.png"}],background:{img:!1,src:"assets/images/backgrounds/grass_bg_new.png"},backgroundDarker:{img:!1,src:"assets/images/backgrounds/grass_bg_new_darker.png"},chartBackground:{img:!1,src:"assets/images/new/graph_background.png"},clouds:{img:!1,src:"assets/images/clouds.png"},clouds_dark:{img:!1,src:"assets/images/clouds_dark.png"},clouds_square:{img:!1,src:"assets/images/clouds_square.png"},clouds_square_dark:{img:!1,src:"assets/images/clouds_square_dark.png"},researchButtons:{img:!1,src:"assets/images/new/research_buttons_sprite2.png"},researchCenter:{img:!1,src:"assets/images/new/research_center.png"},researchButtonsNew:{img:!1,src:"assets/images/research/research_buttons_sprite_ea_update.png"},researchCenterNew:{img:!1,src:"assets/images/research/center_research_tree.png"},dragIcon:{img:!1,src:"assets/images/research/drag_icon_research.png"},researchLines:{img:!1,src:"assets/images/research/lines_research_tree_reversed.png"},whiteBlur:{img:!1,src:"assets/images/radial_white_blur2.png"},researchNameBG:{img:!1,src:"assets/images/research/yellow_background_unit_name_on_research.png"},worldProjection:{img:!1,src:imgProjectionBase64=" data:image/png;base64,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lGXLlnHfffdJAIUQogQ06EkEnoULF7J8+fKSPmuaJtu2bVMgegjTNHd2C2tZGCGEKB21BIpA09bWxo033ljUZ4477jh+97vf7ex6HDZsmAJSCCFE4NDEEBFoGhoaiMcL2xbovPPO49prr2X06NGaECKEECLwqDtYBJY77rijYAEEuPbaa2lqalLACSGEqArUHSwCSTwe5zvf+U7Bx1966aUSQCGEEFWFuoNFIFm+fHlRM4KVDIQQQlQb6g4WgWT48OEFH9va2lrRay2myzoT2uIuIDXyLAthq4IyOJz8GCbpz1fPVEgChetiUU2yMH164ZuDO7EETDax27RpEwDvvfcedXV1vPbaa6xcuZJYLFbwuTs7O3dOXIlEIkyfPp0DDjiAsWPHArjWrR2Px3feTzrqVi9P+oIiPXYxY8YMVq5cmTHspk+fzooVK0oK10KFLP18HR0dRCKRsr6v0M9IFIUkUJRUMN955528/fbb/cQiEolw1llnMXz4cMaOHUtTUxPxeDyQYhiNRjO+PnLkSD766KN+r82bN4/99tuvrPCur6+nra0NgI0bN7Ju3ToeffTRQWK3du1annvuOcfv/7zzzuOLX/wikydPdkTK2traeO655/jxj3/Ms88+O+j9xYsXc+WVVyoxliF+2T6XSQy81sI08B4LuaZoNMqcOXOK/q6VK1eWHKalPJPGxkbXw1EyKByNZxoTGByWLFnC2WefXdCxZ555JlOmTOGEE06gqamJMWPGZBTC9BatTK0+2ch2Pi8Vttdddx1XX311XslLpzcMVq1aRXd3Ny+//DKrV6/mgQce8Gy8uPDCC7n66qvLeibLli1j2LBh3H777QXd629+8xtOPfXUqu6qLldO7MKuLN4r91OtqKgWkkCRkba2Ns4991yefvrpks9x/PHHc+mll3LkkUeydetWPvjgg34tWsW2Yh1//PFcc801NDU1VaR7sNzulng8TktLC3/+85/58MMPAWvsoBsteU5x/PHHc9555zF58mQOPvjgggWt1MK/vr6e73//+8yYMQOAT37ykxI+H8qD5M9bZOqSFkISWKXccsstzJs3z9PXuGDBAhYtWlSQdLS3twOUtBdsMYXVe++9x6677jpI/NatW8fy5cv593//d9atWxfYeNPU1MSPf/xj9thjDwCmTZuWUYTtXjS7dxLOmDFjBgmjl4UuXzesX+UvU9etpM+fqCgXksAqo62tjYkTJ/riWo844gjuvfdeJk2atPO1lpaWnb8/9thj/bZ3mzt3LqeccgovvPAC8+fPd6zFwjRN2traWLJkCT//+c9Zs2ZNWfcZiUQYPXo0b731lu/i0+rVq3eOj1y7du3OMYVOMG3aNPbZZx9qamqIRCKccMIJJY0Jc0MAgyYEkjzJoRCSQI/T3t7O+PHjaWlpYdasWTtbyNLZvn27bySwl87OTn76059y1VVXFfW5BQsW8KlPfYpZs2apYHOQOXPm8I1vfIPrr7+exx9/3PXvzzSre+DMUFFawZ9plq2QDApJoGKGBwVwwoQJLFq0iOuvvz7rceeffz733HOPMjNJoBAZ04fShZAgCkmgnx6IMm3PiOCECRNYv369Alv4Mn0oLxGSP5EP7R3sEVpaWpRpZyAcDmeV5d4fp5AAClUmRRBEL9uPEJLACvPAAw9w7LHHcuKJJyowMpBIJAoq8FToCSHEYPkTIhfaMaTCAnjWWWcpIIQQQtgifkJIAh0mX6tTMXtRCn8wduxYNm7cWPTnhg0b5sjexEIIIekTZfuMJobYI35CCCGEBFD4CbUESv6EEEJI/EQVookhZSRGJUghhBBOsHTpUs3mFY6j7mC7AlIthkIIIUpERbGoBOoOdjABSwyFEEIIIQmsMmbMmKFAEEIIURDZGg3UQigkgT5NvEIIIYQQXuX/BwxgVUImQ7xhAAAAAElFTkSuQmCC",base64:!0},flyingBee:{img:!1,src:"assets/images/flying_bee_sprite.png"},lock:{img:!1,src:"assets/images/locked_content.png"},night_day:{img:!1,src:"assets/images/day_night_cycle_new.png"},biome_desert_1:{img:!1,src:"assets/images/biomes/biome_desert_1.png"},biome_desert_2:{img:!1,src:"assets/images/biomes/biome_desert_2.png"},biome_desert_3:{img:!1,src:"assets/images/biomes/biome_desert_3.png"},biome_water_1:{img:!1,src:"assets/images/biomes/biome_water_1.png"},biome_water_2:{img:!1,src:"assets/images/biomes/biome_water_2.png"},biome_water_3:{img:!1,src:"assets/images/biomes/biome_water_3.png"},biome_forest_1:{img:!1,src:"assets/images/biomes/biome_forest_1.png?v=2"},biome_forest_2:{img:!1,src:"assets/images/biomes/biome_forest_2.png?v=2"},biome_forest_3:{img:!1,src:"assets/images/biomes/biome_forest_3.png?v=2"},biome_farm_1:{img:!1,src:"assets/images/biomes/biome_farm_1.png?v=2"},biome_farm_2:{img:!1,src:"assets/images/biomes/biome_farm_2_new.png?v=2"},biome_farm_3:{img:!1,src:"assets/images/biomes/biome_farm_3_new.png?v=3"},biome_snow:{img:!1,src:"assets/images/biomes/biome_snow.png"},biome_forest:{img:!1,src:"assets/images/biomes/biome_forest.png"},biomes_battle:[{img:!1,src:"assets/images/biomes_battle/forest_small_1.png"},{img:!1,src:"assets/images/biomes_battle/forest_small_2.png"},{img:!1,src:"assets/images/biomes_battle/forest_small_3.png"},{img:!1,src:"assets/images/biomes_battle/forest_small_4.png"}],tanksAmountBackground:{img:!1,src:"assets/images/new/background_tank_amount_on_combat.png"},clouds_pattern_dark:{img:!1,src:"assets/images/overlay/clouds_pattern_dark_white.png"},clouds_pattern_light:{img:!1,src:"assets/images/overlay/clouds_pattern_light_white.png"},clouds_radial_blur:{img:!1,src:"assets/images/overlay/clouds_radial_blur2.png"},clouds_rect_blur:{img:!1,src:"assets/images/overlay/clouds_rect_blur_holes.png"}},init:function(){return this.preloadImages(),setTimeout((function(){this.allLoaded||console.log("images still not loaded after 5 seconds!!!")}),5e3),{current:this.imagesLoaded,total:this.imagesTotal}},assetLoaded:function(){if(this.allLoaded)return!1;var e=this.imagesLoaded/this.imagesTotal,t=parseInt(100*e);page.updateLoading({current:this.imagesLoaded}),t>99&&(this.allLoaded=!0)},imageLoaded:function(e){this.imagesLoaded++;performance.now(),e.started;e.loaded=!0,void 0!==e.rotations&&this.rotateAndCache(e),this.assetLoaded()},rotateAndCache:function(e){let t=e.width,a=e.height,s=Math.max(t,a);for(var r,i,o=0;o<e.rotations.length;o++){var n=e.rotations[o];i=(r=document.createElement("canvas")).getContext("2d"),r.width=s,r.height=s,0!==n?(i.translate(s/2,s/2),i.rotate(n*Math.PI/180),i.drawImage(e,-s/2,-s/2)):i.drawImage(e,0,0,s,s),cachedCanvases[e.mainTag][e.subTag+"_"+n]=i.canvas}imageSizeReference[e.subTag]={},imageSizeReference[e.subTag].w=t,imageSizeReference[e.subTag].h=a},preloadImages:function(){var e;console.log("Starting to load images , Time: "+performance.now());for(var t=0,a=[];t<360;)a.push(t),t+=unitRotationAngle;$.each(this.images,(function(t,a){var s=a;isArray(s)||(s=[a]),$.each(s,(function(a,r){imageLoader.imagesTotal++,(e=new Image).started=performance.now(),e.loaded=!1,e.onload=function(){imageLoader.imageLoaded(this)},void 0!==r.base64?e.src=r.src:e.src=assetPath+r.src,s?s[a].img=e:imageLoader.images[t].img=e}))}))}};function addEmailSubscriber(e,t){console.log("Adding subscriber email "+e),$formParent=t;var a={email:e},s="https://",r="/add_email_subscriber";parsedParentHostname.indexOf("192.168")>-1&&(s="http://",r="/gamex_games"+r);var i;i="https://gamexgames.com/add_email_subscriber",console.log("submit url: "+i),$.ajax({url:i,type:"post",data:a,dataType:"json",success:function(e){console.log("Form succeeded in adding! "+JSON.stringify(e)),e.error?$formParent.find(".error").html(e.error_msg):gameUI.showMiniPopup('<b>Thank you - Your email was successfully added to our mailing list!</b> <br /><br /> We will let you know when we start our beta stages so you can help us test and contribute to the game :) <br /><br/> Meanwhile you can follow our progress in <a href="https://discord.gg/ZZDvEuR" target="_blank">our Discord channel</a>')},error:function(e,t,a){console.log("Form error in adding! "+JSON.stringify(a)+" status: "+JSON.stringify(t)+" request: "+JSON.stringify(e)),$formParent.find(".error").html(a)}})}function initGA(){GameAnalytics("setEnabledInfoLog",!1),GameAnalytics("setEnabledVerboseLog",!1),GameAnalytics("configureBuild","0.2.0.0"),GameAnalytics("configureAvailableCustomDimensions01",["localhost","gamexgames"]);var e=-1!==parsedParentHostname.indexOf("gamexgames")?"gamexgames":"localhost";GameAnalytics("setCustomDimension01",e),GameAnalytics("initialize","d77d613a6fb00feb9d9d7d01ad5bac4f","bcd335988a1c5e9ed3c77a556012090942d86e05")}function storeClickEvent(e){"wishlist"===e.type&&(wishlistClicked=1);var t=e.firedFrom,a="";["game_over"].indexOf(e.type)>-1?GameAnalytics("addProgressionEvent","Complete","GameProgress","Citizens_died","",playTime):(a=["steam_note"].indexOf(e.type)>-1?"IncentiveFired:From_"+t+":"+e.type:"UserClicked:From_"+t+":"+e.type,GameAnalytics("addDesignEvent",a,parseInt(performance.now()/1e3)))}var lastError,submittedErrors=0;window.onerror=function(e,t,a,s,r){if(!(submittedErrors>5)){lastError=r;var i=e+" STACK: "+r.stack.substring(0,400);GameAnalytics("addErrorEvent","Error",i),submittedErrors++}};var crazysdk,fullScreenToggled=!1;function toggleFullScreen(e){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),fullScreenToggled=!1):(e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT),fullScreenToggled=!0)}function gameToggleFullScreen(e){void 0===e&&(e=!1);try{console.log("toggled fullscreen from electron app"),appWindow.setFullScreen(e)}catch(a){console.log("Tried togglign fulslcreen error: "+JSON.stringify(a));var t=document.getElementById("mainContainer");e&&!fullScreenToggled?(fullScreenToggled=!0,toggleFullScreen(t)):fullScreenToggled&&(fullScreenToggled=!1,toggleFullScreen(t))}}function fireThirdPartyAction(e,t){switch(e){case"gameplay_start":return thirdPartyUtil.gameplayStart(t);case"gameplay_stop":return thirdPartyUtil.gameplayStop(t);case"request_video_ad":return thirdPartyUtil.requestVideoAd(t);case"request_banner_ads":return thirdPartyUtil.requestBanner(t);case"objective_completed":return thirdPartyUtil.objectiveCompleted(t)}}isDemo=function(){return DEMO_VERSION},isSteam=function(){return"steam"===GAME_PLATFORM},isWeb=function(){return"steam"!==GAME_PLATFORM};var thirdPartyUtil={rememberSoundValue:!1,requestIntervalLimits:{video:3e5,banner:6e4},lastRequestTimes:{video:0,banner:0},videoAdRequested:!1,installListeners:function(){switch(PUBLISHER_PLATFORM){case"crazygames":(crazysdk=window.CrazyGames.CrazySDK.getInstance()).init(),crazysdk.addEventListener("adStarted",thirdPartyUtil.videoAdStarted),crazysdk.addEventListener("adError",thirdPartyUtil.videoAdError),crazysdk.addEventListener("adFinished",thirdPartyUtil.videoAdFinished),crazysdk.addEventListener("bannerRendered",thirdPartyUtil.bannerRendered),crazysdk.addEventListener("bannerError",thirdPartyUtil.bannerError)}},removeListeners:function(){switch(PUBLISHER_PLATFORM){case"crazygames":crazysdk.removeEventListener("adStarted",thirdPartyUtil.videoAdStarted),crazysdk.removeEventListener("adError",thirdPartyUtil.videoAdError),crazysdk.removeEventListener("adFinished",thirdPartyUtil.videoAdFinished),crazysdk.removeEventListener("bannerRendered",thirdPartyUtil.bannerRendered),crazysdk.removeEventListener("bannerError",thirdPartyUtil.bannerError)}},gameplayStart:function(){switch(PUBLISHER_PLATFORM){case"crazygames":crazysdk.gameplayStart()}},gameplayStop:function(){switch(PUBLISHER_PLATFORM){case"crazygames":crazysdk.gameplayStop()}},videoAdStarted:function(){thirdPartyUtil.rememberSoundValue=game.getSettingValue("master_toggle"),thirdPartyUtil.rememberSoundValue&&game.changeSettingValue("master_toggle",!1,{fromDOM:!1}),PUBLISHER_PLATFORM},videoAdError:function(){thirdPartyUtil.rememberSoundValue&&game.changeSettingValue("master_toggle",!0,{fromDOM:!1}),thirdPartyUtil.videoAdRequested=!1,PUBLISHER_PLATFORM},videoAdFinished:function(){thirdPartyUtil.rememberSoundValue&&game.changeSettingValue("master_toggle",!0,{fromDOM:!1}),thirdPartyUtil.videoAdRequested=!1,thirdPartyUtil.lastRequestTimes.video=performance.now(),PUBLISHER_PLATFORM},bannerRendered:function(){thirdPartyUtil.lastRequestTimes.banner=performance.now(),PUBLISHER_PLATFORM},bannerError:function(){PUBLISHER_PLATFORM},requestVideoAd:function(e){if(thirdPartyUtil.videoAdRequested)return!1;if(!e.force&&thirdPartyUtil.lastRequestTimes.video+thirdPartyUtil.requestIntervalLimits.video>performance.now())return!1;switch(thirdPartyUtil.videoAdRequested=!0,PUBLISHER_PLATFORM){case"crazygames":crazysdk.requestAd();break;default:thirdPartyUtil.adRequested=!1}},requestBanner:function(e){if(!e.force&&thirdPartyUtil.lastRequestTimes.banner+thirdPartyUtil.requestIntervalLimits.banner>performance.now())return"";thirdPartyUtil.lastRequestTimes.banner=performance.now();for(var t="",a={},s=[],r=e.bannerSizes.length,i=0;i<r;i++){var o=e.bannerSizes[i],n=o.split("x"),d=0;void 0!==a[o]?(a[o]+=1,d=a[o]):a[o]=0;var c="bannerContainer_"+o+"_"+d.toString();switch(t+='<div id="'+c+'" class="'+e.extraClasses+'" style="width:'+n[0]+"px;height:"+n[1]+'px"></div>',PUBLISHER_PLATFORM){case"crazygames":s.push({containerId:c,size:o})}}return r>0&&setTimeout(function(){switch(PUBLISHER_PLATFORM){case"crazygames":crazysdk.requestBanner(s)}}.bind(null,s),50),t},objectiveCompleted:function(e){switch(PUBLISHER_PLATFORM){case"crazygames":crazysdk.happytime()}}};function mlFunction(e,t,a,s,r,i,o,n,d,c){var l,g=[],m=(e=e.replace(/\r/g,"")).split("\n");for(l=0;l<m.length;l++)l&&g.push("\n"),g=g.concat(m[l].split(" "));var u,p=this.measureText(" ").width,h=[],v=0,f=0;for(h[v]={},h[v].Words=[],l=0;l<g.length;){var y=g[l];if("\n"==y)f=0,h[v].EndParagraph=!0,h[++v]={},h[v].Words=[],l++;else if((u={}).l=this.measureText(y).width,0===f){for(;u.l>s;)y=y.slice(0,y.length-1),u.l=this.measureText(y).width;if(u.word=y,h[v].Words.push(u),f=u.l,y!=g[l]){if(""===y)return;g[l]=g[l].slice(y.length,g[l].length)}else l++}else f+p+u.l>s?(h[v].EndParagraph=!1,f=0,h[++v]={},h[v].Words=[]):(u.word=y,h[v].Words.push(u),f+=p+u.l,l++)}if(0===f&&h.pop(),void 0===h[v]){if(0===v)return;v--}h[v].EndParagraph=!0;for(var b,_=d*h.length;_>r;)h.pop(),_=d*h.length;b="bottom"==o?a+r-_+d:"center"==o?a+r/2-_/2+d:a+d;var w=this.textAlign;this.textAlign="left";var x=0;for(var k in h)if(h.hasOwnProperty(k)){var D,I,C=0;for(u in h[k].Words)h[k].Words.hasOwnProperty(u)&&(C+=h[k].Words[u].l);for(u in"center"==i?(I=p,D=t+s/2-(C+p*(h[k].Words.length-1))/2):"justify"!=i||h[k].EndParagraph?"right"==i?(D=t+s-(C+p*(h[k].Words.length-1)),I=p):(D=t,I=p):(D=t,I=(s-C)/(h[k].Words.length-1)),h[k].Words)h[k].Words.hasOwnProperty(u)&&("strokeText"!=c&&"fillStrokeText"!=c||this.strokeText(h[k].Words[u].word,D,b),"fillText"!=c&&"fillStrokeText"!=c||this.fillText(h[k].Words[u].word,D,b),D+=h[k].Words[u].l+I);x=Math.max(x,D),b+=d}return this.textAlign=w,{width:x,height:_}}$(window).ready((function(){thirdPartyUtil.installListeners()})),CanvasRenderingContext2D.prototype.mlFunction=mlFunction,CanvasRenderingContext2D.prototype.mlFillText=function(e,t,a,s,r,i,o,n,d){return this.mlFunction(e,t,a,s,r,o,i,n,d,"fillText")},CanvasRenderingContext2D.prototype.mlStrokeText=function(e,t,a,s,r,i,o,n,d){return this.mlFunction(e,t,a,s,r,o,i,n,d,"strokeText")},CanvasRenderingContext2D.prototype.mlFillStrokeText=function(e,t,a,s,r,i,o,n,d){return this.mlFunction(e,t,a,s,r,o,i,n,d,"fillStrokeText")};var imgSprite,spriteW,spriteH,sY,sX,globalObjectID=0,colorVariants={land:["#1c491c","#2a6e2a","#318031","#3fa53f","#46b746"],water:["#0f2342","#0f1e38"]},colorOfTypes={land:{disabled:"rgba(100, 100, 0, 0.3)",unlocked:"rgba(200, 200, 0, 0.7)",hover:"rgba(255, 50, 0, 0.6)"},water:{disabled:"rgba(0, 0, 100, 0.3)",unlocked:"rgba(0, 0, 200, 0.7)",hover:"rgba(0, 0, 255, 0.3)"},exploring_region:"rgba(0, 0, 255, 1)",player_region:"rgba(0, 191, 255, 1)",attackable_region:"rgba(200, 200, 0, 1)",place_military_colony:"rgba(200, 50, 0, 0.8)",place_economic_colony:"rgba(50, 50, 255, 0.8)",control_rate:"rgb(42,104,166)",power_military:"rgb(141,45,2)",power_economic:"rgb(141,45,2)"},spriteOffsets={tankParts:{hull:{x:0},turret:{x:1},allround:{y:0},defensive:{y:1},mobile:{y:2},offensive:{y:3}},gameIcons:{world:{x:0},population:{x:1},citizens:{x:1},food:{x:2},tiles:{x:3},happiness:{x:4},wood:{x:5},iron:{x:6},energy:{x:7},parts:{x:8},plans:{x:9},flag_our:{x:10},flag_enemy:{x:11},power:{x:12},attack:{x:32},magnifying:{x:14},explore:{x:33},attack_active:{x:31},explore_active:{x:30},water:{x:15},stone:{x:16},uranium:{x:17},social:{x:18},economy:{x:19},health:{x:20},productivity:{x:21},knowledge:{x:22},gold:{x:23},objectives:{x:24},help:{x:25},timelapse:{x:26},time:{x:27},play:{x:28},pause:{x:29},scroll:{x:34},confirm:{x:35},control_rate:{x:36},explored:{x:37},military_colony:{x:38},economic_colony:{x:39}},resourceIcons:{tiles:{x:3,y:3},food:{x:1,y:0},water:{x:0,y:2},wood:{x:3,y:1},stone:{x:3,y:2},iron:{x:0,y:3},uranium:{x:1,y:3},energy:{x:2,y:4},gold:{x:0,y:0},economic:{x:2,y:0},parts:{x:0,y:1},flag_our:{x:0,y:5},flag_enemy:{x:1,y:5}},researchButtons:{resources:{x:1},social:{x:2},war:{x:0},economy:{x:3}},researchButtonsNew:{unlocks:{x:4},qol:{x:3},skill:{x:1},stats:{x:2},misc:{x:0}},auras:{hp:{x:0},dmg:{x:1},leader:{x:2}},mapIcons:{attack:{x:0},explore:{x:1},attack_and_explore:{x:2},conquered:{x:3},military_colony:{x:5},economic_colony:{x:4},attack_active:{x:6},explore_active:{x:7}}};function draw(e,t,a,s){var r=void 0!==e.rotatedDeg&&0!==e.rotatedDeg,i=void 0!==e.rotateOffset?e.rotateOffset:.5;let o="static"===s?staticCanvasCtx:"cover"===s?coverCanvasCtx:canvasCtx;var n=void 0!==e.shadowBlur,d=r||n;d&&o.save(),n&&(o.shadowBlur=void 0!==e.shadowBlur?e.shadowBlur:5,o.shadowColor=void 0!==e.shadowColor?e.shadowColor:"#000000",o.shadowOffsetX=void 0!==e.shadowOffsetX?e.shadowOffsetX:0,o.shadowOffsetY=void 0!==e.shadowOffsetY?e.shadowOffsetY:0),r?(o.translate(Math.floor(e.x*pixelRatio+e.w*i*pixelRatio+helpers.common.getCanvasOffsetX()+game.data.cameraXoffset),Math.floor(e.y*pixelRatio+e.h*i*pixelRatio+helpers.common.getCanvasOffsetY()+game.data.cameraYoffset)),o.rotate(e.rotatedDeg*Math.PI/180),e.x=-e.w*i,e.y=-e.h*i,e.x=e.x*pixelRatio,e.y=e.y*pixelRatio):(e.x=Math.floor(e.x*pixelRatio+helpers.common.getCanvasOffsetX()),e.y=Math.floor(e.y*pixelRatio+helpers.common.getCanvasOffsetY())),void 0!==e.extraXoffset&&(e.x+=e.extraXoffset*pixelRatio),void 0!==e.extraYoffset&&(e.y+=e.extraYoffset*pixelRatio);var c=e.w,l=e.h;if(void 0!==e.sW&&(c=e.sW),void 0!==e.sH&&(l=e.sH),e.w=Math.floor(e.w*pixelRatio),e.h=Math.floor(e.h*pixelRatio),r||(e.x+=game.data.cameraXoffset,e.y+=game.data.cameraYoffset),"rect"===t)switch(a){case"fill":o.fillStyle=e.color,o.fillRect(e.x,e.y,e.w,e.h);break;case"img":o.drawImage(e.img,e.x,e.y,e.w,e.h);break;case"sprite":o.drawImage(e.img,e.sX,e.sY,c,l,e.x,e.y,e.w,e.h);break;case"text":var g=void 0!==e.fontSize?e.fontSize:13,m=void 0!==e.textAlign?e.textAlign:"left",u=void 0!==e.vAlign?e.vAlign:"top";g=Math.ceil(g*pixelRatio),o.font=void 0!==e.font?g+e.font:g+"px titilliumWebRegular",o.fillStyle=e.color;var p=parseInt(g);o.mlFillText(e.text,e.x,e.y,e.w,e.h,u,m,g,p);break;case"stroke":o.strokeStyle=e.color,o.lineWidth=1,o.beginPath(),o.rect(e.x,e.y,e.w,e.h),o.stroke();break;case"line":o.strokeStyle=e.color,o.lineWidth=1,o.beginPath(),o.moveTo(e.x,e.y),o.lineTo(e.x+e.w,e.y+e.h),o.stroke();break;case"line_with_angle":o.strokeStyle=e.color,o.lineWidth=1,o.beginPath(),o.moveTo(e.x,e.y),o.lineTo(e.x+e.r*Math.cos(e.angle),e.y+e.r*Math.sin(e.angle)),o.stroke();break;case"vertices":var h=this.vertices,v=h[0];o.beginPath(),o.moveTo(v.x*pixelRatio+game.data.cameraXoffset,v.y*pixelRatio+game.data.cameraYoffset);for(var f=1,y=h.length;f<y;++f)v=h[f],o.lineTo(v.x*pixelRatio+game.data.cameraXoffset,v.y*pixelRatio+game.data.cameraYoffset);o.closePath(),o.stroke(),o.fill()}else if("circle"===t)switch(a){case"fill":o.fillStyle=e.color,o.beginPath(),o.arc(e.x+e.w/2,e.y+e.h/2,e.w/2,0,2*Math.PI,!1),o.fill(),o.lineWidth=5,o.strokeStyle=e.color,o.stroke();break;case"fill_center":o.fillStyle=e.color,o.beginPath(),o.arc(e.x,e.y,e.w/2,0,2*Math.PI,!1),o.fill()}d&&o.restore()}class GameObject{constructor(e,t,a,s,r){if(this.x=e,this.y=t,this.w=a,this.h=s,this.globalID=globalObjectID,globalObjectID++,this.centerX=this.x+this.w/2,this.centerY=this.y+this.h/2,this.rotatedDeg=0,this.isStatic=!1,this.zIndex=1,this.shape="rect",this.remove=!1,void 0!==r){var i=this;$.each(r,(function(e,t){i[e]=t}))}}hits(e){return this.x<e.x+e.w&&this.x+this.w>e.x&&this.y<e.y+e.h&&this.y+this.h>e.y}findTargetAngle(e,t,a){perfTests.c6++;var s=this.centerX;if(void 0!==this.actualCenterX)s=this.actualCenterX;var r=this.centerY;void 0!==t&&(s=t.centerX,r=t.centerY),null==e&&console.log("target object is null: "+JSON.stringify(this));var i=e.centerX;void 0!==e.actualCenterX&&(i=e.actualCenterX);var o=i-s,n=e.centerY-r;return a?180*Math.atan2(n,o)/Math.PI:Math.atan2(n,o)}}class Vehicle extends GameObject{constructor(e,t,a,s,r){super(e,t,a,s,r),this.aimPriority=!1,this.timeSinceLastShot=0,this.animations=[],this.enemy?this.actualCenterX=this.x+36:this.actualCenterX=this.x+25}update(e,t){if(this.timeSinceLastShot+=e,this.timeSinceLastShot>this.fireRate){this.timeSinceLastShot=this.timeSinceLastShot%this.fireRate;var a=$.extend(!0,{},this.projectileData);a.spawnedBy=this,this.enemy?this.actualCenterX=this.x+36:this.actualCenterX=this.x+25;var s=(100-this.accuracy)/100*10*Math.PI/180;this.targetAngle=this.findTargetAngle(this.currentTarget);var r,i=randomFloatFromInterval(this.targetAngle-s,this.targetAngle+s);a.rotatedDeg=i,a.enemy=this.enemy,void 0!==this.projectileData.dmgAuraMX&&(a.max_dmg*=a.dmgAuraMX,a.min_dmg*=a.dmgAuraMX),a.deflected=!1,r=this.enemy?25+-1*Math.abs(36*Math.cos(this.targetAngle)):25+36*Math.cos(this.targetAngle),this.enemy;var o,n=36*Math.sin(this.targetAngle),d=new Projectile(this.x+r,this.y+this.h/2+n,10,8,a);o=this.enemy?290:300;for(var c,l,g,m=getRectCorners(d),u=0,p=0,h=0;h<m.length;h++)perfTests.c6++,m[h].x>u&&(u=m[h].x,p=m[h].y);p-(a.rotatedDeg<0?o-u:o+u)/Math.cos(a.rotatedDeg)*Math.sin(a.rotatedDeg),d.possibleTargets=[],g=this.enemy?game.data.gameObjects:game.data.enemyObjects;for(h=0;h<g.length;h++)perfTests.c6++,!1,!0,this.currentTarget.globalID,g[h].globalID,(c=calculateIntersection(d,g[h]))&&(l=c.distance/a.speed*1e3,c.globalID=g[h].globalID,c.timeToHit=l,c.alreadyHit=!1,this.enemy,d.possibleTargets.push(c));0===d.possibleTargets.length&&console.log("/////////////////length is zero for projectile with id: "+d.globalID+" shotting party is enemy? "+this.enemy),this.enemy?game.data.enemyProjectiles.push(d):(game.data.projectiles.push(d),audio.playSound("tankShot1"));var v=new Animation(this.x+r,this.y+this.h/2+n-15,30,30,{subType:0});game.data.animations.push(v)}if("ghost"===this.vehicleType){var f,y=Math.floor(e/1e3*200),b=y;if(y>0&&(this.x+=b,this.centerX=this.x+this.w/2,this.centerY=this.y+this.h/2,this.x>=this.finalX)){var _=!1;for(h=0;h<game.data.gameObjects.length;h++)if(perfTests.c6++,game.data.gameObjects[h].globalID===this.parentGlobalID){f=game.data.gameObjects[h],_=!0;break}var w,x=game.state.corpuses[this.corpusID],k=x.tanksAmount;if(this.tanksAmount=Math.min(this.tanksAmount,k),this.tanksAmount=Math.min(this.tanksAmount,Math.floor(game.state.resources.citizens.idle/x.crew)),_){if(this.vehicleType="",this.tanksAmount>0){w=Math.min(Math.floor(f.hp/f.maxHp)*f.tanksAmount+this.tanksAmount,f.tanksAmount),f.tanksAmount=w,x.tanksAmount-=this.tanksAmount,game.state.formationCrewTotal+=this.tanksAmount*x.crew,game.state.resources.citizens.idle-=this.tanksAmount*x.crew,helpers.units.updateGameObjectStats(f);var D=[];for(h=0;h<f.animations.length;h++)perfTests.c7++,D.push(f.animations[h]);if(game.data.animations.length>0)for(h=game.data.animations.length-1;h>=0;h--)perfTests.c7++,D.includes(game.data.animations[h].globalID)&&2===game.data.animations[h].subType&&game.data.animations.splice(h,1)}}else this.tanksAmount>0&&(this.vehicleType="",this.globalID=this.parentGlobalID,helpers.units.addDynamicUnit(this,!0));game.data.ghostObjectsRemoveArray.push(this.globalID);v=new Animation(this.x+this.w/3,this.y+this.h/2,128,128,{subType:3});game.data.animations.push(v)}}}render(){var e=this.hp?0:1,t=-this.w/6,a=-20;imgSprite=imageLoader.images.tankParts.img;var s,r,i=imageLoader.images.healthBars[0].img,o=[0,0];void 0!==this.parts?(this.enemy?(s=game.const.partSubTypes[this.parts.hull],r=game.const.partSubTypes[this.parts.turret]):(s=helpers.plans.getPartsByID(this.parts.hull).subType,r=helpers.plans.getPartsByID(this.parts.turret).subType),o[0]=spriteOffsets.tankParts[s].y,o[1]=spriteOffsets.tankParts[r].y):(o[0]="tank_1"===this.subType?0:"tank_2"===this.subType?1:3,o[1]="tank_1"===this.subType?0:"tank_2"===this.subType?1:3);if(spriteH=31,sX=2*e*(spriteW=61),sY=o[0]*spriteH,!game.data.battleStarted&&game.data.leaderEnabled&&game.data.currentBattleCorpus===this.corpusID&&null===game.data.currentDrawableVehicle){var n=imageLoader.images.leaderTankBorder.img;draw({x:this.x-3,y:this.y-2,w:58,h:36,img:n},"rect","fill","main")}"ghost"===this.vehicleType&&(canvasCtx.save(),canvasCtx.globalAlpha=.38,sX=0),0===this.rotatedDeg?draw({x:this.x,y:this.y,w:this.w,h:this.h,sX:sX,sY:sY,img:imgSprite},"rect","sprite","main"):(draw({x:this.x,y:this.y,w:this.w,h:this.h,rotatedDeg:this.rotatedDeg,sX:sX,sY:sY,img:imgSprite},"rect","sprite","main"),t=this.w/6,a*=1),this.remove||this.enemy||game.data.autoFire.enabled||(this.targetAngle=this.findTargetAngle({centerX:page.mousePos.x,centerY:page.mousePos.y}));var d,c,l=this.targetAngle;if(sX+=spriteW,sY=o[1]*spriteH,draw({x:this.x+t,y:this.y,w:this.w,h:this.h,extraXoffset:a+this.w/2,color:this.color,rotatedDeg:l/Math.PI*180,sX:sX,sY:sY,img:imgSprite},"rect","sprite","main"),"ghost"===this.vehicleType&&canvasCtx.restore(),!this.remove){if(game.data.battleStarted&&"ghost"!==this.vehicleType){d="rgb(255,255,255)",this.enemy?(d="rgb(255,255,255)",sX=66,c=13):(d="rgb(255,255,255)",sX=0,c=0),draw({x:this.x+c,y:this.y+this.h+10,w:50,h:4,color:d},"rect","fill","main");var g=this.hp/this.maxHp;draw({x:this.x+c,y:this.y+this.h+10,w:50*g,h:4,sX:sX,sY:0,sW:66,sH:4,img:i},"rect","sprite","main")}if(this.globalID===hoverObjectRef?(d="rgba(255,50,50, 0.7)",draw({x:this.x,y:this.y,w:this.w,h:this.h,color:d},"rect","fill","main")):!1!==this.aimPriority&&(d="rgba(255,50,50, 1)",draw({x:this.x+this.w/4,y:this.y+this.h/4,w:this.w/2,h:this.h/2,color:d},"rect","fill","main"),draw({x:this.x+this.w/2-5,y:this.y+this.h/2+5,w:this.w,h:this.h,color:"rgb(255,255,255)",text:this.aimPriority+".",font:"px titilliumWebRegular",fontSize:20},"rect","text","main")),this.globalID===game.data.currentDrawableVehicleID&&game.data.currentlyOverlaysObject){let e="rgba(255,0,0,0.5)";draw({x:this.x,y:this.y,w:60,h:31,color:e},"rect","fill","main")}}}findClosestTarget(e){if(!this.enemy&&game.data.aimPriority.length>0){if(void 0===game.data.objectRefs[game.data.aimPriority[0]])return 0;this.targetAngle=this.findTargetAngle(game.data.objectRefs[game.data.aimPriority[0]])}else{for(var t=999999,a=-1,s=0;s<e.length;s++){perfTests.c6++;var r=e[s];if(!r.remove&&"ghost"!==r.vehicleType){var i=Math.sqrt(Math.pow(this.centerX-r.centerX,2)+Math.pow(this.centerY-r.centerY,2));i<t&&(t=i,a=s)}}if(-1===a)return 0;this.currentTarget=e[a],this.targetAngle=this.findTargetAngle(e[a])}}}class Projectile extends GameObject{constructor(e,t,a,s,r){super(e,t,a,s,r),"shell_2"===this.type&&(this.w*=2,this.h*=2),this.objectsHit=[],this.timeAlive=0}update(e,t){this.timeAlive+=e;var a=Math.floor(e/1e3*this.speed),s=a*Math.cos(this.rotatedDeg),r=a*Math.sin(this.rotatedDeg);a>0&&(this.x+=s,this.y+=r)}render(){var e="shell_1"===this.type?0:1,t=imageLoader.images.shells[e].img;draw({x:this.x,y:this.y,w:this.w,h:this.h,rotatedDeg:this.rotatedDeg/Math.PI*180,img:t},"rect","img","main")}}class Aura extends GameObject{constructor(e,t,a,s,r){super(e,t,a,s,r),"aura"===this.type&&(this.w*=2,this.h*=2,console.log("subType: "+r.subType))}update(e,t){}render(){if(!this.remove){spriteW=128,spriteH=128,sX=0,sY=0;var e=imageLoader.images.auras[7].img;"dmg"===this.subType?sX=spriteOffsets.auras.dmg.x*spriteW:"hp"===this.subType&&(sX=spriteOffsets.auras.hp.x*spriteW),draw({x:this.x,y:this.y,w:this.w,h:this.h,sX:sX,sY:sY,sW:spriteW,sH:spriteH,rotatedDeg:this.rotatedDeg/Math.PI*180,img:e},"rect","sprite","main")}}}class Animation extends GameObject{constructor(e,t,a,s,r){super(e,t,a,s,r),this.animIndex=0,2===this.subType?(this.animFrames=91,this.animDuration=5e3,this.animTime=0,this.frameCols=10,this.frameRows=10,this.spriteW=128,this.spriteH=128,this.repeatable=!0,this.repeatTimes=0):3===this.subType?(this.animFrames=30,this.animDuration=400,this.animTime=0,this.opacity=.2,this.frameCols=4,this.frameRows=4,this.spriteW=64,this.spriteH=64,this.repeatable=!1,this.direction=1):(this.animFrames=16,this.animDuration=500,this.animTime=0,this.frameCols=4,this.frameRows=4,this.spriteW=64,this.spriteH=64,this.repeatable=!1)}update(e,t){if(this.animTime+=e,3!==this.subType){var a=this.animTime/this.animDuration*this.animFrames;this.animIndex<a&&(this.animIndex=a),this.animIndex>=this.animFrames&&(this.repeatable?(this.animIndex=0,this.animTime=0):this.remove=!0)}else{a=this.animTime/this.animDuration*this.animFrames;2===this.direction?this.animIndex=Math.max(0,this.animFrames-a):this.animIndex=Math.max(0,a),this.animIndex>=this.animFrames?(this.animIndex=0,this.animTime=0,this.direction=2):this.animIndex<=0&&2===this.direction&&(this.remove=!0),this.opacity=Math.min(.64,this.animIndex/this.animFrames*1)}}render(){var e=this.subType;imgSprite=imageLoader.images.animations[e].img;var t=parseInt(this.animIndex),a=this.spriteW,s=this.spriteH;sX=t%this.frameCols*a,sY=parseInt(t/this.frameRows)*a,3===this.subType?draw({x:this.x,y:this.y,w:3*this.animIndex,h:3*this.animIndex,color:"rgba(15,252,3, "+this.opacity+")"},"circle","fill_center","main"):draw({x:this.x,y:this.y,w:this.w,h:this.h,color:this.color,sX:sX,sY:sY,sW:a,sH:s,img:imgSprite},"rect","sprite","main")}}class Colony extends GameObject{constructor(e,t,a,s,r){super(e,t,a,s,r)}update(e,t){}render(){if(!this.remove){imgSprite=imageLoader.images.mapIcons.img,spriteW=128,spriteH=110,sY=0,sX=spriteOffsets.mapIcons[this.subType+"_colony"].x*spriteW;var e=game.state.colonies[this.subType][this.staticRef];if(draw({x:this.x,y:this.y,w:this.w,h:this.h,sX:sX,sY:sY,sW:spriteW,sH:spriteH,rotatedDeg:this.rotatedDeg/Math.PI*180,img:imgSprite},"rect","sprite","static"),void 0!==e){var t=.47*this.w,a=1,s=e.control_rate;draw({x:this.x+(this.w-t)/2,y:this.y+a,w:t,h:7,color:"rgb(255,255,255)"},"rect","fill","static"),draw({x:this.x+(this.w-t)/2,y:this.y+a,w:t*s,h:7,color:colorOfTypes.control_rate},"rect","fill","static"),draw({x:this.x+(this.w-t)/2,y:this.y+a,w:t,h:7,color:"rgb(0,0,0)"},"rect","stroke","static"),a=this.h-7-a,s=e.investment_left/e.invested_total,draw({x:this.x+(this.w-t)/2,y:this.y+a,w:t,h:7,color:"rgb(255,255,255)"},"rect","fill","static"),draw({x:this.x+(this.w-t)/2,y:this.y+a,w:t*s,h:7,color:colorOfTypes["power_"+this.subType]},"rect","fill","static"),draw({x:this.x+(this.w-t)/2,y:this.y+a,w:t,h:7,color:"rgb(0,0,0)"},"rect","stroke","static")}}}}var staticCanvasCtx,coverCanvasCtx,hoverAction="attack",hoverCellRef=!1,hoverObjectRef=!1,cellSize=100,cellSizeH=100,cellColumns=6,cellRows=4;function drawCell(e,t,a){canvasCtx.strokeStyle=void 0!==a?"rgb(255,255,0)":"rgb(0,0,0)";var s=e*cellSize,r=t*cellSizeH;staticCanvasCtx.beginPath(),staticCanvasCtx.rect(s*pixelRatio,r*pixelRatio,cellSize*pixelRatio,cellSizeH*pixelRatio),staticCanvasCtx.stroke()}function drawAllCells(){for(var e=0;e<cellColumns;e++)for(var t=0;t<cellRows;t++);}var categoryLegend={building_unlock:"unlocks",building_bonus:"stats",building_upgrade:"stats",building_limit:"stats",stat_bonus:"stats",product_unlock:"unlocks",resource_unlock:"unlocks",actions:"skill",timelapse_speed:"qol",timelapse_config:"qol",part_stats:"stats",ammo_types:"stats",army_unlocks:"unlocks"},angleGlobal=0;class TreeNode extends GameObject{constructor(e,t,a,s,r){super(e,t,a,s,r),this.glowIndex=0}render(){p=imageLoader.images.researchButtonsNew.img,spriteW=64,spriteH=64,sY=0,sX=0;var e=game.const.researchUpgrades[this.nodeRef.upgradeID],t=game.state.researchUpgrades[this.nodeRef.upgradeID],a=helpers.common.getUpgradeUnlockDetails(this.nodeRef.upgradeID);sX=spriteOffsets.researchButtonsNew[categoryLegend[e.category]].x*spriteW;var s="default";switch(e.category){case"building_unlock":game.const.buildings[e.subID],s=getLine("buildings_"+e.subID),getLine("buildings_"+e.subID+"_desc");break;case"product_unlock":game.const.products[e.subID],s=getLine("products_"+e.subID),getLine("products_"+e.subID+"_desc");break;case"building_bonus":game.const.buildings[e.subID],s=getLine("res_"+this.nodeRef.upgradeID+"_extra_desc"),getLine("res_desc_for",s,getLine("buildings_"+e.subID));break;case"building_upgrade":case"building_limit":s=getLine("res_"+this.nodeRef.upgradeID+"_extra_desc"),getLine("res_desc_for",s,getLine("buildings_"+e.subID));break;case"stat_bonus":s=getLine("res_"+this.nodeRef.upgradeID+"_extra_desc"),JSON.stringify(e.effects)}var r=!1;this.nodeRef.startNodePos?r=!0:(void 0===this.nodeRef.parentNode&&console.log("thisNodeID parent undefined: "+this.nodeRef.upgradeID),void 0!==game.state.researchUpgrades[this.nodeRef.parentNode.upgradeID]&&(r=!0));if(!isUndefined(a.perkCost)){var i=game.state.resources.perk_points.total-game.state.resources.perk_points.in_research;a.perkCost>i&&(r=!1)}a.allConditionsMet||(r=!1);var o=!1,n=0,d=void 0!==e.buyLimit?e.buyLimit:1;if(d>1&&(sY+=3*spriteH),void 0!==t&&(o=!0,(n=parseInt(t))>=d&&(r=!1)),r&&(sY+=spriteH),!1!==currentSuggestedResearchUpgradeID&&currentSuggestedResearchUpgradeID===this.nodeRef.upgradeID&&0===n&&!game.state.settings.hide_research_glow_tip){this.glowIndex=parseInt(performance.now()/30)%30;var c=Math.abs(this.glowIndex-15)/30,l=this.w*(1+.9*c),g=(this.w-l)/2;draw({x:this.x+g,y:this.y+g,w:l,h:l,img:imageLoader.images.whiteBlur.img},"rect","img","main")}game.const.resources[e.subType];var m="rgba(0,40,80,1)";if(r){if(this.globalID===hoverObjectRef)r&&(m="rgba(0,170,255,1)",m="rgba(255,255,0,1)",1<=game.state.resources.research_points.amount&&draw({x:this.x-1,y:this.y-2,w:this.w+4,h:this.h+4,color:m},"circle","fill","main"));else if(r)m="rgba(0,130,255,1)"}else m="rgba(0,150,50,1)";globalCollidableNodesIDs.indexOf(this.nodeRef.upgradeID)>-1&&draw({x:this.x,y:this.y,w:this.w,h:this.h,color:"rgba(150,130,255,0.8)"},"rect","fill","main"),r||o||(sY+=2*spriteH),draw({x:this.x,y:this.y,w:this.w,h:this.h,sX:sX,sY:sY,sW:spriteW,sH:spriteH,img:p},"rect","sprite","main");if(["resources","economy"].indexOf(e.mainCategory)>-1&&"rgb(255,255,255)","building_unlock"===e.category){var u=120*(s.length/14);draw({x:this.x-(u-this.w)/2-30,y:this.y+this.h-9+12,w:u+60,h:20,img:imageLoader.images.researchNameBG.img},"rect","img","main"),draw({x:this.x-(u-this.w)/2,y:this.y+this.h-9,w:u,h:40,color:"rgb(0,0,0)",font:"px titilliumWebRegular",fontSize:14,textAlign:"center",vAlign:"center",text:s},"rect","text","main")}var p=imageLoader.images.gameIcons.img;spriteW=64,sY=0,o&&n>=d&&d>1&&(sX=spriteOffsets.gameIcons.confirm.x*spriteW,draw({x:this.x+this.w+-15,y:this.y-8,w:20,h:20,sX:sX,sY:sY,sW:64,sH:64,img:p},"rect","sprite","main"));var h=this.x+this.w/2,v=this.y+this.h/2,f=this.w/2,y=this.nodeRef.parentNode.w/2,b=this.nodeRef.parentNode.x+this.nodeRef.parentNode.w/2,_=this.nodeRef.parentNode.y+this.nodeRef.parentNode.h/2,w=this.findTargetAngle({centerX:b,centerY:_},{centerX:h,centerY:v}),x=w/Math.PI*180,k=h+f*Math.cos(w),D=v+f*Math.sin(w),I=parseInt(Math.sqrt(Math.pow(k-b,2)+Math.pow(D-_,2)));I-=y;p=imageLoader.images.researchLines.img;spriteH=32,sX=2*(spriteW=128),sY=0,o&&(sX=1),this.nodeRef.startNodePos&&(sX=0),draw({x:k,y:D,w:I,h:20,sX:sX,sY:sY,sW:spriteW,sH:spriteH,img:p,rotatedDeg:x,rotateOffset:0,extraYoffset:-10},"rect","sprite","static")}}var GridFactory,worldGrid,projectionImg,projectionCanvas,projectionContext,HexFactory=!1,projectionPixelData=null;class GameGrid{constructor(e){if(this.globalID=globalObjectID,globalObjectID++,this.rotatedDeg=0,void 0!==e){var t=this;$.each(e,(function(e,a){t[e]=a}))}}hits(e){if("rect"===this.shape){if(this.x<e.x+e.w&&this.x+this.w>e.x&&this.y<e.y+e.h&&this.y+this.h>e.y)return!0}else this.shape;return!1}}class Region extends GameGrid{constructor(e){e.shape="hexagon",super(e)}render(){game.const.gameGrids.regions;staticCanvasCtx.strokeStyle="rgb(0,0,0)";var e=game.state.jobs.explorer.region===this.ref,t=game.state.currentAttackedRegion===this.ref,a=this.conqueredTers>=game.const.gameGrids.territories.cols*game.const.gameGrids.territories.rows,s=this.exploredTers/(game.const.gameGrids.territories.cols*game.const.gameGrids.territories.rows),r=hoverCellRef===this.ref;staticCanvasCtx.fillStyle=this.color,landTypeColors[this.continent],!this.enemy&&a?staticCanvasCtx.fillStyle=colorOfTypes.player_region:this.attackable&&game.data.canAttackNewRegion&&(staticCanvasCtx.fillStyle=colorOfTypes.attackable_region);var i=helpers.territory.isLockedContinent(this.continent);i&&(game.data.canAttackNewContinent&&game.getSettingValue("show_attackable_regions")?helperData.hoveredContinent===this.continent?staticCanvasCtx.fillStyle="rgba(255,0,0, 1)":staticCanvasCtx.fillStyle="rgba(255,150,0, 1)":staticCanvasCtx.fillStyle="rgba(0,0,0, 0.5)",staticCanvasCtx.strokeStyle=staticCanvasCtx.fillStyle);var o=this.vertices,n=o[0];staticCanvasCtx.beginPath(),staticCanvasCtx.moveTo(n.x*pixelRatio+game.data.cameraXoffset+helpers.common.getCanvasOffsetX(),n.y*pixelRatio+game.data.cameraYoffset+helpers.common.getCanvasOffsetY());for(var d=1,c=o.length;d<c;++d)n=o[d],staticCanvasCtx.lineTo(n.x*pixelRatio+game.data.cameraXoffset+helpers.common.getCanvasOffsetX(),n.y*pixelRatio+game.data.cameraYoffset+helpers.common.getCanvasOffsetY());staticCanvasCtx.closePath(),staticCanvasCtx.stroke(),staticCanvasCtx.fill(),r&&!i&&(!this.enemy||this.attackable&&game.data.canAttackNewRegion?staticCanvasCtx.fillStyle="rgba(255,255,255,0.4)":staticCanvasCtx.fillStyle="rgba(0,0,0,0.7)",staticCanvasCtx.fill()),!1!==helperData.setupColony&&this.enemy&&!i&&isUndefined(game.state.colonies.military[this.ref])&&isUndefined(game.state.colonies.economic[this.ref])&&(staticCanvasCtx.fillStyle=colorOfTypes["place_"+helperData.setupColony.subType+"_colony"],staticCanvasCtx.fill()),imgSprite=imageLoader.images.mapIcons.img,spriteW=128,spriteH=110,sY=0;var l=!1,g={x:this.vertices[3].x-1,y:this.vertices[5].y-1,w:102,h:89};if(e&&t?l="attack_and_explore":e?l="explore":a?l="conquered":t&&(l="attack"),this.enemy&&this.attackable&&game.data.canAttackNewRegion&&(l="attack",r&&(l="attack_active")),!1!==l&&(sX=spriteOffsets.mapIcons[l].x*spriteW,draw({x:g.x,y:g.y,w:g.w,h:g.h,sX:sX,sY:sY,sW:spriteW,sH:spriteH,img:imgSprite},"rect","sprite","static")),!e&&a&&s<1){var m=47,u=2;u=80-u;var p=s;draw({x:this.x+26.5,y:this.y+u,w:m,h:7,color:colorOfTypes.power_military},"rect","fill","cover"),draw({x:this.x+26.5,y:this.y+u,w:m*p,h:7,color:colorOfTypes.control_rate},"rect","fill","cover"),draw({x:this.x+26.5,y:this.y+u,w:m,h:7,color:"rgb(0,0,0)"},"rect","stroke","cover")}}}var territoryColors={playerOwned:{regular:"rgba(0,0,255, 0.3)",hover:"rgba(255,0,0, 0.5)"},enemyOwned:{regular:"rgba(255,0,0, 0.3)",hover:"rgba(0,0,255, 0.5)"}};class TerritoryNew extends GameGrid{constructor(e){e.shape="rect",super(e),this.cloudX=!1,this.cloudY=!1,this.lastUpdated=0}setConquered(){this.enemy?this.enemy=!1:this.enemy=!0}render(e,t){var a=imageLoader.images.resourceIcons.img;imgSprite=imageLoader.images.gameIcons.img,spriteW=64,sY=0,sX=0;var s=game.state.gameGrids.territories[game.state.currentParentGrids.regions][this.ref],r=(game.const.gameGrids.territories,territoryColors[this.enemy?"enemyOwned":"playerOwned"]);if((this.closestPlayerTer>2||game.data.showOnlyStartingTer)&&this.enemy&&"economic"!==t){game.data.showOnlyStartingTer}else{var i=!1;if(game.data.showOnlyStartingTer&&!this.enemy){i=!0;var o=[],n=180,d=this.x-n+(n-this.w)/2-20,c=this.y-(n-this.h)/2,l=[d,c];o.push(l),l=[d+30,c-60],o.push(l),l=[d+30,c+60],o.push(l),l=[d=this.x+this.w-(n-this.w)/2+10,c],o.push(l),l=[d-30,c-60],o.push(l),l=[d-30,c+60],o.push(l),l=[d=this.x-(n-this.w)/2,c=this.y-n+(n-this.h)/2],o.push(l),l=[d,c=this.y+this.h-(n-this.h)/2+10],o.push(l)}var g=this.enemy?1-this.controlRate:this.controlRate,m=game.checkIfAttackable("territories",this.ref)&&this.enemy,u=r.regular,p=game.state.jobs.explorer.territory===this.ref&&game.state.jobs.explorer.region===game.state.currentParentGrids.regions,h=s.explored_spots/game.const.exploredSpotsCap,v=h>=1;!e||this.enemy&&!m||p&&!v||i||draw({x:this.x,y:this.y,w:this.w,h:this.h,color:u},"rect","fill","static");var f=this.enemy?"flag_enemy":"flag_our";sX=spriteOffsets.resourceIcons[f].x*spriteW,sY=spriteOffsets.resourceIcons[f].y*spriteW;var y={x:this.x+30,y:this.y+30,w:40,h:40};i&&(y={x:this.x+36,y:this.y+10,w:30,h:30}),draw({x:y.x,y:y.y,w:y.w,h:y.h,sX:sX,sY:sY,sW:spriteW,sH:spriteW,img:a},"rect","sprite","main"),sY=0;var b=[];this.enemy?"economic"===t?b.push({type:"gold",text:s.price.formatNumber(2,2)}):(b.push({type:"control_rate",text:Math.round(100*g)+"%"}),b.push({type:"power",text:"x"+parseInt(100*this.powerMX)/100})):i||b.push({type:"explored",text:parseInt(100*h*100)/100+"%"});for(var _=0;_<b.length;_++){var w=b[_];"gold"===w.type?(sX=spriteOffsets.resourceIcons[w.type].x*spriteW,draw({x:this.x+5,y:this.y+5+15*_,w:15,h:15,sX:sX,sY:sY,sW:spriteW,sH:spriteW,img:a},"rect","sprite","main")):(sX=spriteOffsets.gameIcons[w.type].x*spriteW,draw({x:this.x+5,y:this.y+5+15*_,w:15,h:15,sX:sX,sY:sY,sW:spriteW,sH:spriteW,img:imgSprite},"rect","sprite","main")),draw({x:this.x+20,y:this.y+5+15*_,w:this.w,h:this.h,color:"rgb(255,255,255)",font:"px titilliumWebRegular",fontSize:10,text:w.text},"rect","text","main")}if(!1===s.boost||i||(sX=spriteOffsets.resourceIcons[s.boost.subType].x*spriteW,sY=spriteOffsets.resourceIcons[s.boost.subType].y*spriteW,draw({x:this.x+75,y:this.y+5,w:24,h:24,sX:sX,sY:sY,sW:spriteW,sH:spriteW,img:a,shadowColor:"#FFFF55",shadowBlur:15,shadowOffsetX:0,shadowOffsetY:0},"rect","sprite","main")),i&&!p){this.glowIndex=parseInt(performance.now()/40)%40;var x=50*(.8+.5*(Math.abs(this.glowIndex-20)/40)),k=(this.w-x)/2;draw({x:this.x+1+k,y:this.y+10+k,w:x,h:x,img:imageLoader.images.whiteBlur.img},"rect","img","static")}sY=0;var D=!1,I={w:this.w,h:30,x:this.x,y:this.y+70,size:12},C=!1,T={w:30,h:30,x:this.x+60,y:this.y+50},A="main",P=hoverCellRef===this.ref;if(P&&(u=r.hover,T={w:40,h:40,x:this.x+30,y:this.y+30},i&&(D=getLine("start_exploring"),C="explore_active",A="static",T={w:40,h:40,x:this.x+31,y:this.y+40},I={w:this.w,h:30,x:this.x,y:this.y+85,size:6}),this.enemy?"economic"===t?(D=getLine("grid_buy"),C="economic",T={w:48,h:48,x:this.x+29,y:this.y+29}):m&&(D=getLine("grid_invade"),C="attack_active"):this.enemy||(p?(i||(I.y=this.y+80,I.size=7),D=getLine(v?"fully_explored":"already_exploring")):v?(D=getLine("fully_explored"),I.y=this.y+80,I.size=7):(D=getLine("start_exploring"),C="explore_active"))),!P||i)if(this.enemy)"economic"===t?(C="economic",T={w:20,h:20,x:this.x+60,y:this.y+68}):m&&(C="attack");else if(i&&!P&&(D=getLine("start_exploring"),C="explore",A="static",T={w:40,h:40,x:this.x+31,y:this.y+40},I={w:this.w,h:30,x:this.x,y:this.y+85,size:6}),v)D=getLine("fully_explored"),I.y=this.y+80,I.size=7;else if(p){P||(I.y=this.y+80,I.size=7,D=getLine("explored")+parseInt(100*h*100)/100+"%",C="explore_active");var S=92;i&&(I.y=this.y+90,I.size=4,S=97);var L=this.w-40;draw({x:this.x+(this.w-L)/2,y:this.y+S,w:L,h:2,color:"rgb(255,255,255)"},"rect","fill","static");var O=Math.max(0,Math.min(1,game.state.jobs.explorer.lastCycle/game.const.jobs.explorer.cycleTime));draw({x:this.x+(this.w-L)/2,y:this.y+S,w:L*O,h:2,color:"rgb(26,61,241)"},"rect","fill","static")}else C=P&&i?"explore_active":"explore";!1!==D&&draw({x:I.x,y:I.y,w:I.w,h:I.h,color:"rgb(255,255,255)",font:"px titilliumWebRegular",fontSize:I.size,textAlign:"center",vAlign:"top",text:D},"rect","text",A),!1!==C&&("economic"===C?(sX=spriteOffsets.resourceIcons[C].x*spriteW,draw({x:T.x,y:T.y,w:T.w,h:T.h,sX:sX,sY:sY,sW:spriteW,sH:spriteW,img:a},"rect","sprite",A)):(sX=spriteOffsets.gameIcons[C].x*spriteW,draw({x:T.x,y:T.y,w:T.w,h:T.h,sX:sX,sY:sY,sW:spriteW,sH:spriteW,img:imgSprite},"rect","sprite",A))),e&&!game.data.showOnlyStartingTer&&(staticCanvasCtx.setLineDash([3,5]),draw({x:this.x,y:this.y,w:this.w,h:this.h,color:"rgb(255,255,255)"},"rect","stroke","static"))}}}class Zone extends GameGrid{constructor(e){e.shape="rect",super(e)}setConquered(){this.enemy?this.enemy=!1:this.enemy=!0}render(){var e=imageLoader.images.resourceIcons.img;imgSprite=imageLoader.images.resourceIcons.img,spriteW=64,sY=0,sX=0;var t=game.state.gameGrids.zones[game.state.currentParentGrids.regions][game.state.currentParentGrids.territories][this.ref],a=(game.const.gameGrids.zones,territoryColors[this.enemy?"enemyOwned":"playerOwned"]),s=game.checkIfAttackable("zones",this.ref)&&this.enemy,r=a.regular;forceDrawAll&&s&&draw({x:this.x,y:this.y,w:this.w,h:this.h,color:r},"rect","fill","static"),forceDrawAll&&(staticCanvasCtx.setLineDash([3,5]),draw({x:this.x,y:this.y,w:this.w,h:this.h,color:"rgb(255,255,255)"},"rect","stroke","static"));var i=this.enemy?"flag_enemy":"flag_our";sX=spriteOffsets.resourceIcons[i].x*spriteW,sY=spriteOffsets.resourceIcons[i].y*spriteW;var o={x:this.x+30,y:this.y+35,w:40,h:40};draw({x:o.x,y:o.y,w:o.w,h:o.h,sX:sX,sY:sY,sW:spriteW,sH:spriteW,img:e},"rect","sprite","main"),!1!==t.boost&&(sX=spriteOffsets.resourceIcons[t.boost.subType].x*spriteW,sY=spriteOffsets.resourceIcons[t.boost.subType].y*spriteW,draw({x:this.x+75,y:this.y+10,w:24,h:24,sX:sX,sY:sY,sW:spriteW,sH:spriteW,img:e,shadowColor:"#FFFF55",shadowBlur:15,shadowOffsetX:0,shadowOffsetY:0},"rect","sprite","main"));var n=!1,d={x:this.x,y:this.y+80,w:this.w,h:20,size:12},c=!1,l={x:this.x+20,y:this.y+70,w:20,h:20};if(hoverCellRef===this.ref&&this.enemy&&s){r=a.hover,n=getLine("to_battle"),c="attack_active";l={x:this.x+30,y:this.y+35,w:40,h:40}}else s&&(c="attack");!1!==n&&draw({x:d.x,y:d.y,w:d.w,h:d.h,color:"rgb(255,255,255)",font:"px titilliumWebRegular",fontSize:d.size,textAlign:"center",vAlign:"top",text:n},"rect","text","main"),this.enemy&&draw({x:this.x+10,y:this.y+15,w:this.w-20,h:this.h,color:"rgb(255,255,255)",font:"px titilliumWebRegular",fontSize:10,textAlign:"left",vAlign:"top",text:getLine("enemy_power")+this.tilePower.formatNumber()},"rect","text","main"),sY=0,!1!==c&&(sX=spriteOffsets.gameIcons[c].x*spriteW,draw({x:l.x,y:l.y,w:l.w,h:l.h,sX:sX,sY:sY,sW:spriteW,sH:spriteW,img:imgSprite},"rect","sprite","main"))}}function createLandProjection(){projectionImg=imageLoader.images.worldProjection.img,projectionCanvas=document.createElement("canvas"),projectionContext=projectionCanvas.getContext("2d"),projectionCanvas.width=projectionImg.width,projectionCanvas.height=projectionImg.height,projectionContext.drawImage(projectionImg,0,0,projectionImg.width,projectionImg.height)}function switchToGridType(e,t){initGrids(e,t)}function initGrids(e,t){void 0===t&&(t=!1);var a=game.const.gameGrids[e];if(void 0!==a){var s,r,i,o,n=!1,d=game.state.gameGrids[e];switch(game.data.gameGrids={},e){case"regions":var c,l,g=!1;!1===HexFactory&&(g=!0,HexFactory=Honeycomb.extendHex({size:a.gridW,orientation:"flat"}),GridFactory=Honeycomb.defineGrid(HexFactory),(worldGrid=GridFactory.rectangle({width:a.cols,height:a.rows})).gridWidth=worldGrid.pointWidth(),worldGrid.gridHeight=worldGrid.pointHeight()),i=Object.keys(d).length>0,game.data.playerOwnedRegionsRefs=[],$.each(worldGrid,(function(e,t){var s=t.toPoint(),n={x:(l=t.corners().map((e=>e.add(s))))[3].x+a.gridW,y:l[3].y},g=isLandSimple(n.x,n.y),m=g.isLand?"land":"water",u=g.continent,p=randomItemFromArray(colorVariants[m]),h=!0,v=0,f=0;r=t.x.toString()+"_"+t.y.toString(),i?(m=d[e].landType,u=d[e].continent,p=d[e].color,h=d[e].enemy,v=d[e].conqueredTers,void 0===(f=d[e].exploredTers)&&($.each(game.state.gameGrids.territories[r],(function(e,t){t.explored_spots>=game.const.exploredSpotsCap&&f++})),d[e].exploredTers=f)):d[e]={id:e,ref:r,landType:m,continent:u,color:p,enemy:h,conqueredTers:0,exploredTers:f},h||game.data.playerOwnedRegionsRefs.push(r),c={id:e,ref:r,x:l[3].x,y:l[5].y,vertices:l,landType:m,continent:u,color:p,enemy:h,attackable:!1,conqueredTers:v,exploredTers:f},o=new Region(c),game.data.gameGrids[r]=o})),game.data.playerOwnedRegions=game.data.playerOwnedRegionsRefs.length,g&&initNeighbourData(),updateAttackableGrids("regions",game.state.currentParentGrids.continent);break;case"territories":n=game.state.currentParentGrids.regions,i=void 0!==d[n];var m=helpers.territory.getRegionIDfromRef(n),u=game.state.gameGrids.regions[m].conqueredTers>=a.cols*a.rows;i||(d[n]={},game.state.gameGrids.zones[n]={});var p,h,v=parseInt(a.cols/2),f=parseInt(a.rows/2),y={};game.data.playerOwnedTerRefs=[];for(var b=game.calculateGameTimePowerMX("cost"),_=1e5,w=0;w<a.cols;w++)for(var x=0;x<a.rows;x++){if(r=w.toString()+"_"+x.toString(),i){if(T=d[n][r].enemy,u&&(T=!1),h=d[n][r].conqueredTiles.length/(game.const.gameGrids.zones.rows*game.const.gameGrids.zones.cols),p=d[n][r].powerMX,void 0===d[n][r].price){var k=0;D=randomIntFromInterval(1e4,_),!1!==d[n][r].boost?2:1,k=D*b*2,d[n][r].price=k}}else{T=!(t&&w===v&&x===f),u&&(T=!1),p=(p=t?helpers.territory.calculateManhattanDistance(w+"_"+x,v+"_"+f):helpers.territory.getDistanceFromAttackableDirection({x:w,y:x,cols:a.cols,rows:a.rows}))>0?Math.pow(2,p-1):0;var D,I=helpers.territory.decideForARandomBoost("territories",{enemy:T});k=0;k=(D=randomIntFromInterval(1e4,_))*b*(!1!==I?2:1),d[n][r]={id:w*a.rows+x,ref:r,conqueredTiles:[],explored_spots:0,boost:I,enemy:T,powerMX:p,price:k},h=w===v&&x===f?1:0}var C=[];x-1>=0&&C.push(w+"_"+(x-1)),w+1<a.cols&&C.push(w+1+"_"+x),x+1<a.rows&&C.push(w+"_"+(x+1)),w-1>=0&&C.push(w-1+"_"+x),y[r]=C,T||game.data.playerOwnedTerRefs.push(r),s={id:w*a.rows+x,ref:r,x:w*a.gridW,y:x*a.gridH,w:a.gridW,h:a.gridH,enemy:T,controlRate:h,powerMX:p},o=new TerritoryNew(s),game.data.gameGrids[r]=o}helpers.territory.updateManhattanToClosestFriendly(game.data.gameGrids),game.data.playerOwnedTers=game.data.playerOwnedTerRefs.length,game.data.terNeighbourRefs=y;break;case"zones":var T,A;n=game.state.currentParentGrids.territories,(i=void 0!==d[game.state.currentParentGrids.regions][n])||(d[game.state.currentParentGrids.regions][n]={});var P={},S=1e3*game.state.gameGrids.territories[game.state.currentParentGrids.regions][n].powerMX*game.calculateGameTimePowerMX("power");for(w=0;w<a.cols;w++)for(x=0;x<a.rows;x++){r=w.toString()+"_"+x.toString(),i?T=d[game.state.currentParentGrids.regions][n][r].enemy:(T=!0,I=helpers.territory.decideForARandomBoost("zones",{enemy:!0}),d[game.state.currentParentGrids.regions][n][r]={id:w*a.rows+x,ref:r,enemy:T,boost:I}),game.data.continentRewardBoosts.zone_loot_increase>1&&void 0===d[game.state.currentParentGrids.regions][n][r].boost.mx1&&(d[game.state.currentParentGrids.regions][n][r].boost.amount*=game.data.continentRewardBoosts.zone_loot_increase,d[game.state.currentParentGrids.regions][n][r].boost.mx1=1),A=S*helpers.territory.getDistanceFromAttackableDirection({x:w,y:x,cols:a.cols,rows:a.rows}),s={id:w*a.rows+x,ref:r,x:w*a.gridW,y:x*a.gridH,w:a.gridW,h:a.gridH,enemy:T,tilePower:A},o=new Zone(s),game.data.gameGrids[r]=o;C=[];x-1>=0&&C.push(w+"_"+(x-1)),w+1<a.cols&&C.push(w+1+"_"+x),x+1<a.rows&&C.push(w+"_"+(x+1)),w-1>=0&&C.push(w-1+"_"+x),P[r]=C}game.data.terTileNeighbourRefs=P}}else console.log("invalid grid type defined "+e)}var isLand=function(e){null==projectionPixelData&&(projectionPixelData=projectionContext.getImageData(0,0,projectionImg.width,projectionImg.height));for(var t,a,s,r,i=worldGrid.gridWidth,o=worldGrid.gridHeight,n=projectionImg.width/i,d=projectionImg.height/o,c=0,l=0;l<e.length;l++)if(t=e[l].x*n,a=e[l].y*d,s=parseInt(t),r=parseInt(a),s=Math.min(projectionImg.width-1,s),r=Math.min(projectionImg.height-1,r),0===projectionPixelData.data[4*(r*projectionPixelData.width+s)]&&++c>=2)return!0;return!1},landTypeThresholds={"0_0_255":"africa","0_255_0":"australia","255_0_0":"europe","0_255_255":"asia","255_0_255":"north_america","255_255_0":"south_america","0_0_0":"antarctica"},landTypeColors={africa:"rgb(0,0,255)",australia:"rgb(0,255,0)",europe:"rgb(255,0,0)",asia:"rgb(0,255,255)",north_america:"rgb(255,0,255)",south_america:"rgb(255,255,0)",antarctica:"rgb(0,0,0)"},landTypeBorderLines={africa:[],australia:[],europe:[],asia:[],north_america:[],south_america:[],antarctica:[]},isLandSimple=function(e,t){var a=worldGrid.gridWidth,s=worldGrid.gridHeight,r=projectionImg.width/a;t*=projectionImg.height/s;var i=parseInt(e*=r),o=parseInt(t);i=Math.min(projectionImg.width-1,i),o=Math.min(projectionImg.height-1,o),null==projectionPixelData&&(projectionPixelData=projectionContext.getImageData(0,0,projectionImg.width,projectionImg.height));var n=projectionPixelData.data[4*(o*projectionPixelData.width+i)],d=projectionPixelData.data[4*(o*projectionPixelData.width+i)+1],c=projectionPixelData.data[4*(o*projectionPixelData.width+i)+2],l=projectionPixelData.data[4*(o*projectionPixelData.width+i)+3],g=!(n>6&&d>6&&c>6),m="water";if(g){var u=255*Math.round(n/255),p=255*Math.round(d/255),h=255*Math.round(c/255),v=(Math.round(l/255),u.toString()+"_"+p.toString()+"_"+h.toString());m=landTypeThresholds[v]}return{isLand:g,continent:m}};function updateAttackableGrids(e,t){var a,s,r,i;performance.now();if("regions"===e){if(!1===t)return;if(void 0===t)return;for(var o=game.const.continents[t],n=(o.gridRefs.filter((e=>!o.conqueredGrids.includes(e))),o.conqueredGrids),d=0;d<n.length;d++)if(s=n[d],!(r=game.data.gameGrids[s]).enemy&&t===r.continent){a=worldGrid[r.id].neighbours;var c=performance.now();$.each(a,(function(e,t){null!==t&&!1!==t&&void 0!==t&&(s=t.x.toString()+"_"+t.y.toString(),(i=game.data.gameGrids[s]).enemy&&"land"===i.landType&&(i.attackable=!0))})),performance.now()-c}}}function selectStartingRegion(e){var t=randomItemFromArray(game.const.continents[e].gridRefs);game.data.gameGrids[t].enemy=!1,game.state.gameGrids.regions[game.data.gameGrids[t].id].enemy=!1,game.state.gameGrids.regions[game.data.gameGrids[t].id].conqueredTers=1,game.state.currentAttackedRegion=t,game.state.currentParentGrids.continent=e,game.state.currentParentGrids.regions=t,game.state.currentParentGrids.territories="0_0",game.const.continents[e].conqueredGrids.push(t),game.data.playerOwnedTerRefs.push(game.state.currentParentGrids.territories),helpers.territory.unlockContinent(e),console.log("switchtogrid territories starting"),switchToGridType("territories",!0),game.state.homeGridRefs.regions=t,game.data.canAttackNewRegion=helpers.territory.canAttackNewRegion()}var specialGridNeighbours={"10_7":{sw:{x:9,y:8}},"8_7":{se:{x:9,y:8}},"9_8":{ne:{x:10,y:7},nw:{x:8,y:7}},"19_1":{se:{x:20,y:3}},"20_3":{nw:{x:19,y:1}},"27_17":{e:{x:29,y:17},se:{x:28,y:19}},"29_17":{w:{x:27,y:17}},"28_19":{nw:{x:27,y:17}},"22_27":{ne:{x:23,y:25}},"24_27":{nw:{x:23,y:25}},"23_25":{sw:{x:22,y:27},se:{x:24,y:27}},"44_15":{sw:{x:43,y:16}},"43_16":{ne:{x:44,y:15}},"44_20":{se:{x:46,y:22}},"43_21":{se:{x:46,y:22},sw:{x:42,y:23}},"46_22":{nw:{x:44,y:20},sw:{x:43,y:21}},"42_23":{ne:{x:43,y:21},se:{x:44,y:25}},"44_25":{nw:{x:42,y:23},ne:{x:46,y:23}},"46_23":{sw:{x:44,y:25}},"40_6":{ne:{x:42,y:6}},"42_6":{sw:{x:40,y:6}},"38_11":{se:{x:41,y:11}},"41_11":{nw:{x:38,y:11},sw:{x:40,y:13}},"40_13":{ne:{x:41,y:11}},"38_14":{se:{x:39,y:15},ne:{x:40,y:14}},"40_14":{sw:{x:39,y:15},nw:{x:38,y:14}},"39_15":{nw:{x:38,y:14},ne:{x:40,y:14}}};function getGridNeighbours(e,t,a){var s={};if("hex"===e){var r=t%2==0?-1:0;s.n={x:t,y:a-1},s.s={x:t,y:a+1},s.ne={x:t+1,y:a+r},s.se={x:t+1,y:a+1+r},s.nw={x:t-1,y:a+r},s.sw={x:t-1,y:a+1+r},$.each(s,(function(e,t){(t.x<0||t.y<0||t.x>=game.const.gameGrids.regions.cols||t.y>=game.const.gameGrids.regions.rows)&&(s[e]=!1)}))}return s}var borderDirectionLineVertices={n:[4,5],s:[1,2],ne:[5,0],se:[0,1],nw:[3,4],sw:[2,3]};function initNeighbourData(){var e,t,a,s;$.each(worldGrid,(function(r,i){t=i.x.toString()+"_"+i.y.toString(),e=game.data.gameGrids[t];var o=getGridNeighbours("hex",i.x,i.y);"land"===e.landType&&(game.const.continents[e.continent].gridRefs.push(t),e.enemy||game.const.continents[e.continent].conqueredGrids.push(t),"undefined"!==specialGridNeighbours[t]&&$.each(specialGridNeighbours[t],(function(e,t){o[e]=t}))),i.neighbours=o,$.each(i.neighbours,(function(o,n){if(!1!==n&&(t=n.x.toString()+"_"+n.y.toString(),a=game.data.gameGrids[t],i.neighbours[o].water="water"===a.landType,"land"===e.landType&&(i.neighbours[o].water||e.continent!=a.continent))){var d=borderDirectionLineVertices[o];void 0===d&&console.log("undefined direction: "+o+" key: "+JSON.stringify(r)+" ref: "+t),s=[o,e.vertices[d[0]].x,e.vertices[d[0]].y,e.vertices[d[1]].x,e.vertices[d[1]].y],landTypeBorderLines[e.continent].push(s)}}))}))}class Biome extends GameGrid{constructor(e){e.shape="rect",super(e)}}var biomeTerrainTypes=[{type:"grass",weight:100},{type:"water",weight:10},{type:"farm",weight:30},{type:"forest",weight:200}],biomesPoints=[],biomesData=[],biomeCols=20,biomeRows=10,biomePoints=50,biomeExtraTerPaddingCols=1,biomeExtraTerPaddingRows=1,boostTypesToBiomes={food:"farm",wood:"forest",water:"water",iron:"grass",parts:"grass"};function createBiomes(e){var t=new Srand;t.setState(game.data.seeds.biomes.getState());var a=helpers.territory.getRegionIDfromRef(game.state.currentParentGrids.regions),s=game.state.gameGrids.territories[game.state.currentParentGrids.regions],r=t.seed(),i=helpers.common.getCharNumericSumFromString(a);t.seed(r+i);var o=[];$.each(s,(function(e,t){if(!1!==t.boost){var a=helpers.territory.getClosestBiomeData(e),s={boostType:t.boost.subType,col:a.col,row:a.row};o.push(s)}})),biomesPoints=[],biomesData=[];for(var n=0;n<biomeCols;n++)for(var d=0;d<biomeRows;d++);var c,l,g,m=Math.max(30,o.length),u=t.intInRange(m,biomePoints),p=[],h=game.const.gameGrids.territories,v=h.gridW*h.cols,f=h.gridH*h.rows,y=v+2*h.gridW*biomeExtraTerPaddingCols,b=f+2*h.gridH*biomeExtraTerPaddingRows;v=y,f=b;h.gridW,h.gridH;var _=y/biomeCols,w=b/biomeRows,x=3;for(n=0;n<u;n++){var k=!1;if(n<o.length?(l=o[n].col,g=o[n].row,c=boostTypesToBiomes[o[n].boostType],k=!0):(c=helpers.common.getRandomItemBasedOnWeight(biomeTerrainTypes,t.random()).type,l=t.intInRange(0,biomeCols),g=t.intInRange(0,biomeRows)),"grass"!==c){var D=t.intInRange(1,3),I=t.intInRange(0,359),C=imageLoader.images["biome_"+c+"_"+D].img,T="forest"===c?13:3,A=C.width/T,P=C.height/T,S=getRectCorners({x:l*_+(_-A)/2-h.gridW*biomeExtraTerPaddingCols,y:g*w+(w-P)/2-h.gridH*biomeExtraTerPaddingRows,w:A,h:P,rotatedDeg:I}),L=!1;if(!k)for(d=0;d<p.length;d++){if(doPolygonsIntersect(p[d],S)){L=!0;break}}L?x>0&&(x--,n--):(x=3,biomesPoints.push({type:c,x:l,y:g,subType:D,rotation:I}),p.push(S))}}biomesPoints.sort((function(e,t){return"water"===e.type&&"water"!==t.type})),biomesPoints.sort((function(e,t){return"forest"===e.type&&"forest"!==t.type})),biomesPoints.sort((function(e,t){return"farm"===e.type&&"farm"!==t.type}));for(n=0;n<biomeCols;n++)for(d=0;d<biomeRows;d++){for(var O="grass",R=Number.MAX_VALUE,M=0;M<biomesPoints.length;M++){var U=biomesPoints[M].x-n,j=biomesPoints[M].y-d,E=U*U+j*j;E<R&&E<5&&(O=biomesPoints[M].type,R=E)}"grass"!==O&&biomesData.push({x:n,y:d,type:O})}}var biomesPointsZones=[],zonesPadding=6;function calcBiomsForZones(e){var t=game.const.gameGrids.zones,a=game.const.gameGrids.territories,s=a.gridW*a.cols,r=a.gridH*a.rows,i=s+2*a.gridW*biomeExtraTerPaddingCols,o=r+2*a.gridH*biomeExtraTerPaddingRows,n=i/biomeCols,d=o/biomeRows,c=a.gridW*biomeExtraTerPaddingCols,l=a.gridH*biomeExtraTerPaddingRows,g=e.split("_");g[0]=parseInt(g[0]),g[1]=parseInt(g[1]);var m,u,p,h,v=(g[0]-zonesPadding/t.cols)*a.gridW,f=(g[1]-zonesPadding/t.rows)*a.gridH,y=(g[0]+1+zonesPadding/t.cols)*a.gridW-v,b=(g[1]+1+zonesPadding/t.rows)*a.gridH-f,_=Math.min(t.cols,t.rows);biomesPointsZones=[];for(var w=0;w<biomesPoints.length;w++){p=n*(m=biomesPoints[w]).x-c,h=d*m.y-l,(u=$.extend(!0,{},m)).x=(p-g[0]*a.gridW)*_,u.y=(h-g[1]*a.gridH)*_,u.w=n*_,u.h=d*_,helpers.common.checkIfObjectsOverlap({x:v,y:f,w:y,h:b},{x:p,y:h,w:n,h:d})&&biomesPointsZones.push(u)}}var battleBiomePoints=[];function createBattleBiomes(e){battleBiomePoints=[];var t=new Srand;t.setState(game.data.seeds.biomes.getState());var a,s,r=game.state.currentParentGrids.regions+game.state.currentParentGrids.territories+game.state.currentParentGrids.zones,i=t.seed(),o=helpers.common.getCharNumericSumFromString(r);t.seed(i+o);for(var n=t.intInRange(8,20),d=0;d<n;d++){a=t.intInRange(-1e3,1e3),s=t.intInRange(0,100);var c=t.intInRange(0,3),l=t.intInRange(0,359);battleBiomePoints.push({position:"top",type:"forest_small",subType:c,x:a,y:s,rotatedDeg:l})}n=t.intInRange(8,20);for(d=0;d<n;d++){a=t.intInRange(-1e3,1e3),s=t.intInRange(0,100);c=t.intInRange(0,3),l=t.intInRange(0,359);battleBiomePoints.push({position:"bottom",type:"forest_small",subType:c,x:a,y:s,rotatedDeg:l})}}class FlyingBee extends GameObject{constructor(e,t,a,s,r){super(e,t,a,s,r),this.animIndex=0,this.animFrames=12,this.animDuration=500,this.animTime=0,this.rotatedDeg=randomIntFromInterval(0,359),this.speed=randomIntFromInterval(100,500)}update(e){this.animTime+=e;var t=parseInt(this.animTime/this.animDuration*this.animFrames);this.animIndex=t,this.animIndex>=this.animFrames&&(this.animIndex=0,this.animTime=0);var a=Math.floor(e/1e3*this.speed),s=a*Math.cos(this.rotatedDeg*Math.PI/180),r=a*Math.sin(this.rotatedDeg*Math.PI/180);this.x+=s,this.y+=r;var i=!1,o=90;if((this.x>worldGrid.gridWidth||this.x<=0)&&(i=!0),(this.y>worldGrid.gridHeight||this.y<=0)&&(o=0,i=!0),i){var n=2*o-this.rotatedDeg;this.rotatedDeg=n>=360?n-360:n<0?n+360:n}}render(e){var t=imageLoader.images.flyingBee.img;spriteH=512,sY=0,sX=(spriteW=512)*this.animIndex,draw({x:this.x,y:this.y,w:this.w,h:this.h,color:this.color,sX:sX,sY:sY,sW:spriteW,sH:spriteH,img:t,rotatedDeg:this.rotatedDeg},"rect","sprite","main")}}function getRectCorners(e,t){var a=[{x:e.x,y:e.y},{x:e.x+e.w,y:e.y},{x:e.x+e.w,y:e.y+e.h},{x:e.x,y:e.y+e.h}];if(t)var s=e.rotatedDeg;else s=e.rotatedDeg*Math.PI/180;for(var r,i,o=e.x+e.w/2,n=e.y+e.h/2,d=0;d<a.length;d++){perfTests.c6++;var c=a[d].x-o,l=a[d].y-n;r=c*Math.cos(s)-l*Math.sin(s)+o,i=c*Math.sin(s)+l*Math.cos(s)+n,a[d].x=r,a[d].y=i}return a}function doPolygonsIntersect(e,t){var a,s,r,i,o,n,d,c,l=[e,t];for(i=0;i<l.length;i++){perfTests.c6++;var g=l[i];for(o=0;o<g.length;o++){perfTests.c6++;var m=(o+1)%g.length,u=g[o],p=g[m],h={x:p.y-u.y,y:u.x-p.x};for(a=s=void 0,n=0;n<e.length;n++)perfTests.c6++,r=h.x*e[n].x+h.y*e[n].y,(isUndefined(a)||r<a)&&(a=r),(isUndefined(s)||r>s)&&(s=r);for(d=c=void 0,n=0;n<t.length;n++)perfTests.c6++,r=h.x*t[n].x+h.y*t[n].y,(isUndefined(d)||r<d)&&(d=r),(isUndefined(c)||r>c)&&(c=r);if(s<d||c<a)return!1}}return!0}function testAvg(){for(var e=0,t=1e5,a=0;a<t;a++){for(var s=0,r=0;r<10;r++){s+=randomFloatFromInterval(1,16.5)}s>=100&&e++}console.log("overGoalCount: "+e+"/ "+"100000 probSuccess: "+e/t*100+"%")}var $this,$that,gameUI={setOverlay:function(e){let t="",a="",s="",r="",i="";a=this.prepareHeader(e);var o="";if(void 0!==getLine("instructions_"+game.data.currentView+"_desc")){var n=getLine("instructions_"+game.data.currentView+"_desc"),d=getLine("instructions_"+game.data.currentView+"_extra");n;for(var c=0;c<d.length;c++)0===c&&"<ul>","<li>"+d[c]+"</li>",c+1===d.length&&"<ul>"}var l=!1;switch(game.data.currentView){case"battle":o='<div class="controls battle" data-type="battle"><div class="settings">'+gameUI.printSettingsGroup("attacks_automation",{ignoreGroupLabel:!0,extraClasses:"checkbox new-checkbox"})+'</div></div><div class="note not-displayed"><span>'+getLine("battle_active")+'</span><br /><div class="button-style flee-battle" cursorType="pointer">'+getLine("flee_battle")+"</div></div>";var g=helpers.common.getResearchBoost("army_unlocks","reinforcement");s+='<div class="reinf not-displayed" cursorType="pointer" data-tooltip-type="reinforcements"><div class="circle"><div class="reinf-icon"></div><div class="reinf-overlay"></div></div><div class="amount-holder">'+getLine("reinforcements").toUpperCase()+'</div><div class="counter">'+g+"</div></div>";break;case"world":l=!0;break;case"territories":l=!0,game.data.automationData.nextTerAttackIn>0&&(o+='<div class="controls">'+(game.data.automationData.nextTerAttackIn>0?'<div class="automation-note">'+getLine("auto_attack_in",game.data.pendingBattleData.terRef)+' <div class="stop-auto" cursorType="pointer">'+getLine("stop")+"</div></div>":"")+"</div>");break;case"battle_select":l=!0,game.data.automationData.nextAttackIn>0&&(o='<div class="controls" data-type="battle_select"><div class="automation-note">'+getLine("auto_attack_tileX",game.data.pendingBattleData.terTileRef)+' <div class="button-style stop-auto" cursorType="pointer">'+getLine("stop")+"</div></div></div>");break;case"public_jobs":case"produce":break;case"research":s='<div class="research-right-ui">',s+='<div class="button-style research-legend" data-view="research_legend" data-view-type="quick_popup" cursorType="pointer">'+getLine("legend")+"</div>",s+='<div class="research-points-left"><div class="icon small knowledge"></div>'+getLine("research_points",game.state.resources.research_points.amount.formatNumber(2,2))+"</div>";var m="",u=getLine("research_details_text25")+'<div class="icon smaller help" data-tooltip-type="res_info" data-subtype="perk_points"></div>',p="",h="",v="btn_prestige",f="",y="";if(game.state.resources.perk_points.total<=0&&game.state.resources.perk_points.pending<=0||isDemo()){m=getLine("research_details_text20");var b=game.const.startTimestamp+86400*game.const.perkPointsEveryXDays*1e3,_=Math.max(0,b-game.state.gameDate);isDemo()?(m+='<div class="time-left">'+getLine("research_details_text26")+"</div>",v="research_details_text27"):m+='<div class="time-left">'+getLine("research_details_text21")+"<span>"+convertTime(_/1e3,{formatLength:"mid"})+"</span></div>"}else{y=" extended-bottom",u+="<br />"+(game.state.resources.perk_points.total-game.state.resources.perk_points.in_research).formatNumber(2,2),u+='<br /><div class="icon large more-details" data-view="perk_points_details" data-view-type="popup" cursorType="pointer"></div>',h=' data-view="prestige" data-view-type="popup" ',p='<div class="below-button"><div class="icon big perk-points"></div><div class="perk-points pending">Pending: <br /><span>'+game.state.resources.perk_points.pending.formatNumber(2,2)+"</span></div></div>"}game.state.resources.perk_points.pending<=0&&(f=" disabled");var w=getLine(v);isDemo()&&(f=" link js-external-link",w='<a href="https://store.steampowered.com/app/1351500/Simpocalypse/?beta=0" title="Get Simpocalypse on Steam!" class="wishlist-link" target="_blank" onclick="storeClickEvent({type: \'wishlist\', firedFrom: \'research\'});">'+w+"</a>"),m+='<div class="button-style prestige '+f+'" '+h+' cursorType="pointer">'+w+"</div>",s+='<div class="prestige-holder'+y+'"><div class="icon bigger perk-points"></div><div class="title">'+u+"</div>"+(m+=p)+"</div>",s+="</div>"}l&&(i+=gameUI.prepareDOM("sidePanel",game.data.currentView)),game.data.specialMessage&&('<div class="special-message">'+game.data.specialMessage+"</div>",game.data.specialMessage=!1);var x=helperData.hasObjectiveNote?" new-notification-static":"";x+=game.checkIfTutorialized(2,"open_popup","objectives",1),"battle"===game.data.currentView?r+='<div class="battle-menu">'+gameUI.prepareDOM("battleMenu")+"</div>":(r+='<div class="item view non-view quick-tutorial"><div class="objectives icon fit-container" data-view="quick_tutorial" data-view-type="quick_tutorial" cursorType="pointer">?</div></div>',helpers.common.isActiveTutorial("start_exploring")||(r+='<div class="item view non-view objective-missions" data-after="'+game.data.tutorial.currentObjData.objID+"/"+game.data.tutorial.currentObjData.groupObjCount+'"><div class="objectives icon fit-container'+x+'" data-view="objectives" data-view-type="popup" data-tooltip-type="params_text" data-extra-params="'+getLine("param_objectives")+'" cursorType="pointer"></div></div>')),a+='<div class="left-menu">',$.each(game.const.viewCategories,(function(e,t){var s=game.data.currentViewCategory===e?" active":"";e===helperData.showNewCategory&&(s+=" unlocked-notification"),s+=game.checkIfTutorialized(0,e),t.revealed||(s+=" disabled-click"),helpers.common.isActiveTutorial("start_exploring")&&(s=" disabled-click"),a+='<div class="item view'+s+'"><div class="icon fit-container '+t.icon+'" data-view-category="'+e+'" data-view="'+t.defaultView+'" data-tooltip-type="view-category" '+(t.revealed?'cursorType="pointer"':"")+"></div></div>"})),a+="</div>",a+=gameUI.prepareDOM("subMenu"),refreshUI.queueData=!0;var k=helpers.common.getNextQueueItem("buildQueue");a+='<div class="item view build-queue'+(helpers.common.isRevealed("build_queue")?"":" hidden")+'" data-view-category="economic" data-view="build_queue" cursorType="pointer">'+getLine("queue")+': <br /><span class="building-name">'+k.name.toUpperCase()+'</span><span class="time-left">'+k.time+"</span></div>",a+=o,t='<div class="ui-holder top">'+a+'</div><div class="ui-holder right">'+s+'</div><div class="ui-holder bottom">'+r+'</div><div class="ui-holder left">'+i+"</div>",t=$(t);try{t.find(".item.game-speed span[data-speed="+looptimeMX+"]").addClass("active")}catch(e){t.find(".item.game-speed span[data-speed=1]").addClass("active")}t.on({mousedown:function(e){1===e.which&&(($this=$(this)).parent().find("span").removeClass("active"),$this.addClass("active"),looptimeMX=parseInt($this.attr("data-speed")))}},".item.game-speed span[data-speed]"),page.$dynamicDOM.gameDateTime=t.find(".game-year"),page.$dynamicDOM.gameTimeSaved=t.find(".timelapse .time-saved"),"battle"===game.data.currentView&&(t.on({mousedown:function(e){$this=$(this),1===e.which&&(gameLoop.pause(!0),gameUI.showConfirmationPrompt(getLine("confirmation_flee"),(function(){console.log("flee battle will be called"),game.endBattle("flee")}),(function(){gameLoop.pause(!1)})))}},".flee-battle"),t.on({mousedown:function(e){if(e.stopPropagation(),$this=$(this),1===e.which){if(game.data.battleStarted)return;game.data.relocatingTank=!1;var t=parseInt($(this).attr("data-type"));if(game.data.leaderEnabled&&0===game.state.corpuses[t].upgrades.auraAmount)return game.data.currentBattleCorpus=!1,$this.parent().parent().find(".active-overlay").addClass("not-displayed").removeClass("current"),void page.$gameUI.$overlay.find(".battle-menu .top .center").html("Selected corpus has no Aura yet, upgrade!");if(!game.data.leaderEnabled&&game.data.gameObjects.length>=helpers.plans.getFormationSize())return;if(game.state.resources.citizens.idle<game.state.corpuses[t].crew){game.checkIdleCitizens(t),page.$gameUI.$overlay.find(".battle-menu .top .center").html(getLine("listeners_text6"));var a=getLine("listeners_text6"),s=$this.offset(),r={x:s.left-47,y:s.top,forceDraw:!0,subType:"over-ui"};return void game.addAnimation("general_text",a,r)}if(audio.playSound("click"),game.data.currentDrawableVehicle){$this.find(".active-overlay").addClass("not-displayed").removeClass("current");var i=game.data.currentDrawableVehicle.corpusID;if(game.data.currentDrawableVehicle=null,game.data.draggingTank=!1,i===t)return}if($this.parent().parent().find(".active-overlay").addClass("not-displayed"),$this.find(".active-overlay").removeClass("not-displayed"),game.data.leaderEnabled){game.state.corpuses[t].upgrades.auraAmount>0&&page.$gameUI.$overlay.find(".battle-menu .top .center").html(getLine("pick_a_leading_tank")),$this.parent().removeClass("selected"),game.data.currentBattleCorpus=t,page.$gameUI.$overlay.find(".battle-menu .corpus-widget").removeClass("selected");for(var o=!1,n=0;n<game.data.gameObjects.length;n++)if(game.data.gameObjects[n].corpusID===t){o=!0;break}o?game.data.currentBattleCorpus=t:page.$gameUI.$overlay.find(".battle-menu .top .center").html(getLine("disable_leader"))}else{var d=$this.offset(),c=d.left,l=d.top;game.data.lastCircleX=c,game.data.lastCircleY=l;var g=c-helpers.common.getCanvasOffsetX()-game.data.cameraXoffset-helperData.canvasBoundaries.x,m=l-helpers.common.getCanvasOffsetY()-game.data.cameraYoffset-helperData.canvasBoundaries.y,u={posX:g/=pixelRatio,posY:m/=pixelRatio,corpusID:t=parseInt($(this).attr("data-type"))};helpers.units.createVehicle(u),game.data.currentDrawableVehicle&&$this.find(".active-overlay").removeClass("not-displayed").addClass("current"),refreshUI.battleMenu=!0}}}},".circle"),t.on({mousedown:function(e){$this=$(this),e.which}},".battle-menu"),t.on({mousedown:function(e){$this=$(this),e.stopPropagation(),1===e.which&&(audio.playSound("click"),game.switchTo("battle_select"))}},".go-back"),t.on({mousedown:function(e){if($this=$(this),e.stopPropagation(),1===e.which){audio.playSound("clearFormation");for(var t={},a=0;a<game.data.gameObjects.length;a++){t[game.data.gameObjects[a].corpusID]=0}for(a=0;a<game.data.gameObjects.length;a++){t[game.data.gameObjects[a].corpusID]+=game.data.gameObjects[a].tanksAmount}$.each(t,(function(e,t){game.state.corpuses[e].tanksAmount+=t})),game.data.gameObjects=[],game.state.gameObjects=[],game.data.currentDrawableVehicle=null,game.change.resource("requires_citizens",game.state.formationCrewTotal),game.state.formationCrewTotal=0,game.data.playerPower=0,game.data.auras=[],game.data.buttons=[],game.data.leaderEnabled=!1,game.switchTo("battle")}}},".clear-all-squadrons"),t.on({mousedown:function(e){if($this=$(this),e.stopPropagation(),1===e.which){if(!game.data.battleStarted)return;var t=helpers.common.getResearchBoost("army_unlocks","reinforcement");t>game.data.reinCounter?game.callReinforcements():console.log("reinf limit reached so not called"),$this.find(".counter").html(t-game.data.reinCounter)}}},".reinf"),t.on({mousedown:function(e){$this=$(this),e.stopPropagation(),1===e.which&&(helpers.common.randomizeSquadronsDynamic(),game.data.currentDrawableVehicle=null)}},".randomize-squadrons"),t.on({mousedown:function(e){if(e.stopPropagation(),$this=$(this),1===e.which){if(audio.playSound("click"),game.data.battleStarted)return;if($this.addClass("disabled"),$this.siblings().removeClass("disabled"),game.data.leaderEnabled)return game.data.leaderEnabled=!1,game.data.currentBattleCorpus=!1,$this.parent().find(".note").addClass("not-displayed"),$this.parent().parent().find(".circle-leader").removeClass("enabled"),page.$gameUI.$overlay.find(".battle-menu .corpus-widget").removeClass("selected marked"),page.$gameUI.$overlay.find(".battle-menu .top .center").html(getLine("drag_and_drop_corpus")),void(refreshUI.battleMenu=!0);game.data.leaderEnabled=!0,$this.parent().parent().find(".circle-leader").addClass("enabled");var t,a=!1,s=!1;game.data.currentDrawableVehicle=null,game.data.draggingTank=!1,$(".corpus-widget").each((function(e){a=!1;for(var r=0;r<game.data.gameObjects.length;r++)if(game.data.gameObjects[r].corpusID===e){a=!0;break}e<game.state.corpuses.length&&game.state.corpuses[e].upgrades.auraAmount>0&&(s=!0,a?(t=game.state.corpuses[e].upgrades.auraType,$(this).addClass("marked").addClass(t)):$(this).addClass("no-tank"))})),s?page.$gameUI.$overlay.find(".battle-menu .top .center").html(getLine("corpus_first")):page.$gameUI.$overlay.find(".battle-menu .top .center").html(getLine("no_aura_yet")),refreshUI.battleMenu=!0}}},".leader-button"),t.on({mousedown:function(e){if($this=$(this),1===e.which){e.stopPropagation(),audio.playSound("click"),$this.addClass("disabled"),game.data.currentDrawableVehicle=null,game.data.draggingTank=!1,game.data.pendingBattleData.finished=!1,page.$gameUI.$.find(".note").removeClass("not-displayed"),page.$gameUI.$.find(".controls").addClass("not-displayed");for(var t,a=!1,s=0;s<game.data.gameObjects.length;s++)t=game.data.gameObjects[s].corpusID,game.state.corpuses[t].crew<=game.state.resources.citizens.idle&&game.state.corpuses[t].tanksAmount>0&&(a=!0);var r,i,o=helpers.common.getResearchBoost("army_unlocks","reinforcement");a&&game.data.reinCounter<o&&page.$gameUI.$overlay.find(".ui-holder.right .reinf").removeClass("not-displayed"),page.$gameUI.$overlay.find(".battle-menu").addClass("inactive"),game.initBattleObjects("player"),game.data.ghostObjectsData=[],game.data.ghostObjects=[];for(s=0;s<game.data.gameObjects.length;s++)r=game.data.gameObjects[s],(i={}).finalX=r.x,i.posX=r.x-300,i.posY=r.y,i.tanksAmount=r.tanksAmount,i.parentGlobalID=r.globalID,i.vehicleType="ghost",i.corpusID=r.corpusID,i.parts=r.parts,i.currentTarget=null,game.data.ghostObjectsData.push(i);game.data.currentDrawableVehicle=null,game.data.leaderEnabled=!1,game.data.battleStarted=!0,refreshUI.battleMenu=!0,gameLoop.pause(!1)}}},".enter-battle")),page.$gameUI.$overlay.html(t),page.$gameUI.$infoBar=page.$gameUI.$overlay.find(".info-bar"),page.$gameUI.$topMenu=page.$gameUI.$overlay.find(".top-menu")},prepareDOM:function(e,t){counters.prepareDOM++;let a,s="";switch(e){case"infoBar":s+='<div class="food" data-absolute-gain="'+game.data.resourceRates.food.absolute+'"><div class="icon s-25-25 food" data-tooltip-type="res_info" data-subtype="food"></div><span>'+game.state.resources.food.amount.formatNumber()+'</span></div><div class="water" data-absolute-gain="'+game.data.resourceRates.water.absolute+'"><div class="icon s-25-25 water" data-tooltip-type="res_info" data-subtype="water"></div><span>'+game.state.resources.water.amount.formatNumber()+"</span></div>"+(game.const.resources.tiles.revealed?'<div class="tiles"><div class="icon s-25-25 tiles" data-tooltip-type="res_info" data-subtype="tiles"></div><span>'+game.state.resources.tiles.amount.formatNumber()+"/"+game.state.resources.tiles.total.formatNumber()+"</span></div>":"")+(game.const.resources.wood.revealed?'<div class="wood" data-absolute-gain="'+game.data.resourceRates.wood.absolute+'"><div class="icon s-25-25 wood" data-tooltip-type="res_info" data-subtype="wood"></div><span>'+game.state.resources.wood.amount.formatNumber()+"</span></div>":"")+(game.const.resources.energy.revealed?'<div class="energy" data-absolute-gain="'+game.data.resourceRates.energy.absolute+'"><div class="icon s-25-25 energy" data-tooltip-type="res_info" data-subtype="energy"></div><span>'+game.state.resources.energy.amount.formatNumber()+"</span></div>":"")+(game.const.resources.stone.revealed?'<div class="stone"><div class="icon s-25-25 stone" data-tooltip-type="res_info" data-subtype="stone"></div><span>'+game.state.resources.stone.amount.formatNumber()+"</span></div>":"")+(game.const.resources.iron.revealed?'<div class="iron"><div class="icon s-25-25 iron" data-tooltip-type="res_info" data-subtype="iron"></div><span>'+game.state.resources.iron.amount.formatNumber()+"</span></div>":"")+(game.const.resources.uranium.revealed?'<div class="uranium"><div class="icon s-25-25 uranium" data-tooltip-type="res_info" data-subtype="uranium"></div><span>'+game.state.resources.uranium.amount.formatNumber()+"</span></div>":"")+(game.const.resources.knowledge.revealed?'<div class="knowledge"><div class="icon s-25-25 knowledge" data-tooltip-type="res_info" data-subtype="knowledge"></div><span>'+(game.state.resources.knowledge.amount/game.data.researchPointCost*100).formatNumber(2,2)+"% ("+game.state.resources.research_points.amount+")</span></div>":"")+(game.const.resources.gold.revealed?'<div class="gold"><div class="icon s-25-25 gold" data-tooltip-type="res_info" data-subtype="gold"></div><span>'+game.state.resources.gold.amount.formatNumber()+"</span></div>":"");break;case"infoBarData":switch(t){case"population":case"citizens":s=game.state.resources.citizens.total.formatNumber(2,2)+"/"+game.state.resources.population.total.formatNumber(2,2)+'<div class="idle-citizens">('+game.state.resources.citizens.idle.formatNumber(2,2)+" "+getLine("idle")+")</div>";break;case"tiles":s=game.state.resources[t].amount.formatNumber()+"/"+game.state.resources[t].total.formatNumber();break;case"knowledge":s=(game.state.resources.knowledge.amount/game.data.researchPointCost*100).formatNumber(2,2)+"% ("+game.state.resources.research_points.amount+")";break;case"food":case"water":case"wood":case"energy":case"gold":case"stone":case"iron":case"uranium":s=game.state.resources[t].amount.formatNumber();break;case"happiness":s=(100*game.state.stats.happiness).formatNumber(2,2)+"%";break;case"health":s=(100*game.state.stats.health).formatNumber(2,2)+"%";break;case"productivity":s=(100*game.state.stats.productivity).formatNumber(2,2)+"%"}break;case"notifications":for(var r=game.data.notifications.list.length-1;r>=0;r--){var i=game.data.notifications.list[r][2]>1?" ("+game.data.notifications.list[r][2]+")":"",o=convertToDate(game.data.notifications.list[r][4],!0);s+='<div class="notification '+game.data.notifications.list[r][2]+'"><div class="time-note">'+o+"</div> "+game.data.notifications.list[r][0]+i+"</div>"}break;case"battleMenu":var n=!0,d=(t={},!1),c=0;for(r=0;r<game.state.corpuses.length;r++){_=!1;for(var l=0;l<game.data.gameObjects.length;l++)if(game.data.gameObjects[l].corpusID===r){_=!0;break}game.state.corpuses[r].upgrades.auraAmount>0&&(game.state.corpuses[r].tanksAmount>0||_)&&(c+=1),game.state.corpuses[r].tanksAmount>0&&(d=!0)}var g=0;for(r=0;r<game.data.gameObjects.length;r++)void 0!==game.data.gameObjects[r].auraRef&&(g+=1);game.state.corpuses.length>0?d?game.data.leaderEnabled?t.mainNote=getLine("main_note0"):game.data.gameObjects.length>=helpers.plans.getFormationSize()?t.mainNote=getLine("main_note1"):t.mainNote=getLine("main_note2"):0===game.data.gameObjects.length?t.mainNote=getLine("main_note3"):t.mainNote=getLine("listeners_text5"):t.mainNote=getLine("main_note4");var m="";game.data.battleStarted&&(m="disabled"),s+='<div class="top"><div class="button upg-points '+m+'" cursorType="pointer" data-view="corpus_upgrades" data-view-type="popup">'+getLine("corpus_upgrades")+'</div><div class="center">'+t.mainNote+"</div>";var u="";!game.data.battleStarted&&d&&game.data.gameObjects.length!==helpers.plans.getFormationSize()||(u="disabled");var p="disabled";!game.data.battleStarted&&game.data.gameObjects.length>0&&(p="");var h,v="";game.data.battleStarted&&(v="disabled"),s+='</div><div class="bottom">',s+='<div class="left"><div class="corpus-holder">';var f,y,b="not-displayed",_=!1,w="",x="",k=" empty",D=game.data.battleStarted?" disabled":"";game.data.gameObjects.length>=helpers.plans.getFormationSize()&&(D=" disabled"),game.data.leaderEnabled&&(D="");for(r=0;r<4;r++){var I;if(y=D,w="",x="",_=!1,void 0!==game.state.corpuses[r]&&game.state.corpuses[r].parts.hull&&game.state.corpuses[r].parts.turret?(I=(h=game.state.corpuses[r]).tanksAmount>0?"":"disabled",h.upgrades.auraAmount>0&&(k=""),f=getLine("no_tanks")):(h={id:r,tanksAmount:0,upgPoints:0},f=getLine("corpus_not_available"),x=" empty",I=h.tanksAmount>0?"":"disabled"),m=h.upgPoints>0?"":"disabled",game.data.battleStarted&&(m="disabled"),b="not-displayed",game.data.leaderEnabled&&game.data.currentBattleCorpus===r?b="":game.data.currentDrawableVehicle&&game.data.currentDrawableVehicle.corpusID===r&&(b="current"),game.data.leaderEnabled){for(l=0;l<game.data.gameObjects.length;l++)if(game.data.gameObjects[l].corpusID===r){_=!0;break}r<game.state.corpuses.length&&game.state.corpuses[r].upgrades.auraAmount>0&&(_?(w="marked "+game.state.corpuses[r].upgrades.auraType,game.data.currentBattleCorpus===r&&(w+=" selected")):w="no-tank")}y=game.data.battleStarted?"disabled":game.data.leaderEnabled?_&&h.upgrades.auraAmount>0?"":"disabled":game.data.gameObjects.length>=helpers.plans.getFormationSize()?"disabled":h.tanksAmount>0?"":"disabled",s+='<div class="corpus-widget '+w+x+'"><div class="title">'+getLine("corpus_cap").toUpperCase()+": "+(h.id+1)+'<div class="icon smaller help" data-tooltip-type="corpus" data-subtype="'+h.id+'"></div></div><div class="circle '+y+'" data-type="'+h.id+'" cursorType="pointer"><div class="active-overlay '+b+'"></div>',s+=""===I?gameUI.prepareDOM("planImage",h):'<div class="note">'+f+"</div>",s+='</div><div class="amount-holder status-bar" data-type="'+h.id+'">'+h.tanksAmount+" "+getLine("tanks")+"</div></div>"}var C=getLine("corpus_leader").toUpperCase()+' <div class="icon smaller help" data-tooltip-type="corpus_leader"></div>',T=game.data.leaderEnabled?"disabled":"",A=game.data.leaderEnabled?" enabled":"";game.data.battleStarted&&(T="disabled");var P=game.data.leaderEnabled?"":"disabled";s+='</div><div class="buttons-holder"><div class="spots">'+getLine("spots")+'</div><div class="currently-filled">'+game.data.gameObjects.length+"/"+helpers.plans.getFormationSize()+'</div><div class="button randomize-squadrons '+u+'" cursorType="pointer">'+getLine("randomize_squadrons")+'</div><div class="button clear-all-squadrons '+p+'" cursorType="pointer">'+getLine("clear_formations")+'</div></div></div><div class="center"><div class="aura-widget '+k+'"><div class="title">'+C+'</div><div class="circle-leader '+A+'"></div><div class="amount-holder status-bar">'+getLine("auras_left",c-g)+'</div><div class="note not-displayed"></div><div class="buttons-holder"><div class="leader-button button-style '+T+'" data-type="on">'+getLine("on")+'</div><div class="leader-button button-style '+P+'" data-type="off">'+getLine("off")+'</div></div></div><div class="utility-widget"><div class="utility-subholder"><div>'+getLine("formation_power")+"</div><br /><div>"+game.data.playerPower.formatNumber(1,1)+'</div><br /><div class="crew-fighting">'+getLine("crew_fighting")+"</div><br /><div>"+game.state.formationCrewTotal+'</div><div class="icon tiny citizens"></div><br /><div class="idle-citizens-count">'+getLine("idle_citizens")+'</div><div class="icon smaller help" data-tooltip-type="idle_citizens"></div><br /><div class="idle-citizens-amount">'+game.state.resources.citizens.idle.formatNumber(2,2)+'</div><div class="icon tiny citizens"></div><br /></div></div></div><div class="right"><div class="button enter-battle '+p+'" cursorType="pointer">'+getLine("enter_battle")+'<div class="play-button"></div></div><div class="not-yet">'+getLine("no_start")+' <div class="button go-back '+v+'" cursorType="pointer">'+getLine("go_back")+"</div></div></div></div>";break;case"planData":void 0===t&&(t=!1);var S="",L="",O="",R="",M={},U={},j=0,E=0,N="",B=!1;if((W=t)&&void 0!==W.parts){M=helpers.plans.getFullPlanStats(W);var q=helpers.plans.getCostsFromParts(W.parts);U=q.costs,j=q.crew,E=q.buildTime,B=!((N=helpers.plans.getPlanRefFromParts(W)).split("_").indexOf("0")>-1)}for(l=0;l<game.const.partTypes.length;l++){var G="empty",z=game.const.partTypes[l],F=!1!==W?W.parts[z]:W.parts,Q="";!1!==W&&void 0!==F&&F?(Q=" added",G=(F=helpers.plans.getPartsByID(F)).subType):B=!1,S+='<div class="checkbox'+Q+'"><div class="text">'+getLine(z)+"</div></div>",L+='<div data-part-type="'+z+'" data-part-subtype="'+G+'"></div>'}!1!==W&&B&&(W.ref=N,W.stats=M,W.costs=U,W.crew=j,W.buildTime=1e3*parseInt(E/10),W.name=getLine("custom_tank")),O="",$.each(M,(function(e,t){var a;void 0!==t.min?a=t.min===t.max?t.min.formatNumber():t.min.formatNumber()+"-"+t.max.formatNumber():(a=t.formatNumber(),"rate_of_fire"===e&&(a+="ms")),O+=getLine("stats_names_"+e)+": "+a+"<br />"})),R+="",Object.keys(U).length>0&&(R+=getLine("build_costs")),$.each(U,(function(e,t){R+="<div>"+t+' <div class="icon smaller '+e+'"></div></div>'})),s+='<div class="plan-data" ><div class="corpus-name">'+getLine("corpus").toUpperCase()+" "+(t.counter+1)+'</div><div class="corpus-amount">'+getLine("tanks_amount",game.state.corpuses[t.counter].tanksAmount)+'</div><div class="plan-design">'+gameUI.prepareDOM("planImage",W),s+="</div>",s+='<div class="below-plan">',s+=j>0?'<div class="crew-req">'+getLine("crew_required")+": "+j+' <div class="icon tiny citizens"></div></div>':getLine("select_parts_for_tank"),s+="</div>",(W.parts.hull||W.parts.turret)&&(s+='<div class="plan-stats-text">'+getLine("stats")+': </div><div class="plan-stats">'+O+'</div><div class="plan-costs">'+R+"</div>"),s+='<div class="plan-parts">'+S+"</div>",s+="</div>";break;case"planImage":void 0===t&&(t=!1);var W=t,H=(L="","");for(l=0;l<game.const.partTypes.length;l++){H="";G="empty",z=game.const.partTypes[l],F=!1!==W?W.parts[z]:W.parts,Q="";!1!==W&&void 0!==F&&(G=(F=helpers.plans.getPartsByID(F)).subType),void 0!==G?L+='<div data-part-type="'+z+'" data-part-subtype="'+G+'"></div>':(L+='<div class="ghost" data-part-type="'+z+'" data-part-subtype="'+G+'"></div>',H="ghost")}s+='<div class="plan-image '+H+'">'+L+"</div>";break;case"subMenu":var V=helpers.common.getViewCategory(game.data.currentView);if(V.views.length>0){s+='<div class="sub-menu">';for(r=0;r<V.views.length;r++){var Y=game.const.views[V.views[r]],X="";"manage_plans"===Y.tag&&(X=' data-extra-params="normal" ');var J=game.data.currentView===Y.tag?" active":"";J+=game.checkIfTutorialized(1,Y.tag);Y.revealed||(J+=" disabled-click"),helpers.common.isActiveTutorial("start_exploring")&&(J=" hidden disabled-click"),s+='<div class="item'+J+' " data-view="'+Y.tag+'" data-tooltip-type="view" '+X+(Y.revealed?'cursorType="pointer"':"")+">"+getLine("view_"+Y.tag)+"</div>"}s+="</div>"}!helpers.common.isActiveTutorial("start_exploring")&&(game.state.objectives.currentGroup>4||game.state.gameStats.prestigesDone.amount>0)&&(s+='<div class="button qol" data-view="qol" data-view-type="quick_popup" cursorType="pointer">'+getLine("buy_settings")+"</div>");break;case"jobData":a=t;var K,Z,ee="",te="",ae=!1,se=!1;if(void 0===game.const.resources[a]?(K=game.const.jobs[a],Z=game.state.jobs[a],se=K.requires):(K=game.const.resources[a],Z=game.state.resources[a],ae=!0),se&&game.state.buildings[se].avl<=0)return"";var re=" margin-top-15";if("explorer"===a){re="";var ie=Z.lastCycle/K.cycleTime,oe=!1!==Z.territory?game.state.gameGrids.territories[game.state.currentParentGrids.regions][Z.territory].explored_spots:0,ne=Math.min(1,oe/game.const.exploredSpotsCap),de=0;$.each(game.data.gameGrids,(function(e,t){t.enemy||de++}));var ce="";de<=1&&ne<1&&!1!==Z.territory&&(ce=" not-displayed");var le=ne<1?"":getLine("fully_explored"),ge=ne<1?"":" not-working";ne>=1&&(ie=1),ee='<div class="side-box"><div class="exploring-area">'+getLine("exploring")+'<div class="explored">(<span>'+(parseInt(100*ne*100)/100).formatNumber(2,2)+'%</span>)</div><div class="button change-explore-area'+ce+ge+'" cursorType="pointer">'+getLine("change")+'</div></div><div class="exploring progress-bar '+ge+'" data-progress="'+ie+'" data-after="'+le+'"></div></div>'}!Z.working&&Z.workers>0&&(te+="explorer"===a?' <span class="not-working">'+getLine("not_working")+"</span>":" <span>"+getLine("not_working")+"</span>");var me=ft=game.state.assignAmount;"ocd"===game.state.assignAmountType?me=10-(ft=Math.min(game.getOCDamount(Z.workers)))%10:"max"===game.state.assignAmountType&&(me=Math.max(1,Z.workers));var ue=Z.workers.formatNumber(2,2),pe=Z.workers<=0?" disabled":"",he="",ve=!1;se?(ve=game.state.buildings[se].avl*game.const.buildings[se].gains.citizen_capacity,ft=Math.min(ve-Z.workers,ft),he=Z.workers>=ve||ft>game.state.resources.citizens.idle?" disabled":""):he=ft>game.state.resources.citizens.idle?" disabled":"",he+=game.checkIfTutorialized(2,"workers",ae?"resources":"jobs",a);var fe="";if("builder"===a){te+=getLine("faster_build_time",(100*(helpers.common.getBuilderReductionMX()-1)).formatNumber());var ye=Math.max(0,game.state.resources.tiles.total-game.state.resources.tiles.amount-50)/50,be=ye<=0?1:game.state.jobs.builder.workers/ye;fe+='<div class="other-effects">'+getLine("maintenance_coverage")+(100*be).formatNumber(2,2)+"% <br />"+getLine("maintenance_status")+(100*game.state.stats.maintenance).formatNumber(2,2)+"%</div>"}else if("teacher"===a){var _e=helpers.common.getResearchBoost("teacher","gain_mx");fe+='<div class="other-effects">'+getLine("gain_per_citizen")+": "+(.01*(1+game.state.jobs.teacher.workers)*_e).formatNumber(2,2)+"<br /></div>"}else if("doctor"===a){var we=1e3+helpers.common.getResearchBoost("doctor","coverage_increase");fe+='<div class="other-effects">Doctor coverage: '+(100*((1+game.state.jobs.doctor.workers)*we/Math.max(1,game.state.resources.citizens.total))).formatNumber(2,2)+"%<br /></div>"}else if("policeman"===a){we=2e3+helpers.common.getResearchBoost("policeman","coverage_increase");var xe=(2+game.state.jobs.policeman.workers)*we/Math.max(1,game.state.resources.citizens.total);fe+='<div class="other-effects">'+getLine("policeman_coverage")+(100*xe).formatNumber(2,2)+"%<br /></div>"}else if("diplomat"===a){we=5e3+helpers.common.getResearchBoost("diplomat","coverage_increase");var ke=(10+game.state.jobs.diplomat.workers)*we/Math.max(1,game.state.resources.citizens.total),De=.01*ke,Ie=game.state.stats.diplomacy>=1?getLine("stat_maxed"):getLine("stat_per_day",(100*De).formatNumber(2,2));fe+='<div class="other-effects">'+getLine("diplomat_coverage")+(100*ke).formatNumber(2,2)+"%<br />"+getLine("stats_diplomacy")+": "+(100*game.state.stats.diplomacy).formatNumber(2,2)+"% "+Ie+"<br /></div>"}ae?(re="",te=(Z.workers*game.data.continentRewardBoosts.scavenging_rate_increase).formatNumber(2,2)+"/s",s+='<div class="box-holder"><div class="box-data" data-type="jobs" data-subtype="'+a+'"><div class="desc"><div class="left-part"><div class="icon tiny '+a+'"></div></div><div class="right-part'+re+'"><div class="title">'+getLine("scavenging")+"<span>"+te+"</span></div>"+getLine("to_scavenge")+'<span class="extra-resources">'+Z.extra.formatNumber()+'</span></div></div><div class="assign-cits">'+getLine("scavengers")+'<div class="assign-holder"><div class="button minus'+pe+'" cursorType="pointer" data-cost-amounts="'+me+'"></div><div class="amount">'+Z.workers.formatNumber(2,2)+'</div><div class="button plus'+he+'" cursorType="pointer" data-cost-types="citizens" data-cost-amounts="'+ft+'"></div></div></div></div>'+ee+"</div>"):s+='<div class="box-holder"><div class="box-data" data-type="jobs" data-subtype="'+a+'">'+("explorer"===a?"":'<div class="title">'+getLine("jobs_"+a)+' <div class="icon smaller help" data-tooltip-type="job" data-subtype="'+a+'"></div><span>'+te+"</span></div>")+'<div class="desc"><div class="left-part">'+("explorer"===a?"":'<div class="icon-holder" data-icon-bg="'+a+'"></div><div class="button full-stats" cursorType="pointer"></div>')+'</div><div class="right-part'+re+'">'+("explorer"!==a?"":'<div class="title"> <div class="icon smaller help" data-tooltip-type="job" data-subtype="'+a+'"></div><span>'+te+"</span></div>")+'<div class="assign-cits max-workers">'+getLine("jobs_"+a).toUpperCase()+'<div class="assign-holder"><div class="button minus'+pe+'" cursorType="pointer" data-cost-amounts="'+me+'"></div><div class="amount">'+ue+'</div><div class="button plus'+he+'" cursorType="pointer" data-cost-types="citizens" data-cost-amounts="'+ft+'"></div></div>'+(ve?'<div class="workers-limit">'+getLine("max")+ve.formatNumber()+"</div>":"")+"</div>"+fe+"</div></div>"+ee+"</div></div>";break;case"resourceData":a=t.type;var Ce=t.separate,Te=game.state.resources[a],Ae=(game.data.resourceRates[a].gains,game.data.resourceRates[a].consumption,game.data.resourceRates[a].absolute);customLog("type: "+a+" absolute: "+Ae,"debug");var Pe=" ("+(Ae>0?"+":"")+Ae.formatNumber()+"/s)",Se=getLine("min_efficiency")+(100*helpers.common.getResourceTypeMinEfficiency(a)).formatNumber(2,2)+"%";try{Me='<div class="box-field"><div class="icon small '+a+'" data-tooltip-type="res_info" data-subtype="'+a+'"></div><span class="amount">'+Te.amount.formatNumber(2,2)+'</span></div><div class="box-field gain-absolute">'+Pe+'</div><div class="box-field quick-notes">'+Se+"</div>"}catch(e){return void gameUI.showMiniPopup(getLine("err_init_resources")+e+getLine("err_suggest_reset"),"to_main_menu")}var Le="";(Oe=game.const.resources[a].extended)&&(Le=gameUI.prepareDOM("resourceExtended",a)),s+=Ce?'<div class="section-holder resources'+(Oe?" extended":"")+'"><div class="overview" cursorType="pointer"><div class="box-holder list" data-type="resources" data-subtype="'+a+'">'+Me+'<div class="box-field"><div class="extender"></div></div></div></div><div class="extended-data'+(Oe?"":" not-displayed")+'">'+Le+"</div></div>":Me;break;case"miningData":var Oe,Re=["stone","iron","uranium"];Le="";(Oe=game.const.resources.mining_deposits.extended)&&(Le=gameUI.prepareDOM("miningExtended",a));var Me="";for(r=0;r<Re.length;r++)Me+='<div class="box-holder" data-subtype="'+Re[r]+'">'+gameUI.prepareDOM("resourceData",{type:Re[r],separate:!1})+'<div class="box-field"></div></div>';s+='<div class="section-holder resources'+(Oe?" extended":"")+'"><div class="overview" cursorType="pointer"><div class="box-holder list" data-type="resources" data-subtype="mining_deposits"><div class="box-field">'+getLine("mineables")+'</div><div class="box-field">'+getLine("deposits")+game.state.resources.mining_deposits.total+'</div><div class="box-field quick-notes">'+getLine("active")+(game.state.resources.mining_deposits.total-game.state.resources.mining_deposits.amount)+'</div><div class="box-field"><div class="extender"></div></div></div>'+Me+'</div><div class="extended-data'+(Oe?"":" not-displayed")+'">'+Le+"</div></div>";break;case"resourceExtended":a=t;var Ue=game.const.resources[a];Te=game.state.resources[a];if(Ue.gatherable&&(s+=gameUI.prepareDOM("jobData",a)),"water"===a&&(s+=gameUI.prepareDOM("waterSources")),void 0!==Ue.buildings){let e="";for(r=0;r<Ue.buildings.length;r++)e+=gameUI.prepareDOM("buildingData",{type:Ue.buildings[r]});""!==e&&(s+='<div class="sub-section buildings">'+e+"</div>")}break;case"miningExtended":a=t;game.const.buildings.mining_plant,game.state.buildings.mining_plant;var je=helpers.common.getResearchBoost("mining_plant","building_limit"),Ee="";for(r=0;r<je;r++)Ee+=gameUI.prepareDOM("buildingData",{type:"mining_plant",id:r});s+='<div class="sub-section buildings">'+Ee+"</div>";break;case"waterSources":var Ne=helpers.common.getBuildingData("rain_collector"),Be=Ne.gains.water.genRate*Ne.avl,qe=game.state.resources.water_sources.total-game.state.resources.water_sources.amount>300?"":" not-displayed";s+='<div class="box-holder"><div class="box-data water-sources" data-type="water_sources"><div class="title">'+getLine("res_water_sources")+'</div><div class="desc flex"><div class="natural">'+getLine("natural")+"<span>"+game.state.resources.water_sources.amount.formatNumber()+"/"+game.state.resources.water_sources.total.formatNumber()+'</span></div><div class="artificial">'+getLine("artificial")+"<span>"+Be+'</span></div></div><div class="desc-extra'+qe+'">'+getLine("water_toxicity")+"<span>"+(100*game.state.stats.toxicity).formatNumber(2,2)+"%</span></div></div></div>";break;case"buildingData":a=t.type;var Ge=t.id;if(!(Rt=helpers.common.getBuildingData(a,Ge)).unlocked)return"";var ze=1;void 0!==Rt.workers&&(ze=Rt.workers/Math.max(1,Rt.gains.citizen_capacity));var Fe=Rt.costs.build,Qe=!1,We=!1,He=Rt.buyAmount,Ve=0,Ye=!1;void 0!==Rt.upgrades&&Rt.upgrades.length>0?(He=1,Qe=Rt.upgrades,Rt.level-1>=Qe.length&&(We=!0),void 0!==Rt.level&&(Ve=1,Rt.level>Rt.levels_unlocked&&(Ye=!0))):Ve=Rt.avl;E=He*Rt.buildTime/1e3/helpers.common.getBuilderReductionMX();var Xe=game.const.resourceBuildings.indexOf(a)>-1,$e=[],Je=[],Ke=(n=!1,""),Ze="",et="";Ee="",re="";["pump_manual","rain_collector","filtering_station","hydro_plant","solar_panels"].indexOf(a)>-1&&(re=" margin-top-15"),We||(n=!0,$.each(Fe,(function(e,t){t*=He,$e.push(e),Je.push(t),Ke+="water_sources"===e?"-"+t.formatNumber()+" "+getLine("natural_water_source")+"<br/>":"mining_deposits"===e?getLine("mining_deposit",t.formatNumber())+"<br/>":" -"+t.formatNumber()+' <div class="icon smaller '+e+'"></div>';var a=game.state.resources[e].amount;"citizens"===e?a=game.state.resources[e].idle:"mining_deposits"===e&&(a=game.state.resources[e].total-game.state.resources[e].amount),a<t&&(n=!1)})));var tt=!Qe||!We;$.each(Rt.costs.operational,(function(e,t){et+=" "+(t*Ve*(effBasedOnWorkerRatio?ze:1)).formatNumber()+'<div class="icon smaller '+e+'"></div>'+(tt?'<div class="buy-change negative">(+'+(t*He).formatNumber()+")</div>":"")}));var at="";$.each(Rt.gains,(function(e,t){if(void 0!==t.max&&"population"===e&&(Ze="<br /> "+getLine("max_capacity")+(t.max*Ve).formatNumber()+'<div class="icon smaller '+e+'"></div>'+(tt?'<div class="buy-change positive">(+'+(t.max*He).formatNumber()+")</div>":"")),void 0!==t.genRate&&t.genRate>0&&(Ze+=" "+(t.genRate*Ve*ze).formatNumber()+'<div class="icon smaller '+e+'"></div>'+(tt?'<div class="buy-change positive">(+'+(t.genRate*He).formatNumber()+")</div>":"")),"dig_rate"===e&&(Ze+="<br />"+getLine("mining_rate")+(t*Ve*ze).formatNumber()+" /s"+(tt?'<div class="buy-change positive">(+'+(t*He).formatNumber()+")</div>":"")),"citizen_capacity"===e){var s=t;Qe||(s=game.const.buildings[a].gains.citizen_capacity),at+='<div class="workers-limit">'+getLine("max")+t.formatNumber()+(tt?'<div class="buy-change positive">(+'+(s*He).formatNumber()+")</div>":"")+"</div>"}if("plans_capacity"===e&&(Ze+="<br />"+(t*Ve).formatNumber()+getLine("corpus_capacity")+(tt?'<div class="buy-change positive">(+'+(t*He).formatNumber()+")</div>":"")),"dirt_available"===e){var r=void 0!==Rt.dirt_available&&null!==Rt.dirt_available?Rt.dirt_available:t;Ze+="<br />"+getLine("dirt_left")+'<span class="dirt-left">'+r.formatNumber()+"</span>"+(tt?'<div class="buy-change positive">(+'+(t*He).formatNumber()+")</div>":"")}}));var st=Ve>0?'<div class="button demolish" cursorType="pointer"></div>':"",rt="";if("war_factory"===a&&Rt.avl>1)rt+=getLine("faster_build",(100*(Math.max(1,Rt.avl)-1)).formatNumber());var it="";void 0!==Rt.effects&&void 0!==Rt.effects.benefits&&"water_toxicity"===Rt.effects.benefits.type&&(it='<div class="extra-desc"><div>'+getLine("threshold")+(100+Rt.effects.benefits.amount*Rt.avl)+'<div class="buy-change positive">(+'+(Rt.effects.benefits.amount*He).formatNumber()+")</div></div></div>"),n=n?"":" disabled";var ot=getLine("btn_build")+" ("+He.formatNumber()+")";We?(ot=getLine("btn_upgrades_maxed"),n+=" maxed"):Rt.upgrading&&(n=" in-progress not-displayed"),Qe&&Ye&&!We&&(ot=getLine("btn_upgrade_locked"),n=" disabled maxed"),n+=game.checkIfTutorialized(2,"buildings",a,!isUndefined(Ge)&&Ge),0===Ge&&(n+=game.checkIfTutorialized(2,"level",a,void 0!==Rt.level?Rt.level:0));var nt="";"filtering_station"!==a&&Ve>0&&(nt="<br />"+getLine("efficiency")+(100*Rt.eff).formatNumber()+"%",nt="");var dt="",ct=a;if(Qe&&(ct+="#"+Ge),void 0!==(Ot=refreshData.buildQueue.data[ct])){helpers.common.getBuilderReductionMX();dt=getLine("queue_and_next",Ot.amount.formatNumber(2,2),(Ot.nextIn/1e3).formatNumber(1,1,!0))}var lt='<div class="queue-info">'+dt+"</div>",gt='<span class="workers">'+getLine("workers")+"</span>",mt='<div class="total-output'+(Rt.output>.1?Rt.output>.5?Rt.output<.8?" warning":"":" low":" critical")+'">'+(100*Rt.output).formatNumber(2,2)+"%</div>";if(Xe){var ut=void 0!==Rt.workers?Rt.workers:0,pt=void 0!==Rt.workers,ht="",vt=getLine("production_rate");if(pt)if(Ve>0){var ft=Math.min(Rt.gains.citizen_capacity-ut,game.state.assignAmount);me=ut>0?Math.min(ut,game.state.assignAmount):0;"ocd"===game.state.assignAmountType?me=10-(ft=Math.min(game.getOCDamount(ut)))%10:"max"===game.state.assignAmountType&&(me=Math.max(1,ut));pe=ut<=0?" disabled":"",he=ut>=Rt.gains.citizen_capacity||ft>game.state.resources.citizens.idle?" disabled":"";he+=game.checkIfTutorialized(2,"workers","buildings",a),ht='<div class="assign-cits max-workers">'+gt+'<div class="assign-holder"><div class="button minus'+pe+'" cursorType="pointer" data-cost-amounts="'+me+'"></div><div class="amount">'+ut.formatNumber(2,2)+'</div><div class="button plus'+he+'" cursorType="pointer"  data-cost-types="citizens" data-cost-amounts="'+ft+'"></div></div>'+at+"</div>",vt+=(ut/Rt.gains.citizen_capacity*100).formatNumber()+"% <br />"}else vt+="0%<br />";vt="",Ee+='<div class="box-holder"><div class="box-data" data-type="buildings" data-subtype="'+a+'"><div class="title">'+getLine("buildings_"+a)+"<span>("+Rt.avl+")</span>"+rt+'</div><div class="desc"><div class="left-part">'+mt+'<div class="icon-holder" data-icon-bg="'+a+'"></div>'+st+'<div class="button full-stats" cursorType="pointer"></div></div><div class="right-part'+re+'">'+vt+(""!==Ze?'<div class="icon produces"></div> <span>'+Ze+"</span>":"")+(""!==et?'<br /><div class="icon consumes"></div> <span class="operational-costs">'+et+"</span>":"")+ht+it+"</div></div>"+nt+'<div class="costs">'+Ke+'</div><div class="button build'+n+'" cursorType="pointer" data-cost-types="'+$e.join(",")+'" data-cost-amounts="'+Je.join(",")+'">'+ot+'</div><div class="build-time"><div class="class icon timer"></div>'+convertTime(E,{pad:!0,minSize:"s"})+"</div>"+lt+"</div></div>"}else if(Qe){var yt,bt=void 0!==Rt.avl?1:0,_t=void 0!==Rt.level?Rt.level:0;ut=void 0!==Rt.workers?Rt.workers:0;_t>0&&(bt=getLine("lvl")+_t);var wt="",xt="";if("mining_plant"===a){yt=void 0!==Rt.dirt_available?Rt.dirt_available:Rt.gains.dirt_available;var kt=Rt.dirt_composition;gt=getLine("miners"),yt<=0&&(rt=getLine(We?"mining_demolish":"mining_upgrade")),$.each(kt,(function(e,t){xt+='<div class="ore-type"><div class="icon smaller '+e+'"></div>'+(100*t).formatNumber()+"% </div>"})),!We&&_t>0&&$.each(Qe[_t-1].dirt_composition,(function(e,t){void 0===kt[e]&&(wt+='<div class="buy-change positive">(+'+(100*t).formatNumber()+'% <div class="icon tiny '+e+'"></div>)</div>')})),xt='<div class="dirt-composition">'+xt+"</div>"}else if(["factory","war_factory"].indexOf(a)>-1&&_t>0){var Dt=Rt.gains.produce_rate;if(_t>1&&(rt+="<br /> "+getLine("production_bonus")+(100*(Rt.gains.produce_rate-1)).formatNumber()+"%)"),"factory"===a){var It=!1===Rt.producing?'<span class="red uppered">'+getLine("nothing")+"</span>":'<span class="green uppered item-spec">'+Rt.producing+"</span>",Ct="",Tt="";if(!1!==Rt.producing){ze=ut/Math.max(1,Rt.gains.citizen_capacity);Ct=(game.const.products[Rt.producing].produce_rate*Dt*ze*Rt.eff*game.state.stats.productivity).formatNumber(4,4)+"/s",Tt=getLine("product_stock",game.state.products[Rt.producing].avl.formatNumber(1,1))}wt="<br />"+getLine("currently_producing")+'<br /><span class="produce-rate">'+Ct+"</span> "+It+Tt+' <div class="button change-product" data-view="change_product" data-extra-params="'+Ge+'" cursorType="pointer">'+getLine("change")+"</div>"}}_t>0&&!We&&!Ye&&(ot=getLine("btn_upgrade"));var At;ht="",vt=getLine("production_rate");if(_t>0){ft=Math.min(Rt.gains.citizen_capacity-ut,game.state.assignAmount),me=ut>0?Math.max(1,ft):0;"ocd"===game.state.assignAmountType?me=10-(ft=Math.min(game.getOCDamount(ut)))%10:"max"===game.state.assignAmountType&&(me=Math.max(1,ut));pe=ut<=0?" disabled":"",he=ut>=Rt.gains.citizen_capacity||ft>game.state.resources.citizens.idle?" disabled":"";he+=game.checkIfTutorialized(2,"workers","buildings",a),ht='<div class="assign-cits max-workers">'+gt+'<div class="assign-holder"><div class="button minus'+pe+'" cursorType="pointer" data-cost-amounts="'+me+'"></div><div class="amount">'+ut.formatNumber(2,2)+'</div><div class="button plus'+he+'" cursorType="pointer"  data-cost-types="citizens" data-cost-amounts="'+ft+'"></div></div>'+at+"</div>",vt+=(ut/Math.max(1,Rt.gains.citizen_capacity)*100).formatNumber()+"% <br />"}else vt+="0%<br />";vt="",At="war_factory"===a?getLine("buildings_"+a):getLine("buildings_"+a)+" #"+Ge,Ee+='<div class="box-holder"><div class="box-data" data-type="buildings" data-subtype="'+a+'" data-id="'+Ge+'" data-level="'+_t+'"><div class="title">'+At+"<span>("+bt+")</span>"+rt+'</div><div class="desc"><div class="left-part">'+mt+'<div class="icon-holder" data-icon-bg="'+a+'"></div>'+st+'<div class="button full-stats" cursorType="pointer"></div></div><div class="right-part'+re+'">'+xt+vt,Ee+=(""!==et?'<div class="icon consumes"></div> <span class="operational-costs">'+et+"</span>":"")+Ze+wt,Ee+=nt+ht+(""!==dt?"":'<div class="costs">'+Ke+'</div><div class="button build'+n+'" cursorType="pointer" data-cost-types="'+$e.join(",")+'" data-cost-amounts="'+Je.join(",")+'">'+ot+"</div>"+(tt?'<div class="build-time"><div class="class icon timer"></div>'+convertTime(E,{pad:!0,minSize:"s"})+"</div>":""))+lt+it+"</div></div></div></div>"}else{if("road"===a){var Pt=game.state.resources.tiles.total-game.state.resources.tiles.amount,St=100*(1+game.state.buildings.road.avl)/Pt,Lt=Math.min(1,game.state.buildings.road.avl*game.const.buildings.road.gains.connectivity);Lt*=Math.min(1,St),it+="<br /><br />"+getLine("road_coverage",(100*St).formatNumber(2,2)),it+="<br />"+getLine("connectivity_bonus",(100*Lt).formatNumber(2,2))}else re=" margin-top-15";Ee+='<div class="box-holder"><div class="box-data" data-type="buildings" data-subtype="'+a+'"><div class="title">'+getLine("buildings_"+a)+"<span>("+Rt.avl+")</span>"+rt+'</div><div class="desc"><div class="left-part"><div class="icon-holder" data-icon-bg="'+a+'"></div>'+st+'<div class="button full-stats" cursorType="pointer"></div></div><div class="right-part'+re+'">'+getLine("buildings_"+a+"_desc")+"<span>"+Ze+"</span>"+it+'</div></div><div class="costs">'+Ke+'</div><div class="button build'+n+'" cursorType="pointer" data-cost-types="'+$e.join(",")+'" data-cost-amounts="'+Je.join(",")+'">'+ot+'</div><div class="build-time"><div class="class icon timer"></div>'+convertTime(E,{pad:!0,minSize:"s"})+"</div>"+lt+"</div></div>"}s=Ee;break;case"buildQueue":for(r=0;r<game.state.buildQueue.length;r++){var Ot,Rt,Mt=r,Ut=(e=(Ot=game.state.buildQueue[r])[0],bt=Ot[1],Ot[2]),jt=Ot[3],Et=helpers.common.getBuilderReductionMX(),Nt="";void 0!==(Rt=helpers.common.getBuildingData(e,jt)).level&&(Nt=" (LvL "+(Rt.level+1)+")"),0===Mt?s+='<div class="sub-title">'+getLine("currently_building")+"</div>":1===Mt&&(s+='<div class="sub-title">'+getLine("next")+"</div>"),s+='<div class="box-data" data-type="buildings" data-subtype="'+e+'" data-queue-id="'+Mt+'" data-id="'+jt+'"><div class="queue-item" data-type="'+e+'"><span>'+bt+"x</span> "+e+Nt+"<span>"+(Ut/Et/1e3).formatNumber()+getLine("seconds_left")+'</span></div><div class="actions"><div class="button minus" cursorType="pointer"></div><div class="button plus" cursorType="pointer"></div><div class="button remove-all" cursorType="pointer">X</div></div></div>'}break;case"costsData":Ke="";var Bt=void 0!==t.demolish&&t.demolish,qt=He=void 0===t.buyAmount?1:t.buyAmount,Gt=["food","water","wood","energy","gold","stone","iron","uranium"],zt=" -";Bt&&(zt=" +"),$.each(t.costs,(function(e,t){qt=He,Bt&&Gt.indexOf(e)>-1&&(qt*=game.data.continentRewardBoosts.demolish_refund_rate-1+.5),t*=qt,Ke+="water_sources"===e?"<br/>"+getLine("costs_water",zt,t.formatNumber()):"mining_deposits"===e?"<br/>"+getLine("costs_mining",t.formatNumber()):zt+t.formatNumber()+' <div class="icon smaller '+e+'"></div>'})),s=Ke;break;case"gainsData":Ze="",He=void 0!==t.buyAmount&&t.buyAmount,Ve=void 0===t.amount?1:t.amount;$.each(t.gains,(function(e,t){void 0!==t.max&&"population"===e&&(Ze=getLine("max_capacity")+(t.max*Ve).formatNumber()+'<div class="icon smaller '+e+'"></div>',!1!==He&&(Ze+=' <div class="buy-change positive">(+'+(t.max*He).formatNumber()+")</div>")),void 0!==t.genRate&&t.genRate>0&&(Ze+=" "+(t.genRate*Ve).formatNumber()+'<div class="icon smaller '+e+'"></div>',!1!==He&&(Ze+='<div class="buy-change positive">(+'+(t.genRate*He).formatNumber()+")</div>")),"dig_rate"===e&&(Ze+=getLine("mining_rate")+(t*Ve).formatNumber()+" /s",!1!==He&&(Ze+='<div class="buy-change positive">(+'+(t*He).formatNumber()+")</div>")),"produce_rate"===e&&(Ze+=getLine("produce_rate")+(100*t).formatNumber(2,2)+" %",!1!==He&&(Ze+='<div class="buy-change positive">(+'+(100*t).formatNumber(2,2)+"%)</div>"))})),s=Ze;break;case"marketData":Ee="";var Ft="",Qt="";-1===["products","resources"].indexOf(helperData.currentTab)&&(helperData.currentTab="products");var Wt=helperData.chartTypeShown,Ht=!1,Vt=!1,Yt=!1,Xt=!1,$t=["products","resources"];for(r=0;r<$t.length;r++){var Jt=$t[r];J=helperData.currentTab===Jt?" active":"";Ee+='<div class="tab-data'+J+'" data-type="'+Jt+'">';var Kt="resources"===Jt?game.const.resources:game.const.products;$.each(Kt,(function(e,t){var a="resources"===Jt?game.state.resources[e]:game.state.products[e];if(("resources"!==Jt||t.revealed&&helpers.common.getResearchBoost(e,"market_unlock",!0))&&("products"!==Jt||t.unlocked)&&void 0!==a.price_history&&0!==a.price_history.length){var s,r,i=e===Wt;"resources"===Jt?(s=a.amount,r='<div class="icon smaller '+e+'"></div>'):(s=a.avl,r=getLine("products_"+e));var o=a.price_history[a.price_history.length-1],n=a.price_history.length>1?a.price_history[a.price_history.length-2]:o,d={avg:(o.sP+o.bP)/2/((n.sP+n.bP)/2)-1,sell:o.sP/n.sP-1,buy:o.bP/n.bP-1,spread:o.s/n.s-1};i&&(Ht=o,n,Vt=d,Yt=a,t,Xt=s),Ee+='<div class="box-holder" data-type="products" data-subtype="'+e+'"><div class="box-data'+(i?" active":"")+'"><div class="title">'+r+"<span>("+Math.round(s).formatNumber()+')</span></div><div class="desc">'+getLine("average_price")+((o.sP+o.bP)/2).formatNumber()+helpers.common.getNumberChange(d.avg)+"<br />"+getLine("sell_price")+o.sP.formatNumber()+helpers.common.getNumberChange(d.sell)+"<br />"+getLine("buy_price")+o.bP.formatNumber()+helpers.common.getNumberChange(d.buy)+"<br />"+getLine("spread")+(100*o.s).formatNumber()+helpers.common.getNumberChange(d.spread)+'%<br /></div><div class="button check-market'+(i?" disabled":"")+'" cursorType="pointer">>></div></div></div>'}})),Ee+="</div>"}Ee='<div class="tabs-holder"><div class="tabs"><div class="tab button-style'+("products"===helperData.currentTab?" active":"")+'" data-type="products" cursorType="pointer">'+getLine("products")+'</div><div class="tab button-style'+("resources"===helperData.currentTab?" active":"")+'" data-type="resources" cursorType="pointer">'+getLine("resources")+"</div></div>"+Ee+"</div>";var Zt=[1,10,100,1e3,"10_percent","50_percent","100_percent"];for(r=0;r<Zt.length;r++){var ea=Zt[r].toString().split("_"),ta=ea.length>1?"percent":"number",aa=Number(ea[0]),sa=(bt=aa,"x"+aa.formatNumber());"percent"===ta&&(bt=Xt*(aa/=100),sa=(100*aa).formatNumber(0,0)+"%");var ra=parseInt(bt)*Ht.sP;'<div class="button sell-product" data-subtype="'+Wt+'" data-type="'+Zt[r]+'" cursorType="pointer">'+sa+"<div>+"+ra.formatNumber()+' <div class="icon tiny gold"></div></div></div>',"percent"===ta&&(bt=Math.floor(game.state.resources.gold.amount*aa/Ht.bP)),ra=bt*Ht.bP,'<div class="button buy-product" data-subtype="'+Wt+'" data-type="'+Zt[r]+'" cursorType="pointer">'+sa+"<div>-"+ra.formatNumber()+' <div class="icon tiny gold"></div></div></div>'}var ia="sell",oa="SELLING";"buy"===helperData.currentSubTab&&(ia="buy",oa="BUYING");var na=getLine("products_"+Wt);helpers.common.isResource(Wt)&&(na='<div class="icon smaller '+Wt+'"></div>'),Qt+='<div class="title">'+na+"<span>MARKET PRICE</span></div>",Qt+='<div class="options"><div class="legend"><div class="orders">Market Orders</div><div class="buy-price">Buy Price</div><div class="sell-price">Sell Price</div></div><div class="view-opened" data-type="'+ia+'"><span>'+oa+"</span></div></div>",Qt+='<div class="price-info"><span>'+getLine("avg_price")+((Ht.sP+Ht.bP)/2).formatNumber()+helpers.common.getNumberChange(Vt.avg)+"</span><span>"+getLine("sell_price")+Ht.sP.formatNumber()+helpers.common.getNumberChange(Vt.sell)+"</span><span>"+getLine("buy_price")+Ht.bP.formatNumber()+helpers.common.getNumberChange(Vt.buy)+"</span><span>"+getLine("spread")+(100*Ht.s).formatNumber()+helpers.common.getNumberChange(Vt.spread)+"</span><span>"+getLine("market_cap")+(Yt.supply+Yt.demand).formatNumber()+"</span></div>",Ft=gameUI.prepareDOM("newOrderData",{type:!1,amount:!1}),s={DOM1:Ee,DOM2:Ft,DOM3:Qt};break;case"newOrderData":e="sell",bt=1;!1!==helperData.currentSubTab&&isNaN(helperData.currentSubTab)&&(e=helperData.currentSubTab),!1!==t.type&&(e=t.type),helperData.currentSubTab=e,!1!==helperData.currentInput&&(bt=helperData.currentInput),!1!==t.amount&&(bt=t.amount),bt=Math.floor(bt),helperData.currentInput=bt;var da;ae=helpers.common.isResource(helperData.chartTypeShown),na=getLine("products_"+helperData.chartTypeShown);ae?(da=game.state.resources[helperData.chartTypeShown],na="res_"+Wt,na='<div class="icon tiny '+helperData.chartTypeShown+'"></div>'):da=game.state.products[helperData.chartTypeShown];var ca=void 0!==da.avl?da.avl:da.amount,la="buy"===e,ga=helpers.market.getTradeDetails(helperData.chartTypeShown,e,bt,la),ma="";"sell"===e&&bt>ca?ma=getLine("only_have1",ca.formatNumber(),helperData.chartTypeShown):"buy"===e&&ga.tradeValue>game.state.resources.gold.amount&&(console.log("tradeValue : "+ga.tradeValue+" GoldAvl: "+game.state.resources.gold.amount),ma=getLine("only_have2",game.state.resources.gold.amount.formatNumber()));var ua=""!==ma?" disabled":"",pa=getLine("sell"===e?"market_text1":"market_text2"),ha="sell"===e?ga.tradeValue:ga.orderSize,va=getLine("sell"===e?"market_text3":"market_text4"),fa="sell"===e?'<div class="icon tiny gold"></div>':" "+helperData.chartTypeShown,ya="sell"===e?na:'<div class="icon tiny gold"></div>';if(s='<div class="new-trade-order" data-type="'+e+'"><div class="left-side"><div class="order-title">'+getLine("new_order")+'</div><div class="order-type button-style'+("buy"===e?" active":"")+'" execute-action="change_order_type" data-type="buy" cursorType="pointer">'+getLine("buy_blank")+'</div><div class="order-type button-style'+("sell"===e?" active":"")+'" execute-action="change_order_type" data-type="sell" cursorType="pointer">'+getLine("sell_blank")+'</div></div><div class="right-side"><div class="input-holder"><div class="input-note">'+pa+'</div><div class="input-note2">'+ya+'</div><input class="order-amount" type="text" value="'+bt+'" /></div><div class="percent-options"><div execute-action="change_order_amount" data-type="25" cursorType="pointer">25%</div>/<div execute-action="change_order_amount" data-type="50" cursorType="pointer">50%</div>/<div execute-action="change_order_amount" data-type="75" cursorType="pointer">75%</div>/<div execute-action="change_order_amount" data-type="100" cursorType="pointer">100%</div></div><div class="error-note">'+ma+'</div><div class="sub-total">'+getLine("order_average")+ga.avgPrice.formatNumber()+'<div class="icon tiny gold"></div></div><div class="receive-amount">'+va+ha.formatNumber()+fa+'</div><div class="execute-order button-style'+ua+'" execute-action="execute_order" data-type="'+e+'"cursorType="pointer">'+getLine(e+"_blank")+"</div></div></div>",helperData.inputFocus){var ba=page.$gameUI.$.find(".order-amount");if(ba.length>0){var _a=ba[0].selectionStart;setTimeout((function(){(ba=page.$gameUI.$.find(".order-amount")).focus(),ba[0].setSelectionRange(_a,_a)}),10)}}break;case"helpExtended":var wa=getLine("instructions_"+t.subcategory+"_desc"),xa=getLine("instructions_"+t.subcategory+"_extra");s+='<div class="title">'+wa+"</div>",s+="<ul>";for(l=0;l<xa.length;l++){var ka=xa[l];s+="<li>"+ka+"</li>"}s+="</ul>";break;case"mapNavigation":game.const.continents[game.state.homeContinent],ge={world:"",region:"",territory:""};"world"===game.data.currentView?(ge.world=" active",ge.region=" disabled",ge.territory=" disabled"):"territories"===game.data.currentView?(ge.world=" inactive",ge.region=" active",ge.territory=" disabled"):"battle_select"===game.data.currentView&&(ge.world=" inactive",ge.region=" inactive",ge.territory=" active"),game.const.views.world.revealed||(ge.world=" disabled");var Da={regions:!1!==game.state.currentParentGrids.regions?game.state.currentParentGrids.regions:"",territories:!1!==game.state.currentParentGrids.territories?game.state.currentParentGrids.territories:"",zones:!1!==game.state.currentParentGrids.zones?game.state.currentParentGrids.zones:""};if(!1!==Da.regions&&"world"===game.data.currentView&&(ge.region=" disabled-clickable"),!1!==Da.territories&&"territories"===game.data.currentView&&(ge.territory=" disabled-clickable",void 0!==game.state.gameGrids.territories[Da.regions])){var Ia=game.state.gameGrids.territories[Da.regions][Da.territories];void 0===Ia||Ia.enemy||(ge.territory+=" disabled")}game.data.showOnlyStartingTer&&(ge.territory=" disabled");if(game.const.views.world.revealed&&8===game.state.objectives.currentGroup&&helpers.common.isCurrentView("territories")){var Ca=game.state.objectives.objectiveGroups[game.state.objectives.currentGroup];isUndefined(Ca)||Ca.objectivesDone.indexOf(0)>-1&&-1===Ca.objectivesDone.indexOf(1)&&(ge.world+=" flickering")}var Ta=helperData.ignoreFlickers.indexOf("world")>-1;if(!helpers.common.isCurrentView("world")&&!Ta){var Aa=helpers.territory.getRegionIDfromRef(game.state.currentParentGrids.regions);game.state.gameGrids.regions[Aa].conqueredTers>=game.const.gameGrids.territories.cols*game.const.gameGrids.territories.rows&&(gameUI.handleIconReveal("world"),ge.world+=" flickering")}s='<div class="map-navigation"><div class="continent">'+getLine("continents_"+game.state.homeContinent)+'</div><div class="area-types"><div class="world'+ge.world+'" data-view="world" cursorType="pointer"><div class="icon bigger world"></div></div><div class="region'+ge.region+'" data-view="territories" cursorType="pointer">'+getLine("region").toUpperCase()+"<span>"+Da.regions+'</span></div><div class="territory'+ge.territory+'" data-view="battle_select" cursorType="pointer">'+getLine("territory")+"<span>"+Da.territories+"</span></div></div></div>",s='<div class="map-navigation-holder">'+s+gameUI.prepareDOM("mapObjectives")+"</div>";break;case"mapObjectives":var Pa="";"world"===game.data.currentView?Pa=getLine("conquer_progress0"):"territories"===game.data.currentView?(Pa=getLine("conquer_progress1")+"<span>"+game.data.playerOwnedTers+"/"+game.const.gameGrids.territories.cols*game.const.gameGrids.territories.rows+"</span>",!1!==game.state.jobs.explorer.territory&&'<div class="info-entry"><div class="icon explore_active"></div><div>'+getLine("conquer_progress2")+game.state.jobs.explorer.territory+"</div></div>",!1!==game.state.lastBattledTerritory&&'<div class="info-entry"><div class="icon attack_active"></div><div>'+getLine("conquer_progress3")+game.state.lastBattledTerritory+"</div></div>"):"battle_select"===game.data.currentView&&(Pa=getLine("conquer_progress4")+"<span>"+game.state.gameGrids.territories[game.state.currentParentGrids.regions][game.state.currentParentGrids.territories].conqueredTiles.length+"/"+(Math.ceil(game.const.gameGrids.zones.cols*game.const.gameGrids.zones.rows/2)-(game.data.continentRewardBoosts.zones_required_reduction-1))+"</span>");var Sa="OFF",La="";!0===game.getSettingValue("hide_map_objectives")&&(Sa="ON",La=" hide-objectives"),s+='<div class="map-objectives'+La+'"><div class="conquer-progress"><div>'+Pa+"</div></div></div>";break;case"objectiveGroup":var Oa=t.id,Ra=t.showNext,Ma=game.state.objectives.objectiveGroups[Oa];void 0===Ma&&(game.state.objectives.objectiveGroups[Oa]={done:!1,objectivesDone:[]},Ma=game.state.objectives.objectiveGroups[Oa]);var Ua=game.const.objectiveGroups[Oa],ja="",Ea=!1;for(r=0;r<Ua.objectives.length;r++){Ua.objectives[r];var Na=Ma.objectivesDone.indexOf(r)>-1?" completed":"";ge="";Na||Ea||(ge=" first-uncompleted",Ea=!0);var Ba=isUndefined(Ua.langObjIDextra)?r:r+Ua.langObjIDextra;ja+='<div class="mission'+Na+ge+'"><div class="short-desc">'+getLine("obj_"+Ua.langID+"_"+Ba+"_desc")+'</div><div class="full-desc">'+getLine("obj_"+Ua.langID+"_"+Ba+"_hint")+"</div></div>"}s+='<div class="mission-set"><div class="header">'+getLine("mission_set")+(Oa+1)+":<span>"+getLine("obj_group_"+Ua.langID+"_title")+"</span></div>";var qa=game.getSettingValue("show_objective_hints")&&Ra?" hints-visible":"",Ga="";Ra&&(Ga='<div class="next-mission-info"><span>'+(Oa+1)+"/"+game.const.objectiveGroups.length+'</span><div class="button next-mission" cursorType="pointer">'+getLine("next_mission")+'</div></div><div class="show-hints button-style" cursorType="pointer">'+gameUI.printSetting("show_game_hints",{extraClasses:"checkbox"})+"</div>"),s+='<div class="missions-holder"><div class="missions-data'+qa+'">'+ja+"</div>"+Ga+"</div>",s+="</div>";break;case"achievements":var za,Fa,Qa,Wa,Ha,Va,Ya,Xa,$a;$.each(game.const.achievements,(function(e,t){s+='<div class="achievement-group" data-type="'+e+'"><div class="title">'+getLine("ach_"+e)+'</div><div class="achievement-list">',$.each(t.list,(function(t,a){switch(za=helpers.common.getAchievement(e,t),Fa="",e){case"continent_conquer":Fa=getLine("continents_"+t);break;case"total_citizens":Fa=Number(t).formatNumber(2,2)}var r="ach_"+e+"_desc";if(isUndefined(a.desc_var)||(r+=a.desc_var),Xa="",ge="",Va="not-displayed",ka=a.reward_amount>0?'<div class="reward">'+getLine("ach_reward",a.reward_amount.formatNumber(2,2))+' <span class="reward-type">'+getLine("res_"+a.reward_type)+"</span></div>":'<div class="reward">'+getLine("ach_reward_none")+"</div>",Ya=0,Ha="/",$a=getLine("ach_no_times"),Wa=getLine("ach_achieved"),!1!==za){var i;ge=" achieved",1===za.completions.length?(Xa="completed",Wa=getLine("ach_achieved"),i=za.completions[za.completions.length-1],Ha=convertToDate(i,!1,!0),Ya=1):za.completions.length>1&&(Va="",Xa="completed",Wa=getLine("ach_last_achieved"),i=za.completions[za.completions.length-1],Ha=convertToDate(i,!1,!0),Ya=za.completions.length),$a=getLine("ach_last_times")+"<br />";for(var o=za.completions.length-1;o>=0;o--)$a+=convertToDate(za.completions[o],!1,!1)+"<br />";za.achThisRun||(Xa="")}Qa='<div class="success-holder '+Xa+'"><div class="left"><div class="reward-icon" data-tooltip-type="achievements_rewards" data-extra-params="'+$a+'"></div><div class="reward-note '+Va+'">'+Ya+'x</div></div><div class="center '+Xa+'"><div class="time-text">'+Wa+'</div><div class="time-value">'+Ha+'</div></div><div class="right"><div class="completed-icon '+Xa+'"></div></div></div>',s+='<div class="achievement-box'+ge+'" data-subtype="'+t+'"><span class="ach-title">'+getLine(r,Fa)+"</span>"+ka+Qa+"</div>"})),s+="</div></div>"}));break;case"settingsTab":Ee="";0===Object.keys(game.data.settings).length&&'<div class="title">'+getLine("settings_text2")+"</div>";J=helperData.currentSubTab;-1===["sounds","general"].indexOf(helperData.currentSubTab)&&(J="sounds");var Ja="",Ka="";$.each(game.const.settingsCategories,(function(e,t){"",Ja+='<div class="tab button-style '+(J===e?" active":"")+'" data-type="'+e+'" cursorType="pointer">'+getLine("categories_"+e)+"</div>",Ka+='<div class="tab-data '+(J===e?" active":"")+'"  data-type="'+e+'">'+gameUI.printSettingsCategory(e,{extraClasses:"one-per-line checkbox new-checkbox",settingsTitul:!0})+"</div>"})),s+='<div class="tabs-holder second-level column-holder"><div class="tabs flex-column col-150 settings-tab">'+Ja+'</div><div class="flex-column">'+Ka+"</div></div>";break;case"aboutUsTab":Ee="";Ee=getLine("settings_text3"),Ee+=getLine("settings_text5"),s+='<div class="column-holder"><div class="flex-column col-220"><div class="inner-box first"><div class="find-us">FIND US ON:</div><a class="button-style" href="https://discord.gg/ZZDvEuR" data-type="discord" target="_blank"><span class="icon discord"></span>DISCORD</a><a class="button-style" href="https://twitter.com/GamesGamex" data-type="twitter" target="_blank"><span class="icon twitter"></span>TWITTER</a><a class="button-style" href="https://www.facebook.com/GamexStudioCompany/" data-type="facebook" target="_blank"><span class="icon facebook"></span>FACEBOOK</a></div><div class="inner-box second"><div class="find-us">SUPPORT OUR WORK: </div>'+(isSteam()?"":'<a class="button-style double" href="https://www.patreon.com/bePatron?u=34038989" data-type="patreon"  target="_blank"><span class="icon patreon"></span><div>BECOME A<br /> PATREON</div></a><br />')+'<a class="steam-pow" href="https://store.steampowered.com/app/1351500/Simpocalypse/?beta=0" title="Wishlist Simpocalypse on Steam!" class="wishlist-link" target="_blank" onclick="storeClickEvent({type: \'wishlist\', firedFrom: \'about\'});"><div class="wishlist">WISHLIST ON</div></a></div></div><div class="flex-column right">'+Ee+"</div></div>";break;case"creditsTab":s+='<a href="https://gamexgames.com/" target="_blank"><div class="banner"><div class="banner-text">'+getLine("settings_text9")+"</div></div></a>",$.each(game.const.gameCredits,(function(e,t){s+='<div class="cat-holder"><div class="entry-title">'+t.title+'</div><div class="entries-holder">';for(var a=0;a<t.entries.length;a++)if(0===t.entries[a].additions.length)s+='<div class="entry">'+t.entries[a].name+"</div>";else{for(var r=0;r<t.entries[a].additions.length;r++)"link"===t.entries[a].type?s+='<div class="entry"><a href="'+t.entries[a].links[r]+'" target="_blank">'+t.entries[a].additions[r]+"</a></div>":"general"===t.entries[a].type&&(s+='<div class="entry">'+t.entries[a].additions[r]+"</div>");s+='<div class="entry"><div class="author">by '+t.entries[a].name+"</div></div>"}s+="</div></div>"}));break;case"sidePanel":if("territories"===t&&game.data.showOnlyStartingTer)return"";var Za={world:{top:["mapNavigation"],bottom:["globalStats","setupColonies"],extraClasses:" extended-bottom"},territories:{top:["mapNavigation","mapViewOptions"],bottom:[],extraClasses:" hide-bottom"},battle_select:{top:["mapNavigation"],bottom:[],extraClasses:" hide-bottom"}}[t],es="",ts="";for(r=0;r<Za.top.length;r++)es+=gameUI.prepareDOM(Za.top[r],t);Sa="OFF";game.getSettingValue("hide_map_panel_bottom")&&(Sa="ON","world"===t&&(Za.extraClasses="")),es='<div class="top-part">'+(es+='<div class="setting-icon icon small triangle-right extend-bottom" data-type="hide_map_panel_bottom" data-value="'+Sa+'" cursorType="pointer"></div>')+"</div>";for(r=0;r<Za.bottom.length;r++)ts+="<div>"+gameUI.prepareDOM(Za.bottom[r],t)+"</div>";ts='<div class="bottom-part"><div class="scroll-holder"><div class="scroller" ss-container>'+ts+"</div></div>",s='<div class="side-panel'+Za.extraClasses+'">'+es+ts+"</div>";break;case"mapViewOptions":s='<div class="view-types"><span>'+getLine("view")+":</span>",s+="<div>",$.each(game.const.views[t].viewTypes,(function(e,t){var a=t===game.data.currentViewType?" active":"",r="";"economic"!==t||helpers.common.getResearchBoost("actions","buy_territories",!0)||(a+=" disabled-click locked",r='data-tooltip-type="params_text" data-extra-params="'+getLine("param_has_to_be_res")+'"'),s+='<div class="view-type'+a+'" data-action-type="change_view_type" data-type="'+t+'" '+r+' cursorType="pointer">'+getLine("view_types_"+t)+"</div>"})),"economic"===game.data.currentViewType&&(s+='<div class="extra-info">'+getLine("prices_update")+"</div>"),s+="</div></div>";break;case"globalStats":s='<div class="global-stat">'+getLine("stats_military_power")+': <div class="icon help smaller" data-tooltip-type="stat_info" data-subtype="military_power"></div><br /><span>'+game.calculateGameTimePowerMX("power").formatNumber(2,2)+getLine("change_per_week",game.data.multipliers.powerMX.formatNumber(2,2))+'</span></div><div class="global-stat">'+getLine("stats_economic_power")+': <div class="icon help smaller" data-tooltip-type="stat_info" data-subtype="economic_power"></div><br /><span>'+game.calculateGameTimePowerMX("cost").formatNumber(2,2)+getLine("change_per_week",game.data.multipliers.costMX.formatNumber(2,2))+'</span></div><div class="relation-stats"><div class="infamy">'+getLine("stats_infamy")+': <div class="icon help smaller" data-tooltip-type="stat_info" data-subtype="infamy"></div><div class="progress-bar" data-progress="'+game.state.stats.infamy+'" data-after="'+(100*game.state.stats.infamy).formatNumber(2,2)+'%"></div></div><div class="notoriety">'+getLine("stats_notoriety")+': <div class="icon help smaller" data-tooltip-type="stat_info" data-subtype="notoriety"></div><div class="progress-bar" data-progress="'+game.state.stats.notoriety+'" data-after="'+(100*game.state.stats.notoriety).formatNumber(2,2)+'%"></div></div><div class="diplomacy">'+getLine("stats_diplomacy")+': <div class="icon help smaller" data-tooltip-type="stat_info" data-subtype="diplomacy"></div><div class="progress-bar" data-progress="'+game.state.stats.diplomacy+'" data-after="'+(100*game.state.stats.diplomacy).formatNumber(2,2)+'%"></div></div></div>';break;case"setupColonies":var as=helpers.common.getResearchBoost("actions","buy_military_colonies"),ss=helpers.common.getResearchBoost("actions","buy_economic_colonies"),rs=Object.keys(game.state.colonies.military).length,is=Object.keys(game.state.colonies.economic).length,os=as<=rs,ns=ss<=is,ds=rs+"/"+as,cs=is+"/"+ss;0===as?ds="<div>*"+getLine("unlock_in_research")+"</div>":os&&(ds+="<div>*"+getLine("upgrade_in_research")+"</div>"),0===ss?cs="<div>*"+getLine("unlock_in_research")+"</div>":ns&&(cs+="<div>*"+getLine("upgrade_in_research")+"</div>"),s='<div class="title">'+getLine("setup_colonies")+"</div>",s+='<div class="setup-colony'+(os?" disabled":"")+'" data-type="military" data-action-type="setup_colony" cursorType="pointer"><span>'+getLine("military_colony_upper")+'</span><div><div class="icon-holder" data-icon-bg="military_colony"></div><div class="colonies-available">'+ds+'</div></div></div><div class="setup-colony'+(ns?" disabled":"")+'" data-type="economic" data-action-type="setup_colony" cursorType="pointer"><span>'+getLine("economic_colony_upper")+'</span><div><div class="icon-holder" data-icon-bg="economic_colony"></div><div class="colonies-available">'+cs+"</div></div></div>";break;case"playPageDemoNote":if(!isDemo()&&isSteam())return"";var ls=isUndefined(helperData.activeTimers.ea_release_date)||!isUndefined(helperData.activeTimers.ea_release_date.remove),gs=Math.floor(Date.now()/1e3),ms=isSteam()?getLine("menu_steam_note2"):getLine("menu_steam_note"),us=(ot=isDemo()&&ls?getLine("menu_get_full_version"):getLine("steam_page_add_to_wishlist"),"");if(ls){if(console.log("update Discounts note: "+JSON.stringify(helperData.activeTimers.discounts)),!isUndefined(helperData.activeTimers.discounts)){var ps=helperData.activeTimers.discounts[0];us=ps.data.final_price+"$ ("+ps.data.discount_percent+"%)"}else us=game.const.steamGamePrice+"$"}else{var hs=helperData.activeTimers.ea_release_date.end-gs,vs=(Math.floor(hs/86400),Math.floor(hs%86400/3600),Math.floor(hs%3600/60),convertTime(hs,{pad:!1,minSize:"s",rawData:!0}));us='<div class="big-timer"><div><span>'+vs.d+":</span>DAY</div><div><span>"+vs.h+":</span>HRS</div><div><span>"+vs.m+":</span>MIN</div><div><span>"+vs.s+"</span>SEC</div></div>"}s+='<div class="demo-note">'+getLine("menu_demo_version")+"</div><p>"+ms+'</p><div class="mid-section">'+us+'</div><a href="https://store.steampowered.com/app/1351500/Simpocalypse/?beta=0" title="'+getLine("wishlist_simpocalypse")+'" class="wishlist-link-menu" target="_blank" onclick="storeClickEvent({type: \'wishlist\', firedFrom: \'main_menu\'});"><img src="'+assetPath+'assets/images/main_menu/steam_playpage_empty.png" title="'+getLine("wishlist_simpocalypse")+'"><span class="steam-button-text">'+ot+"</span></a>";break;case"sequence":var fs=0;switch(helperData.currentTab){case 0:fs=4;break;case 1:case 2:fs=2}for(r=0;r<fs;r++){var ys=r.toString(),bs=!0;2===helperData.currentTab&&0===r&&game.state.timesGivenFreePerksOnLoss>=5&&(ys+="_v2",bs=!1),s+="<p>"+getLine("game_over2_seq"+helperData.currentTab.toString()+"_text"+ys)+"</p>",0===helperData.currentTab&&0===r?s+='<div class="img destroyed-city"></div>':2===helperData.currentTab&&0===r&&bs&&(s+='<div class="icon massive perk-points"></div>')}}return s},prepareHeader:function(e){let t="";var a=gameUI.checkForNotificationIcon("population",game.state.resources.population.total,!1),s=gameUI.checkForNotificationIcon("citizens",game.state.resources.citizens.idle,!1),r=gameUI.checkForNotificationIcon("health",game.state.stats.health,!1),i=gameUI.checkForNotificationIcon("productivity",game.state.stats.productivity,!1),o=gameLoop.pausedGame?" play":" pause";return t='<div class="top-menu"><div class="item game-year" data-tooltip-type="game_year">'+convertToDate(game.state.gameDate,!1,!0)+'</div><div class="item timelapse'+(game.const.stats.timelapse.revealed?"":" hidden")+'"><div class="icon big time" cursorType="pointer"  data-tooltip-type="timelapse" data-view="timelapse_config" data-view-type="quick_popup"><div class="game-speed">'+parseInt(looptimeMX)+'x</div></div><div class="play-pause '+o+'" cursorType="pointer"  data-tooltip-type="play_pause" data-action-type="play_pause"><div class="icon play"></div></div></div><div class="item population"><div class="icon small population" data-tooltip-type="res_info" data-subtype="population"></div><span>'+game.state.resources.citizens.total.formatNumber(2,2)+"/"+game.state.resources.population.total.formatNumber(2,2)+'<div class="idle-citizens">('+game.state.resources.citizens.idle.formatNumber(2,2)+" "+getLine("idle")+")"+s+"</div>"+a+'</span></div><div class="item health'+(game.const.stats.health.revealed?"":" hidden")+'"><div class="icon small health" data-tooltip-type="res_info" data-subtype="health"></div><span>'+(100*game.state.stats.health).formatNumber(2,2)+"%</span>"+r+"</div>"+(game.const.stats.productivity.revealed?'<div class="item productivity"><div class="icon small productivity" data-tooltip-type="res_info" data-subtype="productivity"></div><span>'+(100*game.state.stats.productivity).formatNumber(2,2)+"%</span>"+i+"</div>":"")+'<div class="item about" data-view-type="popup" data-view="ingame_menu" cursorType="pointer"></div></div><div class="info-bar">'+gameUI.prepareDOM("infoBar")+"</div>",t},saveScrollBarPositions:function(){helperData.scrollPosTop=[];for(var e=$(".ss-content"),t=0;t<e.length;t++)helperData.scrollPosTop.push(e[t].scrollTop)},recoverScrollBarPositions:function(){for(var e=$(".ss-content"),t=0;t<e.length;t++)void 0!==helperData.scrollPosTop[t]&&(e[t].scrollTop=helperData.scrollPosTop[t])},prepareContent:function(e,t){counters.prepareContent++;let a="";var s="",r="",i="";switch(e){case"research":game.data.researchNodes=[],$.each(gameConstants.researchUpgradesNodes,(function(e,t){var a={nodeRef:t},s=new TreeNode(t.x,t.y,t.w,t.h,a);game.data.researchNodes.push(s),game.data.staticObjectsRefs[s.globalID]=s}));break;case"resources":s=gameUI.prepareDOM("jobData","explorer"),$.each(game.const.resources,(function(e,t){if("revealed"!==e&&t.gatherable&&t.revealed){game.state.resources[e];if("stone"===e)return r+=gameUI.prepareDOM("miningData"),!1;r+=gameUI.prepareDOM("resourceData",{type:e,separate:!0})}})),a+='<div class="scroll-holder"><div class="scroller" ss-container><div class="section jobs">'+s+'</div><div class="section resources">'+r+"</div></div></div>";break;case"public_jobs":var o="";$.each(game.const.jobs,(function(e,t){t.revealed&&t.public&&(s+='<div class="section-holder jobs several-columns">'+gameUI.prepareDOM("jobData",e)+"</div>")})),a+='<div class="scroll-holder"><div class="scroller" ss-container><div class="section jobs">'+s+"</div></div></div>";break;case"public_buildings":$.each(game.const.buildings,(function(e,t){void 0!==t.public&&t.public&&t.unlocked&&(s+='<div class="section-holder buildings several-columns">'+gameUI.prepareDOM("buildingData",{type:e})+"</div>")})),a+='<div class="scroll-holder"><div class="scroller" ss-container><div class="section public-buildings">'+s+"</div></div></div>";break;case"factories":for(var n=helpers.common.getResearchBoost("factory","building_limit"),d=0;d<n;d++)s+=gameUI.prepareDOM("buildingData",{type:"factory",id:d});a+='<div class="scroll-holder"><div class="scroller" ss-container><div class="section buildings">'+s+"</div></div></div>";break;case"change_product":var c=game.state.buildings.factory[t].producing;$.each(game.const.products,(function(e,a){if(a.unlocked){var r=e===c,i=game.state.products[e];s+='<div class="box-holder" data-type="products" data-subtype="'+e+'" data-id="'+t+'"><div class="box-data'+(r?" currently-selected":"")+'"><div class="title">'+getLine("products_"+e)+"<span>("+Math.round(i.avl).formatNumber(1,1)+')</span></div><div class="desc">'+getLine("products_"+e+"_desc")+"<br /><br/>"+getLine("products_base_produce_rate",a.produce_rate)+"<br/><br/></div>"+(r?'<div class="button choose-product disabled" cursorType="pointer">'+getLine("selected")+"</div>":'<div class="button choose-product" cursorType="pointer">'+getLine("choose")+"</div>")+"</div></div>"}})),a+='<div class="scroll-holder"><div class="scroller" ss-container><div class="title"><div class="button" data-view="factories" cursorType="pointer"><< '+getLine("back")+'</div></div><div class="section">'+s+"</div></div></div>";break;case"product_stock":audio.playSound("productStock"),$.each(game.const.products,(function(e,a){if(a.unlocked){var r=game.state.products[e],i="",o=Math.min(1,r.avl/game.state.resources.citizens.total);$.each(a.milestones,(function(e,t){var s=t.required_rate<=o?" achieved":"",r="";$.each(t.effects,(function(e,t){var a=t<0?" negative":"";r+=getLine("milestones_"+e)+' <span class="'+a+'">'+(100*t).formatNumber(2,2,!1,!0)+"%</span><br />"}));var n=e===a.milestones.length-1?" - 5px":"",d="left: calc("+100*t.required_rate+"% - 48.25px"+n+");",c="left: calc("+100*t.required_rate+"% - 94.5px - 3px"+n+");";i+='<div class="milestone-req'+s+'" style="'+d+'"><div class="data">'+(100*t.required_rate).formatNumber()+'%</div></div><div class="milestone-gain'+s+'" style="'+c+'"><div class="data">'+r+"</div></div>"})),i='<div class="product-milestones">'+i+'<div class="progress-bar regular" data-progress="'+o+'"></div></div>',s+='<div class="box-holder" data-type="products" data-subtype="'+e+'" data-id="'+t+'"><div class="box-data"><div class="title">'+getLine("products_"+e)+"</div>"+i+'<div class="product-amount"><span>('+Math.round(r.avl).formatNumber(1,1)+')</span><div class="button trade-product" data-view="global_market" data-extra-params="'+e+'" cursorType="pointer">'+getLine("trade")+"</div></div></div></div>"}})),a+='<div class="scroll-holder"><div class="scroller" ss-container><div class="section">'+s+"</div></div></div>";break;case"global_market":audio.playSound("stockMarket"),void 0===helperData.chartTypeShown&&(helperData.chartTypeShown="clothing"),void 0!==t&&(console.log("globalmarket extra param: "+t),helperData.chartTypeShown=t),s=gameUI.prepareDOM("marketData");var l=pageWidth<1550?330:460;a+='<div class="scroll-holder"><div class="scroller" ss-container><div class="section global-market"><div class="left-column max-250">'+s.DOM1+'</div><div class="right-column minus-250"><div class="above-chart">'+s.DOM3+'</div><div class="trade-chart-holder" data-type="computer"><canvas class="trade-chart" height="'+l+'" width="1150"></canvas></div><div class="below-chart">'+s.DOM2+"</div></div></div></div></div>";break;case"build_queue":s+=gameUI.prepareDOM("buildQueue",{type:b}),a+='<div class="scroll-holder"><div class="scroller" ss-container><div class="section queues"><div class="title">'+getLine("build_queue")+"</div>"+s+"</div></div></div>";break;case"produce":s+=gameUI.prepareDOM("buildingData",{type:"war_factory",id:0});var g=0,m=!1;for(d=0;d<game.state.corpuses.length;d++)g+=game.state.corpuses[d].upgPoints;if(g>0&&(m=!0),!m)for(d=0;d<game.state.corpuses.length;d++){var u=game.state.corpuses[d].upgrades;$.each(u,(function(e,t){if(Number.isInteger(t))if("auraSize"===e){if(t>1)return m=!0,!1}else if(t>0)return m=!0,!1}))}m&&(s+='<div class="box-holder"><div class="box-data corpus-upgrades"><div class="title">'+getLine("corpus_upgrades_blank")+'</div><div class="desc"><div class="shield"></div><div class="upgrade-points">'+getLine("upgrade_points")+': <div class="amount">'+g+'</div></div><div class="button distribute" data-view="corpus_upgrades" data-view-type="popup" cursorType="pointer">'+getLine("distribute").toUpperCase()+"</div></div></div></div>");var p,h,v=0;if(game.state.buildings.war_factory.length>0)v=helpers.common.getBuildingData("war_factory",0).gains.plans_capacity;for(var f=0;f<v;f++){var y=game.state.corpuses[f];if(void 0!==y&&void 0!==y.stats){var b="corpuses",_=f,w=(o="",y);p=[],h=[];var x=w.buyAmount,k=!0;$.each(y.costs,(function(e,t){o+=" -"+(t*=x).formatNumber()+' <div class="icon smaller '+e+'"></div>',p.push(e),h.push(t),game.state.resources[e].amount<t&&(k=!1)}));var D='<div class="circle">'+gameUI.prepareDOM("planImage",y)+'</div><div class="stats">'+getLine("hp")+': <span class="value">'+w.stats.max_hp.min.formatNumber()+"</span><br />"+getLine("dmg")+': <span class="value">'+w.stats.dmg.min.formatNumber()+" - "+w.stats.dmg.max.formatNumber()+"</span><br />"+getLine("rof")+': <span class="value">'+w.stats.rate_of_fire+"ms</span><br /></div>";k=k?"":" disabled";var I=!1;w.parts.hull&&w.parts.turret&&(I=!0);var C=(w.expPoints-w.lastPoints)/(w.nextPoints-w.lastPoints),T=getLine("to_next_level")+(w.nextPoints-w.expPoints).formatNumber()+"/"+(w.nextPoints-w.lastPoints).formatNumber()+getLine("plus1"),A=(w.expPoints-w.lastPoints).formatNumber()+"/"+(w.nextPoints-w.lastPoints).formatNumber();r+='<div class="box-holder"><div class="box-data" data-type="'+b+'" data-subtype="'+_+'">';var P="";I&&(P='<div class="level-widget"> '+getLine("lvl")+w.level+'<div class="progress-bar" data-progress="'+C+'" data-tooltip-type="params_text" data-extra-params="'+T+'"></div>'+getLine("lvl")+" "+parseInt(w.level+1)+'<div class="points-gain">(+1 <div class="shield"></div>)</div><br /><div class="to-next-level">'+A+" "+getLine("xp")+"</div></div>");if(r+='<div class="title"><div>'+getLine("corpus").toUpperCase()+" "+(f+1)+' <br /><span class="">'+w.tanksAmount+getLine("specific1")+"</span></div>"+P+'</div><div class="desc">',r+=I?'<div class="unit-data" data-unit-type="'+_+'">'+D+"</div>":getLine("no_plan_chosen"),r+="</div>",I){var S=x*w.buildTime/1e3/helpers.common.getProductionReductionMX(),L=helpers.common.getProductionReductionMX()>0;r+='<div class="costs">'+o+(L?'<div class="icon timer smaller"></div> '+convertTime(S,{pad:!0,minSize:"s"})+"<br />":"")+"</div>"}var O=getLine("produce_tank",w.buyAmount.formatNumber(2,2));I&&(r+='<div class="button produce'+k+'" data-cost-types="'+p.join(",")+'" data-cost-amounts="'+h.join(",")+'" cursorType="pointer">'+O+"</div>"),r+="</div></div>"}else r+='<div class="box-holder"><div class="box-data">'+getLine("plan",f+1)+"</div></div>"}0===v&&(r+='<div class="box-holder"><div class="box-data empty">'+getLine("build_war_factory")+"</div></div>"),i+='<div class="desc">';for(d=0;d<game.state.produceQueue.length;d++){var R=d,M=game.state.produceQueue[d];b="plansFull";_=M[0];var U=M[1],j=M[2],E=helpers.common.getProductionReductionMX();0===R?i+='<div class="sub-title">'+getLine("currently_producing")+"</div>":1===R&&(i+='<div class="sub-title">'+getLine("next")+"</div>"),i+='<div class="box-data" data-type="'+b+'" data-subtype="'+_+'" data-queue-id="'+R+'"><div class="queue-item" data-type="'+_+'">'+getLine("x_tanks_amount",U,parseInt(_)+1,(j/E/1e3).formatNumber())+'</div><div class="actions"></div></div>'}i+="</div>",0===game.state.produceQueue.length&&(i='<div class="box-data desc">'+getLine("no_tanks_in_queue")+"</div>"),a+='<div class="scroll-holder"><div class="scroller" ss-container><div class="section buildings">'+s+'</div><div class="section queues"><div class="title">'+getLine("production_queue")+"</div>"+i+'</div><div class="section produce-plans">'+r+"</div></div></div>";break;case"manage_plans":game.data.currentSubTab="pending"===t?"pending":"",!1===helperData.currentTab&&(helperData.currentTab="hull"),-1===["hull","turret"].indexOf(helperData.currentTab)&&(helperData.currentTab="hull");v=0;if(game.state.buildings.war_factory.length>0)v=helpers.common.getBuildingData("war_factory",0).gains.plans_capacity;var N,B="",q="";for(d=0;d<game.const.partTypes.length;d++){B+='<div class="tab'+(te=helperData.currentTab===game.const.partTypes[d]?" active":"")+game.checkIfTutorialized(0,game.const.partTypes[d]+"_tab",!1,!1)+' button-style" data-type="'+game.const.partTypes[d]+'" cursorType="pointer">'+getLine(game.const.partTypes[d])+"</div>",N=game.const.partTypes[d];var G,z="",F=0;G="pending"===t?game.state.partsPending:game.state.parts;for(var Q=0;Q<G.length;Q++){var W=game.state.corpuses[game.data.currentCorpusID].parts[N],H=G[Q],V="";if(H.id===W&&(V="selected"),H.type===game.const.partTypes[d]){F++;var Y="";$.each(H.stats,(function(e,t){var a=t.min===t.max?t.min:t.min+"-"+t.max;t.max>0&&(Y+=getLine("stats_names_"+e)+': <span class="value">'+a+"</span><br />")}));var X="",J="";X+=H.crew+' <div class="icon tiny citizens"></div>',$.each(H.costs,(function(e,t){J+="<div>-"+t.formatNumber()+' <div class="icon tiny '+e+'"></div></div>'}));var K='<div class="image" data-part-type="'+H.type+'" data-part-subtype="'+H.subType+'"></div><div class="stats">'+Y+"</div>";"pending"===t?K+='<div class="button scrap" data-type="pending" cursorType="pointer"></div>':H.used||"selected"===V||(K+='<div class="button scrap" data-type="normal" cursorType="pointer"></div>');K+='<div class="costs">'+getLine("build_requires")+X+'<br /><div class="part-costs">'+J+"</div></div>",z+='<div class="part-data '+V+'" data-part-id="'+H.id+'"data-part-type="'+H.type+'" data-part-subtype="'+H.subType+'">'+K,z+="pending"===t?'<div class="add-to-inventory button-style" cursorType="pointer">'+getLine("add_to_inventory")+"</div>":"selected"===V?'<div class="currently-selected">'+getLine("currently_selected")+"</div>":'<div class="add-part button-style '+game.checkIfTutorialized(0,"select_"+game.const.partTypes[d],!1,!1)+'" cursorType="pointer">'+getLine("select")+"</div>",z+="</div>"}}if(0===F){var Z="";"pending"===t&&(Z=" pending "),z+='<div class="part-data">'+getLine("no_parts_yet",Z,game.const.partTypes[d].toUpperCase())+"</div>"}q+='<div class="tab-data'+te+'" data-type="'+game.const.partTypes[d]+'">'+z+"</div>"}s=q;var ee=B;B="",q="";for(d=0;d<v;d++){var te;B+='<div class="tab button button-style'+(te=d===game.data.currentCorpusID?" active":"")+'" data-type="plan_'+(d+1)+'" data-subtype="'+d+'" cursorType="pointer">'+getLine("corpus_number")+(d+1)+"</div>",z="";var ae=void 0!==game.state.corpuses[d]&&game.state.corpuses[d];ae.counter=d,q+='<div class="tab-data'+te+'" data-type="plan_'+(d+1)+'">'+(z+=gameUI.prepareDOM("planData",ae))+"</div>"}r=q;var se=B;if(G="pending"===t?game.state.partsPending:game.state.parts,["hull","turret"].indexOf(helperData.currentTab)>-1){var re=0;if("hull"===helperData.currentTab)for(d=0;d<G.length;d++)"hull"===G[d].type&&re++;else if("turret"===helperData.currentTab)for(d=0;d<G.length;d++)"turret"===G[d].type&&re++}var ie,oe=game.const.partsMaxAmount,ne="";"pending"===t?(ie=getLine("pending_parts")+re,"",ne=getLine("go_back_small")):(ie=getLine("inventory_parts")+re+"/"+oe,"pending",ne=game.state.partsPending.length+getLine("new_note")),a+='<div class="left-column tabs-holder"><div class="section create-plans"><div class="title"><div class="parts-counter">'+ie+'</div><div class="button get-pending" cursorType="pointer" data-view="pending_parts" data-view-type="popup">'+ne+'</div></div><div class="sub-header"><div class="tabs">'+ee+'</div></div><div class="scroll-holder"><div class="scroller" ss-container>'+s+'</div></div></div></div><div class="right-column tabs-holder"><div class="section manage-plans"><div class="title">'+getLine("design_plan")+'</div><div class="sub-header"><div class="tabs">'+se+"</div></div>"+r+"</div></div>"}a="<div>"+a+"</div>",a=$(a),"resources"===e?a.on({mousedown:function(e){if(1===e.which){audio.playSound("click");let e=($this=$(this).parent()).find(".box-holder").attr("data-subtype");if($this.hasClass("extended"))$this.removeClass("extended"),$this.find(".extended-data").addClass("not-displayed").html(""),game.const.resources[e].extended=!1;else{let t;$this.addClass("extended"),t="mining_deposits"===e?gameUI.prepareDOM("miningExtended",e):gameUI.prepareDOM("resourceExtended",e),$this.find(".extended-data").html(t).removeClass("not-displayed"),game.const.resources[e].extended=!0}}}},".section-holder.resources .overview"):"public_jobs"===e||("produce"===e?a.on({mousedown:function(e){if(1===e.which){audio.playSound("click");var t=($this=$(this)).closest(".box-data"),a=t.attr("data-type"),s=t.attr("data-subtype"),r=t.attr("data-queue-id"),i=game.state.corpuses[s],o=i;o.projectileData={type:"shell_1",speed:1e3,damage:o.stats.dmg.min,min_dmg:o.stats.dmg.min,max_dmg:o.stats.dmg.max},o.fireRate=o.stats.rate_of_fire,o.maxHp=o.stats.max_hp.min,o.subType=s;var n=0;$this.hasClass("produce")?n=i.buyAmount:$this.hasClass("plus")?n=1:$this.hasClass("minus")&&(n=-1),game.changeProduceQueue(a,s,n,r),game.switchTo("produce")}}},".button.produce"):"manage_plans"===e?a.on({mousedown:function(e){if(1===e.which){audio.playSound("click");var t=($this=$(this)).parent().attr("data-part-id").parseNumber(),a=$this.parent().attr("data-part-type"),s=page.$gameUI.$contentHolder.find(".right-column .tab-data.active");if(void 0===s||0===s.length)return console.log("no plan exists yet!"),!1;var r=s.attr("data-type").parseNumber()-1,i=game.state.corpuses[r];i.tanksAmount>0?gameUI.showConfirmationPrompt(getLine("only_one_tank_type"),(function(){game.addPart(r,t,a),game.state.resources.citizens.idle-=i.crew*i.tanksAmount,game.state.formationCrewTotal+=i.crew*i.tanksAmount,i.tanksAmount=0,i.expPoints=Math.ceil(i.expPoints/2);var e=helpers.plans.getCorpusLevel(i.expPoints);i.level=e.level,i.lastPoints=e.lastPoints,i.nextPoints=e.nextPoints,game.removeCorpusFromGameObjects(r),helpers.units.refreshGameObjectsState(),game.refreshCurrentView()}),(function(){})):(game.addPart(r,t,a),game.refreshCurrentView())}}},".add-part"):"global_market"===e&&(console.log("call canvas chart init"),helpers.market.initMarketChart(a.find(".trade-chart")))),page.$gameUI.$contentHolder.html(a)},printSetting:function(e,t){t=void 0===t?{}:t;var a=game.const.settings[e],s=game.data.settings[e];if(void 0!==a.requires)switch(a.requires.type){case"research":if(!helpers.common.getResearchBoost(a.requires.subType,e,!0))return""}var r,i="",o="",n="";void 0!==t.extraClasses&&(o=" "+t.extraClasses),"master_toggle"===e&&(o+=" master-toggle"),"show_quick_notification"===e&&(o+=" show-quick-notification");var d="";void 0===t.ignoreLabel&&(d=getLine("setting_"+e));var c=isUndefined(t.ignoreTooltip)?' data-tooltip-type="setting" ':"";switch(a.type){case"boolean":if(a.possibleValues.length<=2)i+='<div class="setting'+(s?"":" off")+o+'" data-type="'+e+'"'+c+' data-subtype="'+e+'" data-value="'+(r=s?"on":"off")+'" data-display-value="'+(n=r)+'" cursorType="pointer">'+d+"</div>";else for(var l=0;l<a.possibleValues.length;l++){var g=(n=r=a.possibleValues[l]).toString().split("_"),m=n.toString().indexOf("_percent")>-1,u=Number(g[0]);if(m&&(n=(100*u/100).formatNumber(0,0)+"%"),void 0!==t.langLabel){var p={en:"English",zh:"简体中文",de:"Deutsche",nl:"Nederlands",it:"Italiano",pl:"Polskie",sp:"Español",kr:"한국어",fr:"Français",pt:"Português"},h=getLine(t.langLabel+r);isUndefined(p[r])||(h=p[r]),d=h,d+="<span>"+getLine(t.langLabel+r)+"</span>"}i+='<div class="setting'+(s.toString()===r.toString()?"":" off")+o+'" data-type="'+e+'"'+c+' data-subtype="'+e+'" data-value="'+r+'" data-display-value="'+n+'" cursorType="pointer">'+d+"</div>"}break;case"boolean_list":break;case"linear":i+='<div class="slide-container"><div class="slider-value"><span class="current-sett-value">'+(100*s).formatNumber(0,0)+'%</span><div class="setting-name">'+d+'</div></div><input type="range" min="0" max="100" value="'+(100*s).formatNumber(0,0)+'" class="slider" data-type="'+e+'" data-subtype="setting"></div>'}return i},printSettingsGroup:function(e,t){if("hotkeys"===e)return a='<div class="hotkey-entry"><div class="desc">'+getLine("setting_hotkeys_speed_up")+'</div><div class="value">+</div></div><div class="hotkey-entry"><div class="desc">'+getLine("setting_hotkeys_speed_down")+'</div><div class="value">-</div></div><div class="hotkey-entry"><div class="desc">'+getLine("setting_hotkeys_close_popup")+'</div><div class="value">ESC</div></div><div class="hotkey-entry"><div class="desc">'+getLine("setting_hotkeys_but_amount_one")+'</div><div class="value">CTRL + 1</div></div><div class="hotkey-entry"><div class="desc">'+getLine("setting_hotkeys_but_amount_ten")+'</div><div class="value">CTRL + 2</div></div>';t=void 0===t?{}:t;var a="",s=game.const.settingsGroups[e];"all_sounds"===e&&(t.ignoreGroupLabel=!0),void 0===t.ignoreGroupLabel&&(void 0===t.settingsTitul?a+=getLine("sett_group_"+e)+": ":a+='<span class="spec-titul">'+getLine("sett_group_"+e)+"</span>");for(var r=0;r<s.settings.length;r++)a+=gameUI.printSetting(s.settings[r],t);return a='<div class="settings-group">'+a+"</div>"},printSettingsCategory:function(e,t){var a="",s=game.const.settingsCategories[e];a='<div class="settings-category">';for(var r=0;r<s.setting_groups.length;r++)a+=gameUI.printSettingsGroup(s.setting_groups[r],t);return a+="</div>"},handleIconReveal:function(e){var t,a=!1;switch(e){case"food":case"water":case"wood":case"stone":case"iron":case"uranium":case"energy":case"knowledge":case"gold":case"water_sources":case"mining_deposits":case"tiles":t=game.const.resources[e];break;case"timelapse":t=game.const.stats[e];break;case"resources":case"research":case"world":case"territories":case"public_jobs":case"public_buildings":case"produce":case"factories":case"products":case"global_market":case"manage_plans":case"product_stock":t=game.const.views[e];break;case"social":case"economic":case"army":t=game.const.viewCategories[e],helperData.showNewCategory=e;break;case"builder":t=game.const.jobs[e];break;case"health":case"productivity":case"timelapse":t=game.const.stats[e];break;case"build_queue":case"notifications":a=!0}void 0===t?a&&!helpers.common.isRevealed(e)&&(gameUI.checkDOMrefresh("icon_revealed",e),game.state.alreadyRevealed.push(e),"notifications"===e&&page.$dynamicDOM.$notifications.removeClass("hidden")):t.revealed||(t.revealed=!0,gameUI.checkDOMrefresh("icon_revealed",e),game.state.alreadyRevealed.push(e))},showMenu:function(e,t){gamePaused=!0;var a=page.$dynamicDOM.$.find(".popup-holder");helperData.insertAfterIndex=!1,a.length>0&&a.eq(a.length-1).hasClass("fullscreen")&&(helperData.insertAfterIndex=a.eq(a.length-1).index()),!1===helperData.insertAfterIndex&&page.$dynamicDOM.$.find(".popup-holder").remove();var s="",r="";switch(e){case"main_menu":var i=!1!==game.stateHandling.saveGamesData.currentSaveID?getLine("btn_continue_play"):getLine("btn_play"),o=!1!==game.stateHandling.saveGamesData.currentSaveID?"start_game":"play_game",n="",d="";"play_game"===o?n='<div class="menu-button button-style button-big-bg sound-on" data-type="'+o+'" cursorType="pointer">'+i+'<div class="icon playpage music-on"></div></div><div class="menu-button button-style button-big-bg sound-off" data-type="'+o+'" cursorType="pointer">'+i+'<div class="icon playpage music-off"></div></div>':(n='<div class="menu-button button-style button-big-bg" data-type="'+o+'" cursorType="pointer">'+i+"</div>",d+='<div class="menu-button small button-style" data-type="new_game" cursorType="pointer">'+getLine("btn_new_game")+"</div>"),d+='<label for="load-file" class="load-file button-style" cursorType="pointer"><i class="fa fa-cloud-upload"></i> '+getLine("btn_load")+'</label><input id="load-file" type="file"/>';var c="";$.each(game.stateHandling.saveGamesData.gameSaves,(function(e,t){var a=t.id===game.stateHandling.saveGamesData.currentSaveID?" last-played":"",s=parseInt((Date.now()-t.lastPlayed)/1e3),r=isUndefined(t.citizens)?10:t.citizens;c+='<div class="game-save'+a+'" data-save-id="'+t.id.toString()+'"><div class="save-info"><div>'+getLine("menu_game_time")+convertToDate(t.gameTime,!0)+"<br /> "+getLine("menu_total")+'<div class="icon smaller citizens"></div>: '+r.formatNumber(2,2)+"</div><div><b>"+convertTime(s,{pad:!0,minSize:"s"})+getLine("menu_ago")+'</b></div></div><div class="save-actions"><div class="icon playpage play bigger" data-action-type="continue_save" data-extra-params="'+t.id.toString()+'" cursorType="pointer"></div><div class="icon playpage download small" data-action-type="download_save" data-extra-params="'+t.id.toString()+'" cursorType="pointer"></div><div class="icon playpage delete small" data-action-type="delete_save" data-extra-params="'+t.id.toString()+'" cursorType="pointer"></div></div></div>'}));var l="",g=" no-saves";""!==c&&(g="",l='<div class="game-saves"><div class="scroll-holder"><div class="scroller" ss-container>'+c+"</div></div></div>");var m="",u="";!isDemo()&&isSteam()&&(m=" not-available",u=" no-margin"),r+='<div class="two-columns-justified"><div class="menu-box steam js-external-link'+m+'">'+gameUI.prepareDOM("playPageDemoNote")+'</div><div class="menu-box play-options'+g+u+'"><div class="special-note"></div>'+n+d+l+'<div class="menu-button button-style button-big-bg js-external-link" data-type="feedback" cursorType="pointer"><a href="https://forms.gle/a4fzQRQCmGYjsjhv5" target="_blank" onclick="storeClickEvent({type: \'feedback\', firedFrom: \'main_menu\'});">'+getLine("btn_feedback")+"</a></div></div></div>",r+='<div class="two-columns-justified bottom-justify"><div class="menu-box not-adjustable community"><div class="title">'+getLine("menu_community")+'</div><div class="two-columns-justified"><div class="menu-box mini important-links"><div class="important-link js-external-link"><a href="https://twitter.com/GamesGamex" target="_blank" onclick="storeClickEvent({type: \'twitter\', firedFrom: \'main_menu\'});"><span class="icon playpage twitter small" cursorType="pointer"></span>'+getLine("menu_twitter")+'</a></div><div class="important-link js-external-link"><a href="https://www.facebook.com/GamexStudioGames/" target="_blank" onclick="storeClickEvent({type: \'facebook\', firedFrom: \'main_menu\'});"><span class="icon playpage facebook small" cursorType="pointer"></span>'+getLine("menu_facebook")+'</a></div><div class="important-link js-external-link"><a href="https://www.localizor.com/simpocalypse" target="_blank" onclick="storeClickEvent({type: \'translate\', firedFrom: \'main_menu\'});"><span class="icon playpage translate small" cursorType="pointer"></span>'+getLine("menu_translate")+'</div></div><div class="menu-box mini discord js-external-link"><a href="https://discord.gg/ZZDvEuR" class="discord-link-menu" title="'+getLine("join_discord_simpocalypse")+'" target="_blank" onclick="storeClickEvent({type: \'discord\', firedFrom: \'main_menu\'});"><div>'+getLine("menu_join_discord")+'</div><img src="'+assetPath+'assets/images/main_menu/discord_icon.png" title="'+getLine("menu_join_discord")+'" /></a></div></div></div><div class="menu-box made-by sign-up-form"><div class="signup-form"><b>'+getLine("menu_sign_up")+'</b><br/><input type="email" id="email" name="email" value="" placeholder="'+getLine("menu_enter_email")+'" cursorType="text "/><div class="error"></div></div><div class="sign-up button-style" cursorType="pointer">'+getLine("btn_sign_up")+"</div></div></div>",s+='<div class="popup-holder no-scrolling" data-type="main_menu"><div class="fog-overlay"></div><div class="popup-content-holder">'+fireThirdPartyAction("request_banner_ads",{force:!1,extraClasses:" top-left-absolute",bannerSizes:["320x100"]})+'<div class="menu-header">'+(isSteam(),'<img class="game-logo" src="')+assetPath+'assets/images/simpocalypse_logo.png"><img class="game-pitch" src="'+assetPath+'assets/images/main_menu/line_below_logo.png"></div><div class="game-options"><div class="icon playpage bigger language" data-view="language" data-view-type="popup" data-lang="'+currentLanguage+'" cursorType="pointer"></div><div class="icon playpage bigger settings" data-view="settings" data-view-type="popup" cursorType="pointer"></div>'+(isSteam()?'<div class="icon playpage bigger exit" data-action-type="exit_game" cursorType="pointer"></div>':"")+'</div><div class="popup-content">'+r+"</div></div></div>";break;case"start_menu":r+='<div class="section-header">'+getLine("starting_resources")+"</div>";var p=game.state.resources.perk_points.total;if(helperData.tempData=0,p>0){r+='<div class="perk-points-info"><div class="perk-points-left">'+getLine("perk_points_to_distribute")+"<div><span>0</span>/"+p.formatNumber(2,2)+'</div></div><div class="button-style" data-action-type="clear_perk_points" cursorType="pointer">'+getLine("btn_clear_all")+'</div><div class="button-style" data-action-type="default_perk_points" cursorType="pointer">'+getLine("btn_default")+"</div></div>";var h=Object.keys(game.const.startingBoosts).length,v=parseInt(p/h),f=p-h*v;$.each(game.const.startingBoosts,(function(e,t){var a=Math.min(1,f);f=Math.max(f-1,0);var s=v+a;t.cur=s;var i=t.perPoint*s,o=i.formatNumber(2,2),n=t.perPoint.formatNumber(2,2);-1===["starting_resources","starting_citizens"].indexOf(e)&&(o=(100*i).formatNumber(2,2)+"%",n=(100*t.perPoint).formatNumber(2,2)+"%"),r+='<div class="slide-container"><div class="slider-value" data-starts-at="0" data-per-point="'+t.perPoint+'"><span class="boost-name">'+getLine("starting_boost_"+e)+': </span><span class="total-value">+'+o+"</span><div>"+getLine("per_point",n)+'</div></div><input type="range" min="0" max="'+p+'" value="'+s.formatNumber(2,2)+'" class="slider" data-type="'+e+'"></div>'}))}else $.each(game.const.startingBoosts,(function(e,t){t.cur=0}));var y="";$.each(game.const.continents,(function(e,t){var a,s="africa"===e?' selected="selected"':"",r="";$.each(t.perm_bonus,(function(e,t){switch(a=(100*t).formatNumber(2,0)+"%",e){case"build_bonus":r+=getLine("faster_builders",a);break;case"mining_rate":r+=getLine("mining_rate_bonus",a);break;case"knowledge_gain":r+=getLine("knowledge_gain",a);break;case"citizen_gain":r+=getLine("citizen_gain",a);break;case"lower_spread":r+=getLine("lower_spread",a);break;case"wood_gain":r+=getLine("wood_gain",a);break;case"water_gain":r+=getLine("water_gain",a)}})),y+='<option value="'+e+'"'+s+">"+getLine("continents_"+e)+" : "+r+"</option>"})),r+='<div class="title">'+getLine("select_home")+'</div><select id="selectContinent" data-type="select_continent">'+y+"</select>",r+='<div class="distribute-all-perk-points hidden">'+getLine("distribute_all_perks")+"</div>",r+='<div class="menu-button button-style button-big-bg" data-type="start_game" cursorType="pointer">'+getLine("btn_continue")+"</div>",s+='<div class="popup-holder no-scrolling" data-type="start_menu"><div class="popup-content-holder"><div class="header">'+getLine("pick_start")+'</div><div class="popup-content">'+r+"</div></div></div>";break;case"ingame_menu":fireThirdPartyAction("request_video_ad",{force:!1}),r='<div class="button-style" data-action-type="close_popup" cursorType="pointer">'+getLine("btn_continue")+'</div><div class="button-style" data-view-type="popup" data-view="settings" cursorType="pointer">'+getLine("settings")+'</div><div class="button-style" data-view-type="popup" data-view="main_menu" cursorType="pointer">'+getLine("main_menu")+"</div>",s+='<div class="popup-holder no-scrolling" data-type="ingame_menu"><div class="popup-content-holder"><div class="header">'+getLine("game_paused")+'</div><div class="popup-content">'+r+"</div></div></div>"}(s=$(s)).on({mousedown:function(e){var t;if(1===e.which)switch(audio.playSound("click"),($this=$(this)).attr("data-type")){case"start_game":var a=$this.closest(".popup-holder").find("#selectContinent").val();$this.closest(".popup-holder").remove(),(isUndefined(game.state.homeContinent)||!1===game.state.homeContinent)&&gameInited?(GameAnalytics("addProgressionEvent","Complete","GameProgress","StartSettingsChosen","",playTime),game.state.homeContinent=a,selectStartingRegion(game.state.homeContinent),game.switchTo("territories"),forceDrawAll=!0,forceUpdateDisplay=!0,game.updateDisplay(),gameLoop.tasks[0].lastLoopTime=performance.now(),gameLoop.pause(!1),gamePaused=!1,setTimeout((function(){gameUI.showQuickTutorial()}),500),game.initStartingBoosts(),game.recalculateContinentBoosts(),game.refreshCurrentView()):(gameInited=!1,game.fireInitWithErrorCheck());break;case"new_game":if(game.stateHandling.saveGamesData.gameSaves.length>=maxGameSaves&&isDemo()){var s=getLine("demo_version");return void gameUI.showMiniPopup(s)}gameInited=!1,startNewGame=!0,gameStarted=!1,game.fireInitWithErrorCheck(),skipStartScene?(page.$dynamicDOM.$.find(".popup-holder").remove(),page.popupsOpen=0,gameUI.showMenu("start_menu")):page.playVideo("start_scene");break;case"play_game":gameInited=!1,startNewGame=!0,gameStarted=!1;var r=$this.hasClass("sound-on");game.state.settings.music=r,game.data.settings.music=r,game.state.settings.sound=r,game.data.settings.sound=r,game.state.settings.master_toggle=r,game.data.settings.master_toggle=r,r||audio.stopAllMusic(),game.fireInitWithErrorCheck(),game.stateHandling.saveAppState(),skipStartScene?(page.$dynamicDOM.$.find(".popup-holder").remove(),page.popupsOpen=0,gameUI.showMenu("start_menu")):page.playVideo("start_scene");break;case"feedback":break;case"hard_reset":t=getLine("hard_reset"),gameUI.showConfirmationPrompt(t,(function(){game.stateHandling.resetLoad()}),(function(){}));break;case"soft_reset":t=getLine("soft_reset"),$that=$this,gameUI.showConfirmationPrompt(t,(function(){$that.closest(".popup-holder").remove(),game.data.showOnlyStartingTer=!0,game.resetGameState(!0),$this.closest(".popup-holder").remove(),page.popupsOpen=0,showWelcome=!0,gameStarted=!1,gameUI.showMenu("start_menu")}),(function(){}))}}},".menu-button"),"main_menu"===e&&(s.on({mousedown:function(e){if(1===e.which){audio.playSound("click");var t=($this=$(this)).parent(),a=t.find("#email").val();addEmailSubscriber(a,t)}}},".sign-up"),s.on({click:function(e){if(audio.playSound("click"),game.stateHandling.saveGamesData.gameSaves.length>=maxGameSaves&&isDemo()){e.preventDefault();var t=getLine("only_one_save");gameUI.showMiniPopup(t)}},change:game.stateHandling.handleFileSelect},"#load-file")),!1===helperData.insertAfterIndex?page.$dynamicDOM.$.append(s):(page.$dynamicDOM.$.children().eq(helperData.insertAfterIndex-1).after(s),helperData.insertAfterIndex=!1),SimpleScrollbar.initAll()},showPopup:function(e,t,a){if(helpers.common.isCurrentView("battle")&&-1===["corpus_upgrades","dev_panel"].indexOf(e))helperData.queuedPopups.push({type:e,extraParams:t});else{a||"corpus_upgrades"!==!e||audio.playSound("popupNotification"),page.topPopupType=e,isUndefined(game.state.objectives)||(game.checkObjectives(),game.forceUpdateTutorial(2,"open_popup",e,1)),["steam_note"].indexOf(e)>-1&&gameLoop.pause(!0);var s="",r="",i="",o=!0,n="",d=void 0!==a&&a;switch(e){case"tanks_needed":i=getLine("tanks_needed_title"),s+=getLine("tanks_needed_text1"),0===game.state.buildings.war_factory.length&&(s+="<div><p>"+getLine("tanks_needed_text2")+"</p></div>"),audio.playSound("declineBribe");break;case"settings":i=getLine("settings_title"),i="Simpocalypse Demo (v"+(isUndefined(game.state.gameVersion)?defaultGameState.gameVersion:game.state.gameVersion)+"  - Alpha)";var c=helperData.currentTab;-1===["settings","about","credits"].indexOf(helperData.currentTab)&&(c="settings");var l=gameUI.prepareDOM("settingsTab"),g=gameUI.prepareDOM("aboutUsTab"),m=gameUI.prepareDOM("creditsTab");s+='<div class="tabs-holder"><div class="tabs"><div class="tab button-style'+("settings"===c?" active":"")+'" data-type="settings" cursorType="pointer">'+getLine("settings")+'</div><div class="tab button-style'+("about"===c?" active":"")+'" data-type="about" cursorType="pointer">'+getLine("settings_text6")+'</div><div class="tab button-style'+("credits"===c?" active":"")+'" data-type="credits" cursorType="pointer">'+getLine("settings_text8")+'</div></div><div class="tab-data'+("settings"===c?" active":"")+' " data-type="settings">'+l+'</div><div class="tab-data'+("about"===c?" active":"")+'" data-type="about">'+g+'</div><div class="tab-data'+("credits"===c?" active":"")+'" data-type="credits">'+m+"</div></div>";break;case"game_over":storeClickEvent({type:"game_over",firedFrom:game.data.currentView}),i=getLine("game_over_title"),s+=getLine("game_over_text0"),o=!1;break;case"objectives":i=getLine("objectives_title");var u=game.state.objectives.currentGroup;!isNaN(helperData.currentSubTab)&&"objectives"===page.topPopupType&&d&&(u=helperData.currentSubTab),helperData.currentSubTab=u;var p=!0;u===game.const.objectiveGroups.length-1&&(p=!1);l=gameUI.prepareDOM("objectiveGroup",{id:u,showNext:p}),g=gameUI.prepareDOM("achievements"),m='<div style="margin: 20px">'+getLine("objectives_text2")+"</div>";!1!==t&&(helperData.currentTab=t);c=helperData.currentTab;-1===["settlement","achievements","challenges"].indexOf(helperData.currentTab)&&(c="settlement"),s+='<div class="tabs-holder"><div class="tabs"><div class="tab'+("settlement"===c?" active":"")+' button-style" data-type="settlement" cursorType="pointer">'+getLine("objectives_text3")+'</div><div class="tab'+("achievements"===c?" active":"")+' button-style" data-type="achievements" cursorType="pointer">'+getLine("objectives_text4")+'</div><div class="tab'+("challenges"===c?" active":"")+' button-style" data-type="challenges" cursorType="pointer">'+getLine("objectives_text5")+'</div></div><div class="tab-data'+("settlement"===c?" active":"")+' " data-type="settlement">'+l+'</div><div class="tab-data'+("achievements"===c?" active":"")+'" data-type="achievements">'+g+'</div><div class="tab-data'+("challenges"===c?" active":"")+'" data-type="challenges">'+m+"</div></div>";break;case"objective_completed":var h=game.state.objectives.currentGroup-1,v=(game.state.objectives.objectiveGroups[h],game.const.objectiveGroups[h]);page.$dynamicDOM.$.find('.popup-holder.fullscreen[data-type="objective_completed"]').length>0&&page.$dynamicDOM.$.find('.popup-holder.fullscreen[data-type="objective_completed"]').last().remove();var f=v.title,y=[],b=!1;isUndefined(v.postMission)||(f=getLine("obj_group_"+v.langID+"_end_text"),!1!==getLine("obj_group_"+v.langID+"_tip")&&y.push(getLine("obj_group_"+v.langID+"_tip")),isUndefined(v.postMission.image)||(b={imageType:"objectives",offsetX:v.postMission.image}),gameUI.checkDOMrefresh("popup_refresh"));var _="next_mission";parseInt(h)===game.const.objectiveGroups.length-2&&(_="close_popup");var w={type:e,title:getLine("mission_x",h+1),titleStatus:getLine("completed"),subTitle:f,buttonActions:[_],points:y,imageData:b};return gameUI.showFullscreenPopup(w),void fireThirdPartyAction("objective_completed",{});case"new_objective":h=game.state.objectives.currentGroup;isUndefined(t)||(h=t);game.state.objectives.objectiveGroups[h],v=game.const.objectiveGroups[h],y=[];if(!1!==game.data.tutorial.currentObjData){var x=isUndefined(v.langObjIDextra)?game.data.tutorial.currentObjData.objID:Number(game.data.tutorial.currentObjData.objID)+v.langObjIDextra;y.push(getLine("obj_"+v.langID+"_"+x.toString()+"_desc"))}else{x=isUndefined(v.langObjIDextra)?0:v.langObjIDextra;y.push(getLine("obj_"+v.langID+"_"+x.toString()+"_desc"))}b=!1;b={imageType:"missions",offsetX:h};w={type:e,title:getLine("mission_x",h+1),titleStatus:getLine("new_mission"),subTitle:getLine("obj_group_"+v.langID+"_title"),points:y,buttonActions:["close_popup"],imageData:b};return void gameUI.showFullscreenPopup(w);case"help":i=getLine("help_title"),s+='<div class="help-section">',s+='<div class="category" data-category="general"><div class="header" cursorType="pointer">'+getLine("help_text0")+'</div><div class="sub-categories">',s+='<div class="sub-category button-style" data-subcategory="general" cursorType="pointer">'+getLine("help_text1")+"</div>";var k=gameUI.prepareDOM("helpExtended",{category:"general",subcategory:"general"});s+='</div><div class="text">'+k+"</div></div>",$.each(game.const.viewCategories,(function(e,t){s+='<div class="category" data-category="'+e+'"><div class="header" cursorType="pointer">'+getLine("view_cat_"+e)+": "+getLine("view_cat_"+e+"_desc")+'</div><div class="sub-categories">',k="";for(var a=0;a<t.views.length;a++){var r=t.views[a];if(void 0!==game.const.instructions[r])s+='<div class="sub-category button-style'+(0===a?" extended":"")+'" data-subcategory="'+r+'" cursorType="pointer">'+getLine("view_"+r)+"</div>",0===a&&(k=gameUI.prepareDOM("helpExtended",{category:e,subcategory:r}))}s+='</div><div class="text">'+k+"</div></div>"})),s+="</div>";break;case"battle_results":i="won"===t.outcome?getLine("battle_results_text0"):"lost"===t.outcome?getLine("battle_results_text1"):getLine("battle_results_text2"),"won"===t.outcome&&void 0!==t.gainedResources&&void 0!==t.gainedResources.amount&&(s+='<div class="gain-loss-amount">'+getLine("battle_results_text3")+'<br /><div class="added-value">+'+t.gainedResources.amount.formatNumber()+'<div class="icon '+t.gainedResources.type+'"></div></div></div>'),s+='<div class="corpuses-holder">';var D,I,C,T,A=t.corpuses,P=!1;$.each(A,(function(e,t){I="";let a=t.data;var r=gameUI.prepareDOM("planImage",a);D=t.tankFoughtTotal-t.tanksCurrent;var i=helpers.plans.getCorpusLevel(t.corpusExpOriginal),o=i.lastPoints,n=i.nextPoints,d=(t.corpusExpOriginal-o)/(n-o);T=getLine("to_next_level")+(a.nextPoints-a.expPoints).formatNumber()+"/"+(a.nextPoints-a.lastPoints).formatNumber()+getLine("plus1"),I=D>0?"red":"green",a.upgPoints>0&&(P=!0),C=(t.corpusExpOriginal-o).formatNumber()+"/"+(n-o).formatNumber(),s+='<div class="corpus-data-holder" data-type="'+e+'"><div class="corpus-widget"><div class="corpus-name">'+getLine("corpus_cap")+" "+(a.id+1)+'</div><div class="circle">'+r+'</div><div class="amount-holder status-bar" data-type="'+a.id+'">'+a.tanksAmount+" "+getLine("tanks")+'</div><div class="tanks-lost">'+getLine("battle_results_text4")+'<span class="amount '+I+'">0</span></div><div class="right-part"><div class="exp-points not-displayed">+<span class="value">0</span> '+getLine("xp")+'</div></div><div class="level-widget"><div class="pre-level-widget left">'+getLine("lvl")+i.level+'</div><div class="pre-level-widget right">'+getLine("lvl")+(i.level+1)+'</div><div class="progress-bar popup-end" data-progress="'+d+'" data-tooltip-type="params_text" data-extra-params="'+T+'"></div></div><div class="current-exp-points">'+C+" "+getLine("xp")+"</div>",t.addedUpgPoints>0&&(s+='<div class="shield-reward not-displayed"><div class="amount">+'+t.addedUpgPoints+'</div><div class="shield"></div></div>'),s+="</div></div>"})),s+="</div>",t.levelsGained>0&&(s+='<div class="extra-gains-holder"><div class="extra-gains hidden">'+getLine("battle_results_text5",t.levelsGained)+"</div></div>"),s+='<div class="buttons-holder"><div class="button-style" data-type="setup-troops" cursorType="pointer">'+getLine("ok")+"</div><br />",P&&(s+='<div class="button upg-points" cursorType="pointer" data-view="corpus_upgrades" data-view-type="popup">'+getLine("corpus_upgrades")+"</div>"),s+="</div>";break;case"battle_start":i=getLine("battle_start_title"),s+='<div class="battle-start-holder"><div>'+getLine("battle_start_text0")+'</div><div class="button-style enter-now" >'+getLine("enter_battle")+"</div><div>"+getLine("no_start")+'<div class="button-style go-back" cursorType="pointer">'+getLine("go_back")+"</div></div></div>";break;case"pending_parts":page.$dynamicDOM.$.find('.popup-holder[data-type="pending_parts"]').length>0&&page.$dynamicDOM.$.find('.popup-holder[data-type="pending_parts"]').remove();c=helperData.currentTab;c=["hull","turret"].indexOf(helperData.currentTab)<1?"hull":helperData.currentTab;var S,L,O="",R="",M=game.state.partsPending;i=getLine("pending_parts")+M.length+"/"+game.const.maxPendingParts,M.length>=game.const.maxPendingParts&&(i+='<div class="pending-full" data-tooltip-type="pending_full"></div>');for(var U=0;U<game.const.partTypes.length;U++){var j;S=c===game.const.partTypes[U]?" active":"",L=0;for(var E=0;E<M.length;E++)(j=M[E]).type===game.const.partTypes[U]&&L++;O+='<div class="tab'+S+' button-style" data-type="'+game.const.partTypes[U]+'" cursorType="pointer">'+getLine(game.const.partTypes[U])+"("+L+")</div>";var N="";for(E=0;E<M.length;E++)if((j=M[E]).type===game.const.partTypes[U]){var B="";$.each(j.stats,(function(e,t){var a=t.min===t.max?t.min:t.min+"-"+t.max;t.max>0&&(B+=getLine("stats_names_"+e)+': <span class="value">'+a+"</span><br />")}));var q="",G="";q+=j.crew+' <div class="icon tiny citizens"></div>',$.each(j.costs,(function(e,t){G+="<div>-"+t.formatNumber()+' <div class="icon tiny '+e+'"></div></div>'}));var z='<div class="image" data-part-type="'+j.type+'" data-part-subtype="'+j.subType+'"></div><div class="stats">'+B+"</div>";z+='<div class="button scrap" data-type="pending" cursorType="pointer"></div>',z+='<div class="costs">'+getLine("build_requires")+q+'<br /><div class="part-costs">'+G+"</div></div>",N+='<div class="part-data" data-part-id="'+j.id+'"data-part-type="'+j.type+'" data-part-subtype="'+j.subType+'">'+z,N+='<div class="add-to-inventory button-style" cursorType="pointer">'+getLine("add_to_inventory")+"</div>",N+="</div>"}if(0===L){" pending ",N+='<div class="part-data">'+getLine("no_parts_yet"," pending ",game.const.partTypes[U].toUpperCase())+"</div>"}R+='<div class="tab-data'+S+'" data-type="'+game.const.partTypes[U]+'">'+N+"</div>"}s+='<div class="tabs-holder"><div class="tabs">'+O+"</div>"+R+"</div>";break;case"corpus_upgrades":page.$dynamicDOM.$.find('.popup-holder[data-type="corpus_upgrades"]').length>0&&page.$dynamicDOM.$.find('.popup-holder[data-type="corpus_upgrades"]').remove(),i=getLine("corpus_upgrades_title");var F,Q;c=helperData.currentTab;c=["0","1","2","3"].indexOf(helperData.currentTab)<1?0:parseInt(helperData.currentTab),s+='<div class="tabs-holder"><div class="tabs">';for(U=0;U<4;U++)isUndefined(game.state.corpuses[U])||(s+='<div class="tab button-style'+(c===U?" active":"")+'" data-type="'+U+'" cursorType="pointer">'+getLine("corpus_number")+(U+1)+" ("+game.state.corpuses[U].upgPoints+")</div>");s+="</div>";for(U=0;U<4;U++)if(!isUndefined(game.state.corpuses[U])){s+='<div class="tab-data '+(c===U?" active":"")+' " data-type="'+U+'">',s+='<div class=""></div>',ae=(F=game.state.corpuses[U]).upgrades,Q=0,$.each(ae,(function(e,t){Number.isInteger(t)&&("auraSize"===e?t>1&&(Q+=t-1):Q+=t)}));var W,H=gameUI.prepareDOM("planImage",game.state.corpuses[U]);s+='<div class="corpus-widget"><div class="circle">'+H+'</div><div class="amount-holder status-bar" data-type="'+U+'">'+game.state.corpuses[U].tanksAmount+getLine("corpus_upgrades_text0")+"</div></div>",s+='<div class="upgrades-holder" data-type="'+U+'"><div class="upgrade-box first"><div class="shield"></div>'+getLine("corpus_upgrades_text1")+"<br /><span>"+F.upgPoints+'/<span class="total">'+(F.upgPoints+Q)+'</span></span><div class="shield right"></div></div><div class="seperator-line"></div><div class="column-holder"><div class="left-column"><div class="upgrade-box head">'+getLine("corpus_upgrades_text2")+"</div>";var V,Y,X,J=F.upgPoints>0?"":"disabled";for(E=0;E<game.const.corpusUpgrades.length;E++)if(W=game.const.corpusUpgrades[E],ae[game.const.corpusUpgrades[E].tag],"maxSquadronSize"===W.tag&&(s+='</div><div class="right-column"><div class="upgrade-box head">'+getLine("corpus_upgrades_text3")+"</div>"),X=ae[W.tag],V="auraSize"===W.tag?X>1?"":"disabled":X>0?"":"disabled",Y=getLine("corpus_upgrades_"+W.tag+"_title"),"auraAmount"===W.tag&&(Y=Y.charAt(0).toUpperCase()+Y.slice(1)),"numeric"===W.type)s+='<div class="upgrade-box" data-type="'+W.tag+'" data-corpus-id="'+U+'"><div class="title">'+Y+":</div><br />","percentage"===W.subType?s+='<div class="current-value">'+X*game.const.corpusUpgradesGains[W.tag].gain+'%</div> <div class="added-value">(+'+game.const.corpusUpgradesGains[W.tag].gain+"%)</div>":"squadron"===W.subType?s+='<div class="current-value">'+game.const.squadronSize[X]+'</div> <div class="added-value">(+'+(game.const.squadronSize[X+1]-game.const.squadronSize[X])+")</div>":"digit"===W.subType&&(s+='<div class="current-value">'+X+'</div> <div class="added-value">(+'+(X+1)+")</div>"),s+='<div class="down-sign '+V+'" cursorType="pointer">-</div><div class="up-sign '+J+'" cursorType="pointer">+</div></div>';else if("values"===W.type){Y=getLine("corpus_upgrades_"+W.tag+"_title");var K="";"squadronAura"===W.tag&&(K="distant"),s+='<div class="vertical-line"></div>',s+='<div class="upgrade-box '+K+'" data-type="'+W.tag+'" data-corpus-id="'+U+'"><div class="title">'+Y+":</div><br />";for(var Z="",ee=0;ee<W.values.length;ee++)Z="",W.values[ee]===ae.auraType&&(Z="disabled"),s+='<div class="item button-style '+Z+'" cursorType="pointer" data-type="'+W.values[ee]+'">'+W.values[ee].toUpperCase()+"</div>";s+="</div>"}s+="</div></div></div></div>"}var te=c,ae=game.state.corpuses[te].upgrades,se="disabled";$.each(ae,(function(e,t){if(Number.isInteger(t))if("auraSize"===e){if(t>1)return se="",!1}else if(t>0)return se="",!1})),s+='</div><div class="buttons-holder"><div class="button-style reset-points '+se+'" data-type="reset-points" data-corpus-id="0" cursorType="pointer">'+getLine("corpus_upgrades_text4")+"</div></div></div></div>";break;case"detailed_stats":var re,ie,oe,ne,de=t.type,ce=t.subType,le=t.id;console.log("Type: "+de+" subtype: "+ce+" id: "+le),i=getLine("detailed_stats_title"),"jobs"===de?(re=game.state.jobs[ce],ie=game.const.jobs[ce],oe=getLine("jobs_"+ce),ne=getLine("jobs_"+ce+"_desc")):"buildings"===de?("nuclear_plant"===ce&&audio.playSound("radioactivity"),re=helpers.common.getBuildingData(ce,le),ie=game.const.buildings[ce],oe=getLine("buildings_"+ce),ne=getLine("buildings_"+ce+"_desc")):"perk_points_details"===de&&(re=game.state.resources.perk_points,ie=game.const.resources.perk_points,i=oe=getLine("perk_points_details_title"),ne=getLine("perk_points_details_desc"));var ge=void 0!==re.workers&&re.workers;if("buildings"===de){var me=void 0===re.avl?1:re.avl,ue=void 0!==ie.public&&ie.public;console.log("is public: "+ue);var pe=[],he=[],ve={gain_mx:"Production Rate"},fe=helpers.common.getEventBoostTypes(ce);!1!==fe&&(pe.push({label:"Event Effects:",text:""}),$.each(fe,(function(e,t){var a=helpers.common.getEventBoost(ce,e);pe[pe.length-1].text+=(100*(a-1)).formatNumber(2,2)+"% "+ve[e]}))),void 0!==re.eff&&he.push({label:getLine("efficiency"),text:(100*re.eff).formatNumber(2,2)+"%",amount:re.eff});var ye=0;if(void 0!==re.workers&&(ye=re.workers/re.gains.citizen_capacity),he.push({label:getLine("production_rate"),text:(100*ye).formatNumber(2,2)+"%",amount:ye}),he.push({label:getLine("productivity"),text:(100*game.state.stats.productivity).formatNumber(2,2)+"%",amount:game.state.stats.productivity}),void 0!==fe.gain_mx){var be=helpers.common.getEventBoost(ce,"gain_mx");he.push({label:getLine("event_bonus"),text:(100*(be-1)).formatNumber(2,2)+"%",amount:be})}var _e,we=helpers.common.getResearchBoost(ce,"gain_mx");he.push({label:getLine("research_bonus"),text:(100*(we-1)).formatNumber(2,2)+"%",amount:we}),$.each(re.gains,(function(e,t){helpers.common.isResource(e)?void 0!==game.data.continentBoosts[e+"_gain"]&&(_e=game.data.continentBoosts[e+"_gain"],he.push({label:getLine("corpus_upgrades_text5"),text:(100*(_e-1)).formatNumber(2,2)+"%",amount:_e})):"dig_rate"===e&&(_e=game.data.continentBoosts.mining_rate,he.push({label:getLine("corpus_upgrades_text5"),text:(100*(_e-1)).formatNumber(2,2)+"%",amount:_e}))}));var xe=re.output;s+='<div class="grid-row space-between"><div class="grid-box small right-text"><b>'+oe+" ("+me.formatNumber()+")</b>"+(!1===ge||ue?"":'<br /><div class="icon citizens tiny"></div>'+getLine("corpus_upgrades_text6")+re.workers.formatNumber(2,2)+" / "+re.gains.citizen_capacity.formatNumber(2,2))+'</div><div class="grid-box auto-end event-intensity">'+(ue?"":'<div class="event-intensity">'+getLine("corpus_upgrades_text7")+'<div class="intensity progress-bar inverted" data-progress="'+Math.min(1,xe)+'" data-after="'+(100*xe).formatNumber(2,2)+'%"></div></div>')+"</div></div>",s+='<div class="grid-row"><div class="grid-box small right-text "><div class="icon-holder"  data-icon-bg="'+ce+'"></div></div><div class="grid-box">'+ne+"</div></div>";var ke="",De="";$.each(pe,(function(e,t){ke+="<b>"+t.label+"</b><br />",De+=t.text+"<br />"})),s+='<div class="grid-row"><div class="grid-box small right-text">'+ke+'</div><div class="grid-box">'+De+"</div></div>",ke="",De="",$.each(he,(function(e,t){ke+=t.label+"<br />",De+=t.text+"<br />"}));var Ie=!(void 0!==re.gains.citizen_capacity&&1===re.gains.length),Ce="";Ie&&""===(Ce=gameUI.prepareDOM("gainsData",{gains:re.gains,amount:me}))&&(Ie=!1),ue&&(ke="",De="");var Te=void 0!==re.costs.operational;s+='<div class="grid-row"><div class="grid-box small right-text">'+ke+'</div><div class="grid-box small">'+De+'</div><div class="grid-box">'+(Ie?"<b>"+getLine("corpus_upgrades_text8")+'</b><br /><div><div class="icon produces"></div> '+Ce+"</div>":"")+(Te?'<div><div class="icon consumes"></div> '+gameUI.prepareDOM("costsData",{costs:re.costs.operational,buyAmount:me})+"</div>":"")+"</div></div>",ue||(s+='<div class="output-sum"><span><b>'+getLine("corpus_upgrades_text9")+"</b></span>"+(100*xe).formatNumber(2,2)+"%</div>")}else if("jobs"===de)s+='<div class="grid-row space-between"><div class="grid-box small right-text"><b>'+(!1===ge?"":'<br /><div class="icon citizens tiny"></div> '+getLine("jobs_"+ce)+": "+re.workers.formatNumber(2,2))+'</b></div><div class="grid-box auto-end"></div></div>',s+='<div class="grid-row"><div class="grid-box small right-text"><div class="icon-holder"  data-icon-bg="'+ce+'"></div></div><div class="grid-box">'+getLine("jobs_"+ce+"_desc")+"</div></div>";else{s+='<div class="grid-row space-between"><div class="grid-box small right-text"><b>'+getLine("res_perk_points")+'</b></div><div class="grid-box auto-end"></div></div>';var Ae=game.state.resources.perk_points.total-game.state.resources.perk_points.in_research,Pe="",Se="";$.each(game.data.startingBoosts,(function(e,t){game.const.startingBoosts[e];var a=t;a=e.indexOf("gain_mx")>-1?(100*(a-1)).formatNumber(2,2)+"%":a.formatNumber(2,2),Se="+"+a,Pe+=getLine("starting_boost_"+e)+": <b>"+Se+"</b><br />"})),s+='<div class="grid-row"><div class="grid-box small right-text"><div class="icon-holder"  data-icon-bg="'+ce+'"></div></div><div class="grid-box"><p>'+ne+"</p><p>"+getLine("research_details_text22")+game.state.resources.perk_points.total.formatNumber(2,2)+"<br />"+getLine("research_details_text23")+Ae.formatNumber(2,2)+"<br />"+getLine("research_details_text24")+game.state.resources.perk_points.pending.formatNumber(2,2)+"</p><p>"+getLine("perk_points_details_active_boosts")+"<br />"+Pe+"</p><p>"+getLine("perk_points_details_adjusted_note")+"</p></div></div>"}break;case"notifications":i=getLine("notifications_title");l='<div class="filters">'+gameUI.printSettingsGroup("notification_filters",{extraClasses:"checkbox new-checkbox"})+'</div><div class="table-list">';var Le=[];game.getSettingValue("filter_notes_explorers")||Le.push("explorer-gain"),game.getSettingValue("filter_notes_warnings")||Le.push("warning");var Oe={explorers:{view:"resources",view_type:"regular"},event_intensity:{view:"event_details",view_type:"regular",extra_params:!1},maintenance_dropped:{view:"public_jobs",view_type:"regular"},morale_dropped:{view:"public_jobs",view_type:"regular"},market_crashed:{view:"global_market",view_type:"regular"},malnourishment_changed:{view:"resources",view_type:"regular"},health_dropped:{view:"public_jobs",view_type:"regular"},objective_completed:{view:"objectives",view_type:"popup"}};for(U=game.data.notifications.list.length-1;U>=0;U--){var Re=game.data.notifications.list[U][2]>1?" ("+game.data.notifications.list[U][2]+")":"",Me=convertToDate(game.data.notifications.list[U][4],!0),Ue=Le.indexOf(game.data.notifications.list[U][2])>-1?" not-displayed":"",je="",Ee=Oe[game.data.notifications.list[U][1]];je=isUndefined(Ee)?'<div class="action-shortcut hidden"><<</div>':'<div class="action-shortcut" data-view="'+Ee.view+'" data-view-type="'+Ee.view_type+'" data-extra-params="'+Ee.extra_params+'" cursorType="pointer"><<</div>',l+='<div class="notification '+game.data.notifications.list[U][2]+Ue+'">'+je+'<div class="time-note">'+Me+"</div> "+game.data.notifications.list[U][0]+Re+"</div>"}l+="</div>";g='<div class="title">'+getLine("notifications_text0")+"</div>";var Ne=!1;for(U=game.state.events.list.length-1;U>=0;U--)(We=game.state.events.list[U]).active&&(Ne=!0);Ne||(g+=getLine("notifications_text9"));for(U=game.state.events.list.length-1;U>=0;U--)if((We=game.state.events.list[U]).active){He=game.const.eventParams[We.type];var Be=game.const.eventTypes.in_advance.indexOf(We.type)>-1,qe=getLine("event_"+We.type);"market_crash"===We.type&&(qe=qe.format(We.extraParams.type)),g+='<div class="box-holder event-data" data-type="'+We.type+'" data-icon="'+We.type+'"><div class="box-data event-info"><div class="event-title">'+qe+"</div>"+getLine("notifications_text1")+convertToDate(We.startedAt,!0)+"<br />"+getLine("notifications_text2")+convertToDate(We.startedAt+We.duration,!0)+')</div><div class="box-data event-intensity">'+(Be?getLine("notifications_text3")+'<div class="progress-bar intensity inverted" data-progress="'+Math.min(1,We.intensity)+'" data-after="'+(100*We.intensity).formatNumber(2,2)+'%"></div><div class="trend">'+getLine("notifications_text4")+"<span>"+(100*helpers.events.getCurrentEventIntensityTrend(U)).formatNumber(2,2,!0,!0)+'%</span><div class="icon smaller help" data-tooltip-type="params_text" data-extra-params="'+getLine("param_trend")+'"></div></div>':"")+'</div><div class="box-data flex-end"><div class="event-details" cursorType="pointer" data-view="event_details" data-view-type="popup" data-extra-params="'+U+'"></div></div></div>'}g+='<div class="title">'+getLine("notifications_text5")+"</div>";for(U=game.state.events.list.length-1;U>=0;U--)if(!(We=game.state.events.list[U]).active){He=game.const.eventParams[We.type];qe=getLine("event_"+We.type);"market_crash"===We.type&&(qe=qe.format(We.extraParams.type)),g+='<div class="box-holder event-data" data-type="'+We.type+'" data-icon="'+We.type+'"><div class="box-data event-info"><div class="event-title">'+qe+"</div>"+getLine("notifications_text1")+convertToDate(We.startedAt,!0)+"<br />"+getLine("notifications_text2")+convertToDate(We.startedAt+We.duration,!0)+'</div><div class="box-data event-intensity"></div><div class="box-data flex-end"><div class="event-details" cursorType="pointer" data-view="event_details" data-view-type="popup" data-extra-params="'+U+'"></div></div></div>'}c=helperData.currentTab;-1===["events","actions"].indexOf(helperData.currentTab)&&(c="actions"),s+='<div class="tabs-holder"><div class="tabs"><div class="tab button-style'+("actions"===c?" active":"")+'" data-type="actions" cursorType="pointer">'+getLine("notifications_text7")+'</div><div class="tab button-style'+("events"===c?" active":"")+'" data-type="events" cursorType="pointer">'+getLine("notifications_text8")+"</div>"+gameUI.printSetting("show_quick_notification",{extraClasses:"checkbox new-checkbox"})+'</div><div class="tab-data'+("actions"===c?" active":"")+' " data-type="actions">'+l+'</div><div class="tab-data'+("events"===c?" active":"")+'" data-type="events">'+g+"</div></div>";break;case"event_details":i=getLine("event_details_title");var Ge=t,ze=!1,Fe=!1,Qe=!1;Array.isArray(t)&&(Ge=t[0],ze=t[1],Fe=void 0!==t[2]&&t[2],Qe=!0);var We=game.state.events.list[Ge],He=game.const.eventParams[We.type],Ve="";!ze&&"instant_decision"===He.eventType&&We.active?(Ve='<div class="event-action">'+getLine("event_details_text0")+'</div><div class="event-decision flex-center" data-id="'+Ge+'"><div class="button accept" data-action-type="pay_bribe" data-id="'+Ge+'" cursorType="pointer">'+getLine("event_details_text1")+'</div><div class="button decline" data-action-type="decline_bribe" data-id="'+Ge+'" cursorType="pointer">'+getLine("event_details_text2")+"</div></div>",o=!1):Ve='<div class="event-decision flex-center"><div class="button ok" cursorType="pointer">'+getLine("event_details_text3")+"</div></div>";y=[];var Ye="";if(Object.keys(He.effects).length>0){Ye='<div class="event-effect"><span>'+getLine("event_details_text5")+"</span>";var Xe=0;$.each(He.effects,(function(e,t){Xe>0&&(Ye+="<br />");var a=helpers.events.getEventEffectDetails(Ge,e);Ye+=a,""!==a&&y.push(a),Xe++})),Ye+="</div>"}var $e="";ze||void 0===textLines["event_"+We.type+"_action_required"]||!1===getLine("event_"+We.type+"_action_required")||($e+='<div class="event-tip"><span>'+getLine("event_details_text4")+"</span>"+getLine("event_"+We.type+"_action_required")+"</div>",y.push("<b>"+getLine("event_details_text4")+"</b> "+getLine("event_"+We.type+"_action_required")));qe=getLine("event_"+We.type);var Je=getLine("event_"+We.type+"_desc");if(void 0!==We.extraParams){qe=qe.format(We.extraParams.type);var Ke=We.extraParams.type;"gold"===Ke&&(Ke=We.extraParams.amount.formatNumber(2,2)+' <div class="small icon '+Ke+'"></div>'),Je=Je.format(Ke)}if("earthquake"===We.type){var Ze=We.threshold/He.startParams.threshold.max,et=He.effects.effectsStat.baseChance*Ze;et=Math.min(game.state.stats.maintenance,game.state.stats.maintenance*et),Je=Je.format((We.threshold/10).formatNumber(2,2),(100*et).formatNumber(2,2))}if(Qe){b=!1;b={imageType:"icon",offsetX:We.type};var tt=["close_popup"];"extortion"===We.type&&(tt=["pay_bribe","decline_bribe"]);w={type:e,title:qe,titleStatus:getLine("new_event"),subTitle:Je,points:y,buttonActions:tt,imageData:b,extraData:{id:Ge}};return void gameUI.showFullscreenPopup(w)}if(ze){var at=Fe?getLine("event_details_text6"):"";s+='<div class="event-details"><div class="title">'+getLine("event_"+We.type+"_end_title")+'</div><div class="data"><div class="thumbnail" data-type="'+We.type+'" data-icon="'+We.type+'" data-icon="'+We.type+'"></div><div class="desc">'+at+getLine("event_"+We.type+"_end_desc")+"</div></div></div>"}else{Be=game.const.eventTypes.in_advance.indexOf(We.type)>-1;s+='<div class="event-details"><div class="title">'+qe+'</div><div class="data"><div class="thumbnail" data-type="'+We.type+'" data-icon="'+We.type+'" data-icon="'+We.type+'"></div><div class="subtitle">'+getLine("event_"+We.type+"_sub")+'</div><div class="desc">'+Je+"</div>"+(Be?'<div class="event-intensity">'+getLine("notifications_text3")+': <br /><div class="progress-bar inverted intensity" data-progress="'+Math.min(1,We.intensity)+'" data-after="'+(100*We.intensity).formatNumber(2,2)+'%"></div><div class="trend">'+getLine("notifications_text4")+"<span>"+(100*helpers.events.getCurrentEventIntensityTrend(Ge)).formatNumber(2,2,!0,!0)+'%</span><div class="icon smaller help" data-tooltip-type="params_text" data-extra-params="Predicted intensity change end of day based on current state of prevention methods"></div></div></div>':"")+Ye+$e+"</div></div>"}s+=Ve;break;case"main_objective":i=getLine("main_objective_title"),s+=getLine("main_objective_text0")+'<p class="centered js-external-link"><a href="https://store.steampowered.com/app/1351500/Simpocalypse/?beta=0" title="Wishlist Simpocalypse on Steam!" class="wishlist-link" target="_blank" onclick="storeClickEvent({type: \'wishlist\', firedFrom: \'main_objective\'});"></a></p>';break;case"final_objective":i=getLine("final_objective_title"),s+=getLine("final_objective_text0")+'<p class="centered js-external-link"><a href="https://store.steampowered.com/app/1351500/Simpocalypse/?beta=0" title="Wishlist Simpocalypse on Steam!" class="wishlist-link" target="_blank" onclick="storeClickEvent({type: \'wishlist\', firedFrom: \'final_objective\'});"></a><a href="https://discord.gg/ZZDvEuR" class="discord-link" title="Join Simpocalypse Discord channel!" target="_blank" onclick="storeClickEvent({type: \'discord\', firedFrom: \'final_objective\'});"></a></p>'+getLine("final_objective_text1");break;case"dev_panel":i="DEVELOPER PANEL",s+='<div class="category" data-type="reveal_all" style="border-bottom: 1px solid white;">'+getLine("dev_panel_text0")+'<div class="button clickable" data-type="reveal_all" cursorType="pointer">'+getLine("dev_panel_text1")+"</div></div>",s+='<div class="category" data-type="reveal_main" style="border-bottom: 1px solid white;">'+getLine("dev_panel_text2")+'<div class="button clickable" data-type="reveal_main" cursorType="pointer">'+getLine("dev_panel_text1")+"</div></div>",s+='<div class="category" data-type="save_game" style="position: absolute; right: 20px; top: -10px;"><div class="button clickable" data-type="save_game" cursorType="pointer">'+getLine("dev_panel_text3")+"</div></div>",s+='<div class="category" data-type="reset_game" style="border-bottom: 1px solid white;">'+getLine("dev_panel_text4")+'<div class="button clickable" data-type="reset_game" cursorType="pointer">'+getLine("dev_panel_text5")+"</div></div>",s+='<div class="category" data-type="export_research_changes" style="border-bottom: 1px solid white;">'+getLine("dev_panel_text6")+'<div class="button clickable" data-type="export_research_changes" cursorType="pointer">'+getLine("dev_panel_text7")+"</div></div>",$.each(game.data.devSettings,(function(e,t){var a=t.enabled?" on":" off";s+='<div class="category clickable'+a+'" data-type="'+e+'" cursorType="pointer">'+(r='<div class="setting"></div>')+" - "+t.desc+"</div>"})),r="",$.each(game.const.resources,(function(e,t){r+='<option value="'+e+'"'+("citizens"===e?' selected="selected"':"")+">"+getLine("res_"+e)+"</option>"})),s+='<div class="category" data-type="add_resources">'+getLine("dev_panel_text8")+'<select data-type="add_resources">'+r+'</select><input type="number" value="100" /><div class="button clickable" data-type="add_resources" cursorType="pointer">'+getLine("dev_panel_text1")+"</div></div>",s+='<div class="category" data-type="urgent_resources">'+getLine("dev_panel_text9")+'<div class="button clickable" data-type="urgent_resources" cursorType="pointer">'+getLine("dev_panel_text1")+"</div></div>",s+='<div class="category" data-type="factory_units">'+getLine("dev_panel_text10")+'<div class="button clickable" data-type="factory_units" cursorType="pointer">'+getLine("dev_panel_text1")+"</div></div>",s='<div class="grid-box" style="position: relative;">'+(s+='<div class="category" data-type="add_time_saved">'+getLine("dev_panel_text11")+'<div class="button clickable" data-type="add_time_saved" cursorType="pointer">'+getLine("dev_panel_text1")+"</div></div>")+"</div>",s+='<div class="grid-box">',r="";var st=[0,.1,.5,1,2,3,5,10,20,100];for(U=0;U<st.length;U++)r+='<div class="button clickable" data-type="game_speed" data-speed="'+st[U]+'" cursorType="pointer">'+st[U]+"x</div>";s+='<div class="category" data-type="game_speed">'+getLine("dev_panel_text12")+looptimeMX+"x <br/>"+r+"</div>",s+='<br/><br/><div class="" data-type="ui_settings">'+getLine("dev_panel_text13")+"<br/> <br/>"+gameUI.printSetting("hide_overlay",{extraClasses:"checkbox"})+gameUI.printSetting("hide_notifications",{extraClasses:"checkbox"})+gameUI.printSetting("show_top_ui",{extraClasses:"checkbox"})+gameUI.printSetting("show_bottom_ui",{extraClasses:"checkbox"})+gameUI.printSetting("hide_view_categories",{extraClasses:"checkbox"})+gameUI.printSetting("hide_map_navigation",{extraClasses:"checkbox"})+gameUI.printSetting("show_world_grid",{extraClasses:"checkbox"})+gameUI.printSetting("show_attackable_regions",{extraClasses:"checkbox"}),s='<div class="grid-row">'+(s+="</div></div>")+"</div>";break;case"steam_note":o=!1;var rt=helpers.state.getAppStat("playTimeTotal");storeClickEvent({type:"steam_note",firedFrom:game.data.currentView});var it="",ot="",nt="";"main_objective"===t?(it=getLine("main_objective_text0"),ot=getLine("main_objective_text1"),i=getLine("main_objective_title")):"final_objective"===t?(it=getLine("final_objective_text0"),ot=getLine("final_objective_text2"),nt=getLine("final_objective_text3"),i=getLine("final_objective_title")):"time_played"===t&&(it=getLine("steam_note_"+t+"_subtitle",convertTime(parseInt(rt/1e3),{pad:!1,minSize:"m"})),ot=getLine("steam_note_"+t+"_text"),i=getLine("steam_note_"+t+"_title")),s+='<div class="subtitle">'+it+"</div>",s+='<div class="text">'+ot+"</div>",s+='<div class="diff-text"><span>'+getLine("demo")+"</span><span>"+getLine("full")+"</span></div>",s+='<div class="column-holder"><div class="left-column flex-column">';for(U=0;U<game.const.wishlist.length;U++)s+='<div class="entry"><div class="item-icon '+game.const.wishlist[U]+'"></div><div class="text-holder"><div class="title">'+getLine("wishlist_"+game.const.wishlist[U]+"_title")+'</div><div class="desc">'+getLine("wishlist_"+game.const.wishlist[U]+"_desc")+"</div></div></div>";s+='</div><div class="right-column flex-column col-100"></div></div><a class="steam-link" href="https://store.steampowered.com/app/1351500/Simpocalypse/?beta=0" target="_blank"><div class="steam-widg"><div class="steam-button" cursorType="pointer"><div class="wish">'+getLine("steam_note_text2")+'</div></div></div></a><span class="no-thanks" cursorType="pointer">'+getLine("steam_note_text1")+"</span>","final_objective"===t&&(s+='<div class="after-text">'+nt+'</div><div class="bottom-holder"><a href="https://discord.gg/ZZDvEuR" target="_blank" onclick="storeClickEvent({type: \'discord\', firedFrom: \'final_objective\'});"><div class="discord-link" cursorType="pointer"></div></a><div class="thank-you">'+getLine("final_objective_text1")+"</div></div>");break;case"language":i=getLine("language_title");var dt=gameUI.printSetting("language",{extraClasses:"grid-option",langLabel:"lang_name_",ignoreTooltip:!0});s+='<div class="grid-options">'+dt+'</div><div class="note">'+getLine("languages_settings_note")+"</div>";break;case"continent_conquer":var ct=[[["#ff0000"," option1"],["#ff00FF"," option2"],["#00ff00","option3"]],[["#fff0f0"," option4"],["#ffFFFF"," option5"],["#f0ff0F","option6"]],[["#f0f0f0"," option4"],["#ff0000"," option5"],["#00ff00","option6"]]],lt=helpers.common.getRandomContinentRewards();ct=[];for(var gt=0;gt<2;gt++){ct[gt]=[];for(var mt=0;mt<3;mt++){var ut="rgb("+randomIntFromInterval(0,255)+","+randomIntFromInterval(0,255)+","+randomIntFromInterval(0,255)+")";ct[gt].push([ut,lt[3*gt+mt]])}}var pt=[];$.each(ct,(function(e,t){var a=[],s=randomIntFromInterval(1,t.length-1);a=a.concat(t.slice(1,s));for(var r=2*(e+1),i=0;i<r;i++)a=a.concat(t);a=a.concat(t.slice(0,1)),pt.push(a)})),console.log(pt);w={type:e,title:getLine("cont_conquered"),titleStatus:getLine("completed"),subTitle:getLine("cont_conquered_desc",getLine("continents_"+game.state.currentParentGrids.continent)),buttonActions:["select_bonus"],points:[],reelsData:pt};return void gameUI.showFullscreenPopup(w);case"prestige":b={imageType:"icon",offsetX:"prestige"},w={type:e,title:getLine("prestige_title"),titleStatus:getLine("prestige_status"),subTitle:getLine("prestige_subtitle"),buttonActions:["cancel","prestige"],buttonDelay:1,typingSpeed:10,points:[getLine("prestige_pt1",game.state.resources.perk_points.pending.formatNumber(2,2)),getLine("prestige_pt2")],imageData:b};return void gameUI.showFullscreenPopup(w);case"post_prestige":w={type:e,title:getLine("post_prestige_title"),titleStatus:getLine("post_prestige_status"),subTitle:getLine("post_prestige_subtitle",helperData.tempData2.formatNumber(2,2)),buttonActions:["close_popup"],buttonDelay:2,points:[getLine("post_prestige_pt1"),getLine("post_prestige_pt2")],imageData:{imageType:"onboarding",offsetX:"starting_perks"}};return helperData.tempData2=!1,void gameUI.showFullscreenPopup(w);case"perk_points_details":return void gameUI.showPopup("detailed_stats",{type:"perk_points_details",subType:"perk_points",id:!1});case"game_over2":i=getLine("game_over2_title"),helperData.currentTab=0,o=!1;var ht=gameUI.prepareDOM("sequence","game_over");s='<div class="sequence">'+ht+'</div><div class="buttons"><div class="button-style next-sequence" data-action-type="next_sequence" cursorType="pointer">'+getLine("btn_continue")+"</div></div>";break;default:s+="This is default - empty DOM"}var vt=["main_objective","final_objective","new_objective"].indexOf(e)>-1;vt&&(s+='<div class="button-timed close disabled'+("new_objective"!==e?" transition-2s":" transition-3s")+'" cursorType="pointer" data-after="'+getLine("btn_continue")+'">'+getLine("btn_continue")+"</div>",o=!1),d||(n+=" fadein-holder");var ft="";"steam_note"===e&&(ft=' data-subtype="'+t+'"'),s='<div class="popup-holder'+n+'" data-type="'+e+'" '+ft+'><div class="popup-content-holder">'+('<div class="header"><div class="title">'+i+"</div>"+(o?'<div class="close" cursorType="pointer">X</div>':"")+"</div>")+'<div class="popup-content"><div class="scroll-holder"><div class="scroller" ss-container>'+s+"</div></div></div></div></div>",s=$(s),(vt||"game_over"===e)&&setTimeout((function(){s.find(".button-timed").addClass("timing").on(transitionEnd,(function(){$(this).removeClass("disabled")}))}),30),s.on({mousedown:function(e){if(1===e.which){$this=$(this),audio.playSound("click");var t=$this.closest(".popup-holder").attr("data-type");if($this.closest(".popup-holder").remove(),page.popupsOpen=Math.max(0,page.popupsOpen-1),page.topPopupType=!1,helperData.currentTab=!1,helperData.currentSubTab=!1,"battle_start"===t&&$this.hasClass("close")&&($this.closest(".popup-holder").remove(),page.popupsOpen=Math.max(0,page.popupsOpen-1),game.switchTo("battle_select")),"steam_note"===t){gameLoop.pause(!1);var a=helpers.state.getAppStat("playTimeTotal");helpers.state.setAppStat("lastSteamNoteShownAt",a)}hoverCellRef=!1,e.stopPropagation()}}},".close, .save, .no-thanks"),"battle_results"===e&&(s.on({mousedown:function(e){if(1===e.which){audio.playSound("click");($this=$(this)).attr("data-type");$this.closest(".popup-holder").remove(),page.popupsOpen=Math.max(0,page.popupsOpen-1),hoverCellRef=!1,e.stopPropagation()}}},".button-style"),s.on({mousedown:function(e){if(1===e.which){audio.playSound("click");($this=$(this)).attr("data-type");$this.closest(".popup-holder").remove(),page.popupsOpen=Math.max(0,page.popupsOpen-1),hoverCellRef=!1,e.stopPropagation()}}},".button-style.upg-points")),"battle_start"===e&&s.on({mousedown:function(e){if(1===e.which){if(($this=$(this)).hasClass("enter-now")){game.data.battleStarted=!0;for(var t=0;t<game.data.gameObjects.length;t++)game.data.gameObjects[t];$this.closest(".popup-holder").remove(),page.popupsOpen=Math.max(0,page.popupsOpen-1)}else $this.hasClass("go-back")&&($this.closest(".popup-holder").remove(),page.popupsOpen=Math.max(0,page.popupsOpen-1),game.data.leaderEnabled=!1,game.switchTo("battle_select"));hoverCellRef=!1,e.stopPropagation()}}},".button-style"),"pending_parts"===e&&s.on({mousedown:function(t){if(1===t.which){for(var a,s,r=($this=$(this)).parent().attr("data-part-id").parseNumber(),i=0;i<game.state.partsPending.length;i++)game.state.partsPending[i].id===r&&(a=$.extend(!0,{},game.state.partsPending[i]),s=i);var o=a.type,n=0,d=game.state.parts;if("hull"===o)for(i=0;i<d.length;i++)"hull"===d[i].type&&n++;else if("turret"===o)for(i=0;i<d.length;i++)"turret"===d[i].type&&n++;if(n>=10){var c=getLine("pending_parts_text0");gameUI.showMiniPopup(c,e)}else audio.playSound("inventory"),game.state.parts.push(a),game.state.partsPending.splice(s,1),game.refreshCurrentView(),gameUI.showPopup("pending_parts")}}},".add-to-inventory"),"corpus_upgrades"===e&&(s.on({mousedown:function(e){if(1===e.which){var t=($this=$(this)).parent().attr("data-type"),a=parseInt($this.parent().attr("data-corpus-id"));if($this.hasClass("up-sign"))if(audio.playSound("up"),"maxSquadronSize"===t)game.state.corpuses[a].upgrades[t]<game.const.squadronSize.length-2&&(game.state.corpuses[a].upgrades[t]+=1,game.state.corpuses[a].upgPoints-=1);else if("auraSize"===t){game.state.corpuses[a].upgrades[t]+=1,game.state.corpuses[a].upgPoints-=1;for(var s=0;s<game.data.auras.length;s++)if(game.data.auras[s].corpusID===a){for(var r=null,i=0;i<game.data.gameObjects.length;i++)if(game.data.gameObjects[i].isLeader&&game.data.gameObjects[i].corpusID===a){r=game.data.gameObjects[i];break}r&&(game.data.auras[s].x=r.x+r.w/2-game.state.corpuses[a].upgrades.auraSize*game.const.auraEffectRadius/2-5,game.data.auras[s].y=r.y+r.h/2-game.state.corpuses[a].upgrades.auraSize*game.const.auraEffectRadius/2,game.data.auras[s].w=game.state.corpuses[a].upgrades.auraSize*game.const.auraEffectRadius,game.data.auras[s].h=game.state.corpuses[a].upgrades.auraSize*game.const.auraEffectRadius)}}else game.state.corpuses[a].upgrades[t]+=1,game.state.corpuses[a].upgPoints-=1;else if($this.hasClass("down-sign")){if(audio.playSound("down"),game.state.corpuses[a].upgrades[t]-=1,game.state.corpuses[a].upgPoints+=1,"maxSquadronSize"===t)helpers.units.refreshAfterReductionSquadronSize();else if("auraSize"===t){for(s=0;s<game.data.auras.length;s++)if(game.data.auras[s].corpusID===a){for(r=null,i=0;i<game.data.gameObjects.length;i++)if(game.data.gameObjects[i].isLeader&&game.data.gameObjects[i].corpusID===a){r=game.data.gameObjects[i];break}r&&(game.data.auras[s].x=r.x+r.w/2-game.state.corpuses[a].upgrades.auraSize*game.const.auraEffectRadius/2-5,game.data.auras[s].y=r.y+r.h/2-game.state.corpuses[a].upgrades.auraSize*game.const.auraEffectRadius/2,game.data.auras[s].w=game.state.corpuses[a].upgrades.auraSize*game.const.auraEffectRadius,game.data.auras[s].h=game.state.corpuses[a].upgrades.auraSize*game.const.auraEffectRadius)}}else if("auraAmount"===t&&0===game.state.corpuses[a].upgrades[t]){var o;console.log("down sign and aura is now zero");for(s=0;s<game.data.gameObjects.length;s++)(o=game.data.gameObjects[s]).corpusID===a&&(o.isLeader=!1,delete o.auraRef);for(s=game.data.auras.length-1;s>=0;s--)game.data.auras[s].corpusID===a&&(console.log("aura should be spliced since this corpus has not aura upgrade anymore"),game.data.auras.splice(s,1))}}else $this.hasClass("item")&&(game.state.corpuses[a].upgrades[t]+=1);var n=helpers.plans.getFullPlanStats(game.state.corpuses[a]);game.state.corpuses[a].stats=n;for(s=0;s<game.data.gameObjects.length;s++)game.data.gameObjects[s].corpusID===a&&helpers.units.updateGameObjectStats(game.data.gameObjects[s]);page.popupsOpen--,gameUI.showPopup("corpus_upgrades",a,!0);var d={preserveLeader:game.data.leaderEnabled};game.refreshCurrentView(d),hoverCellRef=!1,e.stopPropagation()}}},".up-sign:not(.disabled), .down-sign, .sign"),s.on({mousedown:function(e){if(1===e.which){$this=$(this);var t=parseInt($this.parent().attr("data-corpus-id")),a=$this.attr("data-type");game.state.corpuses[t].upgrades.auraType=a;for(var s=0;s<game.data.auras.length;s++)game.data.auras[s].corpusID===t&&(game.data.auras[s].subType=a);page.popupsOpen=Math.max(0,page.popupsOpen-1),gameUI.showPopup("corpus_upgrades",t,!0),game.refreshCurrentView()}}},".item"),s.on({mousedown:function(e){1===e.which&&($this=$(this),page.popupsOpen=Math.max(0,page.popupsOpen-1))}},".save"),s.on({mousedown:function(e){if(1===e.which){audio.playSound("click"),$this=$(this);parseInt($this.attr("data-corpus-id"));gameUI.showConfirmationPrompt(getLine("reset_upgrade_points_clear"),(function(){for(var e={},t=0;t<game.data.gameObjects.length;t++){e[a=game.data.gameObjects[t].corpusID]=0}for(t=0;t<game.data.gameObjects.length;t++){var a;e[a=game.data.gameObjects[t].corpusID]+=game.data.gameObjects[t].tanksAmount}$.each(e,(function(e,t){game.state.corpuses[e].tanksAmount+=t})),game.data.gameObjects=[],game.state.gameObjects=[],game.data.currentDrawableVehicle=null,game.change.resource("requires_citizens",game.state.formationCrewTotal),game.state.formationCrewTotal=0,game.data.playerPower=0,game.data.auras=[],game.data.buttons=[],game.data.leaderEnabled=!1,helpers.plans.resetUpgradePoints(a)}),(function(){}))}}},".reset-points")),"help"===e?s.on({mousedown:function(e){if(1===e.which)if(($this=$(this)).hasClass("header"))$this.parent().toggleClass("extended");else{var t=$this.closest(".category"),a=t.attr("data-category"),s=$this.attr("data-subcategory"),r="";$this.hasClass("extended")?$this.removeClass("extended"):(r=gameUI.prepareDOM("helpExtended",{category:a,subcategory:s}),t.find(".sub-category").removeClass("extended"),$this.addClass("extended")),t.find(".text").html(r)}}},".category .header, .sub-category"):"dev_panel"===e&&s.on({mousedown:function(e){if(1===e.which){var t=($this=$(this)).attr("data-type"),a=game.data.devSettings[t];void 0!==a&&($this.hasClass("off")?($this.removeClass("off").addClass("on"),a.enabled=!0):($this.removeClass("on").addClass("off"),a.enabled=!1));var s=t,r=1;"add_resources"===t?(s=$this.parent().find("select").val(),r=Number($this.parent().find("input").val())):"add_time_saved"===t?r=1e6:"game_speed"===t&&(r=Number($this.attr("data-speed")));var i=["reveal_categories","reveal_views","reveal_jobs","reveal_buildings","buy_all_buildings","buy_researches","add_resources","add_time_saved","urgent_resources"];switch(t){case"reveal_main":i=["reveal_categories","reveal_views","reveal_jobs","reveal_buildings","buy_all_buildings","add_resources","add_time_saved","urgent_resources"];case"reveal_all":$.each(game.data.devSettings,(function(e,t){t.enabled=!0})),r=1e9;for(var o=0;o<i.length;o++){var n=r;"add_resources"===i[o]?$.each(game.const.resources,(function(e,t){"revealed"!==e&&(n=r,"citizens"!==e&&"population"!==e||(n=Math.min(1e4,r/1e3)),helpers.dev.devActions(i[o],e,n))})):helpers.dev.devActions(i[o],i[o],n)}page.$gameUI.$.find(".popup-holder").remove(),page.popupsOpen=0,gameUI.showPopup("dev_panel");break;default:helpers.dev.devActions(t,s,r)}game.refreshCurrentView(),gameUI.refreshPopup("dev_panel")}}},".clickable"),!1===helperData.insertAfterIndex?page.$dynamicDOM.$.append(s):(page.$dynamicDOM.$.children().eq(helperData.insertAfterIndex-1).after(s),helperData.insertAfterIndex=!1),setTimeout((function(){page.$dynamicDOM.$.find(".fadein-holder").removeClass("fadein-holder")}),50),page.popupsOpen++,SimpleScrollbar.initAll()}},closePopup:function(){},refreshPopup:function(e){var t=page.$dynamicDOM.$.find('.popup-holder[data-type="'+e+'"]'),a=t.index();0!==t.length&&(t.remove(),page.popupsOpen=Math.max(0,page.popupsOpen-1),helperData.insertAfterIndex=a,gameUI.saveScrollBarPositions(),gameUI.showPopup(e,!1,!0),gameUI.recoverScrollBarPositions())},showConfirmationPrompt:function(e,t,a){page.$dynamicDOM.$.find(".confirmation-prompt-holder").remove();var s='<div class="confirmation-prompt-holder"><div class="popup-content"><div class="close" cursorType="pointer">X</div><div class="title">'+e+'</div><div class="buttons-holder"><div class="yes button-style" cursorType="pointer">'+getLine("yes")+'</div><div class="no button-style" cursorType="pointer">'+getLine("no")+"</div></div></div></div>";(s=$(s)).on({mousedown:function(e){1===e.which&&(audio.playSound("click"),$this=$(this),t(),$this.closest(".confirmation-prompt-holder").remove(),page.quickPopupOpen=!1,clickStarted=!1)}},".yes"),s.on({mousedown:function(e){1===e.which&&(audio.playSound("click"),$this=$(this),a(),$this.closest(".confirmation-prompt-holder").remove(),page.quickPopupOpen=!1,clickStarted=!1)}},".no, .close"),page.$dynamicDOM.$.append(s)},showMiniPopup:function(e,t){page.$dynamicDOM.$.find(".mini-popup-holder").remove();var a=getLine("ok");"to_main_menu"===t&&(a=getLine("to_main_menu"));var s='<div class="mini-popup-holder"><div class="popup-content"><div class="header"><div class="title">'+e+'</div><div class="close" data-extra-action="'+t+'" cursorType="pointer">X</div></div><div class="button-style close" data-extra-action="'+t+'" cursorType="pointer">'+a+"</div></div></div>";(s=$(s)).on({mousedown:function(e){if(1===e.which)switch(audio.playSound("click"),($this=$(this)).closest(".mini-popup-holder").remove(),page.miniPopupOpen=!1,$this.attr("data-extra-action")){case"to_main_menu":gameUI.showMenu("main_menu")}}},".close"),page.$dynamicDOM.$.append(s)},showQuickPopup:function(e,t,a,s){if(page.$dynamicDOM.$.find(".quick-popup-holder").remove(),void 0!==a&&!0===a)return page.quickPopupOpen=!1,helperData.lastQuickPopupData={},void(!1!==helperData.tempColony&&(helperData.tempColony=!1,game.data.colonies.splice(game.data.colonies.length-1,1)));page.canCloseQuickPopup=!1,helperData.lastQuickPopupData={type:e,from:t,close:a,data:s},isUndefined(t)&&(t=!1);var r="",i="",o="",n="",d="",c="",l="";switch(e){case"starting_note":n=getLine("starting_note_title"),i+=getLine("starting_note_text0");break;case"qol":n=getLine("qol_title"),i+='<div class="category" data-type="buy_amount"><div class="label">'+getLine("qol_options_buy_amount_label")+"</div>"+gameUI.printSetting("buy_amount",{ignoreLabel:!0,extraClasses:"multiple qol"})+'</div><div class="category" data-type="assign_amount"><div class="label">'+getLine("qol_options_assign_amount_label")+"</div>"+gameUI.printSetting("assign_amount",{ignoreLabel:!0,extraClasses:"multiple qol"})+"</div>";break;case"demolish":n=getLine("demolish_title");var g=t.closest(".box-data"),m=g.attr("data-subtype"),u=g.attr("data-id"),p=helpers.common.getBuildingData(m,u),h=void 0!==p.avl?p.avl:void 0!==p.level?1:0;i+=getLine("demolish_text0",(100*(game.data.continentRewardBoosts.demolish_refund_rate-1+.5)).formatNumber(2,2)),i+='<div class="demolish-amount">',$.each(game.const.qolOptions.assign_amount.settings,(function(e,t){i+='<div class="button-style'+(0===e?" disabled":"")+'" data-type="'+t.subType+'" data-subtype="'+m+'" data-id="'+u+'" cursorType="pointer">'+t.label+"</div>"})),i+="</div>";var v=gameUI.prepareDOM("costsData",{costs:p.costs.build,buyAmount:1,demolish:!0});i+='<div class="demolish-info"><div class="refund-amount">'+getLine("demolish_text1",1)+'</div><div class="costs">'+v+"</div></div>",i+=h>0?'<div class="demolish-building button-style" data-type="'+m+'" data-id="'+u+'" cursorType="pointer">'+getLine("demolish_text2")+"</div>":"<div>"+getLine("demolish_text3")+"</div>";break;case"confirm_plan_change":i+='<div class="button yes">'+getLine("yes")+'</div><div class="button no">'+getLine("no")+"</div>";break;case"timelapse_config":n=getLine("timelapse_config_title");for(var f="",y=0;y<game.data.timelapse.availableSpeeds.length;y++){var b=game.data.timelapse.availableSpeeds[y];f+='<option value="'+b.toString()+'" '+(game.data.timelapse.speed===b?"selected":"")+">x"+b.toString()+"</option>"}i+='<div class="speed">Game Speed: <select cursorType="pointer" data-action-type="change_game_speed"><option value="1" '+(1===game.data.timelapse.speed?"selected":"")+'>x1</option><option value="2" '+(2===game.data.timelapse.speed?"selected":"")+">x2</option>"+f+"</select></div>",i+=gameUI.printSettingsGroup("timelapse_config",{extraClasses:"no-text"}),i+=gameUI.printSettingsGroup("timelapse_warnings",{extraClasses:"no-text"});break;case"research_legend":d=" transparent-header",c=" ignore-quick-close",i+='<div class="research-icon" data-type="unlocks">'+getLine("research_legend_text0")+'</div><div class="research-icon" data-type="stats">'+getLine("research_legend_text1")+'</div><div class="research-icon" data-type="skill">'+getLine("research_legend_text2")+'</div><div class="research-icon" data-type="qol">'+getLine("research_legend_text3")+'</div><div class="research-icon" data-type="misc">'+getLine("research_legend_text4")+"</div>";break;case"research_details":l=" bottom-left",n=getLine("research_details_title");var _=helperData.currentTab,w="farm",x=game.const.researchUpgrades[_],k=void 0!==game.state.researchUpgrades[_]?game.state.researchUpgrades[_]:0,D=helpers.common.getUpgradeUnlockDetails(_),I=void 0!==x.buyLimit?x.buyLimit:1,C=game.state.resources.research_points.amount>0,T=game.state.resources.perk_points.total-game.state.resources.perk_points.in_research;isUndefined(x.perkCost)||x.perkCost>T&&(C=!1);var A=!1;D.allConditionsMet||(C=!1);var P=game.const.researchUpgradesNodes[_];if(!P.startNodePos)isUndefined(game.state.researchUpgrades[P.parentNode.upgradeID])&&(C=!1);var S,L="",O="";switch(L=getLine("res_"+_+"_extra_desc"),x.category){case"building_unlock":game.const.buildings[x.subID],w=x.subID,S=getLine("research_details_text0",getLine("buildings_"+x.subID)),L=getLine("buildings_"+x.subID+"_desc"),"filtering_station"===x.subID&&(L+=getLine("research_details_text1"));break;case"product_unlock":game.const.products[x.subID],S=getLine("research_details_text2",getLine("products_"+x.subID)),L=getLine("products_"+x.subID+"_desc"),A=!0,w="economy";break;case"resource_unlock":game.const.resources[x.subID],S=getLine("research_details_text3",getLine("res_"+x.subID)),L=getLine("research_details_text4",getLine("res_"+x.subID)),A=!0,w=x.subID;break;case"building_bonus":case"building_upgrade":case"building_limit":game.const.buildings[x.subID],w=x.subID,S=getLine("res_"+_+"_extra_desc"),L=getLine("res_desc_for",S,getLine("buildings_"+x.subID));break;case"stat_bonus":S=getLine("res_"+_+"_extra_desc"),L=getLine("res_"+_+"_desc"),w="citizens",A=!0;break;case"timelapse_speed":S=getLine("research_details_text5"),L=getLine("res_"+_+"_extra_desc")+" x"+x.amount,A=!0,w="time";break;case"timelapse_config":S=getLine("research_details_text6"),L=getLine("show_tooltip_text47",getLine("res_"+_+"_extra_desc")),A=!0;break;case"actions":S=getLine("res_"+_+"_desc"),L=getLine("res_"+_+"_extra_desc"),A=!0,w="time";break;case"part_stats":S=getLine("research_details_text8"),A=!0,w="parts";break;case"ammo_types":S=getLine("research_details_text9"),A=!0,w="parts";break;case"army_unlocks":S=getLine("research_details_text10"),A=!0,w="parts"}if(void 0!==x.effects)for(y=0;y<x.effects.length;y++){var R=x.effects[y].type,M=x.effects[y].amount;switch(R){case"gain_mx":O+=getLine("research_details_text11")+(k*M*100).formatNumber()+"%",O+=" (+"+(100*M).formatNumber()+"%)";break;case"population_gain":O+=getLine("research_details_text11")+(100*(.1+k*M)).formatNumber()+"%",O+=" (+"+(100*M).formatNumber()+"%)"}}var U=void 0!==x.demoLocked&&x.demoLocked&&isDemo();U&&(L='<div class="demo-locked">'+getLine("research_details_text12")+"</div>"+L),-1===getLine("res_"+_+"_extra_desc2").indexOf("Undefined Line")&&(L+="<br /><br />"+getLine("res_"+_+"_extra_desc2"));var j=S+getLine("research_details_text13")+k+"/"+I+")",E="<div>"+L+"</div>";""!==O&&(E+='<div class="extra-desc">'+O+"</div>");var N="";if(D.fullUnlockDetails.length>0)for(y=0;y<D.fullUnlockDetails.length;y++){var B=D.fullUnlockDetails[y],q=B.reqMet?"req-unlocked":"req-locked",G="";switch(B.type){case"research_upgrade":var z=game.const.researchUpgrades[B.subType];switch(z.category){case"building_unlock":game.const.buildings[z.subID],G=getLine("research_details_text14",getLine("buildings_"+z.subID))}break;case"total_citizens":G=getLine("research_details_text15",B.subType.formatNumber())}N+='<div class="'+q+'">'+G+"</div>"}isUndefined(x.perkCost)||(E+="<div>"+getLine("research_details_text19",x.perkCost.formatNumber(2,2))+"</div>"),i+='<div class="grid-row space-between"><div class="grid-box"><b>'+j+"</b></div></div>";var F="small";if(A&&(F="smaller"),i+='<div class="grid-row flex-center"><div class="grid-box '+F+' right-text ">'+(A?'<div class="icon large '+w+'"></div>':'<div class="icon-holder"  data-icon-bg="'+w+'"></div>')+'</div><div class="grid-box">'+E+"</div></div>",""!==N){i+='<div class="grid-row"><div class="grid-box '+F+' right-text"><b>'+getLine("research_details_text16")+'</b></div><div class="grid-box">'+N+"</div></div>"}if(!U){var Q=C?"":" disabled";i+='<div class="buy-box">'+(I<=k?getLine("research_details_text17"):'<div class="upgrade-cost">-1 <div class="icon small knowledge"></div></div><div class="button buy-research'+Q+'" data-type="'+_+'" cursorType="pointer">'+getLine("research_details_text18")+"</div>")+"</div>"}i='<div class="bound-box">'+i+"</div>";break;case"colony_details":e=s.type;var W=s.gridRef;n=getLine("colony_details_t1",e,W);var H=helpers.colonies.getColonyData(e,W),V=helpers.colonies.updateColonyStats(H,!0),Y=H.investment_change<=H.investment_min?" disabled":"",X=H.investment_change>game.state.resources.gold.amount?" disabled":"",J=H.invested_total>0;o+=getLine("colony_details_t2",H.nearest_dist),J?(o+=(H.invested_total>0?getLine("colony_details_t4",H.invested_total.formatNumber(2,2)):"")+(H.invested_total>0?getLine("colony_details_t5",H.investment_left.formatNumber(2,2)):""),o+='<div class="colony_investment change-amount-holder" data-param1="'+e+'" data-param2="'+W+'" ><div class="minus'+Y+'" data-action-type="change_colony_investment" data-type="minus" cursorType="pointer"></div><div class="amount" data-value="'+H.investment_change+'" data-step="'+H.investment_min/10+'"><span>'+H.investment_change.formatNumber(2,2)+'</span><div class="icon tiny gold"></div></div><div class="plus" data-action-type="change_colony_investment" data-type="plus" cursorType="pointer"></div></div><br/>',o+='<div class="button-style add-colony-investment'+X+'" data-action-type="add_colony_investment" data-type="'+e+'" data-extra-params="'+W+'" cursorType="pointer">'+getLine("btn_add_investment")+"</div><br />"):o+=getLine("colony_details_t3")+'<div class="colony_investment change-amount-holder" data-param1="'+e+'" data-param2="'+W+'" ><div class="minus'+Y+'" data-action-type="change_colony_investment" data-type="minus" cursorType="pointer"></div><div class="amount" data-value="'+H.investment_change+'" data-step="'+H.investment_min/10+'"><span>'+H.investment_change.formatNumber(2,2)+'</span><div class="icon tiny gold"></div></div><div class="plus" data-action-type="change_colony_investment" data-type="plus" cursorType="pointer"></div></div><br/>',o+=getLine("colony_risk",(100*H.risk).formatNumber(2,2),(100*V.risk).formatNumber(2,2))+getLine("colony_profit",H.profit.formatNumber(2,2),(100*H.payout).formatNumber(2,2),(100*V.payout).formatNumber(2,2))+getLine("colony_control_rate",(100*H.control_rate).formatNumber(2,2))+getLine("colony_cr_change",(100*H.control_rate_day).formatNumber(2,2)),o+='<div class="auto-expand setting-style checkbox'+(H.automation?"":" off")+'" data-action-type="toggle_colony_auto" data-type="'+e+'" data-extra-params="'+W+'" cursorType="pointer">'+getLine("colony_auto_expand")+"</div>",J||(o+='<div class="button-style add-colony'+X+'" data-action-type="add_colony" data-type="'+e+'" data-extra-params="'+W+'" cursorType="pointer">'+getLine("colony_invest_in")+"</div>"),i+="<div>"+o+"</div>",l=" bottom"}var K='<div class="header'+d+'"><div class="title">'+n+'</div><div class="close" cursorType="pointer">X</div></div>',Z=0,ee=0,te="left",ae="top",se={timelapse_config:47};if(!1!==t){var re=t.offset();Z=re.left,ee=re.top,te="left",isUndefined(se[e])||(ee+=se[e]),Z+450>pageWidth&&(te="right",Z=pageWidth-(re.left+t.outerWidth())),ee+250>pageHeight&&(ae="bottom",ee=0)}var ie=ae+":"+ee+"px;"+te+":"+Z+"px";!1===t&&(ie="width: 400px; top: 100px; right: 0; left: 0; margin: 0 auto;;")," bottom-left"===l?ie="width: 500px; bottom: 0; left: 0;":" bottom"===l&&(ie="width: 500px; bottom: 0; left: 0; right: 0; margin: 0 auto;"),r='<div class="quick-popup-holder'+c+l+'" data-type="'+e+'" style="'+ie+'">'+K+'<div class="popup-content">'+i+"</div></div>",(r=$(r)).on({mousedown:function(e){1===e.which&&(audio.playSound("click"),$this=$(this),gameUI.showQuickPopup(!1,!1,!0))}},".close"),"qol"===e||"demolish"===e&&(r.on({mousedown:function(e){if(1===e.which){$this=$(this),audio.playSound("click");var t=$this.closest(".popup-content"),a=$this.attr("data-type"),s=$this.attr("data-subtype"),r=$this.attr("data-id"),i=helpers.common.getBuildingData(s,r),o=void 0!==i.avl?i.avl:void 0!==i.level?1:0;$this.parent().find(".disabled").removeClass("disabled"),$this.addClass("disabled");var n=a.split("_"),d=0;if(n.length>1){var c=parseInt(n[0]);d=Math.max(1,parseInt(o*(c/100)))}else d="max"===a?o:"ocd"===a?10-(d=Math.min(game.getOCDamount(o)))%10:parseInt(a);d=Math.min(d,o);var l=gameUI.prepareDOM("costsData",{costs:i.costs.build,buyAmount:d,demolish:!0});t.find(".refund-amount span").html(d),t.find(".demolish-info .costs").html(l)}}},".demolish-amount > div"),r.on({mousedown:function(e){if(1===e.which){audio.playSound("demolition"),$this=$(this),console.log("this happens");var t=$this.attr("data-type"),a=$this.attr("data-id"),s=parseInt($this.closest(".popup-content").find(".refund-amount span").html());game.demolishBuilding(t,s,a),gameUI.showQuickPopup(!1,!1,!0)}}},".demolish-building")),"confirm_plan_change"===e&&(r.on({mousedown:function(e){e.which}},".yes"),r.on({mousedown:function(e){1===e.which&&gameUI.showQuickPopup(!1,!1,!0)}},".no")),page.$dynamicDOM.$.append(r),setTimeout((function(){page.quickPopupOpen=!0,page.canCloseQuickPopup=!0}),100)},showOverlay:function(e){page.$dynamicDOM.$.find(".extra-overlay").remove(),game.data.timelapse.opened=!0;for(var t="",a="",s=(game.data.timelapse.configVisible,gameUI.printSettingsGroup("timelapse_config",{extraClasses:"no-text"}),""),r=0;r<game.data.timelapse.availableSpeeds.length;r++){var i=game.data.timelapse.availableSpeeds[r];s+='<option value="'+i.toString()+'" '+(game.data.timelapse.speed===i?"selected":"")+">x"+i.toString()+"</option>"}t='<div class="extra-overlay paused '+e+'">'+(a+='<div class="timelapse-controls">'+(!isUndefined(game.state.researchUpgrades[310])&&game.state.researchUpgrades[310]>0?'<div class="status">'+getLine("show_overlay_text1")+'</div><div class="center-controls"><div class="icon playpage settings small" data-view="timelapse_config" data-view-type="quick_popup" cursorType="pointer"></div><div class="speed">'+getLine("show_overlay_text2")+'<select cursorType="pointer"><option value="1" '+(1===game.data.timelapse.speed?"selected":"")+">x1</option>"+s+'</select></div><div class="play-pause play" cursorType="pointer"><span>'+getLine("show_overlay_text3")+'</span><div class="icon big play"></div></div></div><div class="justflex-box-placeholder"></div>':getLine("show_overlay_text0"))+'<div class="close" cursorType="pointer">X</div></div>')+"</div>",(t=$(t)).on({mousedown:function(e){1===e.which&&(($this=$(this)).hasClass("play")?($this.removeClass("play").addClass("pause").find("span").html(getLine("pause")),game.data.timelapse.active=!0,looptimeMX=game.data.timelapse.speed,gamePaused=!1,$this.closest(".extra-overlay").removeClass("paused"),$this.closest(".extra-overlay").find(".status").html(getLine("show_overlay_text4",looptimeMX)),audio.forceStartBackgroundMusic(2)):($this.addClass("play").removeClass("pause").find("span").html(getLine("show_overlay_text3")),game.data.timelapse.active=!1,looptimeMX=1,$this.closest(".extra-overlay").addClass("paused"),$this.closest(".extra-overlay").find(".status").html(getLine("show_overlay_text5")),audio.stopAllMusic()))}},".play-pause"),t.on({mousedown:function(e){1===e.which&&(audio.playSound("click"),($this=$(this)).closest(".extra-overlay").remove(),game.data.timelapse.opened=!1,game.data.timelapse.active=!1,gamePaused=!1,looptimeMX=1,page.$gameUI.$overlay.find(".top-menu .timelapse .play-pause").removeClass("play").addClass("pause").find("span").html(getLine("pause")),audio.stopAllMusic(),page.$gameContent.removeClass("timelapse-visible"))}},".close"),page.$dynamicDOM.$.append(t),page.$gameContent.addClass("timelapse-visible")},showFullscreenPopup:function(e){var t=e.type,a=t;"event_details"===t?a=e.imageData.offsetX:"timelapse_warning"===t&&(a=e.subType);var s={objective_completed:"positiveSound",new_objective:"positiveSound2",earthquake:"earthquake",riot:"riot",fire:"fire",extortion:"extortion",winter:"winterGust",note_winter:"winterGust",summer:"summer",note_summer:"summer",market_crash:"marketCrash",productivityDrop:"productivityDrop",healthDrop:"healthDrop",post_prestige:"positiveSound2"};isUndefined(s[a])||audio.playSound(s[a]),gameLoop.pause(!0),isUndefined(e.buttonActions)||e.buttonActions;var r="",i="",o="";isUndefined(e.imageData)||"earthquake"!==e.imageData.offsetX||(o=" shake");var n=!0===helperData.animatePopupTransition?" slideFromRight":"";isUndefined(e.title)||(isUndefined(e.titleStatus)?i+='<div class="title'+n+'">'+e.title+"</div>":i+='<div class="title'+n+'">'+e.title+'<div class="title-status">'+e.titleStatus+"</div></div>"),isUndefined(e.subTitle)||(i+='<div class="subtitle"></div>'),isUndefined(e.imageData)||!1===e.imageData||("icon"!==e.imageData.imageType?i+='<div class="image" data-type="'+e.imageData.imageType+'" data-subtype="'+e.imageData.offsetX+'"></div>':i+='<div class="image" data-type="'+e.imageData.imageType+'" data-icon="'+e.imageData.offsetX+'"></div>'),isUndefined(e.points)||(i+='<div class="points-holder">',$.each(e.points,(function(e,t){i+='<div class="point">'+t+"</div>"})),i+="</div>");var d=!1,c=0;if(!isUndefined(e.reelsData)){d=!0;i+='<div class="reel-instructions">Select an extra bonus:</div>',i+='<div class="reel-info-holder">',$.each(e.reelsData,(function(e,t){i+='<div class="reel-info">reward</div>'})),i+="</div>",i+='<div class="reels-holder">',$.each(e.reelsData,(function(t,a){var s=a.length/e.reelsData[0].length;c=2*s,i+='<div class="reel disabled" cursorType="pointer"><div class="slot-holder" style="animation-duration: '+2*s+'s;">',$.each(a,(function(e,t){game.const.continentRewards[t[1]];var a=getLine("cont_reward_"+t[1]);i+='<div class="slot" style="background: '+t[0]+'" data-action-type="slot_selected" data-type="'+t[1]+'" data-text="'+a+'">'+a+"</div>"})),i+="</div></div>"})),i+="</div>",i+='<div class="slot-desc"></div>'}var l="",g=-1===[].indexOf(t);if(g){isUndefined(e.buttonDelay)&&(e.buttonDelay=2),"new_objective"===t&&(e.buttonDelay=3),l=" transition-"+e.buttonDelay+"s",d&&(l+=" disabled-click"),i+='<div class="buttons">';for(var m=0;m<e.buttonActions.length;m++){var u=e.buttonActions[m],p=getLine("btn_continue"),h="";switch(u){case"next_mission":p=getLine("next_mission");break;case"pay_bribe":p=getLine("event_details_text1"),h=' data-id="'+e.extraData.id+'"';break;case"decline_bribe":p=getLine("event_details_text2"),h=' data-id="'+e.extraData.id+'"';break;case"select_bonus":p=getLine("btn_select");break;case"prestige":p=getLine("btn_prestige");break;case"cancel":p=getLine("btn_cancel"),u="close_popup"}i+='<div class="button-timed close disabled'+l+'" cursorType="pointer" data-action-type="'+u+'"'+h+' data-after="'+p+'">'+p+"</div>"}i+="</div>"}if(" fadein-holder",!1===helperData.animatePopupTransition?(r='<div class="popup-holder fullscreen  fadein-holder" data-type="'+t+'">'+fireThirdPartyAction("request_banner_ads",{force:!1,extraClasses:" bottom-right-absolute",bannerSizes:["300x250"]})+'<div class="popup-content-holder"><div class="popup-content'+o+'">'+i+"</div></div></div>",r=$(r)):(page.$dynamicDOM.$.find(".popup-holder.fullscreen").last().find(".popup-content").html(i),r=page.$dynamicDOM.$.find(".popup-holder.fullscreen").last()),d){var v=function(e,t,a){e=$(e),$.each($(".slot-holder"),(function(e,t){var a=$(t).offset().top-$(t).position().top;$.each($(t).find(".slot"),(function(t,s){var r=$(s).offset().top;if(r+150>a+75&&r<a+75)return $(".reel-info").eq(e).html($(s).attr("data-text")),!1}))})),performance.now()<t?setTimeout(v.bind(null,e,t),50):$(".reel").removeClass("disabled")};v(i,performance.now()+1e3*c)}if(!isUndefined(e.subTitle)){var f={currentStep:0,points:e.points,pointsHolder:r.find(".points-holder"),nextStep:function(){switch(f.currentStep++,f.currentStep){case 1:if(!isUndefined(f.points)){!function e(){f.pointsHolder.find(".point:not(.shown)").length>0&&(f.pointsHolder.find(".point:not(.shown)").eq(0).addClass("shown"),setTimeout(e,500))}()}}}},y=isUndefined(e.typingSpeed)?20:e.typingSpeed;new textTyper({text:e.subTitle,typeChars:!0,speed:50,speedChars:y,delay:500,parent:r.find(".subtitle"),callback:f.nextStep})}g&&setTimeout((function(){r.find(".button-timed").addClass("timing").on(transitionEnd,(function(){$(this).removeClass("disabled")}))}),30),!1===helperData.animatePopupTransition&&(r.on(animationEnd,".slideLeftAndRemoveContent",(function(){$(this).removeClass("slideLeftAndRemoveContent").html(""),gameUI.showPopup(helperData.showPopupAfterTransition)})),page.$dynamicDOM.$.append(r),setTimeout((function(){page.$dynamicDOM.$.find(".fadein-holder").removeClass("fadein-holder")}),50),page.popupsOpen++),helperData.animatePopupTransition=!1,helperData.showPopupAfterTransition=!1},showQuickTutorial:function(e){if(!e&&!game.getSettingValue("show_tutorials"))return!1;var t="",a="";if(!1===game.data.tutorial.activeSideTutorial){console.log("no side tut active - show cur obj hint");var s=isUndefined(game.data.tutorial.currentObjData.langObjIDextra)?game.data.tutorial.currentObjData.objID:game.data.tutorial.currentObjData.objID+game.data.tutorial.currentObjData.langObjIDextra;t='<div class="quick-tutorial'+a+'"><div class="header">'+getLine("quick_tut_text0")+'</div><div class="close" cursorType="pointer">X</div><div class="sub-title">'+getLine("quick_tut_text1")+'</div><div class="desc">'+getLine("obj_"+game.data.tutorial.currentObjData.langID+"_"+s+"_hint")+"</div></div>"}else{var r=getLine("quick_"+game.data.tutorial.activeSideTutorial+"_desc");["conquer_territory","manage_plans"].indexOf(game.data.tutorial.activeSideTutorial)>-1&&(a=" wider"),helpers.common.isActiveTutorial("start_exploring")&&(r=getLine("starting_note_text0")+"<br/>"+r),t='<div class="quick-tutorial'+a+'"><div class="header">'+getLine("quick_tut_text2")+'</div><div class="close" cursorType="pointer">X</div><div class="sub-title">'+getLine("quick_"+game.data.tutorial.activeSideTutorial)+'</div><div class="image" data-subtype="'+game.data.tutorial.activeSideTutorial+'"></div><div class="desc">'+r+"</div></div>"}page.$dynamicDOM.$.find(".quick-tutorial").remove(),(t=$(t)).on({mousedown:function(e){1===e.which&&(audio.playSound("click"),($this=$(this)).closest(".quick-tutorial").css({animation:"fadeOutWidthHeight 500ms ease-in"}),$this.closest(".quick-tutorial").on(animationEnd,(function(){$(this).remove()})))}},".close"),page.$dynamicDOM.$.append(t)},showObjective:function(e){void 0===e&&(e=0);var t=Math.max(0);page.$dynamicDOM.$.find(".new-objective").remove();var a="";a='<div class="new-objective slide-right closed" cursorType="pointer"><div class="widget">'+getLine("show_objective_text0")+'</div><div class="desc">'+game.const.objectives[t]+'</div><div class="close" cursorType="pointer">X</div></div>',(a=$(a)).on({mousedown:function(e){1===e.which&&($this=$(this)).addClass("quick-transition closed").on(transitionEnd,(function(){$(this).remove()}))}}),setTimeout((function(){page.$dynamicDOM.$.prepend(a),page.$dynamicDOM.$.find(".new-objective").delay(500).queue((function(){$(this).removeClass("closed").on(transitionEnd,(function(){$(this).off(transitionEnd)}))}))}),e),setTimeout((function(){page.$dynamicDOM.$.find(".new-objective").length>0&&page.$dynamicDOM.$.find(".new-objective").addClass("quick-transition closed").on(transitionEnd,(function(){$(this).remove()}))}),7e3)},showCompletedNote:function(e,t){audio.playSound("objectiveCompleted");var a="";a+='<div class="completed-note"><div class="title">'+getLine("show_completed_note_text")+'</div><div class="desc">'+t.shortDesc+"</div></div>",(a=$(a)).on({mousedown:function(e){1===e.which&&($this=$(this)).removeClass("slide-right").on(transitionEnd,(function(){$(this).remove()}))}}),page.$dynamicDOM.$.prepend(a),setTimeout((function(){page.$dynamicDOM.$.find(".completed-note").eq(0).addClass("slide-right").delay(2e4).queue((function(e){$(this).removeClass("slide-right").on(transitionEnd,(function(){$(this).remove()})),e()}))}),50)},displayNotification:function(e){var t="",a="";"objective_completed"===e[1]&&(a=" anim_scaleInOut");var s={explorers:{view:"resources",view_type:"regular"},event_intensity:{view:"event_details",view_type:"popup",extra_params:!1},maintenance_dropped:{view:"public_jobs",view_type:"regular"},morale_dropped:{view:"public_jobs",view_type:"regular"},market_crashed:{view:"global_market",view_type:"regular"},malnourishment_changed:{view:"resources",view_type:"regular"},health_dropped:{view:"public_jobs",view_type:"regular"},objective_completed:{view:"objectives",view_type:"popup"},achievement_completed:{view:"objectives",view_type:"popup",extra_params:"achievements"}}[e[1]];t=isUndefined(s)?'<div class="action-shortcut hidden"><<</div>':'<div class="action-shortcut" data-view="'+s.view+'" data-view-type="'+s.view_type+'" data-extra-params="'+s.extra_params+'" cursorType="pointer"></div>';let r='<div class="notification animation '+e[2]+a+'">'+t+'<div class="text">'+e[0]+"</div></div>";page.$dynamicDOM.$.find(".notifications-new").append(r),"objective_completed"===e[1]&&audio.playSound("objectiveCompleted"),page.$dynamicDOM.$.find(".notifications-new .notification").length>3&&page.$dynamicDOM.$.find(".notifications-new .notification:nth-of-type(2)").remove()},checkForNotificationIcon:function(e,t,a){if(helpers.common.isActiveTutorial("start_exploring"))return"";var s=!1,r="";switch(e){case"health":case"productivity":game.state.stats[e],t<1&&(s=!0),r=" right20";break;case"population":t<=game.state.resources.citizens.total&&(s=!0),r=" pop-capped";break;case"citizens":.2*game.state.resources[e].total<=t&&(s=!0),r=" cits-idling"}var i=helperData.displayedWarnings.indexOf(e),o="";if(!1===a)return s&&!game.getSettingValue("hide_warning_icons")&&(o='<div class="notification-icon'+(r+=" ignore-animation")+'" data-tooltip-type="notification_icon" data-subtype="'+e+'"></div>'),o;if(s&&!game.getSettingValue("hide_warning_icons")){if(a.find(".notification-icon").length>0)return;i>-1?r+=" ignore-animation":helperData.displayedWarnings.push(e),o='<div class="notification-icon'+r+'" data-tooltip-type="notification_icon" data-subtype="'+e+'"></div>',a.append(o)}else a.find(" > .notification-icon").remove(),-1!==i&&helperData.displayedWarnings.splice(i,1)},checkDOMrefresh:function(e,t,a){if(perfTests.c2++,"resource_change"===e)-1===refreshData.resources.indexOf(t.type)&&refreshData.resources.push(t),t.type,refreshUI.infoBar=!0,["public_jobs"].indexOf(game.data.currentView),"citizens"===t.type&&(helperData.forceGameOver||game.state.resources.citizens.total<=0)&&0===game.data.gameEnding&&(game.data.gameEnding=1,helperData.forceGameOver=!1,gamePaused=!0,forceUpdateDisplay=!0,gameUI.showPopup("game_over2"),game.stateHandling.saveGame());else if("popup_refresh"===e)refreshUI.currentPopup=!0,void 0!==t&&(refreshUI.refreshPopup=t);else if("overlay_refresh"===e)refreshUI.overlay=!0;else if("quick_popup_refresh"===e)helperData.lastQuickPopupData.type===t&&(refreshUI.quickPopupRefresh=!0);else if("worker_change"===e)refreshData.boxData.push(t),refreshUI.boxData=!0;else if("time_changed"===e)switch(t){case"explorers":refreshUI.explorers=!0;break;case"build_queue":case"produce_queue":refreshUI.queueData=!0;break;case"screen_switch":refreshUI.switchScreen=!0;break;case"overlay_text":refreshUI.overlayText=!0}else if("time_finished"===e)switch(t){case"build_queue":refreshUI.queueData=!0,"produce"===game.data.currentView&&(refreshUI.currentPopup=!0);break;case"build_queue_remove":["build_queue"].indexOf(game.data.currentView)>-1&&(refreshUI.currentPopup=!0,refreshUI.queueData=!0),refreshUI.infoBar=!0;break;case"produce_queue":refreshUI.queueData=!0,["produce"].indexOf(game.data.currentView)>-1&&(refreshUI.currentPopup=!0);break;case"produce_queue_remove":["produce"].indexOf(game.data.currentView)>-1&&(refreshUI.queueData=!0),refreshUI.currentPopup=!0,refreshUI.infoBar=!0;break;case"explore_results":["public_jobs"].indexOf(game.data.currentView)>-1&&(refreshUI.infoBar=!0)}else if("change_worker"===e)switch(refreshUI.infoBar=!0,t){case"explorer":case"builder":refreshUI.currentPopup=!0}else if("revealed"===e)switch(t){case"produce":game.const.views.produce.revealed=!0,game.const.viewCategories.army.revealed=!0;break;case"world":game.const.views.world.revealed=!0,game.const.viewCategories.world.revealed=!0}else if("icon_revealed"===e)refreshUI.currentPopup=!0;else if("new_tutorial"===e){if(game.data.tutorial.active){var s=game.data.tutorial.data[game.data.tutorial.part][game.data.tutorial.step],r=!1;switch(game.data.tutorial.step){case 0:case 1:gameUI.checkDOMrefresh("popup_refresh");break;case 2:switch(s[0]){case"buildings":case"level":r={type:"buildings",subType:s[1],id:s[2]};break;case"workers":r={type:s[1],subType:s[2],id:0};break;case"research":var i=game.const.researchUpgradesNodes[s[1]],o={showOnView:"research",target:{x:i.x,y:i.y,w:i.w,h:i.h}};page.showTutorialArrow(o)}}!1!==r&&(refreshData.boxData.push(r),refreshUI.boxData=!0)}}else"attack_countdown"===e?refreshUI.nextAttackInfo=!0:"market_refresh"===e?refreshUI.partialRefresh=!0:"stock_change"===e&&refreshData.products.push(t)},handleDOMrefresh:function(){var e,t,a="";if(!1!==refreshUI.refreshPopup&&(gameUI.refreshPopup(refreshUI.refreshPopup),refreshUI.refreshPopup=!1),!1!==refreshUI.quickPopupRefresh&&(gameUI.showQuickPopup(helperData.lastQuickPopupData.type,helperData.lastQuickPopupData.from,helperData.lastQuickPopupData.close,helperData.lastQuickPopupData.data),refreshUI.quickPopupRefresh=!1),refreshUI.currentPopup)return refreshUI.currentPopup=!1,void game.refreshCurrentView();if(refreshUI.partialRefresh&&(refreshUI.partialRefresh=!1,"global_market"===game.data.currentView&&(a=gameUI.prepareDOM("marketData"),(e=page.$gameUI.$contentHolder.find(".section.global-market")).find(".left-column").html(a.DOM1),e.find(".below-chart").html(a.DOM2),e.find(".above-chart").html(a.DOM3))),refreshUI.battleMenu&&(refreshUI.battleMenu=!1,page.$gameUI.$overlay.find(".battle-menu").html(gameUI.prepareDOM("battleMenu"))),refreshUI.overlay&&(refreshUI.overlay=!1,gameUI.setOverlay()),refreshUI.infoBar){var s;refreshUI.infoBar=!1,e=page.$gameUI.$contentHolder.find(".section.resources");for(var r=0;r<refreshData.resources.length;r++){d=refreshData.resources[r].type,s=refreshData.resources[r].data,"requires_citizens"===d||"total_citizens"===d||"population"===d?d="citizens":"research_points_change"===d?d="research_points":"tiles_refund"===d?d="tiles":"water_sources_refund"===d?d="water_sources":"mining_deposits_refund"===d&&(d="mining_deposits"),"citizens"===d&&game.getAssignAmount(),a=gameUI.prepareDOM("infoBarData",d),["citizens","health","productivity"].indexOf(d)>-1?(page.$gameUI.$topMenu.find("> ."+("citizens"!==d?d:"population")+" > span").html(a),["health","productivity"].indexOf(d)>-1?gameUI.checkForNotificationIcon(d,game.state.stats[d],page.$gameUI.$topMenu.find("> ."+("citizens"!==d?d:"population"))):(gameUI.checkForNotificationIcon("population",game.state.resources.population.total,page.$gameUI.$topMenu.find("> .population > span")),gameUI.checkForNotificationIcon("citizens",game.state.resources.citizens.idle,page.$gameUI.$topMenu.find("> .population .idle-citizens")))):page.$gameUI.$infoBar.find("> ."+("citizens"!==d?d:"population")+" > span").html(a);if(void 0!==game.const.resources[d]||-1!==["dirt_available"].indexOf(d)){game.const.resources[d];var i=game.state.resources[d];switch(game.data.currentView){case"public_jobs":break;case"resources":if((t=e.find('.box-holder[data-subtype="'+d+'"] .box-field > .amount')).length>0){if(t.html(i.amount.formatNumber(2,2)),e.find('.box-holder[data-subtype="'+d+'"] .quick-notes').html(getLine("dom_refresh_text0")+(100*helpers.common.getResourceTypeMinEfficiency(d)).formatNumber(2,2)+"%"),e.find('.box-holder .box-data[data-type="jobs"][data-subtype="'+d+'"] .extra-resources').html(i.extra.formatNumber()),"water"===d){var o=game.state.resources.water_sources.total-game.state.resources.water_sources.amount>300,n=e.find('.extended-data .box-data[data-type="water_sources"] .desc-extra');o?n.removeClass("not-displayed"):n.addClass("not-displayed"),n.find("span").html(+(100*game.state.stats.toxicity).formatNumber(2,2)+"%")}}else if("water_sources"===d){o=game.state.resources.water_sources.total-game.state.resources.water_sources.amount>300,n=e.find('.extended-data .box-data[data-type="water_sources"] .desc-extra');o?n.removeClass("not-displayed"):n.addClass("not-displayed"),(t=e.find('.extended-data .box-data[data-type="water_sources"] .natural > span')).html(game.state.resources.water_sources.amount.formatNumber()+"/"+game.state.resources.water_sources.total.formatNumber()),n.find("span").html(+(100*game.state.stats.toxicity).formatNumber(2,2)+"%")}else if("mining_deposits"===d)e.find('.box-holder[data-subtype="mining_deposits"] .box-field:nth-of-type(2)').html("Deposits: "+game.state.resources.mining_deposits.total),e.find('.box-holder[data-subtype="mining_deposits"] .box-field:nth-of-type(3)').html("Active: "+(game.state.resources.mining_deposits.total-game.state.resources.mining_deposits.amount));else if("dirt_available"===d){if(void 0===game.state.buildings.mining_plant[s.id])break;(t=e.find('.box-data[data-subtype="mining_plant"][data-id="'+s.id+'"] .dirt-left')).html(game.state.buildings.mining_plant[s.id].dirt_available.formatNumber())}break;case"research":"research_points"!==d&&"research_points_change"!==d||page.$gameUI.$overlay.find(".research-points-left span").html(game.state.resources.research_points.amount.formatNumber())}t=page.$gameUI.$contentHolder.find("[data-cost-types]"),$.each(t,(function(e,t){if(!(t=$(t)).hasClass("maxed")&&!t.hasClass("in-progress")){for(var a=t.attr("data-cost-types").split(","),s=t.attr("data-cost-amounts").split(","),r=!0,i=0,o=0;o<a.length;o++)if(i=0,"citizens"===a[o]||"idle_citizens"===a[o]?i=game.state.resources.citizens.idle:void 0!==game.state.resources[a[o]]&&(i=game.state.resources[a[o]].amount),i<Number(s[o])||0===Number(s[o])){r=!1;break}r?t.removeClass("disabled"):t.addClass("disabled")}}))}}refreshData.resources=[]}if(refreshUI.resourceRates){if(refreshUI.resourceRates=!1,"resources"===game.data.currentView){e=page.$gameUI.$contentHolder.find(".section.resources");for(r=0;r<refreshData.resourceRates.length;r++){var d=refreshData.resourceRates[r];e.find('.box-holder[data-subtype="'+d+'"] .gain-absolute').html("("+game.data.resourceRates[d].absolute.formatNumber(2,2)+"/s)"),e.find('.box-holder[data-subtype="'+d+'"] .quick-notes').html(getLine("dom_refresh_text0")+(100*helpers.common.getResourceTypeMinEfficiency(d)).formatNumber(2,2)+"%")}}if(page.$gameUI.$infoBar.is(":visible"))for(r=0;r<refreshData.resourceRates.length;r++)(e=page.$gameUI.$infoBar.find("> ."+d)).attr("data-absolute-gain")&&e.attr("data-absolute-gain",game.data.resourceRates[d].absolute);refreshData.resourceRates=[]}if(refreshData.products.length>0){for(r=0;r<refreshData.products.length;r++){var c=refreshData.products[r],l=game.state.products[c.type];if("factories"===game.data.currentView){e=page.$gameUI.$contentHolder.find(".section.buildings");var g='[data-id="'+c.id+'"]';e.find('.box-data[data-type="buildings"]'+g+" .product-stock").html(l.avl.formatNumber(1,1))}else"product_stock"===game.data.currentView&&(e=page.$gameUI.$contentHolder.find(".section")).find('.box-holder[data-type="products"][data-subtype="'+c.type+'"] .title > span').html("("+l.avl.formatNumber()+")")}refreshData.products=[]}if(e=page.$gameUI.$contentHolder.find(".section.buildings, .section.public-buildings, .sub-section.buildings"),$.each(game.const.buildings,(function(s,r){r.fullRefresh&&(game.const.buildings[s].fullRefresh=!1,t=e.find('.box-data[data-type="buildings"][data-subtype="'+s+'"]'),$.each(t,(function(e,t){a=gameUI.prepareDOM("buildingData",{type:s,id:e}),$(t).parent().replaceWith(a)})))})),refreshUI.overlayText&&(refreshUI.overlayText=!1,game.data.startAnimationsIn>0?page.$dynamicDOM.$overlayText.html(getLine("dom_refresh_text1",(game.data.startAnimationsIn/1e3).formatNumber(1,1,!0))):page.$dynamicDOM.$overlayText.addClass("not-displayed")),refreshUI.switchScreen&&(refreshUI.switchScreen=!1,forceDrawAll=!0,game.switchTo(game.data.switchScreenData.switchTo),setTimeout((function(){forceDrawAll=!0}),50)),game.data.notifications.update){game.data.notifications.update=!1,a=gameUI.prepareDOM("notifications"),page.$dynamicDOM.$notificationsHolder.find(".ss-content").html(a),SimpleScrollbar.initAll();var m=[];game.getSettingValue("filter_notes_explorers")||m.push("explorer-gain"),game.getSettingValue("filter_notes_warnings")||m.push("warning");for(r=game.data.notifications.list.length-1;r>=0&&!game.data.notifications.list[r][5];r--){game.data.notifications.list[r][5]=!0,!(m.indexOf(game.data.notifications.list[r][2])>-1)&&game.getSettingValue("show_quick_notification")&&gameUI.displayNotification(game.data.notifications.list[r])}page.$dynamicDOM.$.find(".notifications-new .notification:gt(10)").remove()}if(refreshUI.explorers){refreshUI.explorers=!1,game.state.jobs.explorer.lastDisplayUpdate=0;var u=game.state.jobs.explorer.lastCycle/game.const.jobs.explorer.cycleTime,p=!1!==game.state.jobs.explorer.territory?game.state.gameGrids.territories[game.state.currentParentGrids.regions][game.state.jobs.explorer.territory].explored_spots:0,h=Math.min(1,p/game.const.exploredSpotsCap);h>=1&&(u=1),page.$gameUI.$.find(".section.jobs .exploring").attr("data-progress",u),page.$gameUI.$.find(".section.jobs .explored span").html((parseInt(100*h*100)/100).formatNumber(2,2)+"%"),h>=1&&page.$gameUI.$.find(".section.jobs .exploring").attr("data-after",getLine("dom_refresh_text2")).addClass("not-working")}if($.each(refreshData.buildQueue.data,(function(t,s){e=page.$gameUI.$contentHolder.find(".section.buildings, .section.public-buildings, .sub-section.buildings");helpers.common.getBuilderReductionMX();a=getLine("dom_refresh_text3")+s.amount.formatNumber(2,2)+getLine("dom_refresh_text4")+(s.nextIn/1e3).formatNumber(1,1,!0)+"s)";var r=s.id,i="";!1!==r&&(i='[data-id="'+r+'"]',t=t.split("#")[0]),e.find('.box-data[data-subtype="'+t+'"]'+i+" .queue-info").html(a)})),refreshUI.queueData){refreshUI.queueData=!1;var v,f="produce"!==game.data.currentView?"buildQueue":"produceQueue";if("buildQueue"===f?v=helpers.common.getBuilderReductionMX():"produceQueue"===f&&(v=helpers.common.getProductionReductionMX()),game.data.lastRefreshes[f]=0,["build_queue","produce"].indexOf(game.data.currentView)>-1)for(r=0;r<game.state[f].length;r++){var y=(game.state[f][r][2]/1e3/v).formatNumber()+"s left";0===v&&(y=getLine("dom_refresh_text5")),page.$gameUI.$.find(".section.queues [data-queue-id="+r+"] .queue-item span:nth-of-type(2)").html(y),page.$gameUI.$.find(".section.queues [data-queue-id="+r+"] .queue-item span:nth-of-type(1)").html(game.state[f][r][1].formatNumber()+"x")}if("buildQueue"===(f="buildQueue")){var b=page.$gameUI.$overlay.find(".build-queue"),_=helpers.common.getNextQueueItem(f);if(refreshData.buildQueue.update.length>0){if((e=page.$gameUI.$contentHolder.find(".section.buildings, .section.public-buildings, .sub-section.buildings")).length>0){var w;for(r=0;r<refreshData.buildQueue.update.length;r++){w=refreshData.buildQueue.update[r][0];var x,k=refreshData.buildQueue.update[r][1],D=!1;game.const.buildings[w].fullRefresh&&(D=!0,game.const.buildings[w].fullRefresh=!1),void 0!==k?(game.state.buildings[w][k],x=1,D=!0):x=game.state.buildings[w].avl,g="",void 0!==k&&(g='[data-id="'+k+'"]'),D?(a=gameUI.prepareDOM("buildingData",{type:w,id:k}),e.find('.box-data[data-type="buildings"][data-subtype="'+w+'"]'+g).parent().replaceWith(a)):(a="("+x+")",e.find('.box-data[data-subtype="'+w+'"]'+g+" .title span").html(a))}}refreshData.buildQueue.update=[]}b.find(".building-name").html(_.name+" "),b.find(".time-left").html(_.time)}}if(refreshUI.boxData){refreshUI.boxData=!1;for(r=0;r<refreshData.boxData.length;r++){var I=refreshData.boxData[r];let e="";switch(I.type){case"jobs":e=gameUI.prepareDOM("jobData",I.subType);break;case"buildings":e="mining_plant"===I.subType?gameUI.prepareDOM("buildingData",{type:I.subType,id:I.id}):"water_sources"===I.subType?gameUI.prepareDOM("waterSources"):gameUI.prepareDOM("buildingData",{type:I.subType,id:I.id})}g="",void 0!==I.id&&(g='[data-id="'+I.id+'"]'),page.$gameUI.$contentHolder.find('.box-data[data-type="'+I.type+'"][data-subtype="'+I.subType+'"]'+g).parent().replaceWith(e)}}if(!1!==refreshData.timelapsePaused){if(helperData.consequtive.lastWarning+12e4<performance.now()){helperData.consequtive.lastWarning=performance.now();var C,T=!1;switch(refreshData.timelapsePaused){case"productivityDrop":var A="productivityDrop"===refreshData.timelapsePaused?"prod_drop":"health_drop";C=helpers.stats.getDropCauseAndResolution(A),T={type:"timelapse_warning",subType:refreshData.timelapsePaused,title:getLine(A+"_title"),titleStatus:getLine(A+"_status"),subTitle:C,points:[getLine(A+"_pt1")],buttonActions:["close_popup"],imageData:{imageType:"tutorial",offsetX:0}}}!1!==T&&gameUI.showFullscreenPopup(T),console.log("timelapsePaused Because : ")}refreshData.timelapsePaused=!1}if(helpers.common.isCurrentView("research")&&page.$gameUI.$.find(".prestige-holder .time-left").length>0){var P=game.const.startTimestamp+86400*game.const.perkPointsEveryXDays*1e3,S=Math.max(0,P-game.state.gameDate);page.$gameUI.$.find(".prestige-holder .time-left span").html(convertTime(S/1e3,{formatLength:"mid"}))}refreshUI.nextAttackInfo&&"battle_select"===game.data.currentView&&(refreshUI.nextAttackInfo=!1,(e=page.$gameUI.$overlay.find(".controls .automation-note span.time")).html((game.data.automationData.nextAttackIn/1e3).formatNumber(2,2,!0)+"s")),refreshUI.nextAttackInfo&&"territories"===game.data.currentView&&(refreshUI.nextAttackInfo=!1,(e=page.$gameUI.$overlay.find(".controls .automation-note span.time")).html((game.data.automationData.nextTerAttackIn/1e3).formatNumber(2,2,!0)+"s"))},handleNonGameDomRefresh:function(){var e;refreshUI.secondChecks&&(refreshUI.secondChecks=!1,helperData.activeTimers&&$.each(helperData.activeTimers,(function(t,a){switch(t){case"ea_release_date":(e=page.$dynamicDOM.$.find(".menu-box.steam")).length>0&&e.html(gameUI.prepareDOM("playPageDemoNote"));break;case"discounts":for(var s=0;s<a.length;s++){switch(a[s].type){case"steam":(e=page.$dynamicDOM.$.find(".menu-box.steam")).length>0&&e.html(gameUI.prepareDOM("playPageDemoNote"))}}}})))},performKeyAction:function(e,t){console.log("perform key action was called"),console.log("type of actionRefs: "+typeof e),console.log("action refs: "+e);var a=[];e.includes("_")?a=e.split("_"):a[0]=e;var s,r=[],i=!1;return $.each(t,(function(e,t){if(console.log("key: "+e),s=!0,e.includes("_")?r=e.split("_"):r[0]=e,console.log("keyActionArray: "+JSON.stringify(r)),console.log("actionsRefsArray: "+JSON.stringify(a)),$.each(a,(function(e,t){if(!r.includes(t))return s=!1,!1})),s)return i=!0,!1})),!!i&&(console.log("found proper action"),!0)}},page={popupsOpen:0,topPopupType:"",quickPopupOpen:!1,canCloseQuickPopup:!1,loadingInfo:{isLoading:!1,stage:!1,images:{current:0,total:0,nextStage:"videos",final:!1},videos:{current:0,total:0,nextStage:"initialize",final:!1},initialize:{current:0,total:1,nextStage:!1,final:!0}},playingCutscene:!1,videoContainer:{},videoMuted:!0,mousePos:{x:0,y:0},keyHeld:!1,tutorialArrowData:!1,$animationBox:null,$gameCanvas:null,$staticCanvas:null,$coverCanvas:null,$gameContent:null,$gameUI:{},$dynamicDOM:{},$gameLoading:{$:null,$progressBar:null,$progressText:null,$description:null},$popupTooltip:null,$animationHolder:null,$animationsAttachPoint:null,initDOM:function(){this.$animationBox=$(".animation-box"),this.$gameCanvas=$("#gameArea"),this.ctx=this.$gameCanvas[0].getContext("2d"),canvasRef=this.$gameCanvas,canvasCtx=this.ctx,this.$staticCanvas=$("#staticArea"),staticCanvasCtx=this.$staticCanvas[0].getContext("2d"),this.$coverCanvas=$("#coverCanvas"),coverCanvasCtx=this.$coverCanvas[0].getContext("2d"),this.$gameContent=$("#gameContent"),this.$gameUI.$=$("#gameUI"),this.$gameUI.$overlay=this.$gameUI.$.find(".overlay"),this.$gameUI.$contentHolder=this.$gameUI.$.find(".content-holder"),this.$gameUI.$fightOptions=this.$gameUI.$.find(".fight-options"),this.$gameUI.$artilleryOptions=this.$gameUI.$.find(".artillery-options"),this.$dynamicDOM.$=$("#dynamicDOM"),this.$gameLoading.$=$("#loading"),this.$gameLoading.$progressBar=this.$gameLoading.$.find(".progress"),this.$gameLoading.$progressText=this.$gameLoading.$.find(".loading-progress"),this.$gameLoading.$description=this.$gameLoading.$.find(".description"),this.$dynamicDOM.$artilleryTime=this.$dynamicDOM.$.find(".artillery-time"),this.$dynamicDOM.$cursorNote=this.$dynamicDOM.$.find(".cursor-note"),this.$dynamicDOM.$overlayText=this.$dynamicDOM.$.find(".overlay-text"),this.$dynamicDOM.$notifications=this.$dynamicDOM.$.find(".notifications"),this.$dynamicDOM.$notificationsHolder=this.$dynamicDOM.$.find(".notifications-holder"),this.$popupTooltip=$("#popup-tooltip"),this.$animationHolder=$(".animation-holder"),this.$animationsAttachPoint=$("#animations-attach-point")},initEventListeners:function(){$("#testVid").on({mousedown:function(e){gameInited=!1,startNewGame=!0,gameStarted=!1,game.fireInitWithErrorCheck(),$(".popup-holder").remove(),page.popupsOpen=0,page.playVideo("start_scene")}}),this.$gameUI.$.on({mousedown:function(e){if(1===e.which){if(($this=$(this)).hasClass("active"))return;if($this.hasClass("disabled-click"))return;if($this.parent().hasClass("disabled-click"))return;var t=$this.attr("data-view"),a=$this.attr("data-view-type"),s=$this.attr("data-extra-params");"event_details"===t||"objectives"===t?audio.playSound("click"):"settings"===t?audio.playSound("settings"):audio.playSound("tab");["ingame_menu"].indexOf(t)>-1&&gameLoop.pause(!0),"popup"===a?-1===["main_menu","start_menu","ingame_menu"].indexOf(t)?gameUI.showPopup(t,s):(game.stateHandling.saveGame(),gameUI.showMenu(t)):"quick_popup"===a?gameUI.showQuickPopup(t,$this):"overlay"===a?"timelapse"===t&&$this.hasClass("timelapse")?game.data.timelapse.opened?(page.$dynamicDOM.$.find(".extra-overlay").remove(),game.data.timelapse.opened=!1,game.data.timelapse.active=!1,gamePaused=!1,looptimeMX=1,$this.find(".play-pause").removeClass("play").addClass("pause").find("span").html(getLine("pause")),audio.stopAllMusic(),page.$gameContent.removeClass("timelapse-visible")):($this.find(".play-pause").removeClass("pause").addClass("play").find("span").html(getLine("play")),gameUI.showOverlay(t)):gameUI.showOverlay(t):"quick_tutorial"===a?gameUI.showQuickTutorial(!0):game.switchTo(t,s)}}},"[data-view]"),this.$gameUI.$.on({change:function(e){switch($this.attr("data-action-type")){case"change_game_speed":var t=parseInt($this.val());console.log("new speed: "+t),game.data.timelapse.speed=t,looptimeMX=game.data.timelapse.speed,page.$gameUI.$overlay.find(".top-menu .timelapse .game-speed").html(parseInt(looptimeMX)+"x")}},mousedown:function(e){if(1===e.which){if(($this=$(this)).hasClass("disabled-click"))return;if($this.hasClass("active"))return;var t=$this.attr("data-action-type"),a=$this.attr("data-type"),s=$this.attr("data-extra-params"),r=!1,i=!1;switch(t){case"change_view_type":audio.playSound("click"),game.data.currentViewType=a,r=!0;break;case"play_pause":var o="Game paused!";gameLoop.pausedGame?($this.addClass("pause").removeClass("play"),o="Game unpaused!"):$this.addClass("play").removeClass("pause");var n=$this.offset(),d={x:n.left-20,y:n.top+30,forceDraw:!0,subType:"over-ui"};game.addAnimation("general_text",o,d),gameLoop.pause();break;case"continue_save":game.stateHandling.saveGamesData.currentSaveID=s,gameInited=!1,game.fireInitWithErrorCheck(),page.$dynamicDOM.$.find(".popup-holder").remove(),page.popupsOpen=0;break;case"download_save":game.stateHandling.saveToFile(s),i="main_menu";break;case"delete_save":gameUI.showConfirmationPrompt(getLine("listeners_text0"),(function(){game.stateHandling.resetLoad(s),i="main_menu"}),(function(){}));break;case"try_again":game.tryAgain(),$this.closest(".popup-holder").remove(),page.popupsOpen=0,page.topPopupType=!1;break;case"close_popup":audio.playSound("click");var c="";"ingame_menu"===$this.closest(".popup-holder").attr("data-type")?(gameLoop.pause(!1),gamePaused=!1,page.$gameUI.$topMenu.find(".timelapse .play-pause").removeClass("play").addClass("pause")):$this.closest(".popup-holder").hasClass("fullscreen")&&(c=".fullscreen",gameLoop.pause(!1),page.$gameUI.$topMenu.find(".timelapse .play-pause").removeClass("play").addClass("pause"),fireThirdPartyAction("request_video_ad",{force:!1})),page.$dynamicDOM.$.find(".popup-holder"+c).last().remove(),page.popupsOpen=Math.max(0,page.popupsOpen-1),page.topPopupType=!1;break;case"next_mission":audio.playSound("click"),helperData.animatePopupTransition=!0,helperData.showPopupAfterTransition="new_objective",page.$dynamicDOM.$.find(".popup-holder.fullscreen").last().find(".popup-content").addClass("slideLeftAndRemoveContent"),fireThirdPartyAction("request_video_ad",{force:!1});break;case"select_bonus":if(!1===helperData.tempData)return void console.log("no bonus selected error??");helpers.common.addContinentReward(helperData.tempData),helperData.tempData=!1,$this.closest(".popup-holder").remove(),page.popupsOpen=Math.max(0,page.popupsOpen-1),page.topPopupType=!1,gameLoop.pause(!1);break;case"pay_bribe":audio.playSound("payBribe");var l=$this.attr("data-id");$this.closest(".popup-holder").remove(),page.popupsOpen=Math.max(0,page.popupsOpen-1),page.topPopupType=!1,game.events.endEvent(l,!0),gameLoop.pause(!1),fireThirdPartyAction("request_video_ad",{force:!1});break;case"decline_bribe":audio.playSound("declineBribe");l=$this.attr("data-id");$this.closest(".popup-holder").remove(),page.popupsOpen=Math.max(0,page.popupsOpen-1),page.topPopupType=!1,setTimeout((function(){game.events.endEvent(l,!1),gameLoop.pause(!1)}),50),fireThirdPartyAction("request_video_ad",{force:!1});break;case"exit_game":try{console.log("closed window from electron app"),appWindow.close()}catch(e){console.log("Tried closing game error: "+JSON.stringify(e))}break;case"slot_selected":helpers.common.checkAchievementGet("continent_conquer",game.state.currentParentGrids.continent),$(".reel").removeClass("selected"),$this.closest(".reel").addClass("selected"),helperData.tempData=a;var g=game.const.continentRewards[a],m=getLine("cont_reward_"+a+"_desc",(isUndefined(g.not_percent)?100*g.amount:g.amount).formatNumber(2,2));$this.closest(".popup-holder").find(".slot-desc").html(m),$this.closest(".popup-holder").find(".button-timed").removeClass("disabled-click");break;case"setup_colony":if(!1!==helperData.setupColony&&helperData.setupColony.subType===a)helperData.setupColony=!1;else{var u={subType:a};helperData.setupColony=new Colony(0,0,102,89,u)}forceDrawAll=!0;break;case"change_colony_investment":var p=(w=$this.closest(".change-amount-holder")).find(".amount"),h=Number(p.attr("data-step")),v=Number(p.attr("data-value"));"minus"===a?(v-=h)<=h&&$this.addClass("disabled"):(v+=h,w.find(".minus").removeClass("disabled")),p.attr("data-value",v).find("span").html(v.formatNumber(2,2));var f=w.attr("data-param1"),y=w.attr("data-param2");(b=helpers.colonies.getColonyData(f,y)).investment_change=v,gameUI.showQuickPopup("colony_details",!1,!1,{gridRef:y,type:f});break;case"toggle_colony_auto":var b,_=!(b=helpers.colonies.getColonyData(a,s)).automation;b.automation=!b.automation,_?$this.removeClass("off"):$this.addClass("off"),gameUI.showQuickPopup("colony_details",!1,!1,{gridRef:s,type:a});break;case"add_colony":case"add_colony_investment":var w;p=(w=$this.closest(".change-amount-holder")).find(".amount"),u={type:a,gridRef:s,newColony:"add_colony"===t,autoCreated:!1};helpers.colonies.addColonyInvestment(u);break;case"prestige":console.log("prestige chosen!"),game.doPrestige(),helperData.animatePopupTransition=!0,helperData.showPopupAfterTransition="post_prestige",page.$dynamicDOM.$.find(".popup-holder.fullscreen").last().find(".popup-content").addClass("slideLeftAndRemoveContent");break;case"clear_perk_points":(k=(T=$this.closest(".popup-content")).find(".slider")).val(0),$.each(k,(function(e,t){var a=(t=$(t)).attr("data-type"),s="+0";-1===["starting_citizens","starting_resources"].indexOf(a)&&(s="+0%"),t.parent().find(".total-value").html(s),game.const.startingBoosts[a].cur=0}));var x=game.state.resources.perk_points.total;helperData.tempData=x,helperData.currentInput=!1,T.find(".perk-points-left span").html(helperData.tempData.formatNumber(2,2)),T.find(".distribute-all-perk-points").removeClass("hidden"),T.find('.button-style[data-type="start_game"]').addClass("disabled");break;case"default_perk_points":var k=(T=$this.closest(".popup-content")).find(".slider"),D=(x=game.state.resources.perk_points.total,Object.keys(game.const.startingBoosts).length),I=parseInt(x/D),C=x-D*I;$.each(k,(function(e,t){var a=Math.min(1,C);C=Math.max(C-1,0);var s=I+a;(t=$(t)).val(s);var r=t.attr("data-type"),i=game.const.startingBoosts[r];i.cur=s;var o=s*i.perPoint,n="+"+o.formatNumber(2,2);-1===["starting_citizens","starting_resources"].indexOf(r)&&(n="+"+(100*o).formatNumber(2,2)),t.parent().find(".total-value").html(n)})),helperData.currentInput=!1,helperData.tempData=0,T.find(".perk-points-left span").html(helperData.tempData.formatNumber(2,2)),T.find(".distribute-all-perk-points").addClass("hidden"),T.find('.button-style[data-type="start_game"]').removeClass("disabled");break;case"close_all_notifications":page.$dynamicDOM.$.find(".notifications-new .notification").remove();break;case"next_sequence":if(helperData.currentTab++,helperData.currentTab<3){var T,A=gameUI.prepareDOM("sequence","game_over2");if((T=$this.parent().parent()).find(".sequence").html(A),2===helperData.currentTab){T.find(".button-style").html(getLine("btn_try_again")).attr("data-action-type","try_again");var P='<div class="button-style" data-action-type="to_main_menu" cursorType="pointer">'+getLine("to_main_menu")+"</div>";T.find(".buttons").append(P)}}else game.tryAgain(),$this.closest(".popup-holder").remove(),page.popupsOpen=0,page.topPopupType=!1;break;case"to_main_menu":audio.playSound("click"),page.$dynamicDOM.$.find(".popup-holder").last().remove(),page.popupsOpen=Math.max(0,page.popupsOpen-1),page.topPopupType=!1,i="main_menu";break;default:console.log("ACTIONTYPE: "+t+" fires no action - DEBUGGING NEEDED!")}!1!==i&&gameUI.showMenu(i),!1!==r&&game.refreshCurrentView()}}},"[data-action-type]"),this.$gameUI.$.on({mousedown:function(e){if(1===e.which)if(($this=$(this)).hasClass("minus")?audio.playSound("down"):$this.hasClass("plus")?audio.playSound("up"):void 0!==$this.attr("data-view")||$this.hasClass("tab")||audio.playSound("click"),$this.hasClass("change-explore-area"))hoverAction="change_explore_area",game.data.specialMessage=getLine("listeners_text1"),game.switchTo("territories"),e.stopPropagation();else if($this.parent().closest(".assign-cits").length>0){var t=(f=$this.closest(".box-data, .box-holder")).attr("data-type"),a=f.attr("data-subtype"),s=f.attr("data-id"),r=void 0!==$this.attr("data-cost-amounts")?parseInt($this.attr("data-cost-amounts")):game.state.assignAmount,i=0;$this.hasClass("plus")?i=r:$this.hasClass("minus")&&(i=-r),game.changeWorker(t,a,i,s),gameUI.checkDOMrefresh("change_worker",a)}else if("build_queue"===game.data.currentView){t=(f=$this.closest(".box-data")).attr("data-type"),a=f.attr("data-subtype");var o=f.attr("data-queue-id");s=f.attr("data-id"),i=0;$this.hasClass("plus")?i=1:$this.hasClass("minus")?i=-1:$this.hasClass("remove-all")&&(i=-game.state.buildQueue[o][1]),0!==i&&game.changeBuildQueue({type:t,subType:a,amount:i,id:s},o)}else if($this.hasClass("build")){t=(f=$this.closest(".box-data")).attr("data-type"),a=f.attr("data-subtype"),o=f.attr("data-queue-id"),s=f.attr("data-id");var n=helpers.common.getBuildingData(a,s),d=game.changeBuildQueue({type:t,subType:a,amount:n.buyAmount,id:s},o);if("mining_plant"!==a&&"factory"!==a&&"war_factory"!==a||($this.addClass("in-progress"),game.const.buildings[a].fullRefresh=!0),d){var c=!1;if($this.parent().find(".costs").length>0&&(c=$this.parent().find(".costs").html()),c&&!game.getSettingValue("hide_resource_animations")){var l={$onDOMelement:$this,originSide:"right",extraClasses:" over-ui anim-2s"};game.addAnimation("general_text",c,l)}}}else if($this.hasClass("choose-product")){t=(f=$this.closest(".box-holder")).attr("data-type"),a=f.attr("data-subtype"),s=f.attr("data-id");console.log("howmany changeproducts "+$this.closest(".section").find(".choose-product").length),$this.closest(".section").find(".choose-product").removeClass("disabled"),$this.addClass("disabled"),game.state.buildings.factory[s].producing=a,game.switchTo("factories")}else if($this.hasClass("check-market")){t=(f=$this.closest(".box-holder")).attr("data-type"),a=f.attr("data-subtype");helperData.chartTypeShown=a,$this.closest(".section").find(".check-market").removeClass("disabled"),$this.addClass("disabled"),helpers.market.updateChartData(!0),refreshUI.partialRefresh=!0}else if($this.hasClass("sell-product")){a=$this.attr("data-subtype");var g,m=(p=$this.attr("data-type").toString().split("_")).length>1?"percent":"number",u=Number(p[0]);g=void 0!==game.state.resources[a]?(h=game.state.resources[a]).amount:(h=game.state.products[a]).avl,i=u,"percent"===m&&(i=g*(u/=100)),i=Math.floor(i);i=parseInt(g*u);game.executeTrade("sell",a,i)}else if($this.hasClass("buy-product")){var p,h;a=$this.attr("data-subtype"),m=(p=$this.attr("data-type").toString().split("_")).length>1?"percent":"number",u=Number(p[0]);if(g=void 0!==game.state.resources[a]?(h=game.state.resources[a]).amount:(h=game.state.products[a]).avl,i=u,"percent"===m){u/=100;var v=h.price_history[h.price_history.length-1];i=Math.floor(game.state.resources.gold.amount*u/v.bP)}i=Math.floor(i),game.executeTrade("buy",a,i)}else if($this.hasClass("try-again"))game.stateHandling.resetLoad(game.stateHandling.saveGamesData.currentSaveID),game.resetGameState(!0),$this.closest(".popup-holder").remove(),page.popupsOpen=0,skipStartScene?gameUI.showMenu("start_menu"):page.playVideo("start_scene");else if($this.hasClass("demolish"))gameUI.showQuickPopup("demolish",$this);else if($this.hasClass("full-stats")){var f;t=(f=$this.closest(".box-data")).attr("data-type"),a=f.attr("data-subtype"),s=f.attr("data-id");gameUI.showPopup("detailed_stats",{type:t,subType:a,id:s})}else if($this.hasClass("scrap")){var y=$this.parent().attr("data-part-id").parseNumber(),b=$this.attr("data-type");console.log("to be removeID : "+y),console.log("to be removed type: "+b),c=getLine("normal"===b?"listeners_text2":"listeners_text3"),gameUI.showConfirmationPrompt(c,(function(){audio.playSound("trash"),game.scrapPart(y,b),game.refreshCurrentView(),"pending"===b&&gameUI.showPopup("pending_parts")}),(function(){}))}else if($this.hasClass("ok"))$this.closest(".popup-holder").remove(),page.popupsOpen=Math.max(0,page.popupsOpen-1);else if($this.hasClass("buy-research")){var _=$this.attr("data-type");$this.closest(".popup-holder").remove(),page.popupsOpen=Math.max(0,page.popupsOpen-1),game.buyResearchUpgrade(_),gameUI.showQuickPopup("research_details")}else if($this.hasClass("next-mission"))helperData.currentSubTab++,helperData.currentSubTab>=game.const.objectiveGroups.length&&(helperData.currentSubTab=0),gameUI.checkDOMrefresh("popup_refresh","objectives");else if($this.hasClass("hard-reset")){var w=getLine("listeners_text4");gameUI.showConfirmationPrompt(w,(function(){game.stateHandling.resetLoad()}),(function(){}))}}},".button"),this.$gameUI.$.on({mousedown:function(e){if(1===e.which){audio.playSound("tab");var t=($this=$(this)).attr("data-type"),a=!1;$this.closest(".popup-holder").length>0&&(a=$this.closest(".popup-holder").attr("data-type"));var s=$this.closest(".tabs-holder").hasClass("second-level");if(s?helperData.currentSubTab=t:helperData.currentTab=t,"corpus_upgrades"===a){var r=parseInt(t),i=game.state.corpuses[r].upgrades,o="disabled";$.each(i,(function(e,t){if(Number.isInteger(t))if("auraSize"===e){if(t>1)return o="",!1}else if(t>0)return o="",!1})),$this.closest(".popup-content").find(".reset-points").attr("data-corpus-id",t).removeClass("disabled").addClass(o)}if("manage_plans"===game.data.currentView){if(["hull","turret"].indexOf(t)>-1){var n;helperData.currentTab=t,n="pending"===game.data.currentSubTab?game.state.partsPending:game.state.parts;var d=0;if("hull"===helperData.currentTab)for(var c=0;c<n.length;c++)"hull"===n[c].type&&d++;else if("turret"===helperData.currentTab)for(c=0;c<n.length;c++)"turret"===n[c].type&&d++;"pending"===game.data.currentSubTab?$this.parent().parent().find(".parts-counter").html(getLine("pending_parts")+d):$this.parent().parent().parent().find(".parts-counter").html(getLine("inventory_parts")+d+"/"+game.const.partsMaxAmount)}else if(t.includes("plan")){var l=parseInt($(this).attr("data-subtype"));game.data.currentCorpusID=l,gameUI.prepareContent("manage_plans","normal")}$this.removeClass("tutorial-flicker")}if($this.parent().find("> .tab").removeClass("active"),$this.addClass("active"),s)$this.closest(".tabs-holder").find("> div > .tab-data").removeClass("active");else{var g="> .tab-data";helpers.common.isCurrentView("manage_plans")&&["hull","turret"].indexOf(t)>-1&&(g=".tab-data"),$this.closest(".tabs-holder").find(g).removeClass("active")}$this.closest(".tabs-holder").find('.tab-data[data-type="'+t+'"]').addClass("active")}}},".tab"),this.$gameUI.$.on({mouseenter:function(e){var t=$this=$(this),a=!1;if($this.hasClass("tutorial-flicker")){var s="lack_of_citizen";$this.hasClass("build")&&(s="lack_of_resources"),t={type:s,subType:!1},a=!0}page.showTooltip(e,t,a)},mousemove:function(e){page.recalculateTooltipPosition(e.pageX,e.pageY)},mouseleave:function(e){page.hideToolTip()},mousedown:function(e){page.hideToolTip()}},"[data-tooltip-type], .tutorial-flicker.disabled"),this.$gameUI.$.on({mousedown:function(e){if(1===e.which&&!($(e.target).closest("#dynamicDOM").length>0)){if(page.playingCutscene)if(audio.playSound("click"),page.videoContainer.video.currentTime>1){for(var t=page.videoContainer.video.currentTime,a=0;a<page.videoContainer.skipPoints.length;a++)if(page.videoContainer.skipPoints[a]>t){t=page.videoContainer.skipPoints[a],!1!==helperData.activeTextTyper&&(helperData.activeTextTyper.forceStopTyping(),helperData.activeTextTyper=!1);break}page.showLoader(),page.videoContainer.video.currentTime=Math.min(page.videoContainer.video.duration,t),forceUpdateDisplay=!1}if(isDragging=!1,clickStarted=!0,"battle"===game.data.currentView){if(game.data.draggingTank){if(!helpers.common.checkIfObjectOverlapsWithAnythingElse()){var s;for(a=0;a<game.data.buttons.length;a++)if(s=game.data.buttons[a],null!==game.data.currentDrawableVehicle&&s.parentGlobalID===game.data.currentDrawableVehicle.globalID){var r={x:game.data.currentDrawableVehicle.x+5,y:game.data.currentDrawableVehicle.y+15,button:s};game.changeButtonLocation(s.buttonType,r),forceDrawAll=!0}if(void 0!==game.data.currentDrawableVehicle&&null!==game.data.currentDrawableVehicle&&void 0!==game.data.currentDrawableVehicle.auraRef){var i=game.state.corpuses[game.data.currentDrawableVehicle.corpusID];game.data.currentDrawableVehicle.auraRef.x=game.data.currentDrawableVehicle.x+game.data.currentDrawableVehicle.w/2-i.upgrades.auraSize*game.const.auraEffectRadius/2-5,game.data.currentDrawableVehicle.auraRef.y=game.data.currentDrawableVehicle.y+game.data.currentDrawableVehicle.h/2-i.upgrades.auraSize*game.const.auraEffectRadius/2}if(game.data.lastCircleX=game.data.currentDrawableVehicle.x,game.data.lastCircleY=game.data.currentDrawableVehicle.y,!game.data.relocatingTank){game.data.currentDrawableVehicle.globalID;helpers.units.addDynamicUnit(game.data.currentDrawableVehicle)}if(r={posX:game.data.lastCircleX,posY:game.data.lastCircleY,corpusID:game.data.currentDrawableVehicle.corpusID},audio.playSound("click"),game.data.draggingTank=!1,game.data.relocatingTank)game.data.relocatingTank=!1,game.data.currentDrawableVehicle=null,forceDrawAll=!0;else if(game.state.corpuses[game.data.currentDrawableVehicle.corpusID].tanksAmount>0&&game.state.resources.citizens.idle>=game.state.corpuses[game.data.currentDrawableVehicle.corpusID].crew&&game.data.gameObjects.length<helpers.plans.getFormationSize())helpers.units.createVehicle(r);else{var o="";0===game.state.corpuses[game.data.currentDrawableVehicle.corpusID].tanksAmount?o=getLine("listeners_text5"):game.state.resources.citizens.idle<game.state.corpuses[game.data.currentDrawableVehicle.corpusID].crew?o=getLine("listeners_text6"):game.data.gameObjects.length>=helpers.plans.getFormationSize()&&(o=getLine("listeners_text7"));var n={x:game.data.currentDrawableVehicle.x,y:game.data.currentDrawableVehicle.y};game.addAnimation("general_text",o,n),game.data.currentDrawableVehicle=null,game.data.draggingTank=!1}refreshUI.battleMenu=!0}return}var d=$(this).offset().left,c=$(this).offset().top,l=e.pageX-d-helpers.common.getCanvasOffsetX()-game.data.cameraXoffset-helperData.canvasBoundaries.x,g=e.pageY-c-helpers.common.getCanvasOffsetY()-game.data.cameraYoffset-helperData.canvasBoundaries.y,m={x:l/=pixelRatio,y:g/=pixelRatio,w:1,h:1},u=helpers.common.checkIfAnyObjectClicked(m);if(!1!==u&&"button"===u.type){var p=u.object.buttonType,h=u.object.parentGlobalID;if("remove"===p)game.removeSquadronFromAll(h),forceDrawAll=!0;else if("addMore"===p){var v,f,y;audio.playSound("click");for(a=0;a<game.data.gameObjects.length;a++)if(game.data.gameObjects[a].globalID===h){v=(y=game.data.gameObjects[a]).tanksAmount;break}if(game.fillASquadron(h,u),f=y.tanksAmount,isUndefined(v)||isUndefined(f)||f>v&&helpers.units.updateGameObjectStats(y),!isUndefined(v)&&!isUndefined(f)){var b=f-v;i=game.state.corpuses[y.corpusID];n={x:(A=page.$gameUI.$overlay.find('.battle-menu .corpus-holder .amount-holder[data-type="'+y.corpusID+'"]').offset()).left+30,y:A.top-10,forceDraw:!0,subType:"res_added"},o="-"+b,b>0?game.addAnimation("general_text",o,n):page.$gameUI.$overlay.find(".battle-menu .utility-subholder .idle-citizens-amount").addClass("red animScale"),n={x:(A=page.$gameUI.$overlay.find(".battle-menu .utility-widget .crew-fighting").offset()).left,y:A.top,forceDraw:!0,subType:"res_added"},b>0&&(o=getLine("crew_added",b*i.crew),game.addAnimation("general_text",o,n))}}}else if(!1!==u&&"gameObject"===u.type){if(game.data.battleStarted)return;var _=u.object.corpusID;i=game.state.corpuses[_];if(game.data.leaderEnabled){if(i.upgrades.auraAmount>0){var w,x=!1;for(a=0;a<game.data.gameObjects.length;a++)(w=game.data.gameObjects[a]).corpusID===_&&(w.isLeader&&(x=!0),w.isLeader=!1,delete w.auraRef);audio.playSound("click"),u.object.isLeader=!0,helpers.units.refreshGameObjectsState(),(r={}).subType="hp",r.corpusID=_;for(a=0;a<game.data.auras.length;a++)game.data.auras[a].corpusID===_&&game.data.auras.splice(a,1);r.subType=i.upgrades.auraType,d=u.object.x+u.object.w/2-i.upgrades.auraSize*game.const.auraEffectRadius/2,c=u.object.y+u.object.h/2-i.upgrades.auraSize*game.const.auraEffectRadius/2;var k=new Aura(d-5,c,i.upgrades.auraSize*game.const.auraEffectRadius,i.upgrades.auraSize*game.const.auraEffectRadius,r);game.data.auras.push(k),u.object.auraRef=k;var D,I=0;for(a=0;a<game.state.corpuses.length;a++){D=!1;for(var C=0;C<game.data.gameObjects.length;C++)if(game.data.gameObjects[C].corpusID===a){D=!0;break}game.state.corpuses[a].upgrades.auraAmount>0&&game.state.corpuses[a].tanksAmount>0&&D&&(I+=1)}var T=0;for(a=0;a<game.data.gameObjects.length;a++)void 0!==game.data.gameObjects[a].auraRef&&(T+=1);if(console.log("total auras used: "+T),console.log("totalAurasAvailable: "+I),I===T&&!x){console.log("animation should be shown");var A;n={x:(A=page.$gameUI.$overlay.find(".battle-menu .aura-widget .amount-holder").offset()).left+18,y:A.top-30,forceDraw:!0,subType:"fully_filled"},o=getLine("listeners_text8");game.addAnimation("general_text",o,n)}var P={preserveLeader:game.data.leaderEnabled};game.refreshCurrentView(P)}}else audio.playSound("click"),game.data.draggingTank=!0,game.data.currentDrawableVehicle=u.object,game.data.currentDrawableVehicleID=u.object.globalID,game.data.relocatingTank=!0,game.data.currentLastX=u.object.x,game.data.currentLastY=u.object.y,forceDraw=!0,game.addTrash()}}else"world"===game.data.currentView&&(page.$popupTooltip.removeClass("shown"),game.data.toolTip.shown=0);if(page.quickPopupOpen&&page.canCloseQuickPopup)if(!$(e.target).closest(".quick-popup-holder").length)page.$dynamicDOM.$.find(".quick-popup-holder").hasClass("ignore-quick-close")||gameUI.showQuickPopup(!1,!1,!0)}},mousemove:function(e){if(e.target.matches("#gameUI"));else{if(e.target.matches(".notifications"))return;if($(e.target).closest(".ui-holder").length>0)return void(["region_data","territory_data","tile_data"].indexOf(page.$popupTooltip.attr("data-type"))>-1&&page.hideToolTip());if($(e.target).closest("#dynamicDOM").length>0)return}if("research"!==game.data.currentView){if(page.popupsOpen>0)return;if(e.target.matches(".item"))return}clickStarted&&!isDragging&&(isDragging=!0,draggingStartPos.x=e.pageX,draggingStartPos.y=e.pageY,draggingDistanceTravelled=0);var t=0,a=0;isDragging&&(t=e.pageX-draggingLastPos.x,a=e.pageY-draggingLastPos.y,draggingDistanceTravelled+=Math.abs(t)+Math.abs(a),forceDrawAll=!0),draggingLastPos.x=e.pageX,draggingLastPos.y=e.pageY;var s=$(this).offset().left,r=$(this).offset().top,i=e.pageX-s-helpers.common.getCanvasOffsetX()-game.data.cameraXoffset-helperData.canvasBoundaries.x,o=e.pageY-r-helpers.common.getCanvasOffsetY()-game.data.cameraYoffset-helperData.canvasBoundaries.y;if(i/=pixelRatio,o/=pixelRatio,!1!==page.tutorialArrowData&&page.updateTutorialArrow(),"battle"===game.data.currentView&&null!==game.data.currentDrawableVehicle&&game.data.draggingTank){game.data.currentDrawableVehicle.x=i,game.data.currentDrawableVehicle.y=o,game.data.currentDrawableVehicle.centerX=game.data.currentDrawableVehicle.x+game.data.currentDrawableVehicle.w/2,game.data.currentDrawableVehicle.centerY=game.data.currentDrawableVehicle.y+game.data.currentDrawableVehicle.h/2;var n=helpers.common.checkIfObjectOverlapsWithAnythingElse();game.data.currentlyOverlaysObject=!!n}else{if(page.mousePos.x=i,page.mousePos.y=o,isDragging&&"research"===game.data.currentView&&!editingTreeNode){var d=helpers.common.checkMouseCollission(game.data.researchNodes);!1!==d&&alowTreeNodeEdit&&(editingTreeNode=!0,editingTreeNodeID=d)}var c=!1;switch(game.data.currentView){case"world":!((c=GridFactory.pointToHex(i,o)).x>=game.const.gameGrids.regions.cols||c.y>=game.const.gameGrids.regions.rows)&&c.x>=0&&c.y>=0?(hoverCellRef=c.x.toString()+"_"+c.y.toString(),hoverCellRef=game.data.gameGrids[hoverCellRef].ref,helperData.hoveredContinent=game.data.gameGrids[hoverCellRef].continent,c=!0):c=!1;break;case"territories":case"battle_select":var l=game.const.gameGrids["territories"===game.data.currentView?"territories":"zones"],g=Math.floor(i/l.gridW),m=Math.floor(o/l.gridH);g<0||m<0||m>=l.rows||g>=l.cols||(hoverCellRef=g.toString()+"_"+m.toString(),c=!0)}if(c||!1===hoverCellRef?c&&(forceDrawAll=!0):(hoverCellRef=!1,helperData.hoveredContinent=!1),"battle"===game.data.currentView){if(game.data.artillery.enabled){var u=e.pageX-s-game.data.cameraXoffset*pixelRatio-45*pixelRatio,p=e.pageY-r-game.data.cameraYoffset*pixelRatio-25*pixelRatio;page.$dynamicDOM.$artilleryTime.css({transform:"translate("+u+"px,"+p+"px)"}),u=e.pageX-s-game.data.cameraXoffset*pixelRatio-100*pixelRatio,p=e.pageY-r-game.data.cameraYoffset*pixelRatio-60*pixelRatio,page.$dynamicDOM.$cursorNote.css({transform:"translate("+u+"px,"+p+"px)"})}if(17===keyPressed){hoverObjectRef=helpers.common.checkMouseCollission(game.data.enemyObjects)}}else if(["territories","battle_select","world"].indexOf(game.data.currentView)>-1&&!1!==hoverCellRef){var h="world"===game.data.currentView?"region_data":"territories"===game.data.currentView?"territory_data":"tile_data",v=Math.ceil(i/cellSize)*cellSize,f=Math.floor(o/cellSizeH)*cellSizeH;if(v=(v-i)*pixelRatio+e.pageX,f=(f-o)*pixelRatio+e.pageY,v>pageWidth&&(v-=2*cellSize*pixelRatio),f<0&&(f=0),!game.data.showOnlyStartingTer){var y={cellRef:hoverCellRef,x:v,y:f};page.showStaticToolTip(h,y)}}if(["research","battle_select","battle","world","territories"].indexOf(game.data.currentView)>-1){if(isDragging)if(editingTreeNode){var b=game.data.staticObjectsRefs[editingTreeNodeID];b.x+=parseInt(t/pixelRatio),b.y+=parseInt(a/pixelRatio),b.nodeRef.xP+=parseInt(t/pixelRatio),b.nodeRef.yP+=parseInt(a/pixelRatio),setChildrenPositions([b.nodeRef.upgradeID]);var _=getCollidableNodes(b.nodeRef);if(_.length>0){globalCollidableNodesIDs=getNodeIDs(_);var w=helpers.common.checkObjectCollissions(b,_);!1!==w&&changeNodeParent(b.nodeRef,w)}updateNodeObjectPositions()}else-1===["battle"].indexOf(game.data.currentView)&&("territories"===game.data.currentView&&game.data.showOnlyStartingTer||helpers.drawing.transitionOffset({x:parseInt(t),y:parseInt(a)}));if("research"===game.data.currentView&&!1!==(hoverObjectRef=helpers.common.checkMouseCollission(game.data.researchNodes))&&!isDragging){var x=game.data.staticObjectsRefs[hoverObjectRef].nodeRef;v=x.x+129,f=x.y;v=(v-i)*pixelRatio+e.pageX,f=(f-o)*pixelRatio+e.pageY,v>pageWidth&&(v-=258*pixelRatio),f<0&&(f=0);y={upgradeID:x.upgradeID,x:v,y:f};page.showStaticToolTip("upgrade_data",y)}var k=!1;"world"!==game.data.currentView||!1===hoverCellRef||game.data.gameGrids[hoverCellRef].attackable&&game.data.canAttackNewRegion||!game.data.gameGrids[hoverCellRef].enemy||(k=!0),k||!1===hoverObjectRef&&!1===hoverCellRef&&"battle"!==game.data.currentView||!1!==hoverCellRef&&"territories"===game.data.currentView&&(game.data.gameGrids[hoverCellRef].closestPlayerTer>2||game.data.showOnlyStartingTer)&&game.data.gameGrids[hoverCellRef].enemy?page.$gameUI.$.attr("cursorType","default"):"battle"!==game.data.currentView&&page.$gameUI.$.attr("cursorType","pointer")}(isDragging||!1===hoverCellRef&&!1===hoverObjectRef&&2===game.data.toolTip.shown)&&page.hideToolTip()}},mouseup:function(e){if(clickStarted&&!($(e.target).closest("#dynamicDOM").length>0)){var t=!1;$(e.target).closest(".ui-holder").length>0&&(t=!0);var a=isDragging;isDragging=!1,clickStarted=!1,editingTreeNode=!1,editingTreeNodeID=!1,globalCollidableNodesIDs=[];var s=draggingDistanceTravelled;if(draggingDistanceTravelled=0,!a||s<100){if(page.popupsOpen>0)return;if(e.target.matches(".item"))return;if(e.target.matches(".notifications"))return;if(game.state.gameDate,game.const.startTimestamp,game.const.realToGameTime,!1!==hoverCellRef){if("world"===game.data.currentView&&game.data.canAttackNewContinent&&!1!==helperData.hoveredContinent&&helpers.territory.isLockedContinent(helperData.hoveredContinent))return void gameUI.showConfirmationPrompt(getLine("listeners_text9"),(function(){helpers.territory.attackContinent(helperData.hoveredContinent)}),(function(){helperData.hoveredContinent=!1}));var r;switch(game.data.currentView){case"world":"territories",r="regions";break;case"territories":"zones",r="territories";break;case"battle_select":"regions",r="zones"}}if("battle_select"===game.data.currentView&&!1!==hoverCellRef){if(game.state.currentParentGrids[r]=hoverCellRef,game.state.gameGrids.zones[game.state.currentParentGrids.regions][game.state.currentParentGrids.territories][hoverCellRef].enemy&&game.checkIfAttackable("zones",hoverCellRef,!0)){game.state.currentParentGrids.zones=hoverCellRef,game.state.lastBattledTerritory=game.state.currentParentGrids.territories,game.data.pendingBattleData={attackType:"attack",tileAttack:!0,terRef:game.state.currentParentGrids.territories,terTileRef:game.state.currentParentGrids.zones,finished:!1};for(var i=!1,o=0;o<game.state.corpuses.length;o++)if(game.state.corpuses[o].tanksAmount){i=!0;break}i||game.data.gameObjects.length>0?(game.switchTo("battle"),audio.playSound("click"),game.data.automationData.enableAttack=!1,game.data.automationData.nextAttackIn=0):gameUI.showPopup("tanks_needed")}}else if("world"===game.data.currentView&&!1!==hoverCellRef){if(audio.playSound("click"),!1===helperData.setupColony||t)isUndefined(game.state.colonies.military[hoverCellRef])?isUndefined(game.state.colonies.economic[hoverCellRef])?game.data.gameGrids[hoverCellRef].enemy&&!helpers.territory.attackRegion(hoverCellRef)||(game.state.currentParentGrids[r]=hoverCellRef,game.switchTo("territories")):gameUI.showQuickPopup("colony_details",!1,!1,{gridRef:hoverCellRef,type:"economic"}):gameUI.showQuickPopup("colony_details",!1,!1,{gridRef:hoverCellRef,type:"military"});else if(console.log("mousePos: "+JSON.stringify(page.mousePos)),game.data.gameGrids[hoverCellRef].enemy&&"land"===game.data.gameGrids[hoverCellRef].landType&&isUndefined(game.state.colonies.military[hoverCellRef])&&isUndefined(game.state.colonies.economic[hoverCellRef])){var n=game.data.gameGrids[hoverCellRef];helperData.setupColony.x=n.x-1,helperData.setupColony.y=n.y-1,helperData.setupColony.staticRef=hoverCellRef,game.data.colonies.push(helperData.setupColony),helperData.tempColony=helpers.colonies.getColonyData(helperData.setupColony.subType,hoverCellRef),gameUI.showQuickPopup("colony_details",!1,!1,{gridRef:hoverCellRef,type:helperData.setupColony.subType}),helperData.setupColony=!1,forceDrawAll=!0}}else if("territories"===game.data.currentView&&!1!==hoverCellRef)if(game.state.currentParentGrids[r]=hoverCellRef,game.data.gameGrids[hoverCellRef].enemy){if("conquest"===game.data.currentViewType&&game.data.gameGrids[hoverCellRef].enemy&&!game.data.showOnlyStartingTer)game.state.currentParentGrids.territories=hoverCellRef,void 0!==game.state.defenses[game.state.currentParentGrids.territories]?(game.data.pendingBattleData={attackType:"defend",tileAttack:!1,terRef:game.state.currentParentGrids.territories,terTileRef:!1,finished:!1},audio.playSound("click")):game.checkIfAttackable("territories",hoverCellRef)&&game.switchTo("battle_select");else if(!game.data.showOnlyStartingTer)if(game.getSettingValue("hide_buy_territory_prompt"))game.buyTerritory(hoverCellRef);else{var d=game.state.gameGrids.territories[game.state.currentParentGrids.regions][hoverCellRef].price,c=getLine("listeners_text10")+'<div class="icon small gold"></div>'+d.formatNumber(2,2)+"?";c+="<br /><br />"+gameUI.printSetting("hide_buy_territory_prompt",{extraClasses:"checkbox"}),gameUI.showConfirmationPrompt(c,function(e){game.buyTerritory(e)}.bind(null,hoverCellRef),(function(){}))}}else game.changeExploreArea(hoverCellRef);else if("battle"===game.data.currentView){if(17===keyPressed&&!1!==hoverObjectRef){cleanInstructions&&game.clearAimPriority(),cleanInstructions=!1;let e=game.data.aimPriority.indexOf(hoverObjectRef);e>-1?game.data.aimPriority[e]=hoverObjectRef:game.data.aimPriority.push(hoverObjectRef),game.data.objectRefs[hoverObjectRef].aimPriority=game.data.aimPriority.length}}else if("research"===game.data.currentView&&!1!==hoverObjectRef){var l=game.data.staticObjectsRefs[hoverObjectRef],g=game.const.researchUpgrades[l.nodeRef.upgradeID],m=game.state.researchUpgrades[l.nodeRef.upgradeID],u=void 0!==g.buyLimit?g.buyLimit:1,p=!1;if(l.nodeRef.startNodePos)p=!0;else{l.nodeRef.parentNode.upgradeID;void 0!==game.state.researchUpgrades[l.nodeRef.parentNode.upgradeID]&&(p=!0)}void 0!==m&&parseInt(m)>=u&&(p=!1),helperData.currentTab=l.nodeRef.upgradeID,game.getSettingValue("research_quick_buy")?p&&game.buyResearchUpgrade(g.id):(audio.playSound("click"),gameUI.showQuickPopup("research_details"))}}}},mouseleave:function(e){isDragging=!1,clickStarted=!1}},".overlay"),this.$gameUI.$.on({mousedown:function(e){1===e.which&&(page.quickPopupOpen&&page.canCloseQuickPopup&&($(e.target).closest(".quick-popup-holder").length||page.$dynamicDOM.$.find(".quick-popup-holder").hasClass("ignore-quick-close")||gameUI.showQuickPopup(!1,!1,!0)))}}),this.$dynamicDOM.$.on({mousedown:function(e){page.quickPopupOpen&&page.canCloseQuickPopup&&($(e.target).closest(".quick-popup-holder").length||page.$dynamicDOM.$.find(".quick-popup-holder").hasClass("ignore-quick-close")||gameUI.showQuickPopup(!1,!1,!0))}},".extra-overlay"),this.$gameUI.$.on("wheel",(function(e){if(!($(e.target).closest("#dynamicDOM").length>0||$(e.target).closest(".ui-holder").length>0)&&["research","battle_select","battle","world","territories"].indexOf(game.data.currentView)>-1){e.preventDefault();game.data.showOnlyStartingTer&&"territories"===game.data.currentView||(e.originalEvent.deltaY>0?helpers.drawing.transitionZoom(.85*pixelRatio):helpers.drawing.transitionZoom(1.15*pixelRatio))}})),this.$gameUI.$.on({input:function(e){var t=($this=$(e.target)).val();if($this.hasClass("slider")){audio.playSound("click");var a=$this.closest(".slide-container");if(t=Number(t),"setting"===$this.attr("data-subtype")){var s=$this.attr("data-type");game.changeSettingValue(s,t/100,{fromDOM:!1}),a.find(".slider-value span.current-sett-value").length>0&&a.find(".slider-value span.current-sett-value").html(t+"%")}else{console.log("pride v else");var r=Number(helperData.tempData),i=Number(helperData.currentInput),o=i+r,n=t;if(t>i&&(n=Math.min(t,o)),helperData.currentInput=n,$this.val(n),helperData.tempData+=i-n,a.find(".slider-value span.total-value").length>0){s=$this.attr("data-type");var d=game.const.startingBoosts[s];d.cur=n;var c=d.perPoint,l=c*n,g=l.formatNumber(2,2);-1===["starting_resources","starting_citizens"].indexOf(s)&&(g=(100*l).formatNumber(2,2)+"%"),a.find(".slider-value span.total-value").html("+"+g)}a.parent().find(".perk-points-left").length>0&&a.parent().find(".perk-points-left span").html(helperData.tempData.formatNumber(2,2)),helperData.tempData>0?(page.$gameUI.$.find(".distribute-all-perk-points").removeClass("hidden"),page.$gameUI.$.find('.button-style[data-type="start_game"]').addClass("disabled")):(page.$gameUI.$.find(".distribute-all-perk-points").addClass("hidden"),page.$gameUI.$.find('.button-style[data-type="start_game"]').removeClass("disabled"))}}else if($this.hasClass("order-amount")){var m=(a=$this.closest(".below-chart")).find(".new-trade-order").attr("data-type");isNaN(t)&&(t=1),(t=Number(t))<=0&&(t=1),t=Math.floor(t),helperData.currentInput=t,helperData.inputFocus=!0,helperData.currentSubInput=!1;var u=gameUI.prepareDOM("newOrderData",{type:m,amount:t});a.html(u)}},focus:function(e){($this=$(e.target)).val();helperData.inputFocus=!0},mousedown:function(e){var t=($this=$(e.target)).val();helperData.currentInput=t}},".slider, .order-amount"),this.$gameUI.$.on({mousedown:function(e){if(1===e.which){var t=($this=$(this)).attr("execute-action"),a=$this.attr("data-type");switch(helperData.inputFocus=!1,t){case"change_order_type":var s=$this.closest(".below-chart");helperData.currentSubInput=!1,helperData.currentInput=!1,helperData.currentSubTab=a;var r=gameUI.prepareDOM("newOrderData",{type:a,amount:!1});s.html(r);break;case"change_order_amount":var i,o=(s=$this.closest(".below-chart")).find(".new-trade-order").attr("data-type");helperData.currentSubInput=a,a=Number(a)/100;var n=void 0!==(i=helpers.common.isResource(helperData.chartTypeShown)?game.state.resources[helperData.chartTypeShown]:game.state.products[helperData.chartTypeShown]).avl?i.avl:i.amount;"buy"===o&&(n=game.state.resources.gold.amount),console.log("change order amoun type "+o+" amount: "+n),n=Math.floor(n*a*100)/100,n=Math.max(1,n);r=gameUI.prepareDOM("newOrderData",{type:o,amount:n});s.html(r);break;case"execute_order":game.executeTrade(a,helperData.chartTypeShown,Number(helperData.currentInput))}}}},"[execute-action]"),this.$gameUI.$fightOptions.on({mousedown:function(e){var t=($this=$(this)).attr("data-type");page.toggleFightOptions(t)}},".choice"),this.$gameUI.$artilleryOptions.on({mousedown:function(e){var t=($this=$(this)).attr("data-type");page.toggleArtillery(t)}},".choice"),this.$gameUI.$.on({mousedown:function(e){if($this=$(this),1===e.which){audio.playSound("tab");var t=$this.attr("data-type"),a=$this.attr("data-value"),s={fromDOM:$this};game.changeSettingValue(t,a,s)}}},".setting, .setting-icon"),this.$gameUI.$overlay.on({mousedown:function(e){if($this=$(this),1===e.which){$this.attr("data-type");"battle_select"===game.data.currentView?(game.data.automationData.enableAttack=!1,game.data.battleStarted=!1,console.log("battle started set to false on stop auto"),game.data.automationData.nextAttackIn=0,page.$gameUI.$overlay.find(".automation-note").remove()):"territories"===game.data.currentView&&(game.data.automationData.enableAttack=!1,game.data.automationData.nextTerAttackIn=0,page.$gameUI.$overlay.find(".automation-note").remove())}}},".controls .stop-auto"),$("body").on({keypress:function(e){var t=(e=e||window.event).which||e.keyCode;String.fromCharCode(t);switch(t){case 49:page.toggleFightOptions("auto_fire");break;case 50:page.toggleArtillery("mg_1");break;case 51:page.toggleArtillery("gun_1")}},keydown:function(e){var t=(e=e||window.event).which||e.keyCode;switch(e.ctrlKey&&"D"===String.fromCharCode(e.keyCode)&&e.preventDefault(),keyHeld=t,t){case 17:17!==keyPressed&&(cleanInstructions=!0),keyPressed=t,keyHeld=t;break;case 27:if(page.popupsOpen>0){var a=page.$dynamicDOM.$.find(".popup-holder").attr("data-type");if((page.$dynamicDOM.$.find(".popup-holder").last().hasClass("fullscreen")||"steam_note"===a)&&(gameLoop.pause(!1),"steam_note"===a)){var s=helpers.state.getAppStat("playTimeTotal");helpers.state.setAppStat("lastSteamNoteShownAt",s)}page.$dynamicDOM.$.find(".popup-holder").last().remove(),page.popupsOpen=Math.max(0,page.popupsOpen-1)}break;case 68:17===keyPressed&&gameUI.showPopup("dev_panel");break;case 70:var r=!game.getSettingValue("hide_all_tooltips");game.changeSettingValue("fullscreen",r,!1)}},keyup:function(e){var t=(e=e||window.event).which||e.keyCode;switch(keyHeld=!1,t){case 17:keyPressed=!1,cleanInstructions=!1}}}),this.$animationsAttachPoint.on(animationEnd,".animation",(function(){$(this).off(),$(this).remove()})),this.$gameContent.on(animationEnd,".anim_class",(function(){$(this).attr("class",(function(e,t){return t.replace(/(^|\s)anim_\S+/g,"")}))})),this.$dynamicDOM.$.on(animationEnd,".notification.animation",(function(){"fadeInHeightStay"===$(this).css("animation-name")?$(this).css({animation:"fadeOutHeight 0.5s ease-out"}):$(this).remove()})),this.$dynamicDOM.$.on(animationEnd,".shake",(function(e){"shake"===e.originalEvent.animationName&&$(this).removeClass("shake")})),this.$dynamicDOM.$.on({mousedown:function(e){if(1===e.which){audio.playSound("click");var t=this;setTimeout(function(){$(t).remove()}.bind(null,t),10)}}},".notification.animation")},init:function(){this.initDOM(),this.initEventListeners(),this.beginLoadingStage(),this.loadVideos(),gameLoop.pause(!0),game.data.mojKrscenmaticek=krscenmaticek(tetaPehta),game.data.mojTristokosmatih=tristokosmatih(tetaPehta),fireThirdPartyAction("request_video_ad",{force:!0})},beginLoadingStage:function(){this.isLoading=!0,!1===this.loadingInfo.stage&&(this.loadingInfo.stage="images"),console.log("Beggining LOADING stage: "+page.loadingInfo.stage+" Timestamp: "+performance.now());var e="",t=page.loadingInfo[page.loadingInfo.stage];switch(GameAnalytics("addDesignEvent","LoadStatus:BeginStage_"+page.loadingInfo.stage,parseInt(performance.now()/1e3)),page.loadingInfo.stage){case"images":this.loadImages(),e=getLine("loading_info_"+page.loadingInfo.stage)+"("+t.current+"/"+t.total+")";break;case"videos":this.loadVideos(),e=getLine("loading_info_"+page.loadingInfo.stage)+"("+t.current+"/"+t.total+")";break;case"initialize":game.initMenu(!0),e=getLine("loading_info_"+page.loadingInfo.stage),GameAnalytics("addDesignEvent","LoadStatus:AllLoaded",parseInt(performance.now()/1e3)),GameAnalytics("addDesignEvent","LoadStatus:FullLoadTime",parseInt(performance.now()/1e3))}page.$gameLoading.$description.html(e)},showLoading:function(e){page.$gameLoading.$description.html("Loading text"),page.updateLoading({progress:0}),page.$gameLoading.$.removeClass("not-displayed").fadeIn(250)},updateLoading:function(e){var t=page.loadingInfo[page.loadingInfo.stage];t.current=e.current;var a=t.current/t.total;page.$gameLoading.$progressBar.attr("data-progress",a),page.$gameLoading.$progressText.html(Math.floor(100*a)+"%");var s=getLine("loading_info_"+page.loadingInfo.stage),r=s+"("+t.current+"/"+t.total+")";t.final&&(r=s),page.$gameLoading.$description.html(r),a>=1&&!1!==t.nextStage?(console.log("Finished LOADING stage: "+page.loadingInfo.stage),page.loadingInfo.stage=t.nextStage,page.beginLoadingStage()):a>=1&&!0===t.final&&(console.log("Finished final LOADING stage: "+page.loadingInfo.stage+" Timestamp: "+performance.now()),page.isLoading=!1,page.$gameLoading.$.fadeOut(1e3),setTimeout((function(){}),500))},loadImages:function(){var e=imageLoader.init();page.loadingInfo.images.current=0,page.loadingInfo.images.total=e.total},loadVideos:function(){page.loadingInfo.videos.current=0,page.loadingInfo.videos.total=1;var e=assetPath+"assets/videos/Starting_story4A_Simpocalypse_WithoutTEXTS.mp4",t=document.createElement("video");t.src=e,t.autoPlay=!1,t.loop=!1,t.muted=!0,t.onerror=function(e){console.log("video on error!"+e)},t.oncanplay=function(e){page.isLoading&&"videos"===page.loadingInfo.stage&&page.updateLoading({current:1});console.log("Video is ready to play!"),forceUpdateDisplay=!0,page.hideLoader()},t.onended=page.videoEnded,game.data.videos.start_scene=t},playVideo:function(e){var t=game.data.videos[e];page.videoContainer={video:t,ready:!1,skipPoints:[1,14,27,37],curScene:0};var a=page.$coverCanvas[0];page.showLoader(),page.$coverCanvas.addClass("force-in-front").fadeOut(0),setTimeout((function(){page.$coverCanvas.fadeIn(1e3,(function(){page.$dynamicDOM.$.find(".popup-holder").remove(),page.popupsOpen=0,page.$coverCanvas.addClass("no-pointer-events")}))}),0),page.videoContainer.scale=Math.min(a.width/t.videoWidth,a.height/t.videoHeight),page.videoContainer.ready=!0,page.playingCutscene=!0,page.$gameUI.$overlay.addClass("playing-cutscene"),forceUpdateDisplay=!0,void 0!==page.videoContainer&&page.videoContainer.ready&&(page.videoContainer.video.paused?(page.videoMuted=!1,page.videoContainer.video.muted=!1,page.videoContainer.video.play(),console.log("play video!")):page.videoContainer.video.pause())},videoEnded:function(e){gameUI.showMenu("start_menu"),page.$coverCanvas.fadeOut(1e3,(function(){page.$coverCanvas.removeClass("no-pointer-events"),page.$coverCanvas.fadeIn(0,(function(){page.$coverCanvas.removeClass("force-in-front"),page.hideLoader()}))})),page.playingCutscene=!1,page.$gameUI.$overlay.removeClass("playing-cutscene")},beginSceneTextWrite:function(e){if(!1!==helperData.activeTextTyper&&helperData.activeTextTyper.forceStopTyping(),!(page.videoContainer.curScene>=page.videoContainer.skipPoints.length)){var t=1e3*(page.videoContainer.skipPoints[e]-page.videoContainer.skipPoints[e-1])-2e3;setTimeout((function(){!1!=!helperData.activeTextTyper&&(helperData.activeTextTyper=!1)}),t),helperData.activeTextTyper=new textTyper({text:getLine("starting_story_text"+e),typeChars:!0,speed:100,speedChars:40,delay:0,parent:!1,fadeOutStart:performance.now()+t-1e3,fadeOutEnd:performance.now()+t,sound:!0,returnTimestampsData:!0,callback:function(e){helperData.activeTextTyper}}),helperData.activeTextTyper.startedTime=performance.now(),helperData.activeTextTyper.nextPrintIndex=0}},showLoader:function(e){"cover_screen"===e?page.$gameContent.append('<div class="loader-holder cover-screen"><div class="loader"></div></div>'):page.$gameContent.append('<div class="loader-holder"><div class="loader"></div></div>')},hideLoader:function(){page.$gameContent.find(".loader-holder").remove()},showTutorialArrow:function(e){page.$dynamicDOM.$.find(".tutorial-arrow").remove();page.$dynamicDOM.$.append('<div class="tutorial-arrow hidden" style="transform: rotate(70deg)"><div></div></div>'),page.updateTutorialArrow(e)},updateTutorialArrow:function(e){if(!1===page.tutorialArrowData&&(e||((e={}).target={x:200,y:300,w:50,h:50}),e.x=0,e.y=0,e.w=34,e.h=75,e.rotation=0,isUndefined(e.showOnView)&&(e.showOnView=!1),page.tutorialArrowData=e),!1===page.tutorialArrowData.showOnView||helpers.common.isCurrentView(page.tutorialArrowData.showOnView)){var t=helpers.common.getConvertedGameToCanvasData(page.tutorialArrowData.target),a=t.x+t.w/2,s=t.y+t.h/2;a+=helpers.common.getCanvasOffsetX(),s+=helpers.common.getCanvasOffsetY();var r=Math.max(page.tutorialArrowData.w,page.tutorialArrowData.h)/2,i=Math.max(helperData.canvasBoundaries.x,Math.min(helperData.canvasBoundaries.x+helperData.canvasBoundaries.w,a)),o=Math.max(helperData.canvasBoundaries.y,Math.min(helperData.canvasBoundaries.y+helperData.canvasBoundaries.h,s));page.tutorialArrowData.x=i-page.tutorialArrowData.w/2,page.tutorialArrowData.y=o-page.tutorialArrowData.h/2;var n=!1;page.tutorialArrowData.x-100-r<helperData.canvasBoundaries.x&&(page.tutorialArrowData.x+=50-r+t.w,n=!0),page.tutorialArrowData.y-r<helperData.canvasBoundaries.y&&(page.tutorialArrowData.y+=r/2,n=!0),page.tutorialArrowData.y+2*r>pageHeight&&(page.tutorialArrowData.y=Math.min(page.tutorialArrowData.y,pageHeight-2*r),n=!0);var d=a-(page.tutorialArrowData.x+page.tutorialArrowData.w/2),c=s-(page.tutorialArrowData.y+page.tutorialArrowData.h/2);page.tutorialArrowData.rotation=180*Math.atan2(c,d)/Math.PI+90;var l=page.tutorialArrowData.rotation*Math.PI/180,g=r+Math.max(t.w,t.h)/2;n||(g+=20);var m=l-Math.PI/2,u=-g*Math.cos(m),p=-g*Math.sin(m);page.tutorialArrowData.x+=u,page.tutorialArrowData.y+=p;var h="transform: translate("+page.tutorialArrowData.x+"px,"+page.tutorialArrowData.y+"px) rotate("+page.tutorialArrowData.rotation+"deg)";page.$dynamicDOM.$.find(".tutorial-arrow").attr("style",h),t.x+=helperData.canvasBoundaries.x,t.y+=helperData.canvasBoundaries.y,helpers.common.checkIfObjectFullyContained(helperData.canvasBoundaries,t)?page.$dynamicDOM.$.find(".tutorial-arrow").addClass("hidden"):page.$dynamicDOM.$.find(".tutorial-arrow").removeClass("hidden")}else!1!==page.tutorialArrowData&&page.removeTutorialArrow()},removeTutorialArrow:function(){page.tutorialArrowData=!1,page.$dynamicDOM.$.find(".tutorial-arrow").remove()},defineCanvasBoundaries:function(e){helperData.canvasBoundaries=!1===e?{coverOutline:!1,x:0,y:0,w:pageWidth,h:pageHeight}:{coverOutline:!0,x:e.x,y:e.y,w:e.w,h:e.h},$("#gameArea").addClass("auto-w-h").css({top:helperData.canvasBoundaries.y+"px",left:helperData.canvasBoundaries.x+"px"}).attr("width",helperData.canvasBoundaries.w).attr("height",helperData.canvasBoundaries.h),$("#staticArea").addClass("auto-w-h").css({top:helperData.canvasBoundaries.y+"px",left:helperData.canvasBoundaries.x+"px"}).attr("width",helperData.canvasBoundaries.w).attr("height",helperData.canvasBoundaries.h),$("#coverCanvas").addClass("auto-w-h").css({top:helperData.canvasBoundaries.y+"px",left:helperData.canvasBoundaries.x+"px"}).attr("width",helperData.canvasBoundaries.w).attr("height",helperData.canvasBoundaries.h)},toggleFightOptions:function(e,t){switch($this=page.$gameUI.$fightOptions.find('.choice[data-type="'+e+'"]'),e){case"auto_fire":t||$this.hasClass("off")?($this.removeClass("off"),game.data.autoFire.enabled=!0,page.$gameUI.$.attr("cursorType","default")):($this.addClass("off"),game.data.autoFire.enabled=!1,page.$gameUI.$.attr("cursorType","target"))}},toggleArtillery:function(e,t){if(null!==e)if($this=page.$gameUI.$artilleryOptions.find('.choice[data-type="'+e+'"]'),t||$this.hasClass("active"))$this.removeClass("active"),game.data.artillery.enabled=!1,page.$gameUI.$.attr("cursorType","default"),page.$dynamicDOM.$artilleryTime.addClass("not-displayed"),page.$dynamicDOM.$cursorNote.addClass("not-displayed");else{$this.parent().find(".choice.active").removeClass("active"),$this.addClass("active"),game.data.artillery.selectedType=e;var a=game.const.artillery[e];game.data.artillery.startsIn=a.startsIn,game.data.artillery.duration=a.duration,game.data.artillery.timeLeft=a.duration,game.data.artillery.fireRate=a.fireRate,game.data.artillery.damage=a.damage,game.data.artillery.enabled=!0,game.data.artillery.stateChange=!0,game.data.artillery.lastUpdate=0,page.$gameUI.$.attr("cursorType","target"),page.$dynamicDOM.$artilleryTime.removeClass("not-displayed"),page.$dynamicDOM.$cursorNote.removeClass("not-displayed")}},showTooltip:function(e,t,a){var s,r;void 0===a&&(a=!1),a?(s=t.type,f=t.subType):(t.is(":parent"),s=t.attr("data-tooltip-type"),f=t.attr("data-subtype"),r=t.attr("data-extra-params"));var i="",o="",n="";if(game.getSettingValue("hide_all_tooltips")||game.getSettingValue("hide_tooltips")&&["game_year","timelapse","res_info","view","view-category"].indexOf(s)>-1)page.hideToolTip();else{switch(s){case"achievements_rewards":i+=o=r;break;case"test":i+=o="Hello this is a test!";break;case"game_year":i+=o=getLine("show_tooltip_text0");break;case"timelapse":i+=o=getLine("show_tooltip_text1");break;case"play_pause":i+=o=getLine("show_tooltip_text50");break;case"soft_reset":i+=o=getLine("show_tooltip_text2");break;case"hard_reset":i+=o=getLine("show_tooltip_text3");break;case"job":i+=o='<div class="name">'+getLine("jobs_"+f)+"</div>"+getLine("jobs_"+f+"_desc");break;case"reinforcements":i+=o=getLine("show_tooltip_text4");break;case"corpus":if(f=parseInt(f),void 0===game.state.corpuses[f])o=getLine("show_tooltip_text5");else{o='<div class="name"><div class="green-desc">'+getLine("show_tooltip_text6")+"</div></div>";var d=game.const.corpusStatsNames,c=game.state.corpuses[f];o+=getLine("crew_needed")+c.crew+"<br />",o+=getLine("aura_upgrade")+": "+(c.upgrades.auraAmount>0?'<div class="green-desc">'+getLine("yes")+"</div>":getLine("no"))+"<br />",o+=getLine("hp")+": "+c.maxHp+"<br />",o+=getLine("max_squadron_size")+game.const.squadronSize[c.upgrades.maxSquadronSize]+"<br />",$.each(c.stats,(function(e,t){Object.keys(d).indexOf(e)>-1&&("object"==typeof t?t.max>0&&(t.max>t.min?o+=getLine("stats_names_"+e)+": "+t.min+" - "+t.max+"<br />":o+=getLine("stats_names_"+e)+": "+t.min+"<br />"):t>0&&(o+=getLine("stats_names_"+e)+": "+t+"<br />"))}))}i+=o;break;case"idle_citizens":i+=o=getLine("show_tooltip_text52");break;case"pending_full":i+=o=getLine("show_tooltip_text7");break;case"corpus_leader":i+=o=getLine("show_tooltip_text8");break;case"stat_info":switch(o='<div class="name">'+getLine("stats_"+f)+"</div>",f){case"infamy":o+=getLine("stats_"+f+"_desc",(100*game.const.infamyDailyReduction).formatNumber(2,2)+"%");break;case"notoriety":o+=getLine("stats_"+f+"_desc",(100*game.const.notorietyDailyReduction).formatNumber(2,2)+"%");break;case"diplomacy":o+=getLine("stats_"+f+"_desc",(100*game.const.diplomacyMinForExtraReduction).formatNumber(2,2)+"%",(100*game.const.diplomacyInfamyReductionMX).formatNumber(2,2)+"%",(game.const.diplomacyReductionByBattle*(2-helpers.common.getContinentRewardBoost("lower_diplomacy_reduction"))*100).formatNumber(2,2)+"%");break;default:o+=getLine("stats_"+f+"_desc")}i+=o;break;case"res_info":if(void 0!==game.const.resources[f]){var l=!1;if("food"===f||"water"===f?l=(3*(1-(game.data.continentRewardBoosts.rations_reduction-1))).formatNumber(2,2):"perk_points"===f&&(l=game.const.perkPointsCycleGain),o='<div class="name">'+getLine("res_"+f)+"</div>"+getLine("res_"+f+"_desc"),"knowledge"===f){var g=helpers.common.getResearchBoost("teacher","gain_mx"),m=helpers.common.getResearchBoost("researcher","gain_mx")*g,u=.01+.01*game.state.jobs.teacher.workers*g,p=game.state.jobs.researcher.workers*m,h=(u*game.state.resources.citizens.total+p)*game.data.continentBoosts.knowledge_gain;o+="<br /><br />"+getLine("show_tooltip_text9")+h.formatNumber(),game.data.continentBoosts.knowledge_gain>1&&(o+="<br />"+getLine("show_tooltip_text10")+(100*(game.data.continentBoosts.knowledge_gain-1)).formatNumber(2,2)+"%)"),o+="<br /><br />"+getLine("show_tooltip_text11")+game.state.resources[f].amount.formatNumber()+"/"+game.data.researchPointCost.formatNumber(),o+="<br />"+getLine("show_tooltip_text12")+game.state.resources.research_points.amount.formatNumber()+"/"+game.state.resources.research_points.total.formatNumber()}isUndefined(langLines["res_"+f+"_extra_desc"])||isUndefined(langLines["res_"+f+"_extra_desc"][currentLanguage])||(o+='<div class="extra-desc">'+getLine("res_"+f+"_extra_desc",l)+"</div>"),"water"===f&&(n+="<br />"+getLine("show_tooltip_text13")+(100*game.state.stats.toxicity).formatNumber(2,2)+"%"),void 0!==game.data.resourceRates[f]&&(n+="<br />"+getLine("show_tooltip_text14")+game.data.resourceRates[f].gains.formatNumber(),n+="<br />"+getLine("show_tooltip_text15")+game.data.resourceRates[f].consumption.formatNumber(),n+="<br />"+getLine("show_tooltip_text16")+game.data.resourceRates[f].absolute.formatNumber()),o+=n}else if("health"===f){o=getLine("show_tooltip_text17"),n=getLine("show_tooltip_text18")+"<br />";for(var v=0;v<game.const.healthDeathRatios.length;v++)n+=getLine("show_tooltip_text19",(100*game.const.healthDeathRatios[v][0]).formatNumber(0,0),(100*game.const.healthDeathRatios[v][1]).formatNumber());o+='<div class="extra-desc"><ul><li>'+getLine("stats_sickness")+": <span>"+(100*game.state.stats.sickness).formatNumber(2,2)+"% (x"+(1-game.state.stats.sickness).formatNumber(2,2)+")</span></li><li>"+getLine("stats_happiness")+": <span>"+(100*game.state.stats.happiness).formatNumber(2,2)+"% (x"+game.state.stats.happiness.formatNumber(2,2)+")</span></li><li>"+getLine("stats_morale")+": <span>"+(100*game.state.stats.morale).formatNumber(2,2)+"% (x"+game.state.stats.morale.formatNumber(2,2)+")</span></li><li>"+getLine("stats_malnourishment")+": <span>"+(100*game.state.stats.malnourishment).formatNumber(2,2)+"% (x"+(1-game.state.stats.malnourishment).formatNumber(2,2)+")</span></li></ul>"+n+getLine("show_tooltip_text20")+"</div>"}else"productivity"===f?(o=getLine("show_tooltip_text21"),o+='<div class="extra-desc"><ul><li>Health: <span>'+(100*game.state.stats.health).formatNumber(2,2)+"% (x"+game.state.stats.health.formatNumber(2,2)+")</span></li><li>"+getLine("stats_happiness")+": <span>"+(100*game.state.stats.happiness).formatNumber(2,2)+"% (x"+game.state.stats.happiness.formatNumber(2,2)+")</span></li><li>"+getLine("stats_connectivity")+": <span>"+(100*game.state.stats.connectivity).formatNumber(2,2)+"% (x"+(1+game.state.stats.connectivity).formatNumber(2,2)+")</span></li><li>"+getLine("stats_products")+": <span>"+(100*game.state.stats.products).formatNumber(2,2)+"% (x"+(1+game.state.stats.products).formatNumber(2,2)+")</span></li><li>"+getLine("stats_maintenance")+": <span>"+(100*game.state.stats.maintenance).formatNumber(2,2)+"% (x"+game.state.stats.maintenance.formatNumber(2,2)+")</span></li></ul>"+getLine("show_tooltip_text22")+"</div>"):o=getLine("show_tooltip_text23")+f;i+=o;break;case"view":var f=t.attr("data-view");o=getLine("view_"+f)+" - "+getLine("view_"+f+"_desc"),t.hasClass("disabled-click")&&(o+='<div class="desc-red">'+getLine("view_"+f+"_unlock_note")+"</div>"),i+=o;break;case"view-category":f=t.attr("data-view-category");o=getLine("view_cat_"+f)+" - "+getLine("view_cat_"+f+"_desc"),t.hasClass("disabled-click")&&(o+='<div class="desc-red">'+getLine("view_cat_"+f+"_unlock_note")+"</div>"),i+=o;break;case"setting":void 0!==getLine("setting_"+f+"_desc")&&(o+=getLine("setting_"+f+"_desc")),i+=o;break;case"lack_of_citizen":i+=o=getLine("show_tooltip_text24");break;case"lack_of_resources":i+=o=getLine("show_tooltip_text25");break;case"notification_icon":switch(f){case"health":i+='<div class="name">'+getLine("health_drop_title")+"</div>",i+='<div class="desc">'+getLine("health_drop_subtitle")+"</div>",i+='<div class="name">'+getLine("potential_drop_causes")+"</div>";var y=["sickness","morale","malnourishment"];for(v=0;v<y.length;v++){i+='<div class="name">'+getLine("stats_"+(b=y[v]))+"</div>",i+='<div class="desc">'+getLine("drop_resolution_"+b)+"</div>"}break;case"productivity":i+='<div class="name">'+getLine("prod_drop_title")+"</div>",i+='<div class="desc">'+getLine("prod_drop_subtitle")+"</div>",i+='<div class="name">'+getLine("potential_drop_causes")+"</div>",i+='<div class="name">'+getLine("stats_health")+"</div>",i+='<div class="desc">'+getLine("drop_resolution_health2")+"</div>";for(y=["maintenance"],v=0;v<y.length;v++){var b;i+='<div class="name">'+getLine("stats_"+(b=y[v]))+"</div>",i+='<div class="desc">'+getLine("drop_resolution_"+b)+"</div>"}break;case"population":i+='<div class="name">'+getLine("population_capped")+"</div>",i+='<div class="desc">'+getLine("population_capped_desc")+"</div>";break;case"citizens":i+='<div class="name">'+getLine("citizens_idling")+"</div>",i+='<div class="desc">'+getLine("citizens_idling_desc")+"</div>"}break;case"params_text":i+=o=r}page.$popupTooltip.attr("data-type",s),page.$popupTooltip.html(i);var _=page.$popupTooltip.outerWidth(),w=page.$popupTooltip.outerHeight();game.data.toolTip.width=_,game.data.toolTip.height=w,game.data.toolTip.shown=1,page.recalculateTooltipPosition(e.pageX,e.pageY)}},hideToolTip:function(e){page.$popupTooltip.removeClass("shown"),game.data.toolTip.shown=0},recalculateTooltipPosition:function(e,t){if(0!==game.data.toolTip.shown){var a=page.$gameUI.$.offset(),s=($this.offset(),a.left),r=a.top,i=e-s,o=t-r,n=20,d=-20,c=!0,l=!0;o+d-game.data.toolTip.height<=0&&(c=!1,d*=-1),game.data.toolTip.width+i+n>pageWidth&&(l=!1,n*=-1),game.data.toolTip.x=s+n,game.data.toolTip.y=r+d,page.$popupTooltip.css({top:"auto",right:"auto",bottom:"auto",left:"auto"});var g=pageWidth-game.data.toolTip.width,m=pageWidth-game.data.toolTip.width;c&&l?page.$popupTooltip.css({left:Math.max(0,Math.min(g,i+n))+"px",bottom:Math.max(0,pageHeight-(o+d))+"px"}).addClass("shown"):c&&!l?page.$popupTooltip.css({right:Math.max(0,Math.min(m,pageWidth-(i+n)))+"px",bottom:Math.max(0,pageHeight-(o+d))+"px"}).addClass("shown"):l?page.$popupTooltip.css({left:Math.max(0,Math.min(g,i+n))+"px",top:Math.max(0,o+d)+"px"}).addClass("shown"):page.$popupTooltip.css({right:Math.max(0,Math.min(m,pageWidth-(i+n)))+"px",top:Math.max(0,o+d)+"px"}).addClass("shown")}},showStaticToolTip:function(e,t){var a="";if(game.getSettingValue("hide_all_tooltips"))page.hideToolTip();else{switch(e){case"region_data":var s=game.data.gameGrids[t.cellRef].continent;if("water"===s)return void page.hideToolTip();var r=helpers.territory.isLockedContinent(s),i=game.const.continents[s];if(a+="<div>"+getLine("show_tooltip_text51")+getLine("continents_"+s)+(r?" (locked)":"")+"</div>",r)game.data.canAttackNewContinent?a+=getLine("show_tooltip_text26",i.name):a+=getLine("show_tooltip_text27");else if(a+="<div>"+getLine("show_tooltip_text28")+'"'+t.cellRef+'"</div>',!1!==helperData.setupColony){var o=helpers.colonies.getColonyData(helperData.setupColony.subType,t.cellRef);a+="<div>"+getLine("colony_details_t2",o.nearest_dist)+getLine("colony_details_t6",o.investment_min.formatNumber(2,2))+getLine("colony_risk_short",(100*o.risk).formatNumber(2,2))+getLine("colony_profit_short",(100*o.payout).formatNumber(2,2))+getLine("colony_control_rate",(100*o.control_rate).formatNumber(2,2))+getLine("colony_cr_change",(100*o.control_rate_day).formatNumber(2,2))+"<br /> "+getLine("colony_click_to_place")+"</div>"}break;case"territory_data":var n=game.data.gameGrids[t.cellRef];if(isUndefined(n))return;var d=game.state.gameGrids.territories[game.state.currentParentGrids.regions][t.cellRef];if((n.closestPlayerTer>2||game.data.showOnlyStartingTer)&&n.enemy)return page.$popupTooltip.removeClass("shown"),void(game.data.toolTip.shown=0);if(a+="<div>"+getLine("show_tooltip_text29")+' "'+t.cellRef+'"</div>',n.enemy){a+="<div>"+getLine("show_tooltip_text30")+"</div>",a+="<div>"+getLine("show_tooltip_text31")+(100*n.controlRate).formatNumber()+"%</div>";var c="x"+parseInt(100*n.powerMX)/100;a+="<div>"+getLine("show_tooltip_text32")+'<div class="icon tiny power"></div>'+c,a+="</div>"}else a+="<div>"+getLine("show_tooltip_text33")+"</div>",a+="<div>"+getLine("show_tooltip_text34")+(100*n.controlRate).formatNumber()+"%</div>",a+="<div>"+getLine("show_tooltip_text35")+(d.explored_spots/game.const.exploredSpotsCap*100).formatNumber()+"%</div>";if(n.enemy)game.checkIfNeighbour("territories",t.cellRef)||(a+='<div class="desc-red">'+getLine("show_tooltip_text38")+"</div>");else if(n.enemy)a+='<div class="desc-red">'+getLine("show_tooltip_text36")+"</div>";else{var l="show_tooltip_text37";d.explored_spots>=game.const.exploredSpotsCap&&(l="show_tooltip_text53"),a+='<div class="extra-desc">'+getLine(l)+"</div>"}!1!==d.boost&&(a+='<div class="extra-desc">'+getLine("show_tooltip_text39")+d.boost.amount.formatNumber()+' <div class="icon tiny '+d.boost.subType+'"></div> '+d.boost.type+"</div>");break;case"tile_data":var g=game.data.gameGrids[t.cellRef];if(isUndefined(g))return;var m=game.state.gameGrids.zones[game.state.currentParentGrids.regions][game.state.currentParentGrids.territories][t.cellRef];if(void 0===g)return;a+="<div>"+getLine("show_tooltip_text40")+'"'+t.cellRef+'"</div>',g.enemy?(a+="<div>"+getLine("show_tooltip_text30")+"</div>",a+="<div>"+getLine("show_tooltip_text31")+g.tilePower.formatNumber()+"</div>"):a+="<div>"+getLine("show_tooltip_text33")+"</div>",!1!==m.boost&&(a+='<div class="extra-desc">'+getLine("show_tooltip_text41")+m.boost.amount.formatNumber()+' <div class="icon tiny '+m.boost.subType+'"></div> '+m.boost.subType+"</div>");break;case"upgrade_data":var u,p=game.const.researchUpgrades[t.upgradeID],h=void 0!==game.state.researchUpgrades[t.upgradeID]?game.state.researchUpgrades[t.upgradeID]:0,v=helpers.common.getUpgradeUnlockDetails(t.upgradeID),f="",y="";switch(f=getLine("res_"+t.upgradeID+"_extra_desc"),p.category){case"building_unlock":game.const.buildings[p.subID],u=getLine("show_tooltip_text42",getLine("buildings_"+p.subID)),f=getLine("buildings_"+p.subID+"_desc"),"filtering_station"===p.subID&&(f+=getLine("show_tooltip_text43"));break;case"product_unlock":game.const.products[p.subID],u=getLine("show_tooltip_text44",getLine("products_"+p.subID)),f=getLine("products_"+p.subID+"_desc");break;case"resource_unlock":game.const.resources[p.subID],u=getLine("show_tooltip_text45",getLine("res_"+p.subID)),f=getLine("show_tooltip_text46",getLine("res_"+p.subID));break;case"building_bonus":case"building_upgrade":case"building_limit":game.const.buildings[p.subID],u=getLine("res_"+t.upgradeID+"_extra_desc"),f=getLine("res_desc_for",u,getLine("buildings_"+p.subID));break;case"stat_bonus":u=getLine("res_"+t.upgradeID+"_extra_desc"),f=getLine("res_"+t.upgradeID+"_desc");break;case"timelapse_speed":u=getLine("research_details_text5"),f=getLine("res_"+t.upgradeID+"_extra_desc")+" x"+p.amount;break;case"timelapse_config":u=getLine("research_details_text6"),f=getLine("show_tooltip_text47",getLine("res_"+t.upgradeID+"_extra_desc"));break;case"actions":u=getLine("res_"+t.upgradeID+"_desc"),f=getLine("res_"+t.upgradeID+"_extra_desc");break;case"part_stats":u=getLine("research_details_text8");break;case"ammo_types":u=getLine("research_details_text9");break;case"army_unlocks":u=getLine("research_details_text10")}if(void 0!==p.effects)for(var b=0;b<p.effects.length;b++){var _=p.effects[b].type,w=p.effects[b].amount;switch(_){case"gain_mx":y+=getLine("research_details_text11")+(h*w*100).formatNumber()+"%",y+=" (+"+(100*w).formatNumber()+"%)";break;case"population_gain":y+=getLine("research_details_text11")+(100*(.1+h*w)).formatNumber()+"%",y+=" (+"+(100*w).formatNumber()+"%)"}}void 0!==p.demoLocked&&p.demoLocked&&isDemo()&&(f='<div class="demo-locked">'+getLine("show_tooltip_text48")+"</div>"+f),void 0!==p.extraDesc2&&(f+="<br /><br />"+p.extraDesc2);var x=void 0!==p.buyLimit?p.buyLimit:1;if(a+=u+getLine("research_details_text13")+h+"/"+x+")",a+="<div>"+f+"</div>",""!==y&&(a+='<div class="extra-desc">'+y+"</div>"),v.fullUnlockDetails.length>0){a+='<div class="research-requires">'+getLine("show_tooltip_text49")+"</div>";for(b=0;b<v.fullUnlockDetails.length;b++){var k=v.fullUnlockDetails[b],D=k.reqMet?"req-unlocked":"req-locked",I="";switch(k.type){case"research_upgrade":var C=game.const.researchUpgrades[k.subType];switch(C.category){case"building_unlock":game.const.buildings[C.subID],I=getLine("research_details_text14",getLine("buildings_"+C.subID))}break;case"total_citizens":I=getLine("research_details_text15",k.subType.formatNumber())}a+='<div class="'+D+'">'+I+"</div>"}}isUndefined(p.perkCost)||(a+="<div>"+getLine("research_details_text19",p.perkCost.formatNumber(2,2))+"</div>")}t.y+200>=pageHeight&&(t.y=pageHeight-200),t.x+300>=pageWidth&&(t.x=pageWidth-300),page.$popupTooltip.attr("data-type",e),page.$popupTooltip.css({top:t.y+"px",right:"auto",bottom:"auto",left:t.x+"px"}).addClass("shown"),page.$popupTooltip.html(a),game.data.toolTip.shown=2}}},showWelcome=!0,unlockEverything=!1,skipStartScene=!1,startNewGame=!1,forceVersionUpdate=!1,perfTests={c1:0,c2:0,c3:0,c4:0,c5:0,c6:0,c7:0},gameStarted=!1,initStateType=!1,imagesAlreadyInited=!1,stopAllLogic=!1,wishlistNoteAlreadyShownThisSession=!1,showWishlistNoteAfterSec=1800,maxGameSaves=1,effBasedOnWorkerRatio=!0,timeRunsDuringsBattles=!1,patternDrawOffset=0,patternDirection=1,patternCanvases=[],selectedUIoffset="basic",uiOffsets={basic:{top:130,left:80,topExtra:170,topSpecial:80,overrideCanvasOffsetX:!1,overrideCanvasOffsetY:!1},fullscreen:{top:0,left:0,topExtra:0,topSpecial:0,overrideCanvasOffsetX:0,overrideCanvasOffsetY:0}},transitionEnd="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",animationEnd="animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",lastAnimationX=0,lastAnimationY=0,flyingBees=[];function createBees(e){for(var t=0;t<e;t++){var a=new FlyingBee(randomIntFromInterval(0,worldGrid.gridWidth),randomIntFromInterval(0,worldGrid.gridHeight),100,100);flyingBees.push(a)}}var appState,cleanInstructions=!1,counter=0,wishlistClicked=!1,currentSuggestedResearchUpgradeID=!1,refreshUI={infoBar:!1,currentPopup:!1,partialRefresh:!1,refreshPopup:!1,quickPopupRefresh:!1,explorers:!1,queueData:!1,overlayText:!1,switchScreen:!1,boxData:!1,resourceRates:!1,battleMenu:!1,popup:!1,overlay:!1,secondChecks:!1},refreshData={resources:[],resourceRates:[],buildQueue:{update:[],remove:[],data:{}},produceQueue:{update:[],remove:[]},boxData:[],products:[],timelapsePaused:!1},reactor=new Reactor,counters={prepareDOM:0,prepareContent:0},keyPressed=!1,clickStarted=!1,isDragging=!1,draggingStartPos={x:0,y:0},draggingLastPos={x:0,y:0},draggingDistanceTravelled=0,mouseLastPos={x:!1,y:!1},alowTreeNodeEdit=!1,editingTreeNode=!1,editingTreeNodeID=!1,gamePaused=!0,gameInited=!1,firstInited=!1,forceCacheRefresh=!1,helperData={lastStateUpdate:0,scrollPosTop:[],hasObjectiveNote:!1,canvasBoundaries:{coverOutline:!1,x:0,y:0,w:1920,h:1024},consequtive:{lastWarning:0,healthDrop:0,productivityDrop:0},queuedPopups:[],animatePopupTransition:!1,showPopupAfterTransition:!1,dontHideQuickPopup:!1,showNewCategory:!1,lastQuickPopupData:{},chartTypeShown:"clothing",currentTab:!1,currentSubTab:!1,currentInput:!1,inputFocus:!1,currentSubInput:!1,forceCurrentSubInput:!1,insertAfterIndex:!1,hoveredContinent:!1,forceGameOver:!1,precappedSpeed:!1,setupColony:!1,tempColony:!1,lastAttackedZone:!1,lastAttackedTerritory:!1,displayedWarnings:[],ignoreFlickers:[],tempData:!1,tempData2:!1,activeTextTyper:!1,activeTimers:!1,tutorialShowConditions:!1};game={const:{},state:{gameState:"playing",gameDate:0,lastUpdate:0,timeSaved:0,assignAmountType:"1",buyAmountType:"1",assignAmount:1,buyAmount:1,gameStats:{prestigesDone:{amount:0,resets:!1}},settings:{},taskPriorities:{other:{lastCycle:0,tasks:{explorers:{},buildQueue:{},produceQueue:{},daily:{}}},regular:{lastCycle:0,tasks:{scavengers:{},buildings:{},citizens:{},stats:{}}}},territoryBoosts:{}},data:{cameraW:600,cameraH:500,cameraXoffset:0,cameraYoffset:0,generalCounter:0,currentView:"resources",currentViewCategory:"world",currentViewType:"conquest",centerCoords:{x:0,y:0},centerPoint:{x:0,y:0},pixelRatioLimits:{min:.5,max:2,base:1,drawW:1,drawH:1},cache:{},seeds:{main:!1,biomes:!1},lastActions:{secondCycleTime:0},settings:{},tutorial:{inited:!1,active:!1,part:0,step:0,data:[],activeSideTutorial:!1,currentObjData:!1},showOnlyStartingTer:!0,reinitingFormationsFromState:!1,activeEventTypes:[],resourceRates:{food:{gains:0,consumption:0,absolute:0},water:{gains:0,consumption:0,absolute:0},wood:{gains:0,consumption:0,absolute:0},energy:{gains:0,consumption:0,absolute:0},stone:{gains:0,consumption:0,absolute:0},iron:{gains:0,consumption:0,absolute:0},uranium:{gains:0,consumption:0,absolute:0}},buttons:[],trash:[],lastCircleX:0,lastCircleY:0,researchPointCost:0,productBonuses:{},researchBoosts:{},eventBoosts:{},continentBoosts:{},continentRewardBoosts:{},startingBoosts:{},toolTip:{shown:0,x:0,y:0,height:0,width:0},timelapse:{opened:!1,active:!1,speed:1,configVisible:!0,availableSpeeds:[]},devSettings:{reveal_categories:{enabled:!1,desc:"Reveal All Categories"},reveal_views:{enabled:!1,desc:"Reveal All Views"},reveal_jobs:{enabled:!1,desc:"Reveal All Jobs"},reveal_buildings:{enabled:!1,desc:"Reveal All Buildings"},buy_all_buildings:{enabled:!1,desc:"Buy 1 of All Buildings"},buy_researches:{enabled:!1,desc:"Buy All Researches"}},multipliers:{powerMX:1,costMX:1},bordersVertices:[],playerOwnedTers:0,playerOwnedTerRefs:[],playerOwnedRegions:0,playerOwnedRegionsRefs:[],gameEnding:0,demoOver:!1,terNeighbourRefs:{},terTileNeighbourRefs:{},startAnimationsIn:0,battleStarted:!1,leaderEnabled:!1,switchScreenData:{switchIn:0,switchTo:""},automationData:{enableAttack:!1,nextAttackIn:0,nextTerAttackIn:0,attackTerritory:!1,attackSection:!1},pendingBattleData:{},battleData:{attackType:"",tileAttack:!1,formationA:[],formationB:[],terRef:!1,terTileRef:!1,finished:!1},attackableDirections:{current:[],regions:[],territories:[]},canAttackNewContinent:!1,canAttackNewRegion:!1,gameGrids:{},gameObjects:[],enemyObjects:[],auras:[],projectiles:[],enemyProjectiles:[],animations:[],ghostObjectsData:[],ghostObjects:[],tempGhostObjects:[],ghostObjectsRemoveArray:[],reinCounter:0,colonies:[],researchNodes:[],crewFighting:0,playerPower:0,notifications:{updated:!1,list:[]},lastRefreshes:{buildQueue:0,produceQueue:0},exploreDryStreak:0,objectRefs:{},staticObjectsRefs:{},aimPriority:[],unitFormation:[],attacksAllowed:!1,staticObjects:[],images:{},videos:{},autoFire:{enabled:!0},artillery:{stateChange:!1,enabled:!1,selectedType:null,startsIn:0,duration:0,timeLeft:0,damage:2,fireRate:100,lastUpdate:0},specialMessage:!1,objectiveFirst:!0,animationLogs:{general_text:{piledUp:0,lastDone:0,minInterval:50,storeMaxLogs:10,timestampLogs:[]},damage:{piledUp:0,lastDone:0,minInterval:400,storeMaxLogs:5,timestampLogs:[]}},currentTab:"hull",currentSubTab:"",selectedCorpusID:-1,currentCorpusID:0,currentDrawableVehicle:null,currentDrawableVehicleID:null,currentlyOverlaysObject:!1,currentLastX:0,currentLastY:0,draggingTank:!1,relocatingTank:!1,currentBattleCorpus:!1,allowedPlayerArea:{x:0,y:0,w:0,h:0},allowedCollissionArea:{x:-250,y:70,w:780,h:410},mojKrscenmaticek:null,mojTristokosmatih:null},initMenu:function(e){if(isUndefined(e)&&(e=!1),e){createLandProjection(),game.postLoadedInit();this.stateHandling.loadGameSaves();var t=game.stateHandling.loadAppState();game.initSettings(!0),loadLanguage(currentLanguage,(function(){gameUI.showMenu("main_menu",!0),page.$gameContent.attr("class",(function(e,t){return t.replace(/(^|\s)lang-\S+/g," lang-"+currentLanguage)}))})),t||game.stateHandling.saveAppState(),helpers.state.addAppStat("playedTimes",1),helpers.common.checkActiveTimers(),gameLoop.tasks=[];var a=[{tag:"main",minInterval:20,callFunc:"logicLoop",lastLoopTime:0,addReserve:!0,reserve:0,isGameLoop:!0},{tag:"display",minInterval:50,callFunc:"updateDisplay",lastLoopTime:0,addReserve:!0,reserve:0,isGameLoop:!1},{tag:"updateStats",minInterval:1e4,callFunc:"updateStats",lastLoopTime:0,addReserve:!0,reserve:0,isGameLoop:!0}];gameLoop.tasks.push(a[0]),gameLoop.tasks.push(a[1]),gameLoop.tasks.push(a[2]),gameLoop.started||gameLoop.start()}gameUI.showMenu("main_menu",e)},init:function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var a=!1,s="prestiging"===game.state.gameState||"restarting_game"===game.state.gameState;forceCacheRefresh=!0;var r=startNewGame;if(!e){if(startNewGame&&!s&&(game.stateHandling.saveGamesData.currentSaveID=!1),!s)try{a=this.stateHandling.loadGameSave(game.stateHandling.saveGamesData.currentSaveID)}catch(e){return page.hideLoader(),void gameUI.showMiniPopup(getLine("err_init_game_save")+e+getLine("err_suggest_reset"),"to_main_menu")}!a||startNewGame?(GameAnalytics("addProgressionEvent","Complete","GameProgress","GameStarted","",parseInt(performance.now()/1e3)),game.data.currentView="resources",getPageSize(),page.defineCanvasBoundaries(!1),game.const.canvasOffsetX=0,game.const.canvasOffsetY=0,startNewGame=!1,game.initBasicState(!0),game.state.gameDate=game.const.startTimestamp,game.state.lastAttackOnPlayer=game.const.startTimestamp,0===game.state.startedPlayingTimestamp&&(game.state.startedPlayingTimestamp=Date.now()),showWelcome=!0):(gameInited||game.initBasicState(!1),showWelcome=!1)}if(gameInited=!0,!e||t){if(t||(gameLoop.tasks[0].lastLoopTime=0,gameLoop.tasks[1].lastLoopTime=0,gameLoop.tasks[2].lastLoopTime=0,gameLoop.gameLoopStarted||(GameAnalytics("addDesignEvent","LoadStatus:PreLoopStart",parseInt(performance.now()/1e3)),gameLoop.gameLoopStarted=!0,GameAnalytics("addDesignEvent","LoadStatus:PostLoopStart",parseInt(performance.now()/1e3)))),game.state.lastUpdate>0){var i=Date.now()-game.state.lastUpdate;game.state.timeSaved+=i*game.const.realToGameTime,console.log("game was idle for  "+i)}game.state.lastUpdate=Date.now(),game.stateHandling.saveGame()}if(gameLoop.tasks[0].lastLoopTime=performance.now(),gameLoop.pause(!1),firstInited||(firstInited=!0,GameAnalytics("addDesignEvent","LoadStatus:FirstPostGameInit",parseInt(performance.now()/1e3))),unlockEverything){var o=["reveal_categories","reveal_views","reveal_jobs","reveal_buildings","buy_all_buildings","buy_researches","add_resources","add_time_saved"];$.each(game.data.devSettings,(function(e,t){t.enabled=!0}));for(var n=1e5,d=0;d<o.length;d++){var c=n;"add_resources"===o[d]?$.each(game.const.resources,(function(e,t){c=n,"citizens"!==e&&"population"!==e||(c=Math.min(1e4,100)),helpers.dev.devActions(o[d],e,c)})):helpers.dev.devActions(o[d],o[d],c)}game.data.showOnlyStartingTer=!1,gameUI.handleIconReveal("territories")}if(audio.music.enabled){var l=r?1:3;audio.forceStartBackgroundMusic(l)}forceCacheRefresh=!1,page.hideLoader(),r||(isUndefined(game.state.homeContinent)||!1===game.state.homeContinent?gameUI.showMenu("start_menu"):!1!==game.state.jobs.explorer.territory?game.switchTo("resources"):game.switchTo("territories"),gameLoop.pause(!1),gamePaused=!1)},postLoadedInit:function(){imagesAlreadyInited=!0,setTimeout((function(){page.updateLoading({current:1})}),500)},fireInitWithErrorCheck:function(e,t){try{page.showLoader("cover_screen"),setTimeout((function(){game.init(e,t)}),10)}catch(e){return page.hideLoader(),void gameUI.showMiniPopup(getLine("err_init_game_save")+e+getLine("err_suggest_reset"),"to_main_menu")}},logicLoop:function(e,t){if(playTime=parseInt((Date.now()-game.state.startedPlayingTimestamp)/1e3),!gamePaused&&gameStarted){var a=helpers.common.isCurrentView("battle");$.each(flyingBees,(function(t,a){a.update(e)}));var s=Math.max(0,e-game.const.maxCalculationTime),r=e-s,i=game.state.timeSaved<=0;for(game.state.timeSaved+=s/looptimeMX*game.const.realToGameTime,e>game.const.maxCalculationTime&&console.log("extra time elapsed "+s);r>0;){perfTests.c1++;var o=Math.min(r,1e3);r-=o;var n=!1;if(!a||timeRunsDuringsBattles){var d=Math.max(0,looptimeMX-1)/looptimeMX;game.data.timelapse.opened&&!game.data.timelapse.active||(game.state.gameDate+=o*game.const.realToGameTime,game.data.timelapse.active||d>0&&(game.state.timeSaved+=o/looptimeMX*game.const.realToGameTime)),game.data.timelapse.active&&(i?(n=!0,game.data.timelapse.active=!1,forceUpdateDisplay=!0,looptimeMX=1,refreshData.timelapsePaused="outOfSavedTime"):d>0&&(game.state.timeSaved=Math.max(0,game.state.timeSaved-o*game.const.realToGameTime*d)))}if(n)return;var c=game.data.switchScreenData.switchIn>0;game.data.switchScreenData.switchIn=Math.max(0,game.data.switchScreenData.switchIn-o),c&&0===game.data.switchScreenData.switchIn&&gameUI.checkDOMrefresh("time_changed","screen_switch"),a?game.battleCycleHandler(o):a&&!timeRunsDuringsBattles||(game.attacksCycleHandler(o),$.each(game.state.taskPriorities,(function(e,t){var a=!1,s=1;switch(e){case"other":break;case"regular":a=game.const.taskPriorities[e].cycleTime,t.lastCycle+=o,s=parseInt(t.lastCycle/a),t.lastCycle%=a}$.each(t.tasks,(function(e,t){var r;perfTests.c1++,r=!1===a?o:s,s>0&&"function"==typeof game[e+"CycleHandler"]?game[e+"CycleHandler"](r):s>0&&console.log("Problem calling function "+e+"CycleHandler")}))}))),game.randomAttacksHandler(o),a&&!timeRunsDuringsBattles||(game.marketCycleHandler(o),game.eventsStateCycleHandler(o),game.refreshResourceRates(),game.checkObjectives()),game.checkTimelapseStatus()&&(game.data.timelapse.active&&(game.data.timelapse.active=!1,game.state.timeSaved+=r*game.const.realToGameTime,looptimeMX=1),r=0,forceUpdateDisplay=!0)}}},updateDisplay:function(e,t){if(helpers.common.checkTutorialFire(),game.data.lastActions.secondCycleTime+=e,Math.floor(game.data.lastActions.secondCycleTime/1e3)>0&&(game.data.lastActions.secondCycleTime=game.data.lastActions.secondCycleTime%1e3,refreshUI.secondChecks=!0,helpers.common.checkActiveTimers()),gameUI.handleNonGameDomRefresh(),(!gamePaused||forceUpdateDisplay)&&(gameInited||forceUpdateDisplay)){var a;if(forceUpdateDisplay=!1,canvasCtx.clearRect(0,0,pageWidth,pageHeight),(forceDrawAll||game.data.showOnlyStartingTer&&"territories"===game.data.currentView)&&(staticCanvasCtx.clearRect(0,0,pageWidth,pageHeight),coverCanvasCtx.clearRect(0,0,pageWidth,pageHeight)),"battle"===game.data.currentView){if(forceDrawAll){var s=staticCanvasCtx.createPattern(imageLoader.images.backgroundDarker.img,"repeat");staticCanvasCtx.fillStyle=s,staticCanvasCtx.fillRect(0,0,pageWidth,pageHeight);var r={top:0,bottom:game.data.allowedPlayerArea.y+game.data.allowedPlayerArea.h};$.each(battleBiomePoints,(function(e,t){var a=imageLoader.images.biomes_battle[t.subType].img,s=a.width/1.5,i=a.height/1.5,o="top"===t.position?-i:-20;draw({x:t.x-s/2,y:t.y+r[t.position]+o,w:s,h:i,img:a,rotatedDeg:t.rotation},"rect","img","static")}))}null!==game.data.currentDrawableVehicle&&draw({x:game.data.allowedPlayerArea.x,y:game.data.allowedPlayerArea.y,w:game.data.allowedPlayerArea.w,h:game.data.allowedPlayerArea.h,color:"rgba(50,200,50, 0.2)"},"rect","fill","main");for(var i=0;i<game.data.staticObjects.length;i++)(a=game.data.staticObjects[i]).render();for(i=0;i<game.data.gameObjects.length;i++)(a=game.data.gameObjects[i]).render();for(i=0;i<game.data.enemyObjects.length;i++)(a=game.data.enemyObjects[i]).render();for(i=0;i<game.data.ghostObjects.length;i++)(a=game.data.ghostObjects[i]).render();for(i=0;i<game.data.auras.length;i++)(a=game.data.auras[i]).render();for(i=0;i<game.data.projectiles.length;i++)(a=game.data.projectiles[i]).render();for(i=0;i<game.data.enemyProjectiles.length;i++)(a=game.data.enemyProjectiles[i]).render();if(null!==game.data.currentDrawableVehicle&&game.data.currentDrawableVehicle.render(),!game.data.battleStarted&&!game.data.leaderEnabled){var o,n,d,c="rgb(0,0,0)";for(i=0;i<game.data.buttons.length;i++){a=game.data.buttons[i];for(var l=0;l<game.data.gameObjects.length;l++)if(game.data.gameObjects[l].globalID===a.parentGlobalID){n=game.data.gameObjects[l];break}o=game.state.corpuses[n.corpusID],d=game.const.squadronSize[o.upgrades.maxSquadronSize],n.tanksAmount===d||o.tanksAmount>0&&draw({x:a.x,y:a.y,w:a.w,h:a.h,img:imageLoader.images.buttons[0].img},"rect","img","main")}for(i=0;i<game.data.gameObjects.length;i++)a=game.data.gameObjects[i],o=game.state.corpuses[a.corpusID],d=game.const.squadronSize[o.upgrades.maxSquadronSize],imgSprite=imageLoader.images.tanksAmountBackground.img,sX=0,sY=0,b=a.tanksAmount===d?a.tanksAmount.toString():a.tanksAmount+"/"+d,draw({x:a.x-3,y:a.y-6,w:a.w-10,h:a.h,sX:sX,sY:sY,extraXoffset:0,color:c,img:imgSprite},"rect","sprite","main"),draw({x:a.x-6,y:a.y-16,w:a.w-10,h:a.h,color:c,font:"px titilliumWebSemiBold",fontSize:14,textAlign:"center",vAlign:"center",text:b},"rect","text","main")}for(i=0;i<game.data.animations.length;i++)(a=game.data.animations[i]).render();for(i=0;i<game.data.unitFormation.length;i++)void 0!==game.data.unitFormation[i]&&void 0!==game.data.unitFormation[i].vehicle&&game.data.unitFormation[i].vehicle.render();game.data.artillery.enabled&&(game.data.artillery.stateChange||game.data.artillery.lastUpdate>=0)&&(game.data.artillery.lastUpdate=0,game.data.artillery.stateChange=!1,game.data.artillery.startsIn>0?(page.$dynamicDOM.$artilleryTime.addClass("not-displayed"),page.$dynamicDOM.$cursorNote.removeClass("not-displayed").html("Setup your aim - artillery hits in: <br />"+parseInt(game.data.artillery.startsIn/1e3*10)/10+"s")):(page.$dynamicDOM.$cursorNote.addClass("not-displayed"),page.$dynamicDOM.$artilleryTime.removeClass("not-displayed").find(".progress-bar").attr("data-progress",1-game.data.artillery.timeLeft/game.data.artillery.duration))),game.data.relocatingTank&&canvasCtx.drawImage(imageLoader.images.trash.img,0,pageHeight-300,103,103)}else if(forceDrawAll&&"world"===game.data.currentView){$.each(game.data.gameGrids,(function(e,t){"water"!==t.landType&&t.render()})),staticCanvasCtx.save(),staticCanvasCtx.strokeStyle="rgb(255,255,255)";var g,m,u,p,h,v=parseInt(2);if(staticCanvasCtx.lineWidth=parseInt(8*pixelRatio),$.each(landTypeBorderLines,(function(e,t){$.each(t,(function(e,t){g=t[0],m=t[1],u=t[2],p=t[3],h=t[4],"n"===g?(m-=v,p+=v):"s"===g?(p-=v,m+=v):"ne"===g?(u-=v,h+=v):"sw"===g&&(h-=v),staticCanvasCtx.beginPath(),staticCanvasCtx.moveTo(m*pixelRatio+game.data.cameraXoffset+helpers.common.getCanvasOffsetX(),u*pixelRatio+game.data.cameraYoffset+helpers.common.getCanvasOffsetY()),staticCanvasCtx.lineTo(p*pixelRatio+game.data.cameraXoffset+helpers.common.getCanvasOffsetX(),h*pixelRatio+game.data.cameraYoffset+helpers.common.getCanvasOffsetY()),staticCanvasCtx.closePath(),staticCanvasCtx.stroke()}))})),staticCanvasCtx.restore(),$.each(game.data.colonies,(function(e,t){t.render()})),!1!==helperData.setupColony){var f=helpers.common.getConvertedGameToCanvasData(page.mousePos),y=14;coverCanvasCtx.font=y+"px titilliumWebRegular",coverCanvasCtx.fillStyle="rgb(255,255,255)";var b=getLine("click_to_place_colony");coverCanvasCtx.mlFillText(b,f.x-100,f.y-100,200,50,"center","center",y,1.2*y),helperData.setupColony.x=page.mousePos.x-helperData.setupColony.w/2,helperData.setupColony.y=page.mousePos.y-helperData.setupColony.h/2,helperData.setupColony.render()}$.each(flyingBees,(function(t,a){a.render(e)}))}else if("territories"===game.data.currentView){var _=(L=game.const.gameGrids.territories).gridW*L.cols,w=L.gridH*L.rows;_=O=_+2*L.gridW*biomeExtraTerPaddingCols,w=R=w+2*L.gridH*biomeExtraTerPaddingRows;var x=-L.gridW*biomeExtraTerPaddingCols,k=-L.gridH*biomeExtraTerPaddingRows;if(forceDrawAll||game.data.showOnlyStartingTer){var D={x:x,y:k,w:_,h:w};game.data.showOnlyStartingTer?(draw({x:_/4+x,y:_/4+k,w:_/2,h:w/2,img:imageLoader.images.background.img},"rect","img","static"),D.x=_/4+x,D.y=_/4+k,D.w=_/2,D.h=w/2):(draw({x:x,y:k,w:_/2,h:w/2,img:imageLoader.images.background.img},"rect","img","static"),draw({x:_/2+x-1,y:k,w:_/2+1,h:w/2,img:imageLoader.images.background.img},"rect","img","static"),draw({x:x,y:w/2+k-1,w:_/2,h:w/2+1,img:imageLoader.images.background.img},"rect","img","static"),draw({x:_/2+x-1,y:w/2+k-1,w:_/2+1,h:w/2+1,img:imageLoader.images.background.img},"rect","img","static"));var I=O/biomeCols,C=R/biomeRows;$.each(biomesPoints,(function(e,t){var a=imageLoader.images["biome_"+t.type+"_"+t.subType].img,s="forest"===t.type?13:3,r=a.width/s,i=a.height/s;draw({x:t.x*I+(I-r)/2-L.gridW*biomeExtraTerPaddingCols,y:t.y*C+(C-i)/2-L.gridH*biomeExtraTerPaddingRows,w:r,h:i,img:a,rotatedDeg:t.rotation},"rect","img","static")}));var T=0*pixelRatio+game.data.cameraXoffset+x*pixelRatio,A=0*pixelRatio+game.data.cameraYoffset+k*pixelRatio,P=_*pixelRatio+game.data.cameraXoffset+x*pixelRatio,S=w*pixelRatio+game.data.cameraYoffset+k*pixelRatio;A>0&&staticCanvasCtx.clearRect(0,0,pageWidth,A),T>0&&staticCanvasCtx.clearRect(0,0,T,pageHeight),P<pageWidth-helpers.common.getCanvasOffsetX()&&staticCanvasCtx.clearRect(P,0,pageWidth-helpers.common.getCanvasOffsetY()-P,pageHeight),S<pageHeight-helpers.common.getCanvasOffsetY()&&staticCanvasCtx.clearRect(0,S,pageWidth,pageHeight-helpers.common.getCanvasOffsetY()-S)}coverCanvasCtx.clearRect(0,0,pageWidth,pageHeight),$.each(game.data.gameGrids,(function(e,t){((forceDrawAll||t.closestPlayerTer<=2)&&!game.data.showOnlyStartingTer||game.data.showOnlyStartingTer||"economic"===game.data.currentViewType)&&t.render(forceDrawAll,game.data.currentViewType)}))}else if("battle_select"===game.data.currentView){if(forceDrawAll){var L,O,R;_=(L=game.const.gameGrids.zones).gridW*L.cols,w=L.gridH*L.rows;_=O=_+2*L.gridW*zonesPadding,w=R=w+2*L.gridH*zonesPadding,draw({x:x=-L.gridW*zonesPadding,y:k=-L.gridH*zonesPadding,w:_/2,h:w/2,img:imageLoader.images.background.img},"rect","img","static"),draw({x:_/2+x-1,y:k,w:_/2+1,h:w/2,img:imageLoader.images.background.img},"rect","img","static"),draw({x:x,y:w/2+k-1,w:_/2,h:w/2+1,img:imageLoader.images.background.img},"rect","img","static"),draw({x:_/2+x-1,y:w/2+k-1,w:_/2+1,h:w/2+1,img:imageLoader.images.background.img},"rect","img","static");var M=game.const.gameGrids.zones,U=Math.min(M.cols,M.rows);$.each(biomesPointsZones,(function(e,t){var a=imageLoader.images["biome_"+t.type+"_"+t.subType].img,s="forest"===t.type?13:3,r=a.width/s*U,i=a.height/s*U;draw({x:t.x+(t.w-r)/2,y:t.y+(t.h-i)/2,w:r,h:i,img:a,rotatedDeg:t.rotation},"rect","img","static")}));T=0*pixelRatio+game.data.cameraXoffset+x*pixelRatio,A=0*pixelRatio+game.data.cameraYoffset+k*pixelRatio,P=_*pixelRatio+game.data.cameraXoffset+x*pixelRatio,S=w*pixelRatio+game.data.cameraYoffset+k*pixelRatio;A>0&&staticCanvasCtx.clearRect(0,0,pageWidth,A),T>0&&staticCanvasCtx.clearRect(0,0,T,pageHeight),P<pageWidth-helpers.common.getCanvasOffsetX()&&staticCanvasCtx.clearRect(P,0,pageWidth-helpers.common.getCanvasOffsetY()-P,pageHeight),S<pageHeight-helpers.common.getCanvasOffsetY()&&staticCanvasCtx.clearRect(0,S,pageWidth,pageHeight-helpers.common.getCanvasOffsetY()-S)}$.each(game.data.gameGrids,(function(e,t){t.render()}))}else if("research"===game.data.currentView){staticCanvasCtx.clearRect(0,0,pageWidth,pageHeight);var j=new GameObject(-143,-130,286,261);draw({x:j.x,y:j.y,w:j.w,h:j.h,img:imageLoader.images.researchCenterNew.img},"rect","img","static"),$.each(game.data.researchNodes,(function(e,t){t.render()}))}if(["territories"].indexOf(game.data.currentView)>-1){var E=!0;(patternDrawOffset>500||patternDrawOffset<0)&&(E=!1),patternDrawOffset+=e/1e3*20*patternDirection,isNaN(patternDrawOffset)&&(patternDrawOffset=0),E&&(patternDrawOffset>500||patternDrawOffset<0)&&(patternDirection*=-1),coverCanvasCtx.save(),coverCanvasCtx.translate(game.data.cameraXoffset,game.data.cameraYoffset),(s=coverCanvasCtx.createPattern(imageLoader.images.clouds_pattern_dark.img,"repeat")).setTransform({a:pixelRatio,b:0,c:0,d:pixelRatio,e:0,f:0}),coverCanvasCtx.fillStyle=s,coverCanvasCtx.fillRect(-game.data.cameraXoffset,-game.data.cameraYoffset,pageWidth,pageHeight),coverCanvasCtx.restore(),coverCanvasCtx.save(),coverCanvasCtx.translate(patternDrawOffset+game.data.cameraXoffset,game.data.cameraYoffset),(s=coverCanvasCtx.createPattern(imageLoader.images.clouds_pattern_light.img,"repeat")).setTransform({a:pixelRatio,b:0,c:0,d:pixelRatio,e:0,f:0}),coverCanvasCtx.fillStyle=s,coverCanvasCtx.fillRect(-game.data.cameraXoffset-patternDrawOffset,-game.data.cameraYoffset,pageWidth,pageHeight),coverCanvasCtx.restore(),coverCanvasCtx.globalCompositeOperation="destination-out";var N=500,B=400,q=0;game.data.showOnlyStartingTer&&(N=100,B=100,q=200),draw({x:-10+q,y:-10+q,w:N+20,h:B+20,img:imageLoader.images.clouds_rect_blur.img},"rect","img","cover"),coverCanvasCtx.globalCompositeOperation="source-over"}if(helperData.canvasBoundaries.coverOutline&&(coverCanvasCtx.clearRect(0,0,pageWidth,pageHeight),helpers.common.isCurrentView("research")?(coverCanvasCtx.strokeStyle="rgba(28,215,235,0.2)",coverCanvasCtx.lineWidth=3):(coverCanvasCtx.strokeStyle="rgba(255,255,255,1)",coverCanvasCtx.lineWidth=3),coverCanvasCtx.beginPath(),coverCanvasCtx.rect(0,0,helperData.canvasBoundaries.w,helperData.canvasBoundaries.h),coverCanvasCtx.stroke(),game.data.currentView),["world"].indexOf(game.data.currentView)>-1){if(forceDrawAll){helpers.common.getCanvasOffsetX(),helpers.common.getCanvasOffsetY();0,$.each(game.state.lockedContinents,(function(e,t){var a=game.const.continents[t];game.data.canAttackNewContinent&&game.getSettingValue("show_attackable_regions")?draw({x:a.center.x-50,y:a.center.y-50,w:100,h:100,sX:64*spriteOffsets.gameIcons.attack.x,sY:0,sW:64,sH:64,img:imageLoader.images.gameIcons.img},"rect","sprite","static"):draw({x:a.center.x-44,y:a.center.y-62,w:90,h:126,img:imageLoader.images.lock.img},"rect","img","static")}))}y=12;var G=788/worldGrid.gridWidth/2,z=(worldGrid.gridWidth,(game.state.gameDate/(1e3*game.const.realToGameTime)%24+1)%24/24*394);draw({x:.2*-worldGrid.gridWidth,y:0,w:1.4*worldGrid.gridWidth,h:worldGrid.gridHeight,sX:z,sY:0,sW:394,sH:361,img:imageLoader.images.night_day.img},"rect","sprite","main")}if(page.playingCutscene){let e=page.$coverCanvas[0];if(coverCanvasCtx.clearRect(0,0,e.width,e.height),void 0!==page.videoContainer&&page.videoContainer.ready){page.videoContainer.video.muted=page.videoMuted;var F=page.videoContainer.video.videoWidth,Q=page.videoContainer.video.videoHeight,W=e.width/F,H=e.height/Q,V=e.width/2-F/2*W,Y=e.height/2-Q/2*H;coverCanvasCtx.drawImage(page.videoContainer.video,V,Y,F*W,Q*H),page.videoContainer.video.paused,forceUpdateDisplay=!0;var X=0,J=page.videoContainer.video.currentTime;if(J>2){for(i=0;i<page.videoContainer.skipPoints.length;i++)page.videoContainer.skipPoints[i]<J&&X++;page.videoContainer.curScene<X&&(page.videoContainer.curScene=X,page.beginSceneTextWrite(X));var K=getLine("starting_video_skip",Math.max(0,X-1)+"/"+(page.videoContainer.skipPoints.length-1));y=16*pixelRatio;coverCanvasCtx.font=y+"px Arial",coverCanvasCtx.font=y+"px titilliumWebRegular",coverCanvasCtx.fillStyle="rgb(255,255,255)",coverCanvasCtx.mlFillText(K,pageWidth-450,pageHeight-2*y,400,1.3*y,"top","right",y,1.2*y)}if(!1!==helperData.activeTextTyper){var Z=performance.now()>helperData.activeTextTyper.fadeOutStart,ee=0;if(Z){var te=helperData.activeTextTyper.fadeOutEnd-performance.now(),ae=helperData.activeTextTyper.fadeOutEnd-helperData.activeTextTyper.fadeOutStart;ee=Math.max(0,te/ae),coverCanvasCtx.save(),coverCanvasCtx.globalAlpha=ee}y=20*pixelRatio;coverCanvasCtx.font=y+"px Arial",coverCanvasCtx.font=y+"px titilliumWebRegular",coverCanvasCtx.fillStyle="rgb(255,255,255)",coverCanvasCtx.strokeStyle="rgb(0,0,0)",coverCanvasCtx.lineWidth=y/10;var se=getTyperTextToPrint(helperData.activeTextTyper,performance.now());coverCanvasCtx.mlFillStrokeText(se,.05*pageWidth,.1*pageHeight,.9*pageWidth,1.3*y*7,"top","left",y,1.2*y),Z&&coverCanvasCtx.restore()}}}gameStarted&&(refreshData.resources.length>0&&game.refreshBuyAmounts(),gameUI.handleDOMrefresh(),isUndefined(page.$dynamicDOM.gameDateTime)||page.$dynamicDOM.gameDateTime.html(convertToDate(game.state.gameDate,!1,!0))),forceDrawAll=!1}},updateStats:function(){if(!gamePaused){var e=performance.now();if(helperData.lastStateUpdate>0&&(e-=helperData.lastStateUpdate,helpers.state.addAppStat("playTimeTotal",e)),isDemo()){var t=0===helpers.state.getAppStat("steamNotesShown")?9e5:18e5,a=helpers.state.getAppStat("playTimeTotal"),s=helpers.state.getAppStat("lastSteamNoteShownAt"),r=page.$dynamicDOM.$.find('.popup-holder[data-type="steam_note"]').length>0;a>t+s&&!r&&(wishlistNoteAlreadyShownThisSession=!0,gameUI.showPopup("steam_note","time_played"),helpers.state.addAppStat("steamNotesShown",1))}game.stateHandling.saveGame(),helperData.lastStateUpdate=performance.now()}},removeAnimation:function(e){for(var t=0;t<game.data.animations.length;t++)game.data.animations[t].globalID===e&&(game.data.animations[t].remove=!0)},removeAllObjectAnimations:function(e){for(var t,a=0;a<e.animations.length;a++){t=e.animations[a];for(var s=0;s<game.data.animations.length;s++)game.data.animations[s].globalID===t&&(game.data.animations[s].remove=!0)}},initBasicState:function(e){var t="prestiging"===game.state.gameState,a="restarting_game"===game.state.gameState,s=t||a;if(console.log("init basic state called"),game.data.showOnlyStartingTer=!0,game.data.gameEnding=0,helperData.forceGameOver=!1,game.data.tutorial.inited=!1,helperData.tempData=!1,game.data.gameObjects=[],e){var r={};s&&(console.log("Its prestige, copy over some data here"),r.perk_points=$.extend(!0,{},game.state.resources.perk_points),r.perk_points.lastCycle=0,r.researchUpgrades={},$.each(game.state.researchUpgrades,(function(e,t){"automation"===game.const.researchUpgrades[e].type&&(r.researchUpgrades[e]=t)})),r.achievements=$.extend(!0,{},game.state.achievements),$.each(r.achievements,(function(e,t){$.each(t,(function(t,a){r.achievements[e][t].achThisRun=!1}))})),r.gameStats=$.extend(!0,{},game.state.gameStats),r.timesGivenFreePerksOnLoss=game.state.timesGivenFreePerksOnLoss,t&&(r.objectives=$.extend(!0,{},game.state.objectives)));var i=$.extend(!0,{},defaultGameState);$.each(i,(function(e,t){game.state[e]=t})),s?(game.state.resources.perk_points=r.perk_points,game.state.researchUpgrades=r.researchUpgrades,game.state.achievements=r.achievements,$(r.gameStats.conquered.current,(function(e,t){r.gameStats.conquered.current[e]=0})),game.state.gameStats=r.gameStats,isUndefined(r.objectives)||(game.state.objectives=r.objectives),game.state.timesGivenFreePerksOnLoss=r.timesGivenFreePerksOnLoss):game.state.settings={},game.data.seeds.main=new Srand,game.state.gameSeed=game.data.seeds.main.seed(),game.data.seeds.biomes=new Srand(game.data.seeds.main.intInRange(1,1e6)),s||(game.state.saveID=randomIntFromInterval(100,1e3).toString(),game.stateHandling.saveGamesData.currentSaveID=game.state.saveID),game.change.resource("citizens",game.const.baseCitizens,!0),helpers.units.resetUnitFormation(),$.each(game.state.resources,(function(e,t){var a=game.const.resources[e];t.minPrice=a.min_price,t.maxPrice=a.max_price,t.demand=5e4,t.supply=5e4})),$.each(game.state.products,(function(e,t){var a=game.const.products[e];t.minPrice=a.min_price,t.maxPrice=a.max_price,t.demand=5e4,t.supply=5e4})),helpers.territory.updateTerritoryPrices(),helpers.territory.getTerritoryBorders(game.data.playerOwnedTerRefs),game.checkObjectives()}else game.data.seeds.main=new Srand,game.data.seeds.main.setState(game.state.seedStates.main),game.data.seeds.biomes=new Srand,game.data.seeds.biomes.setState(game.state.seedStates.biomes),helpers.units.initFormationFromState();switchToGridType("regions"),!1!==game.state.currentAttackedRegion&&(switchToGridType("territories"),game.data.canAttackNewRegion=helpers.territory.canAttackNewRegion(),game.data.canAttackNewContinent=helpers.territory.canAttackNewContinent()),game.data.playerPower=game.calculateArmyPower(!1,{enemy:!1,hpMX:1}),$.each(game.state.events.list,(function(e,t){t.active&&game.data.activeEventTypes.push(t.type)})),helpers.common.getResearchPointCost(),game.initSettings(),game.initRevealState(),game.refreshResourceRates(),game.statsCycleHandler(),game.recalculateContinentRewardBoosts(),game.recalculateResearchBoosts(),game.events.recalculateEventBoosts(),game.recalculateContinentBoosts(),game.recalculateStartingBoosts(),game.recalculateProgressionStats(),game.state.gameState="playing",0===game.state.resources.citizens.total&&(helperData.forceGameOver=!0,gameUI.checkDOMrefresh("resource_change",{type:"citizens"}))},initStartingBoosts:function(){game.state.startingBoosts={},$.each(game.const.startingBoosts,(function(e,t){game.state.startingBoosts[e]=t.cur})),game.recalculateStartingBoosts();var e=game.const.baseCitizens+game.data.startingBoosts.starting_citizens;game.change.resource("citizens",e,!0),game.change.resource("population",e,!0);$.each(["food","water"],(function(e,t){game.state.resources[t];game.change.resource(t,game.data.startingBoosts.starting_resources)}))},initRevealState:function(){helperData.ignoreFlickers=[],game.const.views.resources.revealed=!1,game.const.views.public_jobs.revealed=!1,game.const.views.public_buildings.revealed=!1,game.const.views.produce.revealed=!1,game.const.views.world.revealed=!1,game.const.views.research.revealed=!1,game.const.views.factories.revealed=!1,game.const.views.global_market.revealed=!1,game.const.views.build_queue.revealed=!1,game.const.views.product_stock.revealed=!1,game.const.views.manage_plans.revealed=!1,game.const.viewCategories.social.revealed=!1,game.const.viewCategories.army.revealed=!1,game.const.viewCategories.economic.revealed=!1,$.each(game.state.resources,(function(e,t){var a=!1,s=game.const.resources[e];(void 0!==t.amount&&t.amount>0||void 0!==t.total&&t.total>0||void 0!==t.extra&&t.extra>0)&&(a=!0,"food"!==e||game.const.exploreOrder[0].received||0!==game.state.objectives.objectiveGroups.length&&-1!==game.state.objectives.objectiveGroups[0].objectivesDone.indexOf(0)||(a=!1),"water"!==e||game.const.exploreOrder[1].received||0!==game.state.objectives.objectiveGroups.length&&-1!==game.state.objectives.objectiveGroups[0].objectivesDone.indexOf(1)||(a=!1)),void 0!==s.buildings&&!1!==s.buildings&&game.state.buildings[s.buildings[0]].avl>0&&(a=!0),s.revealed=a})),$.each(game.const.researchUpgrades,(function(e,t){var a=!1;switch(void 0!==game.state.researchUpgrades[e]&&(a=!0),t.category){case"building_unlock":game.const.buildings[t.subID].unlocked=a,a&&("war_factory"===t.subID?(gameUI.handleIconReveal("army"),gameUI.handleIconReveal("produce")):"factory"===t.subID?(gameUI.handleIconReveal("economic"),gameUI.handleIconReveal("factories"),gameUI.handleIconReveal("global_market"),gameUI.handleIconReveal("product_stock"),gameUI.handleIconReveal("gold")):"mining_plant"===t.subID?(gameUI.handleIconReveal("stone"),gameUI.handleIconReveal("iron"),gameUI.handleIconReveal("uranium")):"mining_plant"!==t.subID&&"solar_panels"!==t.subID||(game.const.resources.energy.revealed=!0));break;case"product_unlock":a&&(game.const.products[t.subID].unlocked=a)}})),$.each(game.state.objectives.objectiveGroups,(function(e,t){game.checkObjectives(e)}));for(var e=0;e<game.state.alreadyRevealed.length;e++)gameUI.handleIconReveal(game.state.alreadyRevealed[e]);helpers.common.isRevealed("notifications")?page.$dynamicDOM.$notifications.removeClass("hidden"):page.$dynamicDOM.$notifications.addClass("hidden"),game.data.showOnlyStartingTer&&!1!==game.state.jobs.explorer.region&&!1!==game.state.jobs.explorer.territory&&game.state.gameGrids.territories[game.state.jobs.explorer.region][game.state.jobs.explorer.territory].explored_spots>=500&&(game.data.showOnlyStartingTer=!1,gameUI.handleIconReveal("territories")),!1!==game.state.jobs.explorer.territory&&gameUI.handleIconReveal("resources"),game.state.buildings.war_factory.length>0&&gameUI.handleIconReveal("manage_plans"),(game.data.canAttackNewRegion||game.state.homeGridRefs.regions!==game.state.currentParentGrids.regions)&&gameUI.handleIconReveal("world"),$.each(game.const.exploreOrder,(function(e,t){var a=!1,s=t.type;switch(s){case"parts":game.state.parts.length>0&&(a=!0);break;default:var r=game.const.resources[s];(-1===["food","water"].indexOf(s)||0!==game.state.objectives.objectiveGroups.length&&-1!==game.state.objectives.objectiveGroups[0].objectivesDone.indexOf(0))&&(a=r.revealed)}t.received=a})),game.data.demoOver=!1,game.data.canAttackNewRegion&&game.data.playerOwnedRegions>=3&&isDemo()&&(game.data.demoOver=!0),helperData.showNewCategory=!1},initSettings:function(e){isUndefined(e)&&(e=!1);var t={};if($.each(game.const.settings,(function(e,a){t[e]=a.default})),$.each(game.state.settings,(function(a,s){(e||isUndefined(game.const.settings[a].global)||!1===game.const.settings[a].global)&&(t[a]=s)})),$.each(game.data.settings,(function(e,a){isUndefined(game.const.settings[e].global)||!0!==game.const.settings[e].global||(t[e]=a)})),game.state.settings=t,game.data.settings=$.extend(!0,{},game.state.settings),audio.sound.enabled=game.state.settings.sound,audio.music.enabled=game.state.settings.music,e){var a=game.getSettingValue("fullscreen");if(isWeb())game.state.settings.fullscreen=!1,game.data.settings.fullscreen=!1;else try{gameToggleFullScreen(a)}catch(e){game.state.settings.fullscreen=!a,game.data.settings.fullscreen=!a}audio.refreshSoundVolumes("sound"),audio.refreshSoundVolumes("music")}page.$gameContent.attr("class","extended-content lang-en"),currentLanguage=game.getSettingValue("language"),page.$gameContent.attr("class",(function(e,t){return t.replace(/(^|\s)lang-\S+/g," lang-"+currentLanguage)})),game.state.buyAmountType=game.getSettingValue("buy_amount").toString(),game.state.buyAmount=game.getSettingValue("buy_amount"),game.state.assignAmountType=game.getSettingValue("assign_amount").toString(),game.getSettingValue("show_quick_notification")?page.$dynamicDOM.$.find(".notifications-new").removeClass("hidden"):page.$dynamicDOM.$.find(".notifications-new").addClass("hidden"),game.getSettingValue("hide_overlay")?(page.$gameContent.addClass("hide-overlay"),selectedUIoffset="fullscreen"):(page.$gameContent.removeClass("hide-overlay"),selectedUIoffset="basic"),game.getSettingValue("hide_notifications")?page.$gameContent.addClass("hide-notifications"):page.$gameContent.removeClass("hide-notifications"),game.getSettingValue("show_top_ui")?page.$gameContent.addClass("show-top-ui"):page.$gameContent.removeClass("show-top-ui"),game.getSettingValue("show_bottom_ui")?page.$gameContent.addClass("show-bottom-ui"):page.$gameContent.removeClass("show-bottom-ui"),game.getSettingValue("hide_view_categories")?page.$gameContent.addClass("hide-view-categories"):page.$gameContent.removeClass("hide-view-categories"),game.getSettingValue("hide_map_navigation")?page.$gameContent.addClass("hide-map-navigation"):page.$gameContent.removeClass("hide-map-navigation")},initBattleData:function(e){game.data.battleData.tileAttack=e.tileAttack,game.data.battleData.terRef=e.terRef,game.data.battleData.terTileRef=e.terTileRef,game.data.battleData.attackType=e.attackType;var t=game.data.gameGrids[game.data.battleData.terTileRef].tilePower;helperData.lastAttackedTerritory===e.terRef&&helperData.lastAttackedZone===e.terTileRef||(game.data.enemyObjects=[],game.createRandomFormation(t)),helperData.lastAttackedTerritory=e.terRef,helperData.lastAttackedZone=e.terTileRef,perfTests.c5=0,perfTests.c6=0,e.tileAttack?game.initBattleObjects("player"):game.initBattleObjects("enemy")},initBattleObjects:function(e){var t;game.data.projectiles=[],game.data.animations=[],game.data.staticObjects=[],game.data.auras=[],game.applyAuraEffects();for(var a=0;a<game.data.gameObjects.length;a++){t=game.data.gameObjects[a];var s,r=game.state.corpuses[t.corpusID],i=t.x+t.w/2-r.upgrades.auraSize*game.const.auraEffectRadius/2,o=t.y+t.h/2-r.upgrades.auraSize*game.const.auraEffectRadius/2;if(r.upgrades.auraAmount>0&&t.isLeader){var n={corpusID:r.id};"dmg"===r.upgrades.auraType&&(n.subType="dmg",s=new Aura(i-5,o,r.upgrades.auraSize*game.const.auraEffectRadius,r.upgrades.auraSize*game.const.auraEffectRadius,n),game.data.auras.push(s)),"hp"===r.upgrades.auraType&&(n.subType="hp",s=new Aura(i-5,o,r.upgrades.auraSize*game.const.auraEffectRadius,r.upgrades.auraSize*game.const.auraEffectRadius,n),game.data.auras.push(s)),t.auraRef=s}}if("player"===e)for(a=0;a<game.data.enemyObjects.length;a++);else{var d=game.data.gameObjects;game.data.gameObjects=game.data.enemyObjects,game.data.enemyObjects=d}},artilleryHit:function(){var e,t,a=game.const.artillery[game.data.artillery.selectedType],s=new Animation(page.mousePos.x-a.w/2,page.mousePos.y-a.h/2,a.w,a.h,{subType:a.animType});for(game.data.animations.push(s),e=0;e<game.data.enemyObjects.length;e++)if(t=game.data.enemyObjects[e],s.hits(t)){var r=t.hp;t.hp=Math.max(0,t.hp-game.data.artillery.damage),isNaN(t.hp)&&console.log("object hp is nan after hit by artillery with damage: "+game.data.artillery.damage),r<t.hp&&console.log("2rand_dmg: "+game.data.artillery.damage+" dmgAUraMX: "+t.dmgAuraMX),t.hp<=0&&(game.removeAllObjectAnimations(t),t.remove=!0)}},endBattle:function(e){for(var t=0;t<game.data.gameObjects.length;t++)0===game.data.gameObjects[t].hp&&console.log("////////////gameObject health 0 at end battle: "+game.data.gameObjects[t].hp+" for object: "+t);for(t=0;t<game.data.gameObjects.length;t++)game.data.gameObjects[t].hp<=0&&(console.log("correction object remove set to true"),game.data.gameObjects[t].remove=!0);for(t=game.data.gameObjects.length-1;t>=0;t--)(s=game.data.gameObjects[t]).remove&&(console.log("correction object will be spliced"),game.data.gameObjects.splice(t,1));if(game.data.reinCounter=0,"defense"===game.data.battleData.attackType&&(game.data.gameObjects=game.data.enemyObjects),game.data.ghostObjectData=[],game.data.ghostObjects=[],game.data.ghostObjectsRemoveArray=[],!game.data.pendingBattleData.finished){game.data.pendingBattleData.finished=!0,game.data.battleStarted=!1,page.$gameUI.$.find(".controls").addClass("not-displayed"),page.$gameUI.$overlay.find(".battle-menu").removeClass("inactive");var a,s,r="",i=!1;switch(e){case"lost":game.data.automationData.enableAttack=!1,game.data.battleData.terTileRef?(game.data.specialMessage=getLine("end_battle_message0"),r="battle_select"):(game.data.specialMessage=getLine("end_battle_message1"),r="territories");break;case"won":game.data.battleData.terTileRef?(game.data.gameGrids[game.state.currentParentGrids.zones].setConquered(),game.state.gameGrids.zones[game.state.currentParentGrids.regions][game.state.currentParentGrids.territories][game.state.currentParentGrids.zones].enemy=!1,r=game.postTileConquer(game.state.currentParentGrids.territories,!0),i=!0):(game.data.specialMessage=getLine("end_battle_message2"),r="territories");break;case"flee":console.log("case flee"),r="territories"}game.cleanAllAnimations(),game.change.stat("infamy",game.const.infamyIncreaseByBattle),game.change.stat("diplomacy",-game.const.diplomacyReductionByBattle*(2-helpers.common.getContinentRewardBoost("lower_diplomacy_reduction"))),game.state.lastActions.battleFought=game.state.gameDate,game.data.projectiles=[],game.data.enemyProjectiles=[],game.data.buttons=[];var o,n={};n.corpuses={},n.outcome=e;var d={},c={};for(t=0;t<game.state.corpuses.length;t++)d[t]=game.state.corpuses[t].level,c[t]=game.state.corpuses[t].expPoints;n.corpusExpOriginal=c;var l=0;$.each(game.state.gameObjects,(function(t,a){var s=game.state.corpuses[a.corpusID],r=a.tanksAmount;o=a.corpusID;var i=game.data.continentRewardBoosts.exp_gain_increase*r;if("flee"!==e){var d=s.level;s.expPoints+=i;var g=helpers.plans.getCorpusLevel(s.expPoints);s.level=g.level,s.lastPoints=g.lastPoints,s.nextPoints=g.nextPoints,d<s.level&&(s.upgPoints+=s.level-d,l+=s.level-d)}void 0===n.corpuses[o]?(n.corpuses[o]={},n.corpuses[o].data=s,n.corpuses[o].corpusExpOriginal=c[o],n.corpuses[o].tankFoughtTotal=r,n.corpuses[o].tanksCurrent=0,n.corpuses[o].expPoints=i,n.gainedResources=0):(n.corpuses[o].tankFoughtTotal+=r,n.corpuses[o].expPoints+=i)}));for(t=0;t<game.state.corpuses.length;t++)void 0!==n.corpuses[t]&&(n.corpuses[t].addedUpgPoints=game.state.corpuses[t].level-d[t],n.corpuses[t].addedUpgPoints);n.levelsGained=l;for(t=0;t<n.length;t++)n.corpuses[t].tanksLost=0;var g=game.state.gameGrids.zones[game.state.currentParentGrids.regions][game.state.currentParentGrids.territories][game.state.currentParentGrids.zones].boost;!1!==g&&"resource"===g.type&&(n.gainedResources={type:g.subType,amount:g.amount}),game.state.gameObjects=[];var m=0;for(t=0;t<game.data.gameObjects.length;t++){s=game.data.gameObjects[t];var u=helpers.plans.getUpgradesMultiplier(s.corpusID,"health"),p=game.state.corpuses[s.corpusID].maxHp*u;s.tanksAmount=Math.ceil(s.hp/p),helpers.units.updateGameObjectStats(s),void 0!==n.corpuses[s.corpusID]&&(n.corpuses[s.corpusID].tanksCurrent+=s.tanksAmount),m+=s.crew,$.each(n.corpuses,(function(e,t){t.corpusID===s.corpusID&&(t.tanksCurrent+=tanksAmount)})),s.targetAngle=0,game.removeAllObjectAnimations(game.data.gameObjects[t])}for(t=0;t<game.data.enemyObjects.length;t++)game.removeAllObjectAnimations(game.data.enemyObjects[t]);for(t=0;t<game.data.gameObjects.length;t++){var h=game.data.gameObjects[t];game.state.gameObjects.push({corpusID:h.corpusID,tanksAmount:h.tanksAmount,isLeader:h.isLeader,x:h.x,y:h.y})}var v=game.state.formationCrewTotal-m;if(game.state.formationCrewTotal=m,v>0&&game.change.resource("total_citizens",-v),game.data.playerPower=game.calculateArmyPower(!1,{enemy:!1,hpMX:1}),!game.data.battleData.terTileRef){var f="attack"===game.data.battleData.attackType?"attacks":"defenses";if(game.state[f][game.data.battleData.terRef].formation=[],"lost"===e)for(t=0;t<game.data.enemyObjects.length;t++)a={subType:(s=game.data.enemyObjects[t]).subType,hp:s.hp,maxHp:s.maxHp,fireRate:s.fireRate,projectileData:s.projectileData},game.state[f][game.data.battleData.terRef].formation.push(a);else delete game.state[f][game.data.battleData.terRef]}game.data.switchScreenData.switchIn=500,game.data.switchScreenData.switchTo=r,$("#dynamicDOM .confirmation-prompt-holder").remove(),page.quickPopupOpen=!1,game.getSettingValue("auto_refill_formation")&&helpers.automation.autoRefillFormation();var y=!1;if("flee"===e){var b=n.corpuses;$.each(b,(function(e,t){if(t.tankFoughtTotal-t.tanksCurrent>0)return y=!0,!1}))}"won"===e&&(game.data.enemyObjects=[]),game.data.staticObjects=[],game.data.animations=[],game.data.auras=[],game.data.currentDrawableVehicle=null,i&&game.getSettingValue("auto_attack_section")?(helpers.automation.attackNextSection(),page.$dynamicDOM.$.find('.popup-holder[data-type="battle_results"]').remove(),page.popupsOpen=0):("flee"!==e||y)&&(gameUI.showPopup("battle_results",n),"won"===e?(setTimeout((function(){}),600),setTimeout((function(){$('.popup-holder[data-type="battle_results"] .header .title').addClass("animated"),audio.playSound("battleWon")}),1200)):setTimeout((function(){audio.playSound("battleLost")}),600),setTimeout((function(){helpers.drawing.addEndBattleAnimation(n)}),1e3)),"flee"===e&&gameLoop.pause(!1)}},postTileConquer:function(e,t){var a=!1,s=(game.data.gameGrids[e],game.state.gameGrids.territories[game.state.currentParentGrids.regions][e]);if(t){s.conqueredTiles.push(game.state.currentParentGrids.zones),game.state.gameStats.conquered.total.zones++,game.state.gameStats.conquered.current.zones++;var r=game.state.gameGrids.zones[game.state.currentParentGrids.regions][game.state.currentParentGrids.territories][game.state.currentParentGrids.zones].boost;if(!1!==r)if("resource"===r.type)game.change.resource(r.subType,r.amount);else if("parts"===r.type){var i=game.getRandomParts(r.amount),o=Math.min(game.const.maxPendingParts-game.state.partsPending.length,i.length);i.splice(0,i.length-o),game.state.partsPending.length<game.const.maxPendingParts&&(game.state.partsPending=game.state.partsPending.concat(i))}}if(s.conqueredTiles.length>=Math.ceil(game.const.gameGrids.zones.cols*game.const.gameGrids.zones.rows/2)-(game.data.continentRewardBoosts.zones_required_reduction-1)){s.enemy=!1,game.state.gameStats.conquered.total.territories++,game.state.gameStats.conquered.current.territories++,game.state.lastBattledTerritory=!1,game.data.playerOwnedTers++,game.data.playerOwnedTerRefs.push(e);var n=helpers.territory.getRegionIDfromRef(game.state.currentParentGrids.regions);game.state.gameGrids.regions[n].conqueredTers++,game.data.canAttackNewRegion=helpers.territory.canAttackNewRegion(),game.data.canAttackNewContinent=helpers.territory.canAttackNewContinent(),helpers.territory.getTerritoryBorders(game.data.playerOwnedTerRefs),game.data.canAttackNewRegion&&(game.state.gameStats.conquered.total.regions++,game.state.gameStats.conquered.current.regions++,gameUI.handleIconReveal("world")),game.data.canAttackNewContinent&&(game.state.gameStats.conquered.total.continent++,game.state.gameStats.conquered.current.continent++,gameUI.showPopup("continent_conquer")),helpers.territory.updateManhattanToClosestFriendly(game.data.gameGrids),game.data.specialMessage=getLine("post_tile_conquer_message0"),a="territories",!1!==s.boost&&(game.state.territoryBoosts[e]=s.boost),$.each(game.state.defenses,(function(t,a){t===e&&delete game.state.defenses[t]})),2===game.data.playerOwnedTers&&1===game.data.playerOwnedRegions&&gameUI.showPopup("steam_note","main_objective"),game.data.canAttackNewRegion&&game.data.playerOwnedRegions>=3&&isDemo()&&(gameUI.showPopup("steam_note","final_objective"),game.data.demoOver=!0)}else game.data.specialMessage=getLine("post_tile_conquer_message1"),a="battle_select";return a},stateHandling:{alreadySaving:!1,reloadAfterSave:!1,saveGamesData:{currentSaveID:!1,gameSaves:[]},saveGame:function(e){if(this.reloadAfterSave=!1,game.stateHandling.localStorageAllowed())if(this.alreadySaving)console.log("game already saving");else{this.alreadySaving=!0,void 0===e?game.state.lastUpdate=Date.now():(gameLoop.pause(!0),game.state.lastUpdate=Date.now()-1e3*e,this.reloadAfterSave=!0);var t=!1;$.each(game.stateHandling.saveGamesData.gameSaves,(function(e,a){if(a.id.toString()===game.stateHandling.saveGamesData.currentSaveID.toString())return t=e,!1}));var a=(!1===t?game.state.saveID:game.stateHandling.saveGamesData.currentSaveID).toString(),s={id:a,lastPlayed:Date.now(),gameTime:game.state.gameDate,citizens:game.state.resources.citizens.total};!1!==a&&(!1!==t?game.stateHandling.saveGamesData.gameSaves[t]=s:(game.stateHandling.saveGamesData.gameSaves.push(s),game.stateHandling.saveGamesData.currentSaveID=a));var r=$.extend(!0,{},game.stateHandling.saveGamesData);localStorage.setItem("WD_gameSaves",JSON.stringify(r)),$.each(game.state.seedStates,(function(e,t){game.state.seedStates[e]=game.data.seeds[e].getState()}));var i=$.extend(!0,{},game.state);$.each(i.corpuses,(function(e,t){delete t.projectileData.spawnedBy})),setTimeout((function(){game.data.mojKrscenmaticek(JSON.stringify(i),game.stateHandling.saveGamePrepared)}),30)}else console.log("game tried to save, but couldn't as can't access localStorage")},saveGamePrepared:function(e){game.stateHandling.alreadySaving=!1,localStorage.setItem("WD_gameState_"+game.stateHandling.saveGamesData.currentSaveID.toString(),e),game.stateHandling.saveAppState(),this.reloadAfterSave&&window.location.reload(!0)},loadAppState:function(){return game.stateHandling.localStorageAllowed()?null===localStorage.getItem("WD_app_state")?(appState=$.extend(!0,{},defaultAppState),!1):(appState=JSON.parse(localStorage.getItem("WD_app_state")),game.state.settings=$.extend(!0,{},appState.settings),!0):(console.log("showing user prompt to allow 3rd party cookies for datastorage"),!1)},saveAppState:function(){if(!game.stateHandling.localStorageAllowed())return console.log("showing user prompt to datastorage to be able to save games"),!1;appState.settings=$.extend(!0,{},game.state.settings);var e=$.extend(!0,{},appState);localStorage.setItem("WD_app_state",JSON.stringify(e))},loadGameSaves:function(){return game.stateHandling.localStorageAllowed()?null===localStorage.getItem("WD_gameSaves")?(console.log("game saves not saved: "),!1):(game.stateHandling.saveGamesData=JSON.parse(localStorage.getItem("WD_gameSaves")),!1===game.stateHandling.saveGamesData.currentSaveID&&game.stateHandling.saveGamesData.gameSaves.length>0&&(game.stateHandling.saveGamesData.currentSaveID=game.stateHandling.saveGamesData.gameSaves[0].id),!0):(console.log("showing user prompt to allow 3rd party cookies for datastorage"),!1)},loadGameSave:function(e,t){if(isUndefined(t)&&(t=!1),!game.stateHandling.localStorageAllowed())return console.log("showing user prompt to allow 3rd party cookies for datastorage"),!1;if(null===localStorage.getItem("WD_gameSaves"))return console.log("game saves not saved: "),!1;var a,s="WD_gameState_"+e.toString();if(null===(a=localStorage.getItem(s)))return console.log("gameKey not exist: "+s),!1;if(t)return a;var r=game.data.mojTristokosmatih(a);r.replace(/&quot;/gi,'"'),r.replace(/\s+/g,""),r.replace("\n","\\n"),r.replace("-","-");var i=JSON.parse(r);return game.stateHandling.handleVersionState(i)},localStorageAllowed:function(){var e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return console.log("local storage not allowed: "+e),!1}},resetLoad:function(e){if(!game.stateHandling.localStorageAllowed())return console.log("can't access localStorage but refreshing game anyway"),void window.location.reload(!0);if(isUndefined(e)&&(e=!1),!1===e)$.each(game.stateHandling.saveGamesData.gameSaves,(function(e,t){var a="WD_gameState_"+game.stateHandling.saveGamesData.currentSaveID.toString();localStorage.removeItem(a)})),localStorage.removeItem("WD_gameSaves"),window.location.reload(!0);else{$.each(game.stateHandling.saveGamesData.gameSaves,(function(t,a){if(a.id.toString()===e.toString())return game.stateHandling.saveGamesData.gameSaves.splice(t,1),!1}));var t="WD_gameState_"+e.toString();if(localStorage.removeItem(t),game.stateHandling.saveGamesData.currentSaveID===e&&(game.stateHandling.saveGamesData.currentSaveID=!1),game.stateHandling.saveGamesData.gameSaves.length>0){var a=$.extend(!0,{},game.stateHandling.saveGamesData);localStorage.setItem("WD_gameSaves",JSON.stringify(a))}else localStorage.removeItem("WD_gameSaves");!1===game.stateHandling.saveGamesData.currentSaveID&&game.stateHandling.saveGamesData.gameSaves.length>0&&(game.stateHandling.saveGamesData.currentSaveID=game.stateHandling.saveGamesData.gameSaves[0].id,console.log("RESETING LOAD - no ID saved, setting it to "+game.stateHandling.saveGamesData.currentSaveID)),gameUI.showMenu("main_menu")}},handleVersionState:function(e){var t=$.extend(!0,{},defaultGameState),a=defaultGameState.gameVersion,s=!0,r=e.gameVersion;if(console.log("handling Version state - Newest: "+a+" Saved: "+r),void 0===r)t=e,console.log("user has no previous version - old code - force reset game state"),s=!1,setTimeout((function(){page.$dynamicDOM.$.find(".special-note").html(getLine("old_save_reset"))}),500);else if(forceVersionUpdate||helpers.dev.compareVersions(r,a)<0){console.log("New version available! - Current Version: "+a+" UserLatestVersion: "+r),(isUndefined((t=e).gameSeed)||isUndefined(t.seedStates))&&(game.data.seeds.main=new Srand,game.data.seeds.biomes=new Srand(game.data.seeds.main.intInRange(1,1e6)),t.gameSeed=game.data.seeds.main.seed(),t.seedStates={main:game.data.seeds.main.getState(),biomes:game.data.seeds.biomes.getState()}),isUndefined(t.timeMXes)&&(t.timeMXes=defaultGameState.timeMXes),isUndefined(t.lastActions)&&(t.lastActions=defaultGameState.lastActions),isUndefined(t.stats.infamy)&&(t.stats.infamy=0,t.stats.notoriety=0,t.stats.diplomacy=0),isUndefined(t.taskPriorities.other.tasks.daily)&&(t.taskPriorities.other.tasks.daily=game.const.taskPriorities.other.tasks.daily),isUndefined(t.achievements)&&(t.achievements=defaultGameState.achievements);var i=["lockedContinents"],o=[];$.each(defaultGameState,(function(e,a){if(!(i.indexOf(e)>-1))if(isUndefined(t[e])){var s;let r=!1;isArray(a)?s=$.extend(!0,[],a):"object"==typeof a&&null!==a?(s=$.extend(!0,{},a),r=!0):s=a,t[e]=r?$.extend(!0,{},s):s}else"object"==typeof a&&null!==a&&"[object Array]"!=typeof a&&$.each(a,(function(a,s){if(!(o.indexOf(a)>-1)&&isUndefined(t[e][a])){var r;let i=!1;isArray(s)?r=$.extend(!0,[],s):"object"==typeof s&&null!==s?(r=$.extend(!0,{},s),i=!0):r=s,t[e][a]=i?$.extend(!0,{},r):r}}))})),isUndefined(t.resources.perk_points.lastCycle)&&(t.resources.perk_points.lastCycle=0)}else console.log("Version is up to date: "+r),t=e;return t.gameVersion=a,game.state=t,game.stateHandling.handleCorruptState(!0),s},handleCorruptState:function(e){void 0===e&&(e=!1),console.log("handle corrupt state called - adjuststate: "+e);$.each(game.const.resources,(function(e,t){"revealed"!==e&&game.change.resource(e,0)})),$.each(game.state.stats,(function(e,t){var a=game.const.stats[e];if(isUndefined(a.min))return;let s=a.min,r=a.max,i=defaultGameState.stats[e];invalidNumberValue(t)?(console.log("WARNING adjusted stat type "+e+" to DEFAULT of: "+i+" origValue: "+t),game.state.stats[e]=i):t>r?(console.log("WARNING adjusted stat type "+e+" to MAX of: "+i+" origValue: "+t),game.state.stats[e]=r):t<s&&(console.log("WARNING adjusted stat type "+e+" to MIN of: "+i+" origValue: "+t),game.state.stats[e]=s)}))},saveToFile:function(e){page.showLoader();var t=game.stateHandling.loadGameSave(e,!0);!1===t?(gameUI.showMiniPopup(getLine("err_download_save")+err),page.hideLoader()):game.stateHandling.fileSavePrepared(t)},fileSavePrepared:function(e){var t=new Blob([e],{type:"text/plain;charset=utf-8"});saveAs(t,"simpocalypse_save_file.txt"),page.hideLoader()},loadFromFile:function(){document.getElementById("filetoRead").addEventListener("change",(function(){var e=this.files[0];if(e){var t=new FileReader;t.onload=function(e){document.getElementById("editor").value=e.target.result},t.onerror=function(e){console.error("An error occured reading the file",e)},t.readAsText(e,"UTF-8")}}),!1)},handleFileSelect:function(e){for(var t,a=e.target.files,s=0;t=a[s];s++){var r=new FileReader;r.onload=function(e){var t,a,s=e.target.result,r=s;try{t=game.data.mojTristokosmatih(s)}catch(e){return console.log("issue deplastiking - err: "+e),void gameUI.showMiniPopup(getLine("err_decoding_save")+e)}t.replace(/&quot;/gi,'"'),t.replace(/\s+/g,""),t.replace("\n","\\n"),t.replace("-","-");try{a=JSON.parse(t)}catch(e){return void gameUI.showMiniPopup(getLine("err_parsing_save")+e)}var i=randomIntFromInterval(100,1e4).toString();a.saveID=i;var o={id:i,lastPlayed:a.lastUpdate,gameTime:a.gameDate,citizens:a.resources.citizens.total};game.stateHandling.saveGamesData.gameSaves.push(o),game.stateHandling.saveGamesData.currentSaveID=i;var n=$.extend(!0,{},game.stateHandling.saveGamesData);localStorage.setItem("WD_gameSaves",JSON.stringify(n));var d=r;localStorage.setItem("WD_gameState_"+i.toString(),d),gameUI.showMenu("main_menu")};r.readAsText(t,"UTF-8")}}},change:{resource:function(e,t,a){if(void 0!==t){var s,r={type:e,data:t},i=!1;switch(e){case"population":case"citizens":case"tiles":case"mining_deposits":case"water_sources":case"knowledge":case"research_points":case"food":case"water":case"wood":case"stone":case"iron":case"uranium":case"energy":case"gold":s=game.state.resources[e];break;case"perk_points":case"perk_points_pending":case"perk_points_in_research":s=game.state.resources.perk_points;break;case"requires_citizens":case"total_citizens":s=game.state.resources.citizens;break;case"research_points_change":s=game.state.resources.research_points;break;case"happiness":s=game.state.stats;break;case"dirt_available":s=game.state.buildings.mining_plant[t.id];break;case"tiles_refund":s=game.state.resources.tiles;break;case"water_sources_refund":s=game.state.resources.water_sources;break;case"mining_deposits_refund":s=game.state.resources.mining_deposits}var o=t<0;if(!0===a)switch(e){case"population":s.total=t;break;case"citizens":s.total=t,s.idle=t;break;case"tiles":case"mining_deposits":case"water_sources":case"knowledge":case"research_points":case"research_points_change":case"perk_points":s.total=t,s.amount=t;break;case"food":case"wood":case"iron":case"energy":case"gold":s.amount=t;break;case"happiness":s[e]=t;break;case"dirt_available":s.dirt_available=t.amount}else switch(e){case"population":s.total+=t;break;case"citizens":s.total+=t,s.idle+=t,helpers.common.setRefreshFlagForCache("resourceRates"),o||(i="total_citizens");break;case"requires_citizens":s.idle+=t;break;case"total_citizens":s.total+=t,helpers.common.setRefreshFlagForCache("resourceRates"),o||(i="total_citizens");break;case"tiles":s.amount+=t,t>0&&(s.total+=t);break;case"tiles_refund":s.amount+=t;break;case"mining_deposits":case"water_sources":o||(s.total+=t),s.amount+=t;break;case"water_sources_refund":case"mining_deposits_refund":s.amount+=t;break;case"knowledge":o||(s.total+=t),s.amount+=t;break;case"research_points":s.total+=t,s.amount+=t;break;case"research_points_change":s.amount+=t;break;case"perk_points":s.amount+=t,s.total+=t;break;case"perk_points_pending":s.pending+=t,t<0&&(s.total-=t,s.amount-=t);break;case"perk_points_in_research":s.in_research+=t;break;case"food":case"water":case"wood":case"stone":case"iron":case"uranium":case"energy":case"gold":s.amount+=t,s.amount=Math.max(0,s.amount);break;case"happiness":s[e]+=t;break;case"dirt_available":s.dirt_available+=t.amount}if(void 0!==s&&null!==s.amount&&null!==s.total||console.log("WARNING !!! Res type "+e+" set to null! amount "+t),void 0!==s){var n=1e3;invalidNumberValue(game.state.resources.citizens.total)||(n*=game.state.resources.citizens.total/100,["tiles","mining_deposits","water_sources"].indexOf(e)>-1&&(n=Math.ceil(n/10))),void 0!==s.amount&&invalidNumberValue(s.amount)&&(console.log("WARNING - Resource Type "+e+" change issue. Tried to set to .amount to: "+s.amount),s.amount=n),void 0!==s.total&&invalidNumberValue(s.total)&&(console.log("WARNING - Resource Type "+e+" change issue. Tried to set to .total to: "+s.total),s.total=n),void 0!==s.extra&&invalidNumberValue(s.extra)&&(console.log("WARNING - Resource Type "+e+" change issue. Tried to set to .extra to: "+s.extra),s.extra=n)}i&&helpers.common.checkAchievementGet(i),gameUI.checkDOMrefresh("resource_change",r)}},stat:function(e,t){var a;switch(e){case"infamy":case"notoriety":case"diplomacy":a=game.state.stats}a[e]=Math.max(0,Math.min(1,a[e]+t))}},switchTo:function(e,t){!1===game.state.jobs.explorer.territory&&"resources"!==e||(gameStarted=!0);var a=e===game.data.currentView;void 0===t?game.data.currentView===e?t=helperData.extraParams:delete helperData.extraParams:helperData.extraParams=t,"territories"===game.data.currentView&&"change_explore_area"===hoverAction&&(hoverAction="attack"),a?gameUI.saveScrollBarPositions():(helperData.currentInput=!1,helperData.inputFocus=!1),staticCanvasCtx.clearRect(0,0,pageWidth,pageHeight),coverCanvasCtx.clearRect(0,0,pageWidth,pageHeight),forceDrawAll=!0,hoverCellRef=!1;var s=game.data.currentView;page.$gameContent.removeClass(game.data.currentView).addClass(e),game.data.currentView=e;var r=game.data.currentViewCategory;game.data.currentViewCategory=helpers.common.getViewCategory(e).tag,"battle"!==e&&!1!==helperData.precappedSpeed&&(game.data.timelapse.speed=helperData.precappedSpeed,looptimeMX=helperData.precappedSpeed,helperData.precappedSpeed=!1),a||game.data.currentViewCategory!==r||"factories"===game.data.currentView&&audio.playSound("factory"),game.checkTutorialCompletion(),helperData.showNewCategory===game.data.currentViewCategory&&(helperData.showNewCategory=!1),page.$gameUI.$.attr("cursorType","default"),helperData.dontHideQuickPopup||a||(helperData.dontHideQuickPopup=!1,gameUI.showQuickPopup(!1,!1,!0)),gameUI.prepareContent(e,t),gameUI.setOverlay(),a||(game.data.cameraW=game.const.gameW,game.data.cameraH=game.const.gameH,helpers.common.setCameraOffset(0,0),containerRatio=basePage.scale,page.popupsOpen=0);var i=!1,o="";if(["battle","battle_select","world","territories","research"].indexOf(e)>-1&&(helpers.common.isCurrentView("battle")&&game.data.timelapse.speed>3&&(helperData.precappedSpeed=game.data.timelapse.speed,game.data.timelapse.speed=3,looptimeMX=3,game.pushNotification(getLine("battle_speed_capped"),"battle_speed_capped","warning")),o="anim_class anim_radialBlur"),page.$popupTooltip.removeClass("shown"),game.data.toolTip.shown=0,"battle"===e){var n,d,c;void 0!==t&&t.preserveLeader||(game.data.leaderEnabled=!1),game.initBattleData(game.data.pendingBattleData);for(var l=0;l<game.data.gameObjects.length;l++)if(c=!1,n=game.data.gameObjects[l],d=game.const.squadronSize[game.state.corpuses[n.corpusID].upgrades.maxSquadronSize],n.tanksAmount<d){for(var g=0;g<game.data.buttons.length;g++)if(game.data.buttons[g].parentGlobalID===n.globalID){c=!0;break}if(!c){var m={x:n.x-30,y:n.y+10,parentGlobalID:n.globalID};game.addButton("addMore",m)}}createBattleBiomes(game.state.currentParentGrids.zones),game.toggleCanvasEvents(!1),game.getSettingValue("auto_attack_section")&&game.data.automationData.enableAttack&&(game.data.battleStarted=!0),audio.music.enabled&&3!==audio.backgroundIndex&&!game.data.showOnlyStartingTer&&audio.forceStartBackgroundMusic(3)}else"world"===e?(helperData.setupColony=!1,game.const.canvasOffsetX=0,game.const.canvasOffsetY=0,switchToGridType("regions"),helpers.colonies.initColoniesFromState(),game.const.canvasOffsetX=375,game.const.canvasOffsetY=83,i={x:helpers.common.getCanvasOffsetX(),y:helpers.common.getCanvasOffsetY(),w:pageWidth-helpers.common.getCanvasOffsetX(),h:pageHeight-helpers.common.getCanvasOffsetY()},helperData.ignoreFlickers.push("world")):"battle_select"===e?("territories"===s&&(audio.playSound("click"),game.data.attackableDirections.territories=helpers.territory.getAttackableDirections("territories",game.state.currentParentGrids.territories),0===game.data.attackableDirections.territories.length&&(game.data.attackableDirections.territories=game.data.attackableDirections.regions,game.data.attackableDirections.current=game.data.attackableDirections.regions)),switchToGridType("zones"),calcBiomsForZones(game.state.currentParentGrids.territories),helpers.territory.getTerritoryBorders(!1,"zones"),page.toggleArtillery(game.data.artillery.selectedType,!0),game.data.autoFire.enabled||page.toggleFightOptions("auto_fire"),page.$gameUI.$fightOptions.addClass("not-displayed"),page.$gameUI.$artilleryOptions.addClass("not-displayed"),game.toggleCanvasEvents(!1)):"territories"===e?(game.data.attackableDirections.regions=helpers.territory.getAttackableDirections("regions",game.state.currentParentGrids.regions,!0),game.const.canvasOffsetX=0,game.const.canvasOffsetY=0,switchToGridType("territories"),createBiomes(),helpers.territory.getTerritoryBorders(game.data.playerOwnedTerRefs),game.data.showOnlyStartingTer&&(helpers.common.setZoomRatio(.6*pageHeight/100),helpers.common.defineCanvasCenter(e)),page.toggleArtillery(game.data.artillery.selectedType,!0),page.toggleFightOptions("auto_fire",!0),a||(game.data.cameraW=game.const.gameW-200,game.data.cameraH=game.const.gameH),page.$gameUI.$fightOptions.addClass("not-displayed"),page.$gameUI.$artilleryOptions.addClass("not-displayed"),game.toggleCanvasEvents(!0),setTimeout((function(){forceDrawAll=!0}),50)):"research"===e&&(a||(helpers.common.setZoomRatio(.25*pageHeight/280),game.const.canvasOffsetX=80,game.const.canvasOffsetY=130,i={x:helpers.common.getCanvasOffsetX(),y:helpers.common.getCanvasOffsetY(),w:pageWidth-helpers.common.getCanvasOffsetX()-10,h:pageHeight-helpers.common.getCanvasOffsetY()}));"battle"!==e&&($.each(helperData.queuedPopups,(function(e,t){gameUI.showPopup(t.type,t.extraParams)})),helperData.queuedPopups=[]),a||(page.defineCanvasBoundaries(i),helpers.common.defineZoomRatios(e),helpers.common.defineCanvasCenter(e),""!==o?(page.$animationHolder.addClass("anim_class anim_fadeOutIn"),page.$animationsAttachPoint.addClass(o)):page.$gameUI.$.find(".content-holder").addClass("anim_class anim_fadeOutIn")),SimpleScrollbar.initAll(),a&&gameUI.recoverScrollBarPositions(),!1!==page.tutorialArrowData&&page.updateTutorialArrow()},refreshCurrentView:function(e){void 0!==e?game.switchTo(game.data.currentView,e):game.switchTo(game.data.currentView)},toggleCanvasEvents:function(e){void 0===e&&(e=!1),setTimeout((function(){}),10)},addButton:function(e,t){var a,s,r,i;switch(e){case"addMore":a=t.x+30,s=t.y+3,r={parentGlobalID:t.parentGlobalID,buttonType:e},i=new GameObject(a,s,26,26,r),game.data.buttons.push(i)}},addTrash:function(){game.data.trash=[];var e=new GameObject(0,pageHeight-300,103,103,{type:"trash"});game.data.trash.push(e)},changeButtonLocation:function(e,t){var a,s,r=t.button;switch(e){case"addMore":a=t.x-5,s=t.y;break;case"remove":a=t.x+30,s=t.y}r.x=a,r.y=s},addAnimation:function(e,t,a){let s=performance.now();var r=e;if(isUndefined(game.data.animationLogs[e])&&(r="general_text"),game.data.animationLogs[r].lastDone+game.data.animationLogs[r].minInterval>=s){if(game.data.animationLogs[r].timestampLogs.length>game.data.animationLogs[r].storeMaxLogs)return}else game.data.animationLogs[r].timestampLogs=[];game.data.animationLogs[r].timestampLogs.push(s),game.data.animationLogs[r].lastDone=s;var i="";if(a&&a.$onDOMelement){var o=a.$onDOMelement.offset();a.x=o.left,a.y=o.top,a.forceDraw=!0,"right"===a.originSide&&(a.x+=a.$onDOMelement.width()+20,i+=" origin-left")}var n=!1,d=a||{x:lastAnimationX,y:lastAnimationY},c={x:d.x,y:d.y};(isUndefined(a)||isUndefined(a.forceDraw))&&(c=helpers.common.getConvertedGameToCanvasData(d));var l=c.x,g=c.y;isUndefined(a.extraClasses)||(i+=a.extraClasses);var m="anim_scaleInOut";if(isUndefined(a.animType)||(m=a.animType),"damage"===e)i+=a?" player":" enemy",n=$('<div class="scale_in_out_text anim_scaleInOut animation'+i+'" style="top:'+g+"px; left:"+l+'px">-'+t+"</div>");else if("general_text"===e){if(i+=" "+e,!isUndefined(a.subType))switch(a.subType){case"res_added":case"fully_filled":case"over-ui":i=" "+a.subType}"fully_filled"===a.subType&&(m="anim_scaleIn"),i+=" "+m,n=$('<div class="scale_in_out_text animation '+i+'" style="top:'+g+"px; left:"+l+'px">'+t+"</div>")}n&&page.$animationsAttachPoint.append(n)},cleanAllAnimations:function(){page.$animationsAttachPoint.find(".animation").remove()},changeWorker:function(e,t,a,s){if(0===a)return!1;var r;a=parseInt(a),gameUI.checkDOMrefresh("resource_change",{type:t}),gameUI.checkDOMrefresh("worker_change",{type:e,subType:t,id:s});var i=!1,o=game.const.resourceBuildings.indexOf(t)>-1,n=!1;if(void 0!==game.const.resources[t])r=game.state.resources[t];else if("buildings"===e&&["mining_plant","factory","war_factory"].indexOf(t)>-1)r=game.state.buildings[t][s],i=(n=helpers.common.getBuildingData(t,s)).gains.citizen_capacity;else if(o)r=game.state.buildings[t],i=(n=helpers.common.getBuildingData(t,s)).gains.citizen_capacity;else{var d=!1;if(void 0===game.const.resources[t])(d=game.const.jobs[t].requires)&&(i=game.state.buildings[d].avl*game.const.buildings[d].gains.citizen_capacity);r=game.state.jobs[t]}if(a<0?a=-Math.min(r.workers,Math.abs(a)):(a=Math.min(a,Math.max(0,game.state.resources.citizens.idle)),!1!==i&&(a=Math.min(a,i-r.workers))),a>0&&game.state.resources.citizens.idle>=a||a<0&&r.workers+a>=0){game.change.resource("requires_citizens",-a);var c=r.workers>0;if(r.workers+=a,r.workers>0?c||(r.working=!0):r.working=!1,!1!==n){var l=t+(void 0!==s&&!1!==s?s.toString():"");helpers.common.setRefreshFlagForCache("buildings",l)}return helpers.common.setRefreshFlagForCache("resourceRates"),!0}return!1},changeBuildQueue:function(e,t){var a=e.type,s=e.subType,r=e.amount,i=e.id;if(0===r)return!1;if(void 0===t){t=!1;var o=game.state.buildQueue[game.state.buildQueue.length-1];game.state.buildQueue.length>0&&o[0]===s&&(void 0===i||i===o[3])&&(t=game.state.buildQueue.length-1)}var n=game.const[a][s],d=!1;if(r>0){var c,l=!0,g=n.costs.build,m=!1;["mining_plant","factory","war_factory"].indexOf(s)>-1&&(m=n.upgrades,(c=void 0!==(c=game.state.buildings[s])[i]&&c[i])&&(g=m[c.level-1].costs.build,!0)),$.each(g,(function(e,t){var s=game.state.resources[e].amount;if("citizens"===e?s=game.state.resources[e].idle:"mining_deposits"===a&&(s=game.state.resources[e].total-game.state.resources[e].amount),t*r>s)return l=!1,!1})),l&&($.each(g,(function(e,t){"citizens"===e&&(e="requires_citizens"),game.change.resource(e,-t*r)})),m&&(c.upgrading=!0),!1!==t?game.state.buildQueue[t][1]+=r:game.state.buildQueue.push([s,r,n.buildTime,i]),game.forceUpdateTutorial(2,"buildings",s,!isUndefined(i)&&parseInt(i)),d=!0)}else r*=-1,$.each(n.costs.build,(function(e,t){game.change.resource(e,t*r)})),!1!==t&&(game.state.buildQueue[t][1]-=r,game.state.buildQueue[t][1]<=0&&(game.state.buildQueue.splice(t,1),refreshUI.currentPopup=!0));return gameLoop.pausedGame&&game.buildQueueCycleHandler(0),d&&gameUI.handleIconReveal("build_queue"),d},changeProduceQueue:function(e,t,a,s){if(0===a)return!1;void 0===s&&(s=!1,game.state.produceQueue.length>0&&game.state.produceQueue[game.state.produceQueue.length-1][0]===t&&(s=game.state.produceQueue.length-1));var r=game.state[e][t];if(a>0){var i=!0;if($.each(r.costs,(function(e,t){if(t*a>game.state.resources[e].amount)return i=!1,!1})),i)return $.each(r.costs,(function(e,t){game.state.resources[e].amount-=t*a})),!1!==s?game.state.produceQueue[s][1]+=a:game.state.produceQueue.push([t,a,r.buildTime]),!0}else a*=-1,$.each(r.costs,(function(e,t){game.state.resources[e].amount+=t*a})),!1!==s&&(game.state.produceQueue[s][1]-=a,game.state.produceQueue[s][1]<=0&&game.state.produceQueue.splice(s,1));return!1},checkObjectives:function(e){void 0===e&&(e=!1);var t=game.state.objectives.currentGroup;!1!==e&&(t=e);var a=game.state.objectives.objectiveGroups[t],s=game.const.objectiveGroups[t];if(void 0!==s){void 0===a&&(game.state.objectives.objectiveGroups[t]={done:!1,objectivesDone:[]},a=game.state.objectives.objectiveGroups[t]);var r,i,o=!1,n=!1;$.each(s.objectives,(function(d,c){if(n=!1,!(a.objectivesDone.indexOf(d)>-1&&(n=!0,!1===e)))if(i=!0,$.each(c.conditions,(function(e,t){switch(t.type){case"resolve":void 0===(r=resolveObject(t.sub1,game))&&(r=0),o||(currentSuggestedResearchUpgradeID=void 0!==t.reqUpgrade&&t.reqUpgrade);break;case"explore_progress":if(!1===game.state.jobs.explorer.region)r=0;else{var a=game.state.gameGrids.territories[game.state.jobs.explorer.region][game.state.jobs.explorer.territory];r=a.explored_spots/game.const.exploredSpotsCap}break;case"tanks_built":var s=0;$.each(game.state.corpuses,(function(e,t){s+=t.tanksAmount})),r=s;break;case"explore_new_territory":r=game.state.homeGridRefs.territories!==game.state.jobs.explorer.territory?1:0;break;case"region_conquered":r=game.data.playerOwnedRegions-1,game.data.playerOwnedTers>=game.const.gameGrids.territories.cols*game.const.gameGrids.territories.rows&&(r+=1);break;case"open_view":r=game.data.currentView===t.sub1?1:0;break;case"player_owned_regions":r=game.data.playerOwnedRegions;break;case"wishlist_on_steam":r=wishlistClicked?1:0;break;case"open_popup":r=page.topPopupType===t.sub1?1:0;break;case"start_exploring":r=!1!==game.state.jobs.explorer.territory?1:0}if(!n&&r<t.amount)return i=!1,!1})),i){if(n||a.objectivesDone.push(d),!1===e){var l=isUndefined(s.langObjIDextra)?d:d+s.langObjIDextra;game.pushNotification("<span>"+getLine("objective_completed")+"</span> <br /> "+getLine("obj_"+s.langID+"_"+l+"_desc"),"objective_completed","objective-completed"),GameAnalytics("addProgressionEvent","Complete","GameProgress","ObjCompleted_"+t.toString()+"_"+l.toString(),"",playTime),game.data.tutorial.inited=!1}game.checkObjectiveReveal(t,d),a.objectivesDone.length>=s.objectives.length&&game.const.objectiveGroups.length-1>game.state.objectives.currentGroup&&!1===e&&(GameAnalytics("addProgressionEvent","Complete","GameProgress","ObjGroupCompleted_"+t.toString(),"",playTime),game.state.objectives.currentGroup++,gameUI.showPopup("objective_completed"))}else if(!o&&(o=!0,game.data.tutorial.currentObjData=$.extend(!0,{},c),game.data.tutorial.currentObjData.objID=d,game.data.tutorial.currentObjData.groupID=t,game.data.tutorial.currentObjData.langID=s.langID,game.data.tutorial.currentObjData.langObjIDextra=s.langObjIDextra,game.data.tutorial.currentObjData.groupObjCount=s.objectives.length,!game.data.tutorial.inited)){if(game.setNewTutorial(c.tutorial),page.$dynamicDOM.$.find(".quick-tutorial").remove(),game.data.tutorial.activeSideTutorial=!1,!isUndefined(c.sideTutorial)&&(game.data.tutorial.activeSideTutorial=c.sideTutorial,0!==d||0!==t)){var g=[{type:"time",value:performance.now()+500}];switch(c.sideTutorial){case"assign_food":g.push({type:"food",value:0});break;case"assign_water":g.push({type:"water",value:0})}helperData.tutorialShowConditions=g}page.$gameUI.$.find(".ui-holder.bottom .objective-missions").attr("data-after",d+"/"+s.objectives.length)}}))}},checkObjectiveReveal:function(e,t){var a=game.const.objectiveGroups[e].objectives[t],s=["timelapse_icon","show_all_territories","explorables_parts"];void 0!==a.reveals&&$.each(a.reveals,(function(e,t){if(-1===s.indexOf(t))gameUI.handleIconReveal(t);else switch(t){case"timelapse_icon":page.$gameUI.$overlay.find(".top-menu .item.timelapse").removeClass("hidden");break;case"show_all_territories":game.data.showOnlyStartingTer=!1,gameUI.handleIconReveal("territories");break;case"explorables_parts":game.const.explorables[5].avl=!0}}))},getExploreResults:function(e,t){void 0===t&&(t=.25,t=.35);var a=Math.random();game.data.exploreDryStreak>2&&(t=1),game.const.exploreOrder[0].received&&game.const.exploreOrder[1].received||(t=1);var s=game.state.jobs.explorer,r=game.state.exploreResults;if(a<=t){game.data.exploreDryStreak=0;var i=1;s.workers>game.const.exploreRolls[0]&&(i=2),s.workers>game.const.exploreRolls[1]&&(i=3);for(var o=Math.min(e,s.workers),n=0,d=0,c=(getLine("explore_results"),{});i>0;){var l=o;n<game.const.exploreRolls.length&&(l=Math.min(l,game.const.exploreRolls[n]-d));var g=helpers.explore.getExploredItem(),m=s.region+"_"+s.territory;helpers.explore.exploreResultsTypeInited(g.type,m);var u=g.perTerCap-r[m][g.type];if(!(u<=0)){var p=randomIntFromInterval(g.min,g.max),h=l,v=Math.ceil(u/p);if(p*=l=Math.min(l,v),c=helpers.explore.storeExploreResults(c,g.type,m,p),h>l){var f=randomIntFromInterval(0,2),y=game.const.explorables[f],b=randomIntFromInterval(y.min,y.max);helpers.explore.exploreResultsTypeInited(y.type,m),c=helpers.explore.storeExploreResults(c,y.type,m,b),l=h}o-=l,d+=l,i--,n++}}helpers.explore.handleExploreResults(c),gameUI.checkDOMrefresh("time_finished","explore_results"),helpers.common.setRefreshFlagForCache("resourceRates")}else game.data.exploreDryStreak++},postTerritoryExplore:function(e,t){var a=game.state.jobs.explorer;if(a.working=!1,t&&(audio.playSound("fullyExplored"),game.pushNotification(getLine("explore_results_message2",a.territory),"fully_explored","warning")),game.getSettingValue("auto_explore")){var s=helpers.automation.getNewTerritoryToExplore();if(!1!==s&&(a.working=!0,a.region=s.region,a.territory=s.territory,console.log("new explore targt was found: "+JSON.stringify(s)),game.getSettingValue("carry_over_explore"))){var r=Math.max(0,game.const.exploredSpotsCap-game.state.gameGrids.territories[a.region][a.territory].explored_spots),i=Math.min(r,e);if(game.state.gameGrids.territories[a.region][a.territory].explored_spots+=i,game.state.gameGrids.territories[a.region][a.territory].explored_spots>=game.const.exploredSpotsCap){game.state.gameGrids.territories[a.region][a.territory].explored_spots=Math.min(game.state.gameGrids.territories[a.region][a.territory].explored_spots,game.const.exploredSpotsCap);var o=helpers.territory.getRegionIDfromRef(a.region);game.state.gameGrids.regions[o].exploredTers++,delete game.state.exploreResults[a.region+"_"+a.territory]}i>0&&game.getExploreResults(i),(e=Math.max(0,e-r))>0&&game.postTerritoryExplore(e,!1)}}(helpers.common.isCurrentView("territories")||helpers.common.isCurrentView("world"))&&(forceDrawAll=!0)},changeExploreArea:function(e){game.state.jobs.explorer.territory,!1===game.state.jobs.explorer.territory?(audio.playSound("click"),GameAnalytics("addProgressionEvent","Complete","GameProgress","StartExploring","",playTime),gameUI.handleIconReveal("resources"),!1===game.state.homeGridRefs.territories&&(game.state.homeGridRefs.territories=e)):audio.playSound("click"),game.state.jobs.explorer.region=game.state.currentParentGrids.regions,game.state.jobs.explorer.territory=e,game.state.jobs.explorer.working=!0,game.switchTo("resources"),hoverAction="attack"},buyTerritory:function(e){var t=game.state.gameGrids.territories[game.state.currentParentGrids.regions][e].price;t>game.state.resources.gold.amount?console.log("Can't afford this territory!"):(game.change.resource("gold",-t),game.change.stat("notoriety",game.const.notorietyIncreaseByPurchase),game.change.stat("diplomacy",-game.const.diplomacyReductionByPurchase*(2-helpers.common.getContinentRewardBoost("lower_diplomacy_reduction"))),game.state.lastActions.territoryPurchase=game.state.gameDate,helpers.territory.forceConquerGrid("territories",e))},scrapPart:function(e,t){var a,s=e;a="pending"===t?game.state.partsPending:game.state.parts;for(var r=0;r<a.length;r++)a[r].id===s&&(a.splice(r,1),game.state.resources.gold.amount+=200)},addPart:function(e,t,a){var s=helpers.plans.getPartsByTypeID(a,t),r=page.$gameUI.$contentHolder.find(".right-column .tab-data.active"),i=game.state.corpuses[e],o=game.state.corpuses[e].parts[a];if(void 0===i){for(var n=0;n<e+1;n++)void 0===game.state.corpuses[e]&&game.state.corpuses[e].push({parts:{}});i=game.state.corpuses[e]}if(i.parts[a]=s.id,s.used=!0,"turret"===s.type&&(i.ammoType=s.ammoType),!helpers.plans.checkIfPartUsed(o))for(n=0;n<game.state.parts.length;n++)if(game.state.parts[n].id===o){game.state.parts[n].used=!1;break}if(r.length>0){var d=gameUI.prepareDOM("planData",i);r.html(d)}},removeCorpusFromGameObjects:function(e){for(var t,a,s=game.data.gameObjects.length-1;s>=0;s--)game.data.gameObjects[s].corpusID===e&&(game.state.resources.citizens.idle+=game.data.gameObjects[s].crew,game.data.gameObjects.splice(s,1));for(s=game.data.buttons.length-1;s>=0;s--){a=!1,t=game.data.buttons[s].parentGlobalID;for(var r=0;r<game.data.gameObjects.length;r++)if(game.data.gameObjects[r].globalID===t){a=!0;break}a||game.data.buttons.splice(s,1)}},executeTrade:function(e,t,a){var s,r=!1;void 0!==game.state.resources[t]?(s=game.state.resources[t],r=!0):s=game.state.products[t];var i,o=void 0!==s.avl?s.avl:s.amount,n="buy"===e,d=helpers.market.getTradeDetails(t,e,a,n),c=s.price_history[s.price_history.length-1],l=d.tradeValue;if(a=d.orderSize,"sell"===e){if(o<a)return;a=-a,i=c.sP}else{if(game.state.resources.gold.amount<l)return void console.log("can't afford to buy these many! totalCost: "+l+" gold: "+game.state.resources.gold.amount);i=c.bP,l=-l}var g=r?game.state.resources[t]:game.state.products[t];g.demand=d.updatedDemand,g.supply=d.updatedSupply,r?game.change.resource(t,a):s.avl+=a,game.change.resource("gold",l);var m={type:t,d:c.d,l:c.l,y:i};if(game.state.tradeHistory.push(m),helpers.market.updateChartData(!0),gameUI.checkDOMrefresh("market_refresh"),!1!==helperData.currentSubInput){helperData.forceCurrentSubInput=!0;var u=Number(helperData.currentSubInput)/100,p=o+a;"buy"===e&&(p=game.state.resources.gold.amount),p=Math.floor(p*u*100)/100,p=Math.max(1,p)}},buyResearchUpgrade:function(e,t){void 0===t&&(t=!1);var a=game.const.researchUpgrades[e],s=void 0!==a.buyLimit?a.buyLimit:1;if(!t&&game.state.resources.research_points.amount<1)console.log("can't afford this upgrade!");else if(!(void 0!==a.demoLocked&&a.demoLocked&&isDemo())||t){var r=!1;if(!isUndefined(a.perkCost))if(r=a.perkCost,game.state.resources.perk_points.total-game.state.resources.perk_points.in_research<r)return;var i=game.const.researchUpgradesNodes[e];if(!t&&!i.startNodePos)if(isUndefined(game.state.researchUpgrades[i.parentNode.upgradeID]))return!1;var o=helpers.common.getUpgradeUnlockDetails(e);if(t||o.allConditionsMet){if(void 0===game.state.researchUpgrades[e])game.state.researchUpgrades[e]=1;else{if(game.state.researchUpgrades[e]>=s)return;game.state.researchUpgrades[e]+=1}if("building_unlock"===a.category)game.const.buildings[a.subID].unlocked=!0,"mining_plant"===a.subID?(gameUI.handleIconReveal("stone"),gameUI.handleIconReveal("iron"),gameUI.handleIconReveal("uranium")):"thermal_plant"===a.subID||"solar_panels"===a.subID?game.const.resources.energy.revealed=!0:"war_factory"===a.subID?(gameUI.handleIconReveal("army"),gameUI.handleIconReveal("produce")):"factory"===a.subID&&(gameUI.handleIconReveal("economic"),gameUI.handleIconReveal("factories"),gameUI.handleIconReveal("global_market"),gameUI.handleIconReveal("product_stock"),gameUI.handleIconReveal("gold"));else if("product_unlock"===a.category){game.const.products[a.subID].unlocked=!0}else"building_bonus"===a.category||a.category;if(game.recalculateResearchBoosts(),game.checkTutorialCompletion(),!t&&(game.change.resource("knowledge",0),game.change.resource("research_points_change",-1),!1!==r&&game.change.resource("perk_points_in_research",r),"building_unlock"===a.category&&!game.getSettingValue("hide_research_buy_hint"))){var n="resources";"social"===a.type?n="public_buildings":"economic"===a.type?n="factories":"army"===a.type&&(n="produce");var d=getLine("just_learned",getLine("buildings_"+a.subID),getLine("view_"+n));d+="<br /><br />"+gameUI.printSetting("hide_research_buy_hint",{extraClasses:"checkbox"}),gameUI.showConfirmationPrompt(d,function(e){game.switchTo(e)}.bind(null,n),(function(){}))}}}},startRandomAttackOnPlayer:function(){if(game.state.lastAttackOnPlayer=game.state.gameDate,!(game.data.playerOwnedTers<=0)){var e=game.findRandomTileNextToPlayer();if(!1!==e){var t=game.chooseRandomNeighbour(e),a=e.split("_"),s=(Math.min(a[0],a[1]),game.data.gameGrids[e].powerMX),r=game.calculateArmyPower([["tank_1",5],["tank_2",3]],{hpMX:s}),i=2073600/game.const.realToGameTime,o=game.data.playerPower/r*i*game.data.gameGrids[t[0]].controlRate,n=game.data.gameGrids[t[0]].controlRate/o;game.state.defenses[e]={target:t[0],dir:t[1],formation:[{subType:"tank_1",maxHp:100,fireRate:1e3,projectileData:{type:"shell_1",speed:1e3,damage:10,min_dmg:5,max_dmg:15}},{subType:"tank_1",maxHp:100,fireRate:1e3,projectileData:{type:"shell_1",speed:1e3,damage:10,min_dmg:5,max_dmg:15}},{subType:"tank_1",maxHp:100,fireRate:1e3,projectileData:{type:"shell_1",speed:1e3,damage:10,min_dmg:5,max_dmg:15}},{subType:"tank_1",maxHp:100,fireRate:1e3,projectileData:{type:"shell_1",speed:1e3,damage:10,min_dmg:5,max_dmg:15}},{subType:"tank_1",maxHp:100,fireRate:1e3,projectileData:{type:"shell_1",speed:1e3,damage:10,min_dmg:5,max_dmg:15}},{subType:"tank_2",maxHp:200,fireRate:1500,projectileData:{type:"shell_2",speed:600,damage:35,min_dmg:20,max_dmg:50}},{subType:"tank_2",maxHp:200,fireRate:1500,projectileData:{type:"shell_2",speed:600,damage:35,min_dmg:20,max_dmg:50}},{subType:"tank_2",maxHp:200,fireRate:1500,projectileData:{type:"shell_2",speed:600,damage:35,min_dmg:20,max_dmg:50}}],power:r,time_left:1e3*o,drain_rate:n}}}},demolishBuilding:function(e,t,a,s){void 0===s&&(s=!0),t=parseInt(t);var r=helpers.common.getBuildingData(e,a),i=void 0!==r.avl?r.avl:void 0!==r.level?1:0;if(0===(t=Math.min(t,i)))return!1;var o=t,n=["food","water","wood","energy","gold","stone","iron","uranium"];$.each(r.costs.build,(function(e,a){(s||-1!==["tiles","water_sources","mining_deposits"].indexOf(e))&&(o=t,n.indexOf(e)>-1&&(o*=game.data.continentRewardBoosts.demolish_refund_rate-1+.5),a*=o,"citizens"===e&&(e="requires_citizens"),"tiles"===e?e="tiles_refund":"water_sources"===e?e="water_sources_refund":"mining_deposits"===e&&(e="mining_deposits_refund"),game.change.resource(e,a))})),$.each(r.gains,(function(e,a){switch(e){case"population":game.change.resource(e,-a.max*t)}})),void 0!==r.avl?game.state.buildings[e].avl-=t:game.state.buildings[e].splice(a,1);var d=0;if(void 0!==r.workers||void 0!==r.provides_jobs){var c=r.gains.citizen_capacity,l=parseInt(c/i),g=void 0!==r.workers?"workers":"jobs",m="workers"===g?r.workers:game.state.jobs[r.provides_jobs].workers,u=c-l*t-m;u<0&&(void 0!==r.avl&&("workers"===g?game.state.buildings[e].workers+=u:game.state.jobs[r.provides_jobs].workers+=u),s&&game.change.resource("requires_citizens",Math.abs(u))),s||(d=Math.min(l*t,m),game.change.resource("total_citizens",-d))}return s||(d>0?game.pushNotification(getLine("demolish_building_text0",t,getLine("buildings_"+e),d),"building_destroyed","danger"):game.pushNotification(getLine("demolish_building_text1",t,getLine("buildings_"+e)),"building_destroyed","danger")),game.const.buildings[e].fullRefresh=!0,!0},tryAgain:function(){game.state.gameState="restarting_game",game.resetGameState(),game.state.timesGivenFreePerksOnLoss<5&&(game.change.resource("perk_points",2),game.state.timesGivenFreePerksOnLoss++),game.resetStartingSettings(),gameUI.showMenu("start_menu")},doPrestige:function(){game.state.gameState="prestiging";var e=game.state.resources.perk_points.pending;game.change.resource("perk_points_pending",-e),game.resetGameState(),game.state.gameStats.prestigesDone.amount++,helperData.tempData2=e,game.resetStartingSettings(),gameUI.showMenu("start_menu")},resetStartingSettings:function(){game.state.settings.buy_amount=1,game.data.settings.buy_amount=1,game.state.buyAmountType="1",game.state.buyAmount=1,game.refreshBuyAmounts(),game.state.settings.assign_amount=1,game.data.settings.assign_amount=1,game.state.assignAmountType="1",game.getAssignAmount()},resetGameState:function(e){gameInited=!1,startNewGame=!0,gameStarted=!1,game.fireInitWithErrorCheck()},getRandomParts:function(e,t){for(var a,s=[];s.length<e;){a={id:game.state.nextPartID},game.state.nextPartID++,void 0===t&&(t=randomItemFromArray(game.const.partTypes));for(var r=randomItemFromArray(game.const.partSubTypes),i=["anti_armor","rail","srapnel"],o=["regular"],n=0;n<i.length;n++)helpers.common.getResearchBoost("ammo_types",i[n],!0)&&o.push(i[n]);if("turret"===t){var d,c,l=0;for(a.ammoType="regular";l<50;)if(l+=1,c=helpers.common.getRandomItemBasedOnWeight(game.const.ammoPartRarities).id,d=game.const.partStatAmmoType[c],o.indexOf(d)>-1){a.ammoType=game.const.partStatAmmoType[c];break}a.ammoType}var g=helpers.common.getRandomItemBasedOnWeight(game.const.partRarities);a.used=!1;var m,u=game.const.partSubTypeStats[t][r];a.type=t,a.subType=r,a.rarityID=g.id,a.stats={},a.costs={},a.crew=randomIntFromInterval(game.const.partCosts[t].citizens.min,game.const.partCosts[t].citizens.max),$.each(u,(function(e,s){var r,i,o;switch(e){case"max_hp":i=r=randomIntFromInterval(s.min,s.max);break;case"dmg":o=randomIntFromInterval(s.min_spread,s.max_spread),i=(r=randomIntFromInterval(s.min,s.max))+o;break;case"armor":m=helpers.common.getResearchBoost("part_stats","armor",!0),i=r=m?randomIntFromInterval(s.min,s.max):0;break;case"deflection":(m=helpers.common.getResearchBoost("part_stats","deflection",!0))?(o=randomIntFromInterval(s.min_spread,s.max_spread),i=(r=randomIntFromInterval(s.min,s.max))+o):i=r=0;break;case"armor_piercing":(m=helpers.common.getResearchBoost("part_stats","armor_piercing",!0))?(o=randomIntFromInterval(s.min_spread,s.max_spread),i=(r=randomIntFromInterval(s.min,s.max))+o):i=r=0;break;case"accuracy":i=r=randomIntFromInterval(s.min,s.max)}"accuracy"!==e&&"deflection"!==e&&(r*=g.mx,i*=g.mx),$.each(game.const.partCosts[t][e],(function(e,t){var s=t*r;void 0===a.costs[e]?a.costs[e]=s:a.costs[e]+=s})),a.stats[e]={min:r,max:i}})),s.push(a)}return s},createRandomFormation:function(e){for(var t=Math.ceil(e/1e4),a=randomIntFromInterval(1,Math.min(3,t)),s=e,r=[],i=Math.ceil(e/1e3),o=randomIntFromInterval(a,Math.min(12,i)),n=0;n<a;n++){var d=randomIntFromInterval(1,Math.max(1,o-(a-n+1)));o-=d;var c=parseInt(s/a/d),l=game.createRandomTank(c);s=c*d;for(var g=0;g<d;g++)r.push(l)}game.data.battleData.formationB=r;var m,u=0;for(n=0;n<game.data.battleData.formationB.length;n++)if(game.data.battleData.formationB[n]){var p=$.extend(!0,{},game.data.battleData.formationB[n]);p.enemy=!0,p.type="vehicle",p.hp=void 0!==p.hp?p.hp:p.maxHp,isNaN(p.hp)&&console.log("data hp is nan : "),p.formationSlot=n,p.projectileData.max_dmg_calc=p.projectileData.max_dmg,p.projectileData.min_dmg_calc=p.projectileData.min_dmg,p.currentTarget=null;var h=450-80*(u=parseInt(n/6)),v=100+60*parseInt(n%6)+u%2*20;p.rotatedDeg=180,p.targetAngle=3.14,m=new Vehicle(h,v,61,31,p),game.data.enemyObjects.push(m)}},createRandomTank:function(e){var t=helpers.units.getAllowedTankStats(),a=helpers.units.getAllowedAmmoTypes(),s=randomFloatFromInterval(.5,1)*Math.sqrt(e/10),r=parseInt(e/s),i=Math.max(10,.1*s),o=Math.max(100,.1*r),n=s/i,d=r/o,c=1,l=1,g=helpers.common.getRandomItemBasedOnWeight(game.const.ammoPartRarities).id,m=game.const.partStatAmmoType[g];a[m]||(m="regular");var u={regular:1,anti_armor:1.2,srapnel:1.3,rail:1.5}[m];c*u>n?m="regular":c*=u;var p=1e3,h=1e3/p;c*h>n?p=1e3:c*=h;for(var v,f,y,b,_=randomIntFromInterval(0,game.const.partSubTypes.length-1),w=randomIntFromInterval(0,game.const.partSubTypes.length-1),x={parts:{hull:_,turret:w},fireRate:p,maxHp:L},k=["armor","deflection","armor_piercing","accuracy"],D=0;D<k.length;D++){var I=k[D];if(t[I]){switch(I){case"armor":v=randomIntFromInterval((b=game.const.partSubTypeStats.hull[game.const.partSubTypes[_]][I]).min,b.max),f="def",y=(2*v+o)/o;break;case"deflection":v=randomIntFromInterval((b=game.const.partSubTypeStats.hull[game.const.partSubTypes[_]][I]).min,b.max),f="def",y=1/(1-v/100);break;case"armor_piercing":v=randomIntFromInterval((b=game.const.partSubTypeStats.turret[game.const.partSubTypes[w]][I]).min,b.max),f="dmg",y=1+v/100;break;case"accuracy":v=randomIntFromInterval((b=game.const.partSubTypeStats.turret[game.const.partSubTypes[w]][I]).min,b.max),f="dmg",y=v/100}"def"===f?l*y>d?v=0:l*=y:c*y>n?v=0:c*=y,x[I]=v}else x[I]=0}var C=o*(d/l),T=i*(n/c),A=Math.max(1,parseInt(.9*T)),P=Math.max(1,parseInt(T/.9)),S=(A+P)/2,L=C*(S/T);return x.projectileData={type:"shell_1",speed:p,damage:S,min_dmg:A,max_dmg:P,specType:m,armor_piercing:x.armor_piercing},x.maxHp=L,x},createRandomTankOld:function(e){var t=helpers.units.getAllowedTankStats(),a=helpers.units.getAllowedAmmoTypes(),s=randomFloatFromInterval(.5,1)*Math.sqrt(e/10),r=Math.max(1,parseInt(.9*s)),i=Math.max(1,parseInt(s/.9)),o=(r+i)/2,n=parseInt(e/o),d=randomIntFromInterval(0,game.const.partSubTypes.length-1),c=randomIntFromInterval(0,game.const.partSubTypes.length-1),l=helpers.common.getRandomItemBasedOnWeight(game.const.ammoPartRarities).id,g=game.const.partStatAmmoType[l];a[g]||(g="regular");for(var m,u,p={parts:{hull:d,turret:c},maxHp:n,fireRate:1e3,projectileData:{type:"shell_1",speed:1e3,damage:o,min_dmg:r,max_dmg:i,specType:g}},h=["armor","deflection","armor_piercing","accuracy"],v=0;v<h.length;v++){var f,y=h[v];if(t[y]){switch(y){case"armor":m=randomIntFromInterval((u=game.const.partSubTypeStats.hull.allround[y]).min,u.max);break;case"deflection":f=randomIntFromInterval(2,7),(m=randomIntFromInterval((u=game.const.partSubTypeStats.hull.allround[y]).min,u.max))+f;break;case"armor_piercing":f=randomIntFromInterval(2,7),(m=randomIntFromInterval((u=game.const.partSubTypeStats.turret.allround[y]).min,u.max))+f;break;case"accuracy":m=randomIntFromInterval((u=game.const.partSubTypeStats.turret.allround[y]).min,u.max)}p[y]=m}else p[y]=0}return p},getAssignAmount:function(e){var t=!1;void 0===e&&(e=game.state.assignAmountType,t=!0);var a=e.split("_"),s=0;if(a.length>1){var r=parseInt(a[0]);s=Math.max(1,parseInt(game.state.resources.citizens.total*(r/100)))}else s=isNaN(e)?Math.max(0,game.state.resources.citizens.idle):parseInt(e);return s=Math.max(1,Math.min(s,game.state.resources.citizens.total)),t&&(game.state.assignAmount=s),s},pushNotification:function(e,t,a){if(game.data.timelapse.opened)return!1;void 0===t&&(t=""),void 0===a&&(a=""),game.data.notifications.update=!0,game.data.notifications.list.length>0&&game.data.notifications.list[game.data.notifications.list.length-1][0]===e?(game.data.notifications.list[game.data.notifications.list.length-1][2]++,game.data.notifications.list[game.data.notifications.list.length-1][3]=game.state.gameDate):game.data.notifications.list.push([e,t,a,1,game.state.gameDate,!1]),game.data.notifications.list.length>50&&game.data.notifications.list.splice(0,1),gameUI.refreshPopup("notifications"),gameUI.handleIconReveal("notifications")},clearAimPriority:function(){for(var e=0;e<game.data.aimPriority.length;e++){var t=game.data.objectRefs[game.data.aimPriority[e]];void 0===t?game.data.aimPriority.splice(e,1):t.aimPriority=!1}game.data.aimPriority=[]},updateAimPriority:function(e){game.data.aimPriority.splice(0,1);for(var t=0;t<game.data.aimPriority.length;t++){perfTests.c7++;var a=game.data.objectRefs[game.data.aimPriority[t]];void 0===a?game.data.aimPriority.splice(t,1):a.aimPriority=t+1}},calculateArmyPower:function(e,t){if(!1===e){var a=[],s={};if(t.enemy);else{for(var r=0;r<game.data.gameObjects.length;r++){var i=game.data.gameObjects[r].corpusID;void 0===s[i]?s[i]=game.data.gameObjects[r].tanksAmount:s[i]+=game.data.gameObjects[r].tanksAmount}$.each(s,(function(e,t){a.push([e,t])}))}e=a}var o=0,n=void 0!==t?t.hpMX:1,d=1,c=1,l={regular:1,anti_armor:1.2,srapnel:1.3,rail:1.5};for(r=0;r<e.length;r++){var g=e[r][0],m=e[r][1];let t;-1!==g.indexOf("tank")?t=game.const.units[g]:(t=game.state.corpuses[g],d=helpers.plans.getUpgradesMultiplier(g,"dmg"),c=helpers.plans.getUpgradesMultiplier(g,"health"));var u=(t.projectileData.min_dmg+t.projectileData.max_dmg)/2,p=t.stats.accuracy.min/100,h=1e3/t.fireRate,v=1+t.stats.armor_piercing.min/100,f=l[t.ammoType],y=2*t.stats.armor.min,b=1/(1-t.stats.deflection.min/100);o+=u*p*h*v*f*d*((t.maxHp+y)*b*n*c)*m}return o},checkIfNeighbour:function(e,t){var a,s;if("territories"===e){if(game.data.playerOwnedTers<=0)return!1;a=game.data.terNeighbourRefs[t],s=game.state.gameGrids.territories[game.state.currentParentGrids.regions]}else a=game.data.terTileNeighbourRefs[t],s=game.state.gameGrids.zones[game.state.currentParentGrids.regions][game.state.currentParentGrids.territories];void 0===a&&console.log("UNDEFINED check if neigh type "+e+" staticRef "+t);for(var r=0;r<a.length;r++){if(!s[a[r]].enemy)return!0}return!1},checkIfAttackable:function(e,t,a){var s;game.data.gameGrids[game.state.currentParentGrids.territories];if("territories"===e?s=game.state.gameGrids.territories[game.state.currentParentGrids.regions]:"zones"===e&&(s=game.state.gameGrids.zones[game.state.currentParentGrids.regions][game.state.currentParentGrids.territories]),!s[t].enemy)return!1;for(var r="territories"===e?"regions":"territories",i=game.data.attackableDirections[r],o=game.const.gameGrids[e],n=o.cols,d=o.rows,c=game.data.gameGrids[t],l=0;l<i.length;l++){switch(i[l]){case"n":if(0===c.y)return!0;break;case"w":case"nw":case"sw":if(c.x>=(n-1)*cellSize)return!0;break;case"s":if(c.y>=(d-1)*cellSizeH)return!0;break;case"e":case"ne":case"se":if(0===c.x)return!0}}return game.checkIfNeighbour(e,t)},findRandomTileNextToPlayer:function(){for(var e=!1,t=0;!e;){var a=Object.keys(game.data.gameGrids),s=a[a.length*Math.random()<<0];if(game.data.gameGrids[s].enemy&&game.checkIfNeighbour("territories",s)&&void 0===game.state.attacks[s]&&void 0===game.state.defenses[s]&&(e=s),++t>50)break}return e},chooseRandomNeighbour:function(e){for(var t=!1;!t;){var a=game.data.terNeighbourRefs[e][parseInt(Math.random()*game.data.terNeighbourRefs[e].length)];game.data.gameGrids[a].enemy||(t=a)}var s=game.data.gameGrids[e].ref.split("_"),r=game.data.gameGrids[t].ref.split("_"),i="";return s[0]>r[0]?i="w":s[0]<r[0]?i="e":s[1]>r[1]?i="n":s[1]<r[1]&&(i="s"),[t,i]},refreshResourceRates:function(e){perfTests.c2++;if(helpers.common.getCacheData("resourceRates","all"))return!1;var t=void 0!==e,a=$.extend(!0,{},game.data.resourceRates);$.each(game.data.resourceRates,(function(a,s){perfTests.c4++,t&&a!==e||(s.gains=0,s.consumption=0,s.absolute=0)})),$.each(game.const.resources,(function(e,t){if(perfTests.c4++,t.gatherable){var a=game.state.resources[e];if(void 0!==a.workers&&a.workers>0){var s=Math.min(a.workers*game.data.continentRewardBoosts.scavenging_rate_increase,a.extra);game.data.resourceRates[e].gains+=s*game.state.stats.productivity}}})),$.each(game.state.buildings,(function(e,t){if(perfTests.c4++,void 0!==t.avl&&t.avl>0){var a=(o=helpers.common.getBuildingData(e)).avl*(void 0!==o.eff?o.eff:1),s=1;void 0!==t.workers&&(s=t.workers/Math.max(1,o.gains.citizen_capacity)),void 0!==o.gains&&$.each(o.gains,(function(e,t){if(perfTests.c4++,void 0!==game.data.resourceRates[e]){void 0!==game.data.continentBoosts[e+"_gain"]&&game.data.continentBoosts[e+"_gain"];var r=game.data.startingBoosts[e+"_gain_mx"];!isUndefined(r)&&r>1&&r,game.data.resourceRates[e].gains+=t.genRate*a*game.state.stats.productivity*s}})),void 0!==o.costs.operational&&$.each(o.costs.operational,(function(e,t){if(perfTests.c4++,void 0!==game.data.resourceRates[e]){var r=t*a;effBasedOnWorkerRatio&&(r*=s),game.data.resourceRates[e].consumption+=r}}))}else for(var r=0;r<t.length;r++){perfTests.c4++;var i=r,o=helpers.common.getBuildingData(e,i),n=t[r];s=1;void 0!==n.workers&&(s=n.workers/Math.max(1,o.gains.citizen_capacity));var d=o.costs.operational,c=o.level;o.eff>0&&($.each(o.gains,(function(e,t){perfTests.c4++;var a=t*o.eff*game.state.stats.productivity*s;if("dig_rate"===e&&o.dirt_available>0){a=Math.min(o.dirt_available,a);var r=c<2?o.dirt_composition:o.upgrades[c-2].dirt_composition;$.each(r,(function(e,t){perfTests.c4++;var s=t*a;void 0!==game.data.resourceRates[e]&&(game.data.resourceRates[e].gains+=s)}))}})),$.each(d,(function(e,t){if(perfTests.c4++,void 0!==game.data.resourceRates[e]){var a=t*o.eff;effBasedOnWorkerRatio&&(a*=s),game.data.resourceRates[e].consumption+=a}})))}}));var s=1-(game.data.continentRewardBoosts.rations_reduction-1);game.data.resourceRates.food.consumption+=game.state.resources.citizens.total*(3*s)/24,game.data.resourceRates.water.consumption+=game.state.resources.citizens.total*(3*s)/24,$.each(game.data.resourceRates,(function(e,t){perfTests.c4++,t.absolute=t.gains-t.consumption,t.absolute!==a[e].absolute&&(refreshUI.resourceRates=!0,refreshData.resourceRates.push(e))})),helpers.common.storeCacheData("resourceRates","all",refreshData.resourceRates)},refreshBuyAmounts:function(){var e=game.state.buyAmountType;if($.each(game.const.buildings,(function(t,a){var s=helpers.common.getBuildingData(t);if(void 0===s.upgrades){var r=parseInt(game.state.buyAmount);if("max"===e){var i=9999999999;$.each(s.costs.build,(function(e,t){var a=game.state.resources[e].amount;"citizens"===e?a=game.state.resources[e].idle:"mining_deposits"===e&&(a=game.state.resources[e].total-game.state.resources[e].amount);var s=parseInt(a/t);s<i&&(i=s)})),r=Math.max(1,i)}else"ocd"===e&&(r=game.getOCDamount(s.avl,t));a.buyAmount!==r&&(a.fullRefresh=!0,a.buyAmount=r)}})),helpers.common.setRefreshFlagForCache("buildings"),helpers.common.isCurrentView("produce")){var t=!1;$.each(game.state.corpuses,(function(a,s){var r=parseInt(game.state.buyAmount);if("max"===e){var i=9999999999;$.each(s.costs,(function(e,t){var a=game.state.resources[e].amount;"citizens"===e?a=game.state.resources[e].idle:"mining_deposits"===e&&(a=game.state.resources[e].total-game.state.resources[e].amount);var s=parseInt(a/t);s<i&&(i=s)})),r=Math.max(1,i)}else"ocd"===e&&(r=game.getOCDamount(s.tanksAmount,!1));s.buyAmount!=r&&(s.buyAmount=r,t=!0)})),t&&game.refreshCurrentView()}},getOCDamount:function(e,t){!1!==t&&(e+=void 0!==refreshData.buildQueue.data[t]?refreshData.buildQueue.data[t].amount:0);return 10-e%10},recalculateResearchBoosts:function(){game.data.researchBoosts={},game.data.timelapse.availableSpeeds=[],$.each(game.state.researchUpgrades,(function(e,t){if(!(t<=0)){var a=game.const.researchUpgrades[e],s=!1,r=!1,i=0;if("timelapse_speed"!==a.category){if(void 0!==a.effects)for(var o=0;o<a.effects.length;o++){var n=a.effects[o];switch(a.category){case"building_bonus":case"stat_bonus":s=a.subID,r=n.type,i=n.amount;break;case"building_upgrade":case"building_limit":s=a.subID,r=n.type,i=n.amount;break;case"resource_unlock":s=a.subID,r=n.type,i=1;break;case"timelapse_config":s=a.category,r=n.type,i=1;break;case"actions":s=a.category,r=n.type,i=t;break;case"ammo_types":case"part_stats":case"army_unlocks":s=a.category,r=n.type,i=n.amount}var d=!0;-1===["building_upgrade","building_limit","timelapse_config","resource_unlock","actions"].indexOf(a.category)&&(i*=t,d=!1),!1!==s&&(void 0===game.data.researchBoosts[s]?(game.data.researchBoosts[s]={},game.data.researchBoosts[s][r]=i):void 0===game.data.researchBoosts[s][r]||d?game.data.researchBoosts[s][r]=i:game.data.researchBoosts[s][r]+=i)}}else game.data.timelapse.availableSpeeds.push(a.amount)}})),helpers.common.setRefreshFlagForCache("buildings"),helpers.common.setRefreshFlagForCache("resourceRates")},recalculateContinentBoosts:function(){var e={build_bonus:helpers.common.getContinentBoost("build_bonus"),mining_rate:helpers.common.getContinentBoost("mining_rate"),knowledge_gain:helpers.common.getContinentBoost("knowledge_gain"),citizen_gain:helpers.common.getContinentBoost("citizen_gain"),lower_spread:helpers.common.getContinentBoost("lower_spread"),wood_gain:helpers.common.getContinentBoost("wood_gain"),water_gain:helpers.common.getContinentBoost("water_gain")};game.data.continentBoosts=e,helpers.common.setRefreshFlagForCache("buildings"),helpers.common.setRefreshFlagForCache("resourceRates")},checkTimelapseStatus:function(){var e=!1;if(game.getSettingValue("health_drop")&&helperData.consequtive.healthDrop>1&&(e=!0,refreshData.timelapsePaused="healthDrop",helperData.consequtive.healthDrop=0),game.getSettingValue("productivity_drop")&&helperData.consequtive.productivityDrop>1&&(e=!0,refreshData.timelapsePaused="productivityDrop",helperData.consequtive.productivityDrop=0),game.getSettingValue("auto_rations")){var t=helpers.automation.checkResourceScavangeNeed("food");0!==t&&game.changeWorker("jobs","food",t),0!==(t=helpers.automation.checkResourceScavangeNeed("water"))&&game.changeWorker("jobs","water",t)}return e},calculateGameTimePowerMX:function(e){return"power"===e?game.state.timeMXes.powerMX*(2-game.data.continentRewardBoosts.power_mx_reduction):"cost"===e?game.state.timeMXes.costMX*(2-game.data.continentRewardBoosts.cost_mx_reduction):1},recalculateProgressionStats:function(){var e=game.data.multipliers.powerMX,t=game.state.stats.infamy*game.const.infamyPowerMXspan*(1-(1-game.const.diplomacyReducesPowerMX)*game.state.stats.diplomacy),a=game.const.baseEnemyPowerMX+t;game.data.multipliers.powerMX=a;var s=game.data.multipliers.costMX,r=game.state.stats.notoriety*game.const.notorietyCostMXspan*(1-(1-game.const.diplomacyReducesCostMX)*game.state.stats.diplomacy),i=game.const.baseEconomyCostMX+r;game.data.multipliers.costMX=i,e===a&&s===i||helpers.common.isCurrentView("world")&&gameUI.checkDOMrefresh("overlay_refresh")},getSettingValue:function(e){return game.data.settings[e]},changeSettingValue:function(e,t,a){var s=!isUndefined(a.fromDOM)&&$(a.fromDOM),r=game.const.settings[e],i=game.state.settings[e],o="",n="",d=t;switch(r.type){case"boolean":r.possibleValues.length>2?!1!==s&&(s.parent().find('[data-type="'+e+'"]').addClass("off"),o="off"):!1===i?(d=!0,!1!==s&&(o="off",s.attr("data-value","ON").attr("data-display-value","ON"))):(d=!1,!1!==s&&(n="off",s.attr("data-value","OFF").attr("data-display-value","OFF")));break;case"linear":var c;"music_level"===e?(audio.refreshSoundVolumes("music"),c=game.getSettingValue(e),0===d?(console.log("new value is zero so disable"),audio.disableMusic(),audio.stopAllMusic()):(audio.enableMusic(),0===c&&audio.forceStartBackgroundMusic(3))):"sound_level"===e&&(c=game.getSettingValue(e),audio.refreshSoundVolumes("sound"),0===d?audio.disableSound():audio.enableSound())}switch(!1!==s&&(""!==o&&s.removeClass(o),""!==n&&s.addClass(n)),game.state.settings[e]=d,game.data.settings[e]=d,isUndefined(r.global)||!0!==r.global||game.stateHandling.saveAppState(),e){case"language":currentLanguage=d,loadLanguage(d,(function(){gameUI.showMenu("main_menu"),gameUI.showPopup("language",!1,!0),page.$gameContent.attr("class",(function(e,t){return t.replace(/(^|\s)lang-\S+/g,"lang-"+d)})),page.$gameContent.find(".game-options .icon.language").attr("data-lang",d)}));break;case"all_music":case"sound_level":break;case"music":d?(audio.music.enabled=!0,audio.forceStartBackgroundMusic(3)):(audio.music.enabled=!1,audio.stopAllMusic());break;case"sound":d?audio.sound.enabled=!0:(audio.sound.enabled=!1,audio.stopAllSounds());break;case"show_quick_notification":d?page.$dynamicDOM.$.find(".notifications-new").removeClass("hidden"):page.$dynamicDOM.$.find(".notifications-new").addClass("hidden");break;case"hide_completed_objectives":s&&(d?s.closest(".ss-content").find(".objective-holder.completed").addClass("not-displayed"):s.closest(".ss-content").find(".objective-holder.completed").removeClass("not-displayed"));break;case"buy_amount":game.state.buyAmountType=d,game.state.buyAmount=d,game.refreshBuyAmounts();break;case"assign_amount":game.state.assignAmountType=d,game.getAssignAmount(),gameUI.checkDOMrefresh("resource_change",{type:"citizens"}),helperData.dontHideQuickPopup=!0,game.refreshCurrentView();break;case"timelapse_config_visible":s&&(d?s.closest(".extra-overlay").find(".timelapse-config").removeClass("not-displayed"):s.closest(".extra-overlay").find(".timelapse-config").addClass("not-displayed"));break;case"filter_notes_explorers":if(s){var l="explorer-gain";s.closest(".tab-data").find(".table-list ."+l).toggleClass("not-displayed")}break;case"filter_notes_warnings":if(!s){l="warning";s.closest(".tab-data").find(".table-list ."+l).toggleClass("not-displayed")}break;case"hide_research_buy_hint":break;case"hide_map_objectives":s||(d?$this.closest(".map-objectives").addClass("hide-objectives"):$this.closest(".map-objectives").removeClass("hide-objectives"));break;case"show_objective_hints":s||(d?s.parent().parent().find(".missions-data").addClass("hints-visible"):s.parent().parent().find(".missions-data").removeClass("hints-visible"));break;case"show_game_hints":gameUI.checkDOMrefresh("new_tutorial");break;case"hide_overlay":d?(page.$gameContent.addClass("hide-overlay"),selectedUIoffset="fullscreen"):(page.$gameContent.removeClass("hide-overlay"),selectedUIoffset="basic");var g=game.data.currentView;game.data.currentView=!1,game.switchTo(g);break;case"hide_notifications":d?page.$gameContent.addClass("hide-notifications"):page.$gameContent.removeClass("hide-notifications");break;case"show_top_ui":d?page.$gameContent.addClass("show-top-ui"):page.$gameContent.removeClass("show-top-ui");break;case"show_bottom_ui":d?page.$gameContent.addClass("show-bottom-ui"):page.$gameContent.removeClass("show-bottom-ui");break;case"hide_view_categories":d?page.$gameContent.addClass("hide-view-categories"):page.$gameContent.removeClass("hide-view-categories");break;case"hide_map_navigation":d?page.$gameContent.addClass("hide-map-navigation"):page.$gameContent.removeClass("hide-map-navigation");break;case"fullscreen":gameToggleFullScreen(d);break;case"master_toggle":!0===d?(game.data.settings.music_level>0&&(audio.enableMusic(),audio.forceStartBackgroundMusic(3)),game.data.settings.sound_level>0&&audio.enableSound()):(audio.disableMusic(),audio.disableSound(),audio.stopAllMusic());break;case"hide_warning_icons":d&&page.$gameUI.$.find(".notification-icon").remove();break;case"hide_map_panel_bottom":d?$this.closest(".side-panel").removeClass("extended-bottom"):$this.closest(".side-panel").addClass("extended-bottom")}},recalculateContinentRewardBoosts:function(){game.data.continentRewardBoosts={},$.each(game.const.continentRewards,(function(e,t){game.data.continentRewardBoosts[e]=helpers.common.getContinentRewardBoost(e)})),helpers.common.setRefreshFlagForCache("buildings"),helpers.common.setRefreshFlagForCache("resourceRates")},recalculateStartingBoosts:function(){game.data.startingBoosts={},$.each(game.const.startingBoosts,(function(e,t){game.data.startingBoosts[e]=helpers.common.getStartingBoost(e)})),helpers.common.setRefreshFlagForCache("buildings"),helpers.common.setRefreshFlagForCache("resourceRates")},setNewTutorial:function(e){game.removeTutorialHints(),isUndefined(e)||!1===e?(game.data.tutorial.active=!1,game.data.tutorial.part=0,game.data.tutorial.step=0,game.data.tutorial.data=[]):(game.data.tutorial.active=!0,game.data.tutorial.part=0,game.data.tutorial.step=0,game.data.tutorial.data=e,gameUI.checkDOMrefresh("new_tutorial")),game.data.tutorial.inited=!0,game.checkTutorialCompletion(!0)},checkTutorialCompletion:function(e){if(game.data.tutorial.active){var t=!1,a=game.data.tutorial.part,s=game.data.tutorial.data.length;if(!isUndefined(e))for(var r=!1,i=s-2;i>=0;i--){var o=game.data.tutorial.data[i][2][0],n=game.data.tutorial.data[i][2][1],d=game.data.tutorial.data[i][2][2];if(s>1){switch(o){case"workers":break;case"buildings":r=(["mining_plant","factory","war_factory"].indexOf(n)>-1?game.state.buildings[n].length:game.state.buildings[n].avl)>0;break;case"research":!isUndefined(game.state.researchUpgrades[n])&&game.state.researchUpgrades[n]>0&&(r=!0);break;case"level":game.state.buildings[n].length>0&&game.state.buildings[n][0].level>d&&(r=!0)}if(r){game.data.tutorial.part=i+1,a=game.data.tutorial.part;break}}}switch(game.data.tutorial.step){case 0:t=game.data.tutorial.data[a][0]===game.data.currentViewCategory;break;case 1:t=game.data.tutorial.data[a][1]===game.data.currentView;break;case 2:var c=game.data.tutorial.data[a][2][0],l=game.data.tutorial.data[a][2][1],g=game.data.tutorial.data[a][2][2];if(s>1){switch(c){case"workers":break;case"buildings":t=(["mining_plant","factory","war_factory"].indexOf(l)>-1?game.state.buildings[l].length:game.state.buildings[l].avl)>0;break;case"research":!isUndefined(game.state.researchUpgrades[l])&&game.state.researchUpgrades[l]>0&&(t=!0);break;case"level":game.state.buildings[l].length>0&&game.state.buildings[l][0].level>g&&(t=!0)}}}t&&(page.removeTutorialArrow(),game.data.tutorial.step++,game.data.tutorial.step>2?1===s?(game.data.tutorial.active=!1,game.removeTutorialHints()):a<s-1&&(game.data.tutorial.step=0,game.data.tutorial.part++,game.checkTutorialCompletion()):game.checkTutorialCompletion(),gameUI.checkDOMrefresh("new_tutorial"))}},checkIfTutorialized:function(e,t,a,s){if(["produce","manage_plans","level","select_hull","select_turret","turret_tab"].indexOf(t)>-1){var r=!1,i=!1;switch(t){case"produce":for(var o=!1,n=0;n<game.state.corpuses.length;n++){(d=game.state.corpuses[n]).parts.hull&&d.parts.turret&&(o=!0)}r=o&&game.state.buildings.war_factory.length>0&&helpers.common.isCurrentView("manage_plans");break;case"manage_plans":for(o=!1,n=0;n<game.state.corpuses.length;n++){var d;(d=game.state.corpuses[n]).parts.hull&&d.parts.turret&&(o=!0)}r=!o&&game.state.buildings.war_factory.length>0&&!helpers.common.isCurrentView("manage_plans");break;case"level":"war_factory"===a&&(r=0===game.state.buildings.war_factory.length);break;case"select_hull":r=game.state.corpuses.length>0&&!game.state.corpuses[0].parts.hull,i=!0;break;case"select_turret":r=game.state.corpuses.length>0&&!game.state.corpuses[0].parts.turret,i=!0;break;case"hull_tab":r=game.state.corpuses.length>0&&game.state.corpuses[0].parts.turret&&!game.state.corpuses[0].parts.hull&&"turret"===helperData.currentTab,i=!0;break;case"turret_tab":r=game.state.corpuses.length>0&&game.state.corpuses[0].parts.hull&&!game.state.corpuses[0].parts.turret&&"hull"===helperData.currentTab,i=!0}if(r)return" tutorial-flicker";if(i)return""}if(!game.data.tutorial.active)return"";if(e!==game.data.tutorial.step)return"";if(!game.getSettingValue("show_game_hints"))return"";var c=game.data.tutorial.part;return 0===game.data.tutorial.step?game.data.tutorial.data[c][0]!==t?"":" tutorial-flicker":1===game.data.tutorial.step?game.data.tutorial.data[c][1]!==t?"":" tutorial-flicker":t===game.data.tutorial.data[c][2][0]&&a===game.data.tutorial.data[c][2][1]&&s===game.data.tutorial.data[c][2][2]?" tutorial-flicker":""},forceUpdateTutorial:function(e,t,a,s){if(e===game.data.tutorial.step){var r=game.data.tutorial.part,i=game.data.tutorial.data.length;if(t===game.data.tutorial.data[r][2][0]&&a===game.data.tutorial.data[r][2][1]&&s===game.data.tutorial.data[r][2][2])switch(t){case"buildings":case"open_popup":1===i||game.data.tutorial.part===i-1?(game.data.tutorial.active=!1,game.removeTutorialHints()):r<i-1&&(game.data.tutorial.step=0,game.data.tutorial.part++,game.checkTutorialCompletion())}}},removeTutorialHints:function(){page.$gameUI.$.find(".tutorial-flicker").removeClass("tutorial-flicker")},battleCycleHandler:function(e){if(game.data.battleStarted){var t,a;perfTests.c2++;var s=game.data.startAnimationsIn>0;game.data.startAnimationsIn=Math.max(0,game.data.startAnimationsIn-e);for(var r=[],i=0;i<game.data.gameObjects.length;i++)r.push(game.data.gameObjects[i].globalID);var o,n,d,c=[];for(i=0;i<game.data.enemyObjects.length;i++)c.push(game.data.enemyObjects[i].globalID);for(i=0;i<game.data.gameObjects.length;i++)null!==(o=game.data.gameObjects[i]).currentTarget&&(n=o.currentTarget.globalID,-1===c.indexOf(n)&&(o.currentTarget=null));for(i=0;i<game.data.enemyObjects.length;i++)null!==(d=game.data.enemyObjects[i]).currentTarget&&(n=d.currentTarget.globalID,-1===r.indexOf(n)&&(d.currentTarget=null));var l,g,m,u=!1;if(game.data.startAnimationsIn>0){for(i=game.data.gameObjects.length-1;i>=0;i--)perfTests.c3++,g=game.data.gameObjects[i],game.data.autoFire.enabled&&null===g.currentTarget&&g.findClosestTarget(game.data.enemyObjects);for(i=game.data.enemyObjects.length-1;i>=0;i--)perfTests.c3++,null===(g=game.data.enemyObjects[i]).currentTarget&&g.findClosestTarget(game.data.gameObjects);game.data.startAnimationsIn%100>30&&gameUI.checkDOMrefresh("time_changed","overlay_text")}else if(0===game.data.startAnimationsIn&&(0===game.data.switchScreenData.switchIn||game.data.switchScreenData.switchIn>500)){for(s&&gameUI.checkDOMrefresh("time_changed","overlay_text"),i=game.data.gameObjects.length-1;i>=0;i--)perfTests.c3++,(g=game.data.gameObjects[i]).remove?(game.data.staticObjects.push(g),game.data.gameObjects.splice(i,1)):(game.data.autoFire.enabled&&null===g.currentTarget&&g.findClosestTarget(game.data.enemyObjects),g.update(e));for(i=game.data.enemyObjects.length-1;i>=0;i--)if(perfTests.c3++,(g=game.data.enemyObjects[i]).remove){game.data.staticObjects.push(g),game.data.enemyObjects.splice(i,1);let e=game.data.aimPriority.indexOf(this.globalID);game.updateAimPriority(e)}else null===g.currentTarget&&g.findClosestTarget(game.data.gameObjects),g.update(e);for(i=game.data.ghostObjects.length-1;i>=0;i--)perfTests.c3++,(g=game.data.ghostObjects[i]).remove?(game.data.staticObjects.push(g),game.data.ghostObjects.splice(i,1)):(game.data.ghostObjectsRemoveArray.indexOf(g.globalID)>-1&&game.data.ghostObjects.splice(i,1),g.update(e));for(i=game.data.projectiles.length-1;i>=0;i--)if(perfTests.c3++,(g=game.data.projectiles[i]).update(e),(g.x+g.w>=game.data.allowedCollissionArea.x+game.data.allowedCollissionArea.w||g.x<game.data.allowedCollissionArea.x||g.y<game.data.allowedCollissionArea.y||g.y+g.h>=game.data.allowedCollissionArea.y+game.data.allowedCollissionArea.h)&&(g.remove=!0),g.remove)game.data.projectiles.splice(i,1);else if(!g.deflected)for(var p=0;p<g.possibleTargets.length;p++)if(perfTests.c5++,t=g.possibleTargets[p],g.timeAlive>t.timeToHit&&!t.alreadyHit)for(t.alreadyHit=!0,l=0;l<game.data.enemyObjects.length;l++)if(perfTests.c6++,game.data.enemyObjects[l].globalID===t.globalID){m=game.data.enemyObjects[l];var h=randomIntFromInterval(g.min_dmg_calc,g.max_dmg_calc);if((w={}).rand_dmg=h,g.objectsHit.indexOf(m.globalID)>-1)continue;(a=game.manageHit(g,m,w))&&game.applyDamage(m,h,g),m.hp<=0&&(audio.playSound("tankDestroyed"),game.removeAllObjectAnimations(m),m.remove=!0,g.currentTarget=null,void 0!==m.auraRef&&(u=!0,m.auraRef.remove=!0)),"rail"!==g.specType?g.remove=!0:g.objectsHit.push(m.globalID);var v=0,f=Math.floor(Math.random()*Math.floor(30)),y=Math.floor(Math.random()*Math.floor(13)),b=new Animation(m.x+v+f-5,m.y+y-5,40,40,{subType:1});game.data.animations.push(b);var _={x:m.x-10*pixelRatio,y:m.y};game.addAnimation("damage",h,_);break}for(i=game.data.enemyProjectiles.length-1;i>=0;i--)if(perfTests.c3++,(g=game.data.enemyProjectiles[i]).update(e),(g.x+g.w>=game.data.allowedCollissionArea.x+game.data.allowedCollissionArea.w||g.x<game.data.allowedCollissionArea.x||g.y<game.data.allowedCollissionArea.y||g.y+g.h>=game.data.allowedCollissionArea.y+game.data.allowedCollissionArea.h)&&(g.remove=!0),g.remove)game.data.enemyProjectiles.splice(i,1);else if(!g.deflected)for(p=0;p<g.possibleTargets.length;p++)if(perfTests.c5++,t=g.possibleTargets[p],g.timeAlive>t.timeToHit&&!t.alreadyHit)for(t.alreadyHit=!0,l=0;l<game.data.gameObjects.length;l++)if(perfTests.c6++,m=game.data.gameObjects[l],game.data.gameObjects[l].globalID===t.globalID){var w;h=randomIntFromInterval(g.min_dmg_calc,g.max_dmg_calc);if((w={}).rand_dmg=h,g.dmgAuraMX=1,a=!1,g.objectsHit.indexOf(m.globalID)>-1)continue;(a=game.manageHit(g,m,w))&&game.applyDamage(m,h,g,!1),m.hp<=0&&(game.removeAllObjectAnimations(m),m.remove=!0,g.currentTarget=null,void 0!==m.auraRef&&(u=!0,m.auraRef.remove=!0)),"rail"!==g.specType?g.remove=!0:g.objectsHit.push(m.globalID);v=m.w-20,f=Math.floor(Math.random()*Math.floor(40)),y=Math.floor(Math.random()*Math.floor(13)),b=new Animation(m.x+v-f,m.y-5+y,40,40,{subType:1});if(game.data.animations.push(b),lastAnimationX=m.x,lastAnimationY=m.y,a){_={x:m.x-20*pixelRatio,y:m.y};game.addAnimation("damage",h,_)}else{var _={x:m.x,y:m.y};h="Deflected!"}break}for(i=game.data.auras.length-1;i>=0;i--)perfTests.c3++,(g=game.data.auras[i]).remove&&game.data.auras.splice(i,1);for(i=game.data.animations.length-1;i>=0;i--)perfTests.c3++,(g=game.data.animations[i]).remove?game.data.animations.splice(i,1):g.update(e);if(game.data.artillery.enabled&&(game.data.artillery.lastUpdate+=e,game.data.artillery.startsIn>0&&(game.data.artillery.startsIn=Math.max(0,game.data.artillery.startsIn-e),game.data.artillery.startsIn<=0&&(game.data.artillery.stateChange=!0)),game.data.artillery.startsIn<=0)){var x=game.data.artillery.timeLeft;if(game.data.artillery.timeLeft=Math.max(0,game.data.artillery.timeLeft-e),Math.ceil(x/game.data.artillery.fireRate)>Math.ceil(game.data.artillery.timeLeft/game.data.artillery.fireRate)&&(game.artilleryHit(),game.data.artillery.stateChange=!0,game.data.artillery.timeLeft<=0)){var k=game.const.artillery[game.data.artillery.selectedType];game.data.artillery.startsIn=k.startsIn,game.data.artillery.timeLeft=k.duration}}if(0===game.data.switchScreenData.switchIn)for(forceDrawAll=!0,0===game.data.gameObjects.length&&game.endBattle("lost"),0===game.data.enemyObjects.length&&game.endBattle("won"),game.data.objectRefs={},i=game.data.enemyObjects.length-1;i>=0;i--)perfTests.c3++,game.data.objectRefs[game.data.enemyObjects[i].globalID]=game.data.enemyObjects[i];u&&game.applyAuraEffects()}}},applyDamage:function(e,t,a,s){var r=e.hp;void 0===a&&(a={dmgAuraMX:1}),void 0===s&&(s=!1),void 0===e.shieldCurrent&&(e.shieldCurrent=0),"rail"===a.specType&&(t*=Math.pow(.5,a.objectsHit.length));var i=Math.max(0,t-Math.max(0,e.armor-a.armor_piercing));if(i=Math.max(1,.05*t,i),isNaN(i),e.shieldCurrent>0&&(s&&console.log("globalID: "+e.globalID+" will use shield"),e.shieldCurrent=e.shieldCurrent-i*a.dmgAuraMX,e.shieldUsed+=i*a.dmgAuraMX,e.shieldCurrent<0&&(e.hp+=e.shieldCurrent,isNaN(e.hp)&&console.log("object2 hp is nan : "+e.shieldCurrent),e.hp=Math.max(0,e.hp),isNaN(e.hp)&&console.log("object2 hp is nan : "),void 0!==e.auraRef&&(e.auraRef.remove=!0)),s&&console.log("shield was used in this strike")),e.shieldCurrent<=0){r=e.hp;e.hp=Math.max(0,e.hp-i*a.dmgAuraMX),s&&console.log("hp was used")}if(r>e.maxHp/2&&e.hp<e.maxHp/2){var o=randomIntFromInterval(0,16),n=randomIntFromInterval(0,4),d=new Animation(e.x-32+o,e.y-40+n,128,128,{subType:2});e.animations.push(d.globalID),game.data.animations.push(d),e.animations.length}},manageHit:function(e,t,a){var s=a.rand_dmg,r=!1;if("undefined"!==t.deflection){var i=randomIntFromInterval(0,100);if("anti_armor"===e.specType)if(i>=.5*t.deflection)r=!0;else{console.log("deflected"),audio.playSound("ricochet"),r=!1;var o=getLine("deflected"),n={x:t.x,y:t.y};game.addAnimation("damage",o,n)}else if(i>t.deflection){var d;if("srapnel"===e.specType)d=t.enemy?"player":"enemy",game.applySrapnelEffect(t,s,d),r=!0;else r=!0}else{e.deflected=!0,audio.playSound("ricochet");o=getLine("deflected"),n={x:t.x,y:t.y};game.addAnimation("damage",o,n)}}else r=!0;return r},callReinforcements:function(e){var t;for(var a,s,r,i,o,n,d=!1,c={},l=0;l<game.state.corpuses.length;l++)c[l]=game.state.corpuses[l].tanksAmount;for(l=0;l<game.data.ghostObjectsData.length;l++){n=c[game.data.ghostObjectsData[l].corpusID],s=(a=$.extend(!0,{},game.data.ghostObjectsData[l])).parentGlobalID,o=0;for(var g=0;g<game.data.gameObjects.length;g++)if((r=game.data.gameObjects[g]).globalID===s){o=Math.floor(r.hp/r.maxHp)*r.tanksAmount;break}i=a.tanksAmount-o,a.tanksAmount=i,a.tanksAmount=Math.min(n,a.tanksAmount),a.tanksAmount=Math.min(Math.floor(game.state.resources.citizens.idle/game.state.corpuses[game.data.ghostObjectsData[l].corpusID].crew),a.tanksAmount),a.tanksAmount>0&&(n-=a.tanksAmount,t=new Vehicle(a.posX,a.posY,61,31,a),game.data.ghostObjects.push(t),d=!0)}d&&(game.data.reinCounter+=1);var m=helpers.common.getResearchBoost("army_unlocks","reinforcement");game.data.reinCounter>=m&&page.$gameUI.$overlay.find(".ui-holder.right .reinf").addClass("not-displayed")},checkIdleCitizens:function(e){game.state.corpuses[e].crew<game.state.resources.citizens.idle?page.$gameUI.$overlay.find(".battle-menu .utility-subholder .idle-citizens-amount").removeClass("red"):(audio.playSound("declineBribe"),page.$gameUI.$overlay.find(".battle-menu .utility-subholder .idle-citizens-amount").addClass("red animScale"))},attacksCycleHandler:function(e){perfTests.c2++,$.each(game.state.attacks,(function(t,a){perfTests.c3++;var s=a.time_left;a.time_left=Math.max(0,a.time_left-e);var r=(s-a.time_left)/1e3*a.drain_rate,i=game.const.gameGrids.territories.cols*game.const.gameGrids.territories.rows,o=parseInt(game.data.gameGrids[a.target].controlRate*i);if(game.data.gameGrids[a.target].controlRate<1&&(game.data.gameGrids[a.target].controlRate=Math.min(1,game.data.gameGrids[a.target].controlRate+r),parseInt(game.data.gameGrids[a.target].controlRate*i)>o))for(var n=!1;!n;){perfTests.c3++;var d=parseInt(Math.random()*game.const.gameGrids.territories.cols)+"_"+parseInt(Math.random()*game.const.gameGrids.territories.rows);-1===game.state.gameGrids.territories[game.state.currentParentGrids.regions][a.target].conqueredTiles.indexOf(d)&&(game.state.gameGrids.territories[game.state.currentParentGrids.regions][a.target].conqueredTiles.push(d),n=!0,void 0!==game.state.gameGrids.zones[game.state.currentParentGrids.regions][a.target]&&void 0!==game.state.gameGrids.zones[game.state.currentParentGrids.regions][a.target][d]&&(game.state.gameGrids.zones[game.state.currentParentGrids.regions][a.target][d].enemy=!1),game.data.gameGrids[a.target].controlRate>=1&&(game.postTileConquer(a.target),delete game.state.attacks[t]))}})),$.each(game.state.defenses,(function(t,a){perfTests.c3++;var s=a.time_left;a.time_left=Math.max(0,a.time_left-e);var r=(s-a.time_left)/1e3*a.drain_rate;if(game.data.gameGrids[a.target].controlRate>0&&(game.data.gameGrids[a.target].controlRate=Math.max(0,game.data.gameGrids[a.target].controlRate-r),game.data.gameGrids[a.target].controlRate<=0)){game.data.gameGrids[a.target].setConquered(),game.data.playerOwnedTers--;var i=game.data.playerOwnedTerRefs.indexOf(a.target);i>-1&&(game.data.playerOwnedTerRefs.splice(i,1),helpers.territory.updateManhattanToClosestFriendly(game.data.gameGrids)),delete game.state.defenses[t],$.each(game.state.defenses,(function(e,t){t.target===a.target&&delete game.state.defenses[e]}))}}))},explorersCycleHandler:function(e){perfTests.c2++,customLog("explorer cycle handler time: "+e,"debug");var t=game.state.jobs.explorer;if(t.working&&!(t.workers<=0)&&!1!==t.territory){var a=game.const.jobs.explorer.cycleTime;t.lastCycle+=e;var s=parseInt(t.lastCycle/a);if(t.lastDisplayUpdate+=e,t.lastDisplayUpdate>50&&gameUI.checkDOMrefresh("time_changed","explorers"),s>0){gameUI.checkDOMrefresh("time_changed","explorers"),t.lastCycle%=a;var r=Math.max(0,game.const.exploredSpotsCap-game.state.gameGrids.territories[t.region][t.territory].explored_spots),i=Math.min(r,t.workers);if(game.state.gameGrids.territories[t.region][t.territory].explored_spots+=i,game.data.showOnlyStartingTer&&game.state.gameGrids.territories[t.region][t.territory].explored_spots>=500&&(game.data.showOnlyStartingTer=!1,gameUI.handleIconReveal("territories"),"territories"===game.data.currentView&&(game.data.currentView=!1,game.switchTo("territories"))),game.state.gameGrids.territories[t.region][t.territory].explored_spots>=game.const.exploredSpotsCap){game.state.gameGrids.territories[t.region][t.territory].explored_spots=Math.min(game.state.gameGrids.territories[t.region][t.territory].explored_spots,game.const.exploredSpotsCap);var o=helpers.territory.getRegionIDfromRef(t.region);game.state.gameGrids.regions[o].exploredTers++,console.log("Explored ters: "+game.state.gameGrids.regions[o].exploredTers),delete game.state.exploreResults[t.region+"_"+t.territory];var n=Math.max(0,t.workers-r);game.postTerritoryExplore(n,!0)}if(i>0&&(game.getExploreResults(i),helpers.common.isCurrentView("resources")&&0===game.data.exploreDryStreak&&!game.getSettingValue("hide_resource_animations"))){var d=getLine("explorers_found_resources"),c={$onDOMelement:page.$gameUI.$.find(".exploring.progress-bar"),subType:"general_text",originSide:"right"};game.addAnimation("general_text",d,c)}}}},buildQueueCycleHandler:function(e){perfTests.c2++,customLog("build cycle handler","debug");var t=helpers.common.getBuilderReductionMX();refreshData.buildQueue.data={};for(var a=0,s=0;s<game.state.buildQueue.length;s++){perfTests.c3++;var r=game.state.buildQueue[s],i=r[0],o=game.const.buildings[i],n=o.buildTime,d=!1,c="";void 0!==r[3]&&(c="#"+(d=r[3]));var l=i+(void 0!==d&&!1!==d?d.toString():"");if(s>0)void 0===refreshData.buildQueue.data[i+c]?refreshData.buildQueue.data[i+c]={amount:r[1],nextIn:(a+n)/t,id:d}:refreshData.buildQueue.data[i+c].amount+=r[1],a+=r[1]*n;else{game.data.lastRefreshes.buildQueue+=e,game.data.lastRefreshes.buildQueue>50&&gameUI.checkDOMrefresh("time_changed","build_queue"),r[2]-=e*t;var g=parseInt(Math.abs(n-r[2])/n),m=!1;if((g=Math.min(g,r[1]))>0){if(-1===refreshData.buildQueue.update.indexOf(i)&&refreshData.buildQueue.update.push([i,r[3]]),gameUI.checkDOMrefresh("time_finished","build_queue"),r[2]=Math.max(0,n-Math.abs(r[2])%n),r[1]-=g,"war_factory"===i&&gameUI.checkDOMrefresh("revealed","produce"),!1!==d)if(void 0!==game.state.buildings[i][d]){if("mining_plant"===i&&(game.state.buildings[i][d].dirt_available+=o.upgrades[game.state.buildings[i][d].level-1].gains.dirt_available),game.state.buildings[i][d].level++,game.state.buildings[i][d].upgrading=!1,"war_factory"===i){var u;1===game.state.buildings[i][d].level?u=0:2===game.state.buildings[i][d].level?u=1:3===game.state.buildings[i][d].level&&(u=2);for(var p=0;p<u;p++)helpers.plans.addCorpus()}}else"mining_plant"===i?game.state.buildings[i].push({workers:0,working:!1,eff:0,dirt_available:5e4,level:1,upgrading:!1}):(game.state.buildings[i].push({workers:0,working:!1,eff:0,producing:!1,level:1,upgrading:!1}),"war_factory"===i&&(helpers.plans.addCorpus(),gameUI.handleIconReveal("manage_plans")));else game.state.buildings[i].avl+=g;game.checkTutorialCompletion(),o.fullRefresh=!0,helpers.common.setRefreshFlagForCache("buildings",l),helpers.common.setRefreshFlagForCache("resourceRates"),$.each(o.gains,(function(e,t){switch(perfTests.c3++,e){case"food":case"wood":case"energy":game.state.resources[e].renew.max+=t.max*g,game.state.resources[e].renew.rate+=t.renewRate*g,"energy"===e&&gameUI.handleIconReveal(e);break;case"population":game.change.resource("population",t.max*g)}})),r[1]<=0&&(game.state.buildQueue.splice(s,1),refreshData.buildQueue.remove.push(s),gameUI.checkDOMrefresh("time_finished","build_queue_remove"),m=!0)}if(!m){var h=r[2],v=h+(r[1]-1)*n;refreshData.buildQueue.data[i+c]={amount:r[1],nextIn:h/t,id:d},a+=v}}}},produceQueueCycleHandler:function(e){perfTests.c2++,customLog("produce cycle handler","debug");var t=1;if(!(game.state.produceQueue.length>0)||(t=helpers.common.getProductionReductionMX(),isFinite(t)))for(var a=0;a<game.state.produceQueue.length&&(perfTests.c3++,!(a>0));a++){game.data.lastRefreshes.produceQueue+=e,game.data.lastRefreshes.produceQueue>50&&gameUI.checkDOMrefresh("time_changed","produce_queue");var s=game.state.produceQueue[a],r=s[0],i=game.state.corpuses[r].buildTime;s[2]-=e*t;var o=parseInt(Math.abs(i-s[2])/i);(o=Math.min(o,s[1]))>0&&(-1===refreshData.produceQueue.update.indexOf(r)&&refreshData.produceQueue.update.push(r),gameUI.checkDOMrefresh("time_finished","produce_queue"),s[2]=Math.max(0,i-Math.abs(s[2])%i),s[1]-=o,gameUI.checkDOMrefresh("revealed","territories"),game.state.corpuses[r].tanksAmount++,s[1]<=0&&(game.state.produceQueue.splice(a,1),refreshData.produceQueue.remove.push(a),gameUI.checkDOMrefresh("time_finished","produce_queue_remove")))}},scavengersCycleHandler:function(e){perfTests.c2++,customLog("scav cycle handler","debug"),$.each(game.const.resources,(function(e,t){if(perfTests.c3++,t.gatherable){var a=game.state.resources[e],s=!1;if(a.workers>0){var r=a.workers*game.data.continentRewardBoosts.scavenging_rate_increase*game.state.stats.productivity,i=0;if(a.extra>0){var o=Math.min(r,a.extra);i+=o,a.extra-=o,s=!0,a.extra<=0&&helpers.common.setRefreshFlagForCache("resourceRates")}s&&game.change.resource(e,i)}}}))},buildingsCycleHandler:function(e){var t,a;perfTests.c2++,customLog("build cycle handler","debug");for(var s=0;s<game.const.buildingsCycleOrder.length;s++){a=game.const.buildingsCycleOrder[s];["thermal_plant"].indexOf(a);!1;let e=game.state.buildings[a];if(perfTests.c3++,void 0!==e.avl){if(e.avl<=0)continue;var r=helpers.common.getBuildingData(a);if(!(game.const.resourceBuildings.indexOf(a)>-1))continue;var i=1;void 0!==e.workers&&(i=e.workers/Math.max(1,r.gains.citizen_capacity));var o=r.costs.operational,n=1;$.each(r.costs.operational,(function(t,s){perfTests.c3++,g=s*e.avl,effBasedOnWorkerRatio&&(g*=i),n=Math.min(n,game.state.resources[t].amount/g),0===i&&effBasedOnWorkerRatio&&(n=0),"farm"===a&&customLog("type: "+t+" cost: "+s+" min: "+n+" resAmount: "+game.state.resources[t].amount,"warning")})),t=e.eff,e.eff=n,t!=n&&(game.const.buildings[a].fullRefresh=!0,helpers.common.setRefreshFlagForCache("buildings",a),helpers.common.setRefreshFlagForCache("resourceRates")),n>0&&($.each(r.gains,(function(t,a){perfTests.c3++;var s=a.genRate*n*e.avl*game.state.stats.productivity*i;"citizen_capacity"!==t&&game.change.resource(t,s)})),$.each(r.costs.operational,(function(t,a){perfTests.c3++;var s=a*n*e.avl;effBasedOnWorkerRatio&&(s*=i),game.change.resource(t,-s)})))}else for(var d=0;d<e.length;d++){perfTests.c3++;var c=d,l=(o=(r=helpers.common.getBuildingData(a,c)).costs.operational,e[d]);i=1;void 0!==l.workers&&(i=l.workers/Math.max(1,r.gains.citizen_capacity));var g;n=1;$.each(o,(function(e,t){perfTests.c3++,g=t,effBasedOnWorkerRatio&&(g*=i),n=Math.min(n,game.state.resources[e].amount/g),0===i&&effBasedOnWorkerRatio&&(n=0)})),t=l.eff,l.eff=n;var m=a+(void 0!==c?c.toString():"");t!=n&&(game.const.buildings[a].fullRefresh=!0,helpers.common.setRefreshFlagForCache("buildings",m),helpers.common.setRefreshFlagForCache("resourceRates")),n>0&&($.each(r.gains,(function(e,t){perfTests.c3++;var s=t*n*game.state.stats.productivity*i;if("dig_rate"===e&&l.dirt_available>0){s=Math.min(l.dirt_available,s);var o=r.dirt_composition;$.each(o,(function(e,t){perfTests.c3++;var a=t*s;game.change.resource(e,a)})),game.change.resource("dirt_available",{amount:-s,id:c}),l.dirt_available<=0&&(game.const.buildings.mining_plant.fullRefresh=!0,helpers.common.setRefreshFlagForCache("buildings",m),helpers.common.setRefreshFlagForCache("resourceRates"))}else if("produce_rate"===e&&"factory"===a&&!1!==r.producing){var d=game.const.products[r.producing].produce_rate;game.state.products[r.producing].avl+=s*d,gameUI.checkDOMrefresh("stock_change",{type:r.producing,id:c})}})),$.each(o,(function(e,t){perfTests.c3++;var a=t*n;effBasedOnWorkerRatio&&(a*=i),game.change.resource(e,-a)})))}}},citizensCycleHandler:function(e){perfTests.c2++,customLog("cits cycle handler","debug");var t=game.state.resources.citizens,a=game.const.resources.citizens;if(t.total>0){var s=helpers.common.getResearchBoost("teacher","gain_mx"),r=helpers.common.getResearchBoost("researcher","gain_mx")*s,i=.01+.01*game.state.jobs.teacher.workers*s,o=1+game.state.jobs.teacher.workers,n=(t.total,game.state.jobs.researcher.workers*r),d=(i*t.total+n)*game.data.continentBoosts.knowledge_gain,c=d+game.state.resources.knowledge.amount;game.change.resource("knowledge",d);for(var l=game.data.researchPointCost,g=c>=l,m=c;g;)m-=l,game.change.resource("research_points",1),(l=helpers.common.getResearchPointCost())>m&&(g=!1);game.state.resources.knowledge.amount=m}var u=1e3*e,p=a.cycleTime;t.lastCycle+=u;var h=1-(game.data.continentRewardBoosts.rations_reduction-1);if((e=parseInt(t.lastCycle/p))>0){t.lastCycle%=p;var v=t.total*h,f=Math.min(game.state.resources.food.amount,v);game.change.resource("food",-f);var y=t.total*h,b=Math.min(game.state.resources.water.amount,y);game.change.resource("water",-b);var _=1-f/v,w=1-b/y;helpers.stats.calculateMalnourishment(_,w)}var x=a.cycleTime2;t.lastCycle2+=u,parseInt(t.lastCycle2/x)>0&&(t.lastCycle2%=x,helpers.stats.checkForCitizenDeaths(),helpers.stats.checkForNewCitizens(),helpers.stats.updateSicknessRate(),helpers.stats.updateMaintenanceStatus(),helpers.stats.updateMoraleRate(),helpers.stats.updateDiplomacy())},statsCycleHandler:function(e){perfTests.c2++,helpers.stats.recalculateProductBonuses();var t=void 0!==game.data.productBonuses.happiness?game.data.productBonuses.happiness:0;game.state.stats.happiness=Math.min(1,1-game.state.stats.malnourishment+t);var a=game.state.resources.water_sources,s=helpers.common.getBuildingData("filtering_station"),r=300+s.effects.benefits.amount*s.avl,i=a.total-a.amount;game.state.stats.toxicity=Math.max(0,i-r)/Math.max(1,a.total);var o=game.state.stats.health;game.state.stats.health=Math.min(1,(1-game.state.stats.malnourishment)*(1-game.state.stats.sickness)*game.state.stats.happiness*game.state.stats.morale),o>game.state.stats.health?(helperData.consequtive.healthDrop++,gameUI.handleIconReveal("health")):o<game.state.stats.health&&(helperData.consequtive.healthDrop=0);var n=game.state.stats.productivity,d=game.state.resources.tiles.total-game.state.resources.tiles.amount,c=100*(1+game.state.buildings.road.avl)/Math.max(1,d),l=Math.min(1,game.state.buildings.road.avl*game.const.buildings.road.gains.connectivity);l*=Math.min(1,c);var g=void 0!==game.data.productBonuses.connectivity?game.data.productBonuses.connectivity:0;game.state.stats.connectivity=l+g,game.state.stats.products=void 0!==game.data.productBonuses.productivity?game.data.productBonuses.productivity:0,game.state.stats.productivity=Math.max(.3,game.state.stats.health*(1+game.state.stats.connectivity)*(1+game.state.stats.products)*game.state.stats.happiness*game.state.stats.maintenance),n!==game.state.stats.productivity&&(gameUI.checkDOMrefresh("resource_change",{type:"productivity"}),n>game.state.stats.productivity?(helperData.consequtive.productivityDrop++,gameUI.handleIconReveal("productivity")):n<game.state.stats.productivity?helperData.consequtive.productivityDrop=0:game.state.stats.productivity>1&&gameUI.handleIconReveal("productivity"),helpers.common.setRefreshFlagForCache("buildings"),helpers.common.setRefreshFlagForCache("resourceRates"))},marketCycleHandler:function(e){perfTests.c2++;if(game.state.marketData.lastCycle+=e,game.state.marketData.lastDemandCycle+=e,parseInt(game.state.marketData.lastCycle/1e3)>0){game.state.marketData.lastCycle%=1e3;var t=168e3,a=parseInt(game.state.marketData.lastDemandCycle/t);a>0&&(game.state.marketData.lastDemandCycle%=t),game.state.lastTerritoryPriceUpdate+720*game.const.realToGameTime*1e3<game.state.gameDate&&helpers.territory.updateTerritoryPrices();for(var s=.05*(1-(game.data.continentBoosts.lower_spread-1)),r=convertToDate(game.state.gameDate,!0),i=["products","resources"],o=0;o<i.length;o++){var n=i[o],d="resources"===n?game.const.resources:game.const.products;$.each(d,(function(e,t){perfTests.c3++;var i="resources"===n?game.state.resources[e]:game.state.products[e];if(("resources"!==n||t.revealed&&helpers.common.getResearchBoost(e,"market_unlock",!0))&&("products"!==n||t.unlocked)&&void 0!==i.price_history){if(a>0){var o=i.demand+i.supply,d=randomFloatFromInterval(-.01,.01);d>0?i.demand+=o*Math.abs(d):d<0&&(i.supply+=o*Math.abs(d))}var c=helpers.market.getMarketPrice(e,{}),l={};if(i.price_history.length>0&&i.price_history[i.price_history.length-1]){var g=i.demand+i.supply,m=.05;if(helpers.events.isActiveEvent("market_crash")){var u=helpers.events.getActiveEvent("market_crash");if(!1!==u&&u.extraParams.type===e)m*=1-.25*u.intensity}var p=randomFloatFromInterval(-.05,m);if(p>0){var h=i.supply,v=Math.min(h,p*g);i.demand+=v,i.supply-=v}else{p=Math.abs(p);h=i.demand,v=Math.min(h,p*g);i.supply+=v,i.demand-=v}var f=helpers.market.getMarketPrice(e,{});l={sP:f*(1-s),bP:f,s:s,d:parseInt(game.state.gameDate),l:r}}else l={sP:c*(1-s),bP:c,s:s,d:game.state.gameDate,l:r};i.price_history.push(l),i.price_history.length>50&&i.price_history.shift()}}))}"global_market"===game.data.currentView&&(helpers.market.updateChartData(!0),gameUI.checkDOMrefresh("market_refresh"))}},eventsStateCycleHandler:function(e){perfTests.c2++;if(game.state.events.lastCycle+=e,parseInt(game.state.events.lastCycle/24e3)>0){game.state.events.lastCycle%=24e3,game.events.updateEventIntensities(),game.events.handleEventEffects();var t=game.events.checkForEnding();if(t=t||game.events.checkForSeasonal())return;if(game.state.gameDate>=game.state.events.fireNextEvent){var a=randomItemFromArray(game.const.eventCategories),s=randomItemFromArray(game.const.eventTypes[a]);if("earthquake"===s&&game.data.continentRewardBoosts.earthquake_immunity?(console.log("tried to fire earthquake, but user has immunity"),t=!0):t=game.events.createNewEvent(s),t){var r=randomIntFromInterval(10,60);game.state.events.fireNextEvent=game.state.gameDate+24*r*game.const.realToGameTime*1e3,console.log("Firenext event in "+r+" AfterDate: "+convertToDate(game.state.events.fireNextEvent,!0))}}}},dailyCycleHandler:function(e){game.state.lastActions.dailyCycleTime+=e;var t=parseInt(game.state.lastActions.dailyCycleTime/24e3),a=168e3;game.state.lastActions.weeklyCycleTime+=e;var s=parseInt(game.state.lastActions.weeklyCycleTime/a);t>0&&(game.state.lastActions.dailyCycleTime%=24e3,game.progressionStatsDailyCycleHandler(t),game.coloniesCycleHandler(t),0===game.state.resources.perk_points.lastCycle&&(game.state.resources.perk_points.lastCycle=game.const.startTimestamp),game.state.resources.perk_points.lastCycle+86400*game.const.perkPointsEveryXDays*1e3<game.state.gameDate&&(game.state.resources.perk_points.lastCycle=game.state.gameDate,game.change.resource("perk_points_pending",game.const.perkPointsCycleGain),game.pushNotification(getLine("perk_points_gained",game.const.perkPointsCycleGain,game.const.perkPointsEveryXDays),"perk_points_gained","positive"),helpers.common.isCurrentView("research")&&gameUI.checkDOMrefresh("popup_refresh")),s>0&&(game.state.lastActions.weeklyCycleTime%=a,game.progressionStatsWeeklyCycleHandler(s)))},progressionStatsDailyCycleHandler:function(e){var t=86400*Math.floor(game.state.gameDate/86400),a=86400*Math.floor(game.state.lastActions.battleFought/86400),s=86400*Math.floor(game.state.lastActions.battleFought/86400),r=Math.max(0,game.state.stats.diplomacy-game.const.diplomacyMinForExtraReduction)/(1-game.const.diplomacyMinForExtraReduction);if(a<t){var i=game.const.infamyDailyReduction*(1+r);game.change.stat("infamy",-i)}if(s<t){var o=game.const.notorietyDailyReduction*(1+r);game.change.stat("notoriety",-o)}game.recalculateProgressionStats()},progressionStatsWeeklyCycleHandler:function(e){game.state.timeMXes.powerMX*=game.data.multipliers.powerMX,game.state.timeMXes.costMX*=game.data.multipliers.costMX,helpers.common.isCurrentView("world")&&gameUI.checkDOMrefresh("overlay_refresh")},progressionStatsCycleHandler:function(e){console.log("deprecated progressioNStatsCycleHandler!")},coloniesCycleHandler:function(e){var t=game.const.coloniesBaseConquerDays;$.each(game.state.colonies,(function(e,a){$.each(a,(function(a,s){if(s.control_rate>=1)console.log("colony on grid "+a+" was already conquered, what to do about it?");else{var r=s.investment_min/t,i=s.control_rate;if(s.investment_left>=r){if(s.investment_left-=r,s.control_rate=Math.min(1,s.control_rate+s.control_rate_day),"military"===e?game.change.stat("infamy",game.const.militaryColonyInfamyDailyIncrease):game.change.stat("notoriety",game.const.economicColonyNotorietyDailyIncrease),game.change.stat("diplomacy",-game.const.coloniesDiplomacyDailyReduction*(2-helpers.common.getContinentRewardBoost("lower_diplomacy_reduction"))),s.investment_left%s.investment_min<=1&&(s=helpers.colonies.updateColonyStats(s,!1,!0)),s.control_rate>=1){helpers.territory.forceConquerGrid("regions",a),updateAttackableGrids("regions",game.state.currentParentGrids.continent),game.data.canAttackNewRegion=helpers.territory.canAttackNewRegion(),game.data.canAttackNewContinent=helpers.territory.canAttackNewContinent();var o=s.profit+s.invested_total,n=!0;if(!0===s.automation){var d=helpers.colonies.canBeginNewColonyFromColony(s);if(!1!==d){n=!0;var c={type:e,gridRef:d.grid_ref,newColony:!0,autoCreated:!0,colonyData:d};helpers.colonies.addColonyInvestment(c),console.log("Colony auto-extended to grid "+d.grid_ref),game.pushNotification(getLine("colony_auto_extended_note",d.grid_ref),"colony_conquered","positive")}else console.log("ca't seem to extend colony for some reasons")}n&&(o=s.investment_left),game.pushNotification(getLine("colony_conquer_successful",a,e,o.formatNumber(2,2)),"colony_conquered","positive"),game.change.resource("gold",o);for(var l=0;l<game.data.colonies.length;l++)if(game.data.colonies[l].staticRef===a){game.data.colonies.splice(l,1);break}delete game.state.colonies[e][a]}}else if(s.control_rate=Math.max(0,s.control_rate-game.const.coloniesControlLossPerDay),s.control_rate<=0){for(l=0;l<game.data.colonies.length;l++)if(game.data.colonies[l].staticRef===a){game.data.colonies.splice(l,1);break}delete game.state.colonies[e][a],game.pushNotification(getLine("colony_conquer_unsuccessful",a,e),"colony_lost","warning")}s.control_rate;forceDrawAll=!0,gameUI.checkDOMrefresh("quick_popup_refresh","colony_details")}}))}))},fillASquadron:function(e,t){for(var a,s=0;s<game.data.gameObjects.length;s++)if(game.data.gameObjects[s].globalID===e){a=game.data.gameObjects[s];break}var r=game.state.corpuses[a.corpusID],i=a.tanksAmount,o=game.const.squadronSize[r.upgrades.maxSquadronSize]-i;o=Math.min(o,r.tanksAmount);var n=Math.max(0,game.state.resources.citizens.idle);if((o=Math.min(o,Math.floor(n/r.crew)))>0)a.tanksAmount+=o,game.change.resource("requires_citizens",-r.crew*o),game.state.formationCrewTotal+=r.crew*o,r.tanksAmount-=o,helpers.units.refreshGameObjectsState(),helpers.units.updateGameObjectStats(a),game.data.playerPower=game.calculateArmyPower(!1,{enemy:!1,hpMX:1});else if(void 0!==t){var d=getLine("listeners_text6"),c=t.object,l={x:c.x-20,y:c.y};game.addAnimation("general_text",d,l)}},removeSquadronFromAll:function(e){for(var t,a,s,r=game.data.buttons.length-1;r>=0;r--)game.data.buttons[r].parentGlobalID===e&&game.data.buttons.splice(r,1);for(r=0;r<game.data.gameObjects.length;r++)if(game.data.gameObjects[r].globalID===e){if(t=game.state.corpuses[game.data.gameObjects[r].corpusID],game.data.gameObjects[r].isLeader)for(var i=0;i<game.data.auras.length;i++)game.data.gameObjects[r].auraRef===game.data.auras[i]&&game.data.auras.splice(i,1);game.change.resource("requires_citizens",game.data.gameObjects[r].crew),s=game.data.gameObjects[r].crew,game.state.formationCrewTotal-=game.data.gameObjects[r].crew,t.tanksAmount+=game.data.gameObjects[r].tanksAmount,a=game.data.gameObjects[r].tanksAmount,game.data.gameObjects.splice(r,1)}var o=page.$gameUI.$overlay.find('.battle-menu .corpus-holder .amount-holder[data-type="'+t.id+'"]'),n=o.offset(),d={x:n.left+30,y:n.top-10,forceDraw:!0,subType:"res_added"},c="+"+a;game.addAnimation("general_text",c,d),d={x:(n=(o=page.$gameUI.$overlay.find(".battle-menu .utility-widget .crew-fighting")).offset()).left-20,y:n.top,forceDraw:!0,subType:"res_added"},c=getLine("crew_removed",s),game.addAnimation("general_text",c,d),refreshUI.battleMenu=!0},randomAttacksHandler:function(e){perfTests.c2++,game.data.attacksAllowed&&game.state.lastAttackOnPlayer+game.const.attackPlayerEvery<game.state.gameDate&&game.startRandomAttackOnPlayer(),game.data.automationData.nextAttackIn>0&&game.data.automationData.enableAttack&&"battle_select"===game.data.currentView&&(game.data.automationData.nextAttackIn=Math.max(0,game.data.automationData.nextAttackIn-e),0===game.data.automationData.nextAttackIn?(game.state.currentParentGrids.zones=game.data.automationData.attackSection,game.data.pendingBattleData={attackType:"attack",tileAttack:!0,terRef:game.state.currentParentGrids.territories,terTileRef:game.state.currentParentGrids.zones,finished:!1},game.switchTo("battle")):gameUI.checkDOMrefresh("attack_countdown","zones")),game.data.automationData.nextTerAttackIn>0&&game.data.automationData.enableAttack&&(game.data.automationData.nextTerAttackIn=Math.max(0,game.data.automationData.nextTerAttackIn-e),0===game.data.automationData.nextTerAttackIn?(game.switchTo("battle_select"),helpers.automation.attackNextSection(),game.switchTo("battle_select")):gameUI.checkDOMrefresh("attack_countdown","territories"))},applyAuraEffects:function(){for(var e=[],t=[],a=0;a<game.data.gameObjects.length;a++)game.data.gameObjects[a].projectileData.dmgAuraMX=1,game.data.gameObjects[a].healthAuraMX=1,e.push(1),t.push(1);for(a=0;a<game.data.gameObjects.length;a++){let o=game.data.gameObjects[a];var s=game.state.corpuses[o.corpusID],r=s.upgrades.auraSize*game.const.auraEffectRadius;if(s.upgrades.auraAmount>0)for(var i=0;i<game.data.gameObjects.length;i++){let a=game.data.gameObjects[i];Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2))<r&&("dmg"===s.upgrades.auraType?e[i]+=5*s.upgrades.auraAmount/100:"hp"===s.upgrades.auraType?t[i]+=5*s.upgrades.auraAmount/100:s.upgrades.auraType)}}for(a=0;a<game.data.gameObjects.length;a++)game.data.gameObjects[a].projectileData.dmgAuraMX=e[a],game.data.gameObjects[a].healthAuraMX=t[a],0===game.data.gameObjects[a].healthAuraMX?(game.data.gameObjects[a].shieldTotal=0,game.data.gameObjects[a].shieldUsed=0,game.data.gameObjects[a].shieldCurrent=0):(game.data.gameObjects[a].shieldTotal=5*game.data.gameObjects[a].healthAuraMX/100*game.data.gameObjects[a].maxHp,game.data.gameObjects[a].shieldCurrent=Math.max(0,game.data.gameObjects[a].shieldTotal-game.data.gameObjects[a].shieldUsed))},applySrapnelEffect:function(e,t,a){var s,r;s="player"===a?game.data.enemyObjects:game.data.gameObjects;for(var i,o=randomIntFromInterval(50,75),n=0;n<s.length;n++)perfTests.c6++,r=s[n],e.globalID!==r.globalID&&Math.sqrt(Math.pow(e.centerX-r.centerX,2)+Math.pow(e.centerY-r.centerY,2))<game.const.srapnelEffectRadius&&(i=t*o/100,game.applyDamage(r,i))},events:{endEvent:function(e,t){void 0===t&&(t=!1);var a=game.state.events.list[e];if(!a.active)return!1;var s=game.const.eventParams[a.type];a.active=!1;var r=game.data.activeEventTypes.indexOf(a.type);r>-1&&game.data.activeEventTypes.splice(r,1);var i=getLine("events_end_notification0",getLine("event_"+a.type));t&&(i+=getLine("events_end_notification1"));var o=!0;return"instant_decision"===s.eventType&&(t?(game.change.resource(a.extraParams.type,-a.extraParams.amount),i=getLine("events_end_notification3",a.extraParams.amount.formatNumber(),a.extraParams.type),o=!1):i=getLine("events_end_notification2")),game.pushNotification(i,"event_ended","positive"),!1!==getLine("event_"+a.type+"_end_title")&&gameUI.showPopup("event_details",[e,!0,t]),game.events.recalculateEventBoosts(),gameUI.checkDOMrefresh("popup_refresh","notifications"),!(!o||void 0===s.effects.fireNewEvent)&&(game.events.createNewEvent(s.effects.fireNewEvent,!0),!0)},updateEventIntensities:function(){for(var e=0;e<game.state.events.list.length;e++){var t=game.state.events.list[e];if(t.active)if("in_advance"===game.const.eventParams[t.type].eventType){var a=helpers.events.getCurrentEventIntensityTrend(e);t.intensity+=a,game.pushNotification(getLine("event_intensivities",getLine("event_"+t.type),(100*a).formatNumber(2,2,!0,!0)),"event_intensity","warning"),t.intensity<=0&&game.events.endEvent(e,!0)}}},handleEventEffects:function(){for(var e,t=0;t<game.state.events.list.length;t++){var a=game.state.events.list[t];if(a.active&&!(game.const.eventTypes.seasonal.indexOf(a.type)>-1)){var s=game.const.eventParams[a.type],r=a.intensity;"fixed"===s.frequency.type&&(r=1);var i=a.duration/24/1e3/game.const.realToGameTime;$.each(s.effects,(function(t,o){var n=1;switch(t){case"effectsBuildings":n=o.bonusEffect;break;case"effectsStat":switch(n=o.baseChance,o.type){case"morale":n*=r,game.state.stats.morale=Math.max(.2,Math.min(1,game.state.stats.morale+n)),game.pushNotification(getLine("event_morale_changed",(100*n).formatNumber(2,2,!0,!0)),"morale_dropped","warning");break;case"maintenance":n*=e=a.threshold/s.startParams.threshold.max,n=Math.min(game.state.stats.maintenance,game.state.stats.maintenance*n),game.state.stats.maintenance=Math.max(0,Math.min(1,game.state.stats.maintenance-n)),game.pushNotification(getLine("event_maintanance_changed",(100*n).formatNumber(2,2,!0,!0)),"maintenance_dropped","warning")}break;case"destroyBuildings":n=o.baseChance,e=r,"earthquake"===a.type&&(e=a.threshold/s.startParams.threshold.max),n*=e;for(var d=helpers.common.getRandomPoolOfBuildings(3),c=0;c<d.length;c++){var l=d[c],g=l[0],m=l[1],u=helpers.common.getBuildingData(g,m),p=void 0!==u.avl?u.avl:1;if(randomFloatFromInterval(0,1)<=n){var h=Math.min(p,Math.ceil(p*n));game.demolishBuilding(g,h,m,!1)}}break;case"crashMarketPrice":n=1;var v=game.state[a.extraParams.category][a.extraParams.type],f=(s.startParams.intensity+1)/2*i,y=a.intensity/f*(v.demand+v.supply);v.supply+=y,game.pushNotification(getLine("event_market_changed",y.formatNumber(2,2)),"market_crashed","positive")}}))}}},checkForEnding:function(){for(var e=0,t=0;t<game.state.events.list.length;t++){var a=game.state.events.list[t];if(a.active&&!(game.const.eventTypes.instant_decision.indexOf(a.type)>-1)){var s=a.startedAt+a.duration;game.state.gameDate>=s&&(e+=game.events.endEvent(t)?1:0)}}return e>0},checkForSeasonal:function(){for(var e=new Date(game.state.gameDate).getFullYear(),t=0;t<game.const.eventTypes.seasonal.length;t++){var a=game.const.eventTypes.seasonal[t];if(!(game.data.activeEventTypes.indexOf(a)>-1)){var s=game.const.eventParams[a],r=new Date(e.toString()+"-"+s.frequency.startDate),i=new Date(game.state.gameDate),o=i.getDate()+"-"+i.getMonth()+"-"+i.getFullYear(),n=r.getDate()+"-"+r.getMonth()+"-"+r.getFullYear();o===n&&(console.log("seasonal create d1: "+o+" d2: "+n),game.events.createNewEvent(a))}}return!1},createNewEvent:function(e,t){if(void 0===t&&(t=!1),!t&&!helpers.events.canFireEventType(e))return!1;console.log("creating new event "+e+" gameDate: "+convertToDate(game.state.gameDate,!0));var a=game.const.eventParams[e],s=randomIntFromInterval(a.durMinDays,a.durMaxDays),r=randomIntFromInterval(a.startParams.threshold.min,a.startParams.threshold.max),i={type:e,duration:24*s*game.const.realToGameTime*1e3,startedAt:game.state.gameDate,threshold:r,intensity:a.startParams.intensity,active:!0};if("market"===a.startParams.thresholdType){var o=randomItemFromArray(["products","resources"]),n=[];$.each(game.state[o],(function(e,t){void 0!==t.price_history&&n.push(e)}));var d=randomItemFromArray(n);i.extraParams={category:o,type:d}}else if("extortion"===a.startParams.thresholdType){var c=r/100*game.state.resources.gold.amount;i.extraParams={category:"resources",type:"gold",amount:c}}return console.log("creating a new event, statE: "+JSON.stringify(i)),game.state.events.list.push(i),game.data.activeEventTypes.push(e),gameUI.showPopup("event_details",[game.state.events.list.length-1,!1]),game.events.recalculateEventBoosts(),gameUI.checkDOMrefresh("popup_refresh","notifications"),"earthquake"===e&&(game.events.handleEventEffects(),game.events.endEvent(game.state.events.list.length-1)),!0},recalculateEventBoosts:function(){game.data.eventBoosts={};for(var e=0;e<game.state.events.list.length;e++){var t=game.state.events.list[e];if(t.active&&!(game.const.eventTypes.seasonal.indexOf(t.type)>-1)){var a=game.const.eventParams[t.type],s=t.intensity;"fixed"===a.frequency.type&&(s=1);var r=["effectsBuildings"];$.each(a.effects,(function(e,a){var i,o=!1,n=!1,d=0,c=1,l=[];if(-1!==r.indexOf(e)){switch(e){case"effectsBuildings":c=a.bonusEffect,d=c*=s,n=a.bonusType;for(var g=0;g<a.types.length;g++){if("any"===(i=a.types[g])){l=Object.keys(game.state.buildings);break}"winter"===t.type&&"farm"===i&&game.data.continentRewardBoosts.farm_winter_immunity||l.push(i)}}var m=!1;0;for(g=0;g<l.length;g++)!1!==(o=l[g])&&(void 0===game.data.eventBoosts[o]?(game.data.eventBoosts[o]={},game.data.eventBoosts[o][n]=d):void 0===game.data.eventBoosts[o][n]||m?game.data.eventBoosts[o][n]=d:game.data.eventBoosts[o][n]+=d)}}))}}helpers.common.setRefreshFlagForCache("buildings"),helpers.common.setRefreshFlagForCache("resourceRates")}}};var helpers={common:{getCacheData:function(e,t){return!forceCacheRefresh&&(void 0!==game.data.cache[e]&&(void 0!==game.data.cache[e][t]&&(!0!==game.data.cache[e][t].refresh&&game.data.cache[e][t])))},storeCacheData:function(e,t,a){void 0===game.data.cache[e]&&(game.data.cache[e]={}),void 0===game.data.cache[e][t]&&(game.data.cache[e][t]={}),game.data.cache[e][t]=a,game.data.cache[e][t].refresh=!1},setRefreshFlagForCache:function(e,t){if(void 0===game.data.cache[e])return!1;void 0===t?$.each(game.data.cache[e],(function(e,t){t.refresh=!0})):void 0!==game.data.cache[e][t]&&(game.data.cache[e][t].refresh=!0)},getCanvasOffsetX:function(){var e=uiOffsets[selectedUIoffset];return!1!==e.overrideCanvasOffsetX?e.overrideCanvasOffsetX:game.const.canvasOffsetX},getCanvasOffsetY:function(){var e=uiOffsets[selectedUIoffset];return!1!==e.overrideCanvasOffsetY?e.overrideCanvasOffsetY:game.const.canvasOffsetY},isCurrentView:function(e){return e===game.data.currentView},getRandomItemBasedOnWeight:function(e,t){for(var a={},s=0,r=0;r<e.length;r++)a[s+=e[r].weight]=r;var i=randomIntFromInterval(0,s);isUndefined(t)||(i=Math.round(s*t));var o=!1;return $.each(a,(function(t,a){if(parseInt(t)>=i)return o=e[a],!1})),o},getViewCategory:function(e){var t=!1;return $.each(game.const.viewCategories,(function(a,s){if(s.defaultView===e)return t=s,!0;if(s.views.length>0)for(var r=0;r<s.views.length;r++)if(s.views[r]===e)return t=s,!0})),!1===t&&(t=game.const.viewCategories[game.data.currentViewCategory]),t},getBuildingData:function(e,t){perfTests.c4++;var a,s,r,i,o=e+(void 0!==t&&!1!==t?t.toString():""),n=helpers.common.getCacheData("buildings",o);if(n)return n;var d,c=game.const.buildings[e],l=game.state.buildings[e],g=helpers.common.getResearchBoost(e,"gain_mx");if(g*=helpers.common.getEventBoost(e,"gain_mx"),void 0!==l.avl)return d=$.extend(!0,{},l,c),a=1,i=1,$.each(d.gains,(function(e,t){if(perfTests.c4++,void 0!==t.genRate){t.genRate*=g,void 0!==game.data.continentBoosts[e+"_gain"]&&(a=game.data.continentBoosts[e+"_gain"],t.genRate*=a);var s=game.data.startingBoosts[e+"_gain_mx"];!isUndefined(s)&&s>1&&(i=s,t.genRate*=i)}else void 0!==t.max||(d.gains[e]="citizen_capacity"===e?d.gains[e]*d.avl:"dig_rate"===e?t*g*game.data.continentBoosts.mining_rate*game.data.startingBoosts.mining_rate_gain_mx:t*g)})),s=0,void 0!==l.workers?s=l.workers/Math.max(1,d.gains.citizen_capacity):l.avl>0&&(s=1),r=0,void 0!==l.eff&&(r=l.eff),d.output=1*s*r*game.state.stats.productivity*g*a*i,helpers.common.storeCacheData("buildings",o,d),d;d=$.extend(!0,{},c);var m=0;if(void 0!==game.data.researchBoosts[e]&&void 0!==game.data.researchBoosts[e].building_upgrade&&(m=parseInt(game.data.researchBoosts[e].building_upgrade)),d.levels_unlocked=m,void 0===l[t])return $.each(d.gains,(function(e,t){perfTests.c4++,d.gains[e]*="dig_rate"===e?g*game.data.continentBoosts.mining_rate*game.data.startingBoosts.mining_rate_gain_mx:g})),d.output=0,helpers.common.storeCacheData("buildings",o,d),d;l=l[t],d=$.extend(!0,{},l,d);for(var u=0;u<l.level;){perfTests.c4++;var p=c.upgrades[u];if(void 0===p)break;if(d.costs.build=p.costs.build,1===l.level||u===l.level-1)break;$.each(p.costs.operational,(function(e,t){perfTests.c4++,void 0!==d.costs.operational[e]?d.costs.operational[e]+=t:d.costs.operational[e]=t})),$.each(p.gains,(function(e,t){perfTests.c4++,void 0!==d.gains[e]?d.gains[e]+=t:d.gains[e]=t})),void 0!==d.dirt_composition&&(d.dirt_composition=p.dirt_composition),u++}return a=1,i=1,$.each(d.gains,(function(e,t){perfTests.c4++,"dig_rate"===e?(d.gains[e]*=g*game.data.continentBoosts.mining_rate,a=game.data.continentBoosts.mining_rate,i=game.data.startingBoosts.mining_rate_gain_mx):d.gains[e]*=g})),s=0,void 0!==l.workers&&(s=l.workers/Math.max(1,d.gains.citizen_capacity)),r=0,void 0!==l.eff&&(r=l.eff),d.output=1*s*r*game.state.stats.productivity*g*a*i,helpers.common.storeCacheData("buildings",o,d),d},getResourceTypeMinEfficiency:function(e){var t,a=1;if(["stone","iron","uranium"].indexOf(e)>-1)for(var s=0;s<game.state.buildings.mining_plant.length;s++)t=game.state.buildings.mining_plant[s],a=Math.min(a,t.eff);else for(s=0;s<game.const.resources[e].buildings.length;s++)(t=game.state.buildings[game.const.resources[e].buildings[s]]).avl>0&&void 0!==t.eff&&(a=Math.min(a,t.eff));return a},getBuilderReductionMX:function(){return 1/(20/(game.state.jobs.builder.workers+20))*game.data.continentBoosts.build_bonus},getProductionReductionMX:function(){var e=this.getBuildingData("war_factory",0),t=game.state.buildings.war_factory[0],a=0,s=0;return void 0!==t&&(a=t.eff,s=t.workers/Math.max(1,e.gains.citizen_capacity)),e.gains.produce_rate*a*s},getNumberChange:function(e){var t="";return e>0?t=" up":e<0&&(t=" down"),'<span class="number-change'+t+'">'+parseInt(100*e*10)/10+"%</span>"},getNextQueueItem:function(e){var t={name:getLine("dom_refresh_text6"),time:""};if("buildQueue"===e){var a=helpers.common.getBuilderReductionMX();if(game.state.buildQueue.length>0){game.state.buildings[game.state.buildQueue[0][0]];if(game.state.buildQueue[0][2]/1e3/a>0){t.name=getLine("buildings_"+game.state.buildQueue[0][0]),t.time=(game.state.buildQueue[0][2]/1e3/a).formatNumber(1,1)+"s";var s=helpers.common.getBuildingData(game.state.buildQueue[0][0],game.state.buildQueue[0][3]);void 0!==s.level&&(t.name+=" ("+getLine("lvl")+(s.level+1)+")")}}}return t},checkMouseCollission:function(e,t){var a;e.constructor!==Array&&(e=[e]);for(var s=0;s<e.length;s++)if(a=e[s],page.mousePos.x>=a.x&&page.mousePos.x<=a.x+a.w&&page.mousePos.y>=a.y&&page.mousePos.y<=a.y+a.h)return!0===t?a:a.globalID;return!1},checkObjectCollissions:function(e,t){for(var a=0;a<t.length;a++){var s=t[a];if(e.hits(s))return console.log("collides"),s}return!1},getResearchBoost:function(e,t,a){var s=1;return-1===["gain_mx","building_limit"].indexOf(t)&&(s=0),void 0!==game.data.researchBoosts[e]&&void 0!==game.data.researchBoosts[e][t]&&(s+=game.data.researchBoosts[e][t]),a?s>0:s},getEventBoostTypes:function(e){return void 0!==game.data.eventBoosts[e]&&game.data.eventBoosts[e]},getEventBoost:function(e,t){var a=1;return-1===["gain_mx"].indexOf(t)&&(a=0),void 0!==game.data.eventBoosts[e]&&void 0!==game.data.eventBoosts[e][t]&&(a+=game.data.eventBoosts[e][t]),a},getContinentBoost:function(e){var t=game.const.continents[game.state.homeContinent];return void 0===t||void 0===t.perm_bonus[e]?1:1+t.perm_bonus[e]},setZoomRatio:function(e){var t=game.data.pixelRatioLimits.min,a=game.data.pixelRatioLimits.max;e<t?(pixelRatio=t,game.data.currentView):e>a?(pixelRatio=a,game.data.currentView):pixelRatio=e},setCameraOffset:function(e,t){var a=pageWidth-helpers.common.getCanvasOffsetX(),s=pageHeight-helpers.common.getCanvasOffsetY(),r=0,i=game.data.pixelRatioLimits.drawW*pixelRatio,o=0,n=game.data.pixelRatioLimits.drawH*pixelRatio;switch(game.data.currentView){case"world":var d=-(game.data.pixelRatioLimits.drawW*pixelRatio-a)-helpers.common.getCanvasOffsetX(),c=-helpers.common.getCanvasOffsetX();r=Math.min(d,c),i=Math.max(d,c),o=-(game.data.pixelRatioLimits.drawH*pixelRatio-s)-helpers.common.getCanvasOffsetY(),n=-helpers.common.getCanvasOffsetY();break;case"territories":case"battle_select":case"research":r=-game.data.pixelRatioLimits.drawW*pixelRatio+a/2,i=a/2,o=-game.data.pixelRatioLimits.drawH*pixelRatio+s/2,n=s/2,"research"===game.data.currentView&&(i+=302*pixelRatio,r+=302*pixelRatio,n+=420*pixelRatio,o+=420*pixelRatio);break;case"battle":o=60,n=60}game.data.cameraXoffset=Math.max(r,Math.min(i,e)),game.data.cameraYoffset=Math.max(o,Math.min(n,t))},defineZoomRatios:function(e){var t,a=uiOffsets[selectedUIoffset],s=pageWidth-helpers.common.getCanvasOffsetX(),r=pageHeight-helpers.common.getCanvasOffsetY();helperData.canvasBoundaries.coverOutline||(s+=-a.left,r+=-a.topExtra);var i=s,o=r,n=s,d=r,c="world"===e?"regions":"territories"===e?"territories":"zones",l=!1,g=!1,m=!1,u=!1;switch(e){case"world":t=game.const.gameGrids[c],i=worldGrid.gridWidth/20,o=worldGrid.gridHeight/20,n=worldGrid.gridWidth,d=worldGrid.gridHeight,u=!0,g=!0;break;case"territories":case"battle_select":var p=0;"battle_select"===e&&(p=1),i=2*(t=game.const.gameGrids[c]).gridW,o=2*t.gridH,n=t.gridW*(t.cols+p),d=t.gridH*(t.rows+p),g=!0,"territories"===e&&game.data.showOnlyStartingTer&&(d=2.5*o,n=t.gridW*t.cols,g=!1);break;case"battle":i=500,o=530,n=500,d=530;break;case"research":i=700,o=500,n=1200,d=1300,m=!0,l=!0}var h=s/n,v=r/d,f=Math.min(h,v);u&&(f=v);var y=s/i,b=r/o,_=Math.min(y,b);u&&(_=b),game.data.pixelRatioLimits.min=f,game.data.pixelRatioLimits.max=_,game.data.pixelRatioLimits.drawW=n,game.data.pixelRatioLimits.drawH=d;var w=Math.max(f,_/2);!1!==l&&(w=Math.max(l,w)),!1!==g&&(w=f),!1!==m&&(w=_,!1!==m&&(w*=.8)),game.data.pixelRatioLimits.base=w,"territories"===e&&game.data.showOnlyStartingTer&&(game.data.pixelRatioLimits.base=.6*pageHeight/100),helpers.common.setZoomRatio(game.data.pixelRatioLimits.base),helpers.common.calculateCenterCoords()},defineCanvasCenter:function(e,t){var a=0,s=0,r=uiOffsets[selectedUIoffset];switch(e){case"world":a=(pageWidth-helpers.common.getCanvasOffsetX()-game.data.pixelRatioLimits.drawW*pixelRatio)/2-helpers.common.getCanvasOffsetX(),s=-helpers.common.getCanvasOffsetY();break;case"research":a=(pageWidth-helpers.common.getCanvasOffsetX()-302*pixelRatio)/2,s=(pageHeight-helpers.common.getCanvasOffsetY()-160*pixelRatio)/2;break;default:var i={territories:{x:400,y:-50},battle_select:{x:450,y:-150}},o={x:0,y:0};if(isUndefined(i[e])||(o=i[e]),"territories"===e&&game.data.showOnlyStartingTer&&(o={x:0,y:0}),a=(pageWidth-helpers.common.getCanvasOffsetX()+o.x-game.data.pixelRatioLimits.drawW*pixelRatio)/2,s=(pageHeight-helpers.common.getCanvasOffsetY()+o.y-game.data.pixelRatioLimits.drawH*pixelRatio)/2,s+=r.topSpecial,["battle_select"].indexOf(e)>-1){var n=game.const.gameGrids["territories"===e?"territories":"zones"],d=!1;"territories"===e&&game.data.showOnlyStartingTer&&(d=!0),d||(a+=n.gridW/2*pixelRatio,s+=n.gridH/2*pixelRatio)}}helpers.common.setCameraOffset(a,s),helpers.common.calculateCenterCoords()},calculateCenterCoords:function(){var e=((pageWidth-helpers.common.getCanvasOffsetX())/2-game.data.cameraXoffset)/pixelRatio,t=((pageHeight-helpers.common.getCanvasOffsetY())/2-game.data.cameraYoffset)/pixelRatio;game.data.centerPoint.x=e,game.data.centerPoint.y=t;var a=!1,s=0,r=0;switch(game.data.currentView){case"world":!((a=GridFactory.pointToHex(e,t)).x>=game.const.gameGrids.regions.cols||a.y>=game.const.gameGrids.regions.rows)&&a.x>=0&&a.y>=0?(s=a.x,r=a.y,a=!0):a=!1;break;case"territories":case"battle_select":var i=game.const.gameGrids["territories"===game.data.currentView?"territories":"zones"];s=Math.floor(e/i.gridW),r=Math.floor(t/i.gridH);break;case"battle":game.data.allowedPlayerArea={x:-250,y:70,w:550,h:350}}game.data.centerCoords.x=s,game.data.centerCoords.y=r},getConvertedGameToCanvasData:function(e){var t={};return t.x=e.x*pixelRatio+helpers.common.getCanvasOffsetX()+game.data.cameraXoffset,t.y=e.y*pixelRatio+helpers.common.getCanvasOffsetY()+game.data.cameraYoffset,void 0!==e.w&&(t.w=e.w*pixelRatio,t.h=e.h*pixelRatio),t},getConvertedCanvasToGameData:function(e){var t=e.x-helpers.common.getCanvasOffsetX()-game.data.cameraXoffset-helperData.canvasBoundaries.x,a=e.y-helpers.common.getCanvasOffsetY()-game.data.cameraYoffset-helperData.canvasBoundaries.y;return{x:t/=pixelRatio,y:a/=pixelRatio}},checkIfObjectOverlapsWithAnythingElse:function(){if(null===game.data.currentDrawableVehicle)return!1;var e=!1;helpers.common.checkIfObjectFullyContained(game.data.allowedPlayerArea,game.data.currentDrawableVehicle)||(e=!0);for(var t=0;t<game.data.gameObjects.length;t++)if(void 0!==game.data.gameObjects[t]&&game.data.currentDrawableVehicle.globalID!==game.data.gameObjects[t].globalID&&helpers.common.checkIfObjectsOverlap(game.data.currentDrawableVehicle,game.data.gameObjects[t])){e=!0;break}if(game.data.trash.length>0){var a=helpers.common.getConvertedGameToCanvasData(game.data.currentDrawableVehicle);helpers.common.checkIfObjectsOverlap(a,game.data.trash[0])&&(audio.playSound("trash"),game.removeSquadronFromAll(game.data.currentDrawableVehicle.globalID),game.data.currentDrawableVehicle=null,game.data.draggingTank=!1,game.data.relocatingTank=!1,forceDrawAll=!0)}return e},checkIfObjectsOverlap:function(e,t){var a=0;return"vehicle"===e.type&&"vehicle"===t.type&&(a=5),!(e.x>=t.x+t.w||t.x>=e.x+e.w)&&!(e.y>=t.y+t.h+a||t.y>=e.y+e.h+a)},checkIfObjectFullyContained:function(e,t){return!(e.x>t.x||e.x+e.w<t.x+t.w)&&!(e.y>t.y||e.y+e.h<t.y+t.h)},checkIfAnyObjectClicked:function(e){if(game.data.battleStarted)return!1;var t={};if(!game.data.leaderEnabled)for(var a,s,r=0;r<game.data.buttons.length;r++)if(helpers.common.checkIfObjectsOverlap(e,game.data.buttons[r])){for(var i,o=0;o<game.data.gameObjects.length;o++)if(game.data.gameObjects[o].globalID===game.data.buttons[r].parentGlobalID){i=game.data.gameObjects[o];break}if(a=game.state.corpuses[i.corpusID],s=game.const.squadronSize[a.upgrades.maxSquadronSize],i.tanksAmount!==s)return t.type="button",t.object=game.data.buttons[r],t}for(r=0;r<game.data.gameObjects.length;r++)if(void 0!==game.data.gameObjects[r]&&void 0!==game.data.gameObjects[r]&&helpers.common.checkIfObjectsOverlap(e,game.data.gameObjects[r]))return t.type="gameObject",t.object=game.data.gameObjects[r],t;return!1},randomizeSquadronsDynamic:function(){for(var e,t,a,s=0,r={},i=0;i<game.state.corpuses.length;i++)e=game.state.corpuses[i],r[i]={tanksAmount:e.tanksAmount,crew:e.crew};for(i=0;i<game.data.gameObjects.length;i++)a=game.data.gameObjects[i],e=game.state.corpuses[a.corpusID],game.fillASquadron(a.globalID);var o=!1;for(i=0;i<game.state.corpuses.length;i++)game.state.corpuses[i].crew<=game.state.resources.citizens.idle&&(o=!0);if(o){var n,d,c,l;for(audio.playSound("randomizeTanks");game.data.gameObjects.length<helpers.plans.getFormationSize()&&s<50;){o=!1;for(i=0;i<game.state.corpuses.length;i++)game.state.corpuses[i].crew<=game.state.resources.citizens.idle&&(o=!0);if(!o)return void(refreshUI.battleMenu=!0);n=!1;for(i=0;i<game.state.corpuses.length;i++)if(game.state.corpuses[i].tanksAmount){n=!0;break}if(!n)break;t=!1;var g={};for(i=0;i<game.state.corpuses.length;i++)game.state.corpuses.tanksAmount>0&&(g[game.state.corpuses]=0);var m=g[0],u=0;for(i=0;i<g.length;i++)g[i]<m&&(m=g[i],u=i);if(game.data.gameObjects.length>0)for(i=0;i<game.data.gameObjects.length;i++)game.data.gameObjects[i].corpusID,g[i]-m>2&&game.state.corpuses[u].tanksAmount>0&&(t=i);if(!1!==t||(t=randomIntFromInterval(0,game.state.corpuses.length-1),0!==(e=game.state.corpuses[t]).tanksAmount)){for(var p=0;p<50&&(p++,!(e.crew>game.state.resources.citizens.idle));){var h=randomIntFromInterval(-200,250),v=randomIntFromInterval(0,400),f={x:h,y:v,w:61,h:30,type:"vehicle"};if(helpers.common.checkIfObjectFullyContained(game.data.allowedPlayerArea,f)){var y=!1;for(i=0;i<game.data.gameObjects.length;i++)if(helpers.common.checkIfObjectsOverlap(f,game.data.gameObjects[i])){y=!0;break}if(!y){var b={corpusID:e.id,hp:1,maxHp:1,parts:{hull:e.parts.hull,turret:e.parts.turret},currentTarget:null},_=new Vehicle(h,v,61,31,b);helpers.units.addDynamicUnit(_,!0)&&game.fillASquadron(_.globalID);break}}}for(i=0;i<game.state.corpuses.length;i++)if(game.state.corpuses[i].tanksAmount){n=!0;break}if(!n)break;50===(s+=1)&&console.log("iter outer went to 50 so thats why while was stopped")}}refreshUI.battleMenu=!0;var w,x=0;$.each(r,(function(e,t){d=t.tanksAmount,c=game.state.corpuses[e].tanksAmount,(l=d-c)>0&&(w=page.$gameUI.$overlay.find('.battle-menu .corpus-holder .amount-holder[data-type="'+e+'"]'),k=w.offset(),I={x:k.left+30,y:k.top-10,forceDraw:!0,subType:"res_added"},D="-"+l,game.addAnimation("general_text",D,I),x+=l*game.state.corpuses[e].crew)})),x>0&&(w=page.$gameUI.$overlay.find(".battle-menu .utility-widget .crew-fighting"),k=w.offset(),I={x:k.left,y:k.top,forceDraw:!0,subType:"res_added"},D=getLine("crew_added",x),game.addAnimation("general_text",D,I))}else{audio.playSound("declineBribe"),page.$gameUI.$overlay.find(".battle-menu .top .center").html(getLine("listeners_text6")),game.checkIdleCitizens(0);var k=page.$gameUI.$overlay.find(".battle-menu .bottom .left .randomize-squadrons").offset(),D=getLine("listeners_text6"),I={x:k.left-47,y:k.top,forceDraw:!0,subType:"over-ui"};game.addAnimation("general_text",D,I)}},getResearchPointCost:function(){var e=game.const.resources.research_points.base_cost*Math.pow(game.const.resources.research_points.cost_mx,game.state.resources.research_points.total);return game.data.researchPointCost=e,e},getUpgradeUnlockDetails:function(e){var t=game.const.researchUpgrades[e];void 0!==game.state.researchUpgrades[e]&&game.state.researchUpgrades[e];if(void 0===t.requires)return{allConditionsMet:!0,fullUnlockDetails:[]};for(var a=!0,s=[],r=0;r<t.requires.length;r++){var i=t.requires[r],o=!0;switch(i.type){case"research_upgrade":(void 0!==game.state.researchUpgrades[i.subType]?game.state.researchUpgrades[i.subType]:0)<=0&&(a=!1,o=!1);break;case"total_citizens":game.state.resources.citizens.total<i.subType&&(a=!1,o=!1)}var n=i;n.reqMet=o,s.push(n)}return{allConditionsMet:a,fullUnlockDetails:s}},isResource:function(e){return void 0!==game.state.resources[e]},getRandomPoolOfBuildings:function(e){var t=[];return $.each(game.state.buildings,(function(e,a){if(void 0!==a.avl&&a.avl>0)t.push([e,!1]);else for(var s=0;s<a.length;s++)t.push([e,s])})),t.sort((()=>.5-Math.random())).slice(0,e)},getCharNumericSumFromString:function(e){for(var t=0,a=0;a<e.length;a++)t+=e.charCodeAt(a);return t},getAchievement:function(e,t){return!isUndefined(game.state.achievements[e])&&!isUndefined(game.state.achievements[e][t])&&game.state.achievements[e][t]},checkAchievementGet:function(e,t){var a,s;isUndefined(t)&&(t=!1),!1!==t?(a={})[t]=game.const.achievements[e].list[t]:a=game.const.achievements[e].list,$.each(a,(function(t,a){if(!1===(s=helpers.common.getAchievement(e,t))||!s.achThisRun){var r,i=!0,o=t,n="";switch(e){case"continent_conquer":i=!1,r=game.state.currentParentGrids.continent,n=getLine("continents_"+t);break;case"total_citizens":r=game.state.resources.citizens.total,n=Number(o).formatNumber(2,2)}var d=!1;if(i?(o=Number(o))<=r&&(d=!0):o===r&&(d=!0),!d)return!1;switch(a.reward_type){case"perk_points":game.change.resource("perk_points_pending",a.reward_amount)}!1!==s?(s.achThisRun=!0,s.completions.push(game.state.gameDate)):(isUndefined(game.state.achievements[e])&&(game.state.achievements[e]={}),game.state.achievements[e][t]={completions:[game.state.gameDate],achThisRun:!0});var c="ach_"+e+"_desc";isUndefined(a.desc_var)||(c+=a.desc_var),audio.playSound("positiveSound"),game.pushNotification(getLine("ach_new_title")+getLine(c,n,a.reward_amount),"achievement_completed","achievement-completed")}}))},addContinentReward:function(e){switch(game.state.continentRewards.push(e),game.recalculateContinentRewardBoosts(),game.events.recalculateEventBoosts(),e){case"water_sources_increase":var t=game.state.resources.water_sources.total*(game.data.continentRewardBoosts.water_sources_increase-1);game.change.resource("water_sources",t)}},getContinentRewardBoost:function(e,t){var a=game.const.continentRewards[e],s=1;return["earthquake_immunity","farm_winter_immunity"].indexOf(e)>-1&&(s=0,t=!0),game.state.continentRewards.indexOf(e)>-1&&(s=1+a.amount),t?s>0:s},getRandomContinentRewards:function(){var e=[];return $.each(game.const.continentRewards,(function(t,a){-1===game.state.continentRewards.indexOf(t)&&e.push(t)})),randomItemsFromArray(e,6)},getStartingBoost:function(e,t){var a=game.const.startingBoosts[e],s=!1;["starting_citizens","starting_resources"].indexOf(e)>-1&&(s=!0);var r=s?0:1;return isUndefined(game.state.startingBoosts[e])||(r=game.state.startingBoosts[e]*a.perPoint,s||(r=1+r)),t?r>0:r},isRevealed:function(e){return game.state.alreadyRevealed.indexOf(e)>-1},isActiveTutorial:function(e){return game.data.tutorial.activeSideTutorial===e},checkActiveTimers:function(){var e=Math.floor(Date.now()/1e3),t={},a=0;game.const.specialEventDates.ea_release_date.end>=e&&(t.ea_release_date=game.const.specialEventDates.ea_release_date,a++),t.discounts=[],$.each(game.const.specialEventDates.discounts,(function(s,r){for(var i=0;i<r.length;i++){var o=r[i];if(o.start<=e&&e<o.end)return t.discounts.push({type:s,data:o}),a++,!1}}));var s=[],r=isUndefined(helperData.activeTimers.ea_release_date)&&!isUndefined(t.ea_release_date),i=!isUndefined(helperData.activeTimers.ea_release_date)&&isUndefined(t.ea_release_date);(r||i)&&s.push("ea_release_date"),i&&(t.ea_release_date=$.extend(!0,{},game.const.specialEventDates.ea_release_date),t.ea_release_date.remove=!0,a++),r=isUndefined(helperData.activeTimers.discounts)&&t.discounts.length>0,i=!isUndefined(helperData.activeTimers.discounts)&&0===t.discounts.length,r||i?s.push("discounts"):delete t.discounts,i&&(t.discounts.push({type:"steam",data:game.const.specialEventDates.discounts.steam[0],remove:!0}),a++),helperData.activeTimers=a>0&&t},checkTutorialFire:function(){if(helperData.tutorialShowConditions){for(var e=!0,t=0;t<helperData.tutorialShowConditions.length;t++){var a=helperData.tutorialShowConditions[t],s=0;switch(a.type){case"time":s=performance.now();break;case"food":s=game.state.resources.food.extra;break;case"water":s=game.state.resources.water.extra;break;case"wood":s=game.state.resources.wood.extra}s<=a.value&&(e=!1)}e&&(helperData.tutorialShowConditions=!1,gameUI.showQuickTutorial())}}},stats:{calculateMalnourishment:function(e,t){var a=3*(1-(game.data.continentRewardBoosts.rations_reduction-1)),s=1/40/a/4,r=1/7/a/4,i=e*s,o=t*r;e>=.8&&t<=0&&(r=0),t>=.8&&e<=0&&(s=0);var n=0;n+=e>0?i:-s,(n+=t>0?o:-r)<-.01&&game.state.stats.malnourishment>0?(n=Math.max(n,-game.state.stats.malnourishment),game.state.stats.malnourishment+=n,game.pushNotification(getLine("malnourishment1",(100*n).formatNumber()),"malnourishment_changed","positive")):n>.01&&game.state.stats.malnourishment<1&&(n=Math.min(n,1-game.state.stats.malnourishment),game.state.stats.malnourishment+=n,game.pushNotification(getLine("malnourishment2",(100*n).formatNumber()),"malnourishment_changed","warning")),gameUI.checkDOMrefresh("resource_change",{type:"health"}),gameUI.checkDOMrefresh("resource_change",{type:"productivity"})},checkForCitizenDeaths:function(){for(var e,t=game.const.healthDeathRatios,a=0;a<t.length;a++)if(game.state.stats.health>=t[a][0]){e=t[a];break}void 0===e&&(e=t[t.length-1]),game.state.cumulativeDeathRatio+=e[1];var s=parseInt(game.state.cumulativeDeathRatio*game.state.resources.citizens.total);if(s>0&&(game.state.cumulativeDeathRatio=0),s>0){var r=s;game.state.resources.citizens.idle=Math.max(0,game.state.resources.citizens.idle);var i=Math.min(game.state.resources.citizens.idle,s);if(gameUI.checkDOMrefresh("resource_change",{type:"citizens"}),i>0&&(r-=i,game.change.resource("citizens",-i),gameUI.checkDOMrefresh("resource_change",{type:"citizens"}),game.pushNotification(getLine("citizens_die",i),"health_dropped","danger")),r>0){var o=0;$.each(game.state.jobs,(function(e,t){if((o=Math.min(r,t.workers))>0&&(t.workers-=o,gameUI.checkDOMrefresh("worker_change",{type:"jobs",subType:e}),game.change.resource("total_citizens",-o),game.pushNotification(getLine("workers_die",o,e),"health_dropped","danger")),(r-=o)<=0)return!1})),r>0&&(o=0,$.each(game.const.resources,(function(e,t){if(t.gatherable){var a=game.state.resources[e];if(void 0!==a.workers)return(o=Math.min(r,a.workers))>0&&(a.workers-=o,gameUI.checkDOMrefresh("worker_change",{type:"jobs",subType:e}),game.change.resource("total_citizens",-o),game.pushNotification(getLine("scavangers_die",o,e),"health_dropped","danger")),!((r-=o)<=0)&&void 0}}))),r>0&&(o=0,$.each(game.state.buildings,(function(e,t){if(void 0!==t.workers)return(o=Math.min(r,t.workers))>0&&(t.workers-=o,game.change.resource("total_citizens",-o),gameUI.checkDOMrefresh("worker_change",{type:"buildings",subType:e}),game.pushNotification(getLine("workers_die",o,e),"health_dropped","danger")),!((r-=o)<=0)&&void 0}))),(r>0||0===game.data.gameEnding&&0===game.state.resources.citizens.total)&&(helperData.forceGameOver=!0,console.log("citizens to lose "+r),gameUI.checkDOMrefresh("resource_change",{type:"citizens"}))}}},checkForNewCitizens:function(){if(!(game.state.stats.health<.1)){var e=Math.floor(game.state.resources.food.amount/30),t=.1+helpers.common.getResearchBoost("population_gain","population_gain");t*=game.data.continentBoosts.citizen_gain;var a=Math.min(game.state.resources.population.total-game.state.resources.citizens.total,Math.ceil(game.state.resources.population.total*t)),s=Math.floor(Math.min(e,Math.max(0,a)));if(s>0){game.change.resource("citizens",s),game.pushNotification(getLine("attracted_citizens",s.formatNumber(2,2)),"citizens_attracted","cit-gain"),gameUI.checkDOMrefresh("resource_change",{type:"citizens"});var r=page.$gameUI.$topMenu.find(".population");if(r.length>0&&r.is(":visible")&&!game.getSettingValue("hide_resource_animations")){var i={$onDOMelement:r,extraClasses:" over-ui",animType:"anim_scaleInOutDown"};game.addAnimation("general_text",s.formatNumber(2,2,!1,!0)+'<div class="icon citizens tiny"></div>',i)}}}},updateSicknessRate:function(){var e=0,t=1e3+helpers.common.getResearchBoost("doctor","coverage_increase"),a=(1+game.state.jobs.doctor.workers)*t/Math.max(1,game.state.resources.citizens.total);if(game.state.stats.toxicity>game.state.stats.sickness){game.state.stats.toxicity;e=Math.min(game.state.stats.toxicity/20,game.state.stats.toxicity-game.state.stats.sickness)}else{var s=Math.max(.01,(game.state.stats.sickness-game.state.stats.toxicity)/10*a);e=-Math.min(s,game.state.stats.sickness-game.state.stats.toxicity)}game.state.stats.sickness+=e},updateMoraleRate:function(){if(!helpers.events.isActiveEvent("riot")){var e=0,t=2e3+helpers.common.getResearchBoost("policeman","coverage_increase"),a=(2+game.state.jobs.policeman.workers)*t/Math.max(1,game.state.resources.citizens.total),s=.01*(a-1);if(a>1)e=Math.min(1-game.state.stats.morale,s);else e=Math.max(.2,game.state.stats.morale+s)-game.state.stats.morale;game.state.stats.morale+=e}},updateMaintenanceStatus:function(){var e=Math.max(0,game.state.resources.tiles.total-game.state.resources.tiles.amount-50)/50,t=1/120*((e<=0?1:game.state.jobs.builder.workers/e)-1);game.state.stats.maintenance=Math.max(0,Math.min(1,game.state.stats.maintenance+t))},updateDiplomacy:function(){var e=5e3+helpers.common.getResearchBoost("diplomat","coverage_increase"),t=.01*((10+game.state.jobs.diplomat.workers)*e/Math.max(1,game.state.resources.citizens.total));game.state.stats.diplomacy=Math.min(t+game.state.stats.diplomacy,1),helpers.common.isCurrentView("world")&&gameUI.checkDOMrefresh("overlay_refresh")},recalculateProductBonuses:function(){var e={};$.each(game.state.products,(function(t,a){if(!(a.avl<=0)){var s=game.const.products[t],r=Math.min(1,a.avl/game.state.resources.citizens.total);$.each(s.milestones,(function(t,a){if(a.required_rate<=r){$.each(a.effects,(function(t,a){void 0===e[t]?e[t]=a:e[t]+=a}))}}))}})),void 0!==game.data.productBonuses.connectivity&&(e.connectivity=game.data.productBonuses.connectivity),game.data.productBonuses=e},getDropCauseAndResolution:function(e,t){var a="";!0!==t&&(a+=getLine(e+"_subtitle"),a+="<br /><br />"+getLine("drop_cause"));var s="",r=!1;return"health_drop"===e?game.state.stats.malnourishment<1?s="malnourishment":game.state.stats.morale<1?s="morale":game.state.stats.sickness>0&&(s="sickness"):"prod_drop"===e&&(game.state.stats.health<1?(s="health",r=helpers.stats.getDropCauseAndResolution("health_drop",!0)):game.state.stats.maintenance<1&&(s="maintenance")),!0===t?a=s:!1===r?(a+=getLine("drop_cause_"+s),a+="<br/>"+getLine("drop_resolution")+getLine("drop_resolution_"+s)):(a+=getLine("drop_cause_"+s,getLine("drop_cause_"+r)),a+="<br/>"+getLine("drop_resolution")+getLine("drop_resolution_"+r)),a}},explore:{getExploredItem:function(){var e=helpers.explore.getFixedExploredItem();return!1!==e?e:helpers.explore.getRandomExploredItem()},getFixedExploredItem:function(){for(var e=!1,t=!1,a=0;a<game.const.exploreOrder.length;a++)if(!game.const.exploreOrder[a].received){e=game.const.exploreOrder[a].type;for(var s=0;s<game.const.explorables.length;s++)game.const.explorables[s].avl&&game.const.explorables[s].type===e&&(t=game.const.explorables[s]);if(!1!==t){game.const.exploreOrder[a].received=!0,gameUI.handleIconReveal(e);break}e=!1}return t},getRandomExploredItem:function(){var e=!1,t=$.extend(!0,[],game.const.explorables),a=game.state.jobs.explorer,s=game.state.gameGrids.territories[a.region][a.territory].boost;if(!1!==s&&"higher_explore_chance"===s.type)for(var r=0;r<t.length;r++)t[r].type===s.subType&&(t[r].weight*=s.amount,t[r].perTerCap*=s.amount);var i={},o=0;$.each(t,(function(e,t){t.avl&&(o+=t.weight,i[o]=e)}));var n=randomIntFromInterval(0,o);return $.each(i,(function(a,s){if(parseInt(a)>=n)return e=t[s],!1})),e},exploreResultsTypeInited:function(e,t){void 0!==e&&"undefined"!==e||console.log("Inited undefined: "+e),isUndefined(game.state.exploreResults.total[e])&&(game.state.exploreResults.total[e]=0),isUndefined(game.state.exploreResults[t])&&(game.state.exploreResults[t]={}),isUndefined(game.state.exploreResults[t][e])&&(game.state.exploreResults[t][e]=0)},storeExploreResults:function(e,t,a,s){return void 0!==t&&"undefined"!==t||console.log("Stored undefined: "+t),isUndefined(e[t])?e[t]=s:e[t]+=s,game.state.exploreResults.total[t]+=s,game.state.exploreResults[a][t]+=s,e},handleExploreResults:function(e){var t=getLine("explore_results"),a=0;$.each(e,(function(e,s){switch(a>0&&(t+=", "),e){case"food":case"wood":case"water":case"energy":case"iron":game.state.resources[e].extra+=s;break;case"tiles":case"mining_deposits":game.change.resource(e,s);break;case"water_sources":s*=game.data.continentRewardBoosts.water_sources_increase,game.change.resource(e,s);break;case"parts":s=Math.min(2,s);var r=game.getRandomParts(s);game.state.partsPending.length<100&&(game.state.partsPending=game.state.partsPending.concat(r))}-1===["water_sources","mining_deposits"].indexOf(e)?t+=s.formatNumber()+' <div class="icon small '+e+'"></div>':t+=s.formatNumber()+" "+getLine("res_"+e),a++})),"undefined"!==t?game.pushNotification(getLine("explore_results_message0",t),"explorers","explorer-gain"):console.log("some bug with what explorers found")}},state:{addAppStat:function(e,t){isUndefined(appState.stats[e])?appState.stats[e]=t:appState.stats[e]+=t},setAppStat:function(e,t){appState.stats[e]=t},getAppStat:function(e){return isUndefined(appState.stats[e])?0:appState.stats[e]}},market:{initMarketChart:function(e){Chart.pluginService.register({beforeInit:function(e){e.data.labels.forEach((function(e,t,a){/\n/.test(e)&&(a[t]=e.split(/\n/))}))},beforeDraw:function(e,t){if(e.config.options.chartArea&&e.config.options.chartArea.backgroundColor){var a=e.chart.ctx,s=e.chartArea;a.save(),a.drawImage(imageLoader.images.chartBackground.img,s.left,s.top,s.right-s.left,s.bottom-s.top),a.restore()}}}),helperData.marketChart=new Chart(e,{type:"line",data:{datasets:[{label:getLine("buy_price_blank"),data:[],backgroundColor:["rgba(18,117,160,0.7)"],borderColor:["rgba(18,117,160,0.7)"],borderWidth:1,pointRadius:6,pointBackgroundColor:"rgba(18,117,160,0.7)",order:2,lineTension:0},{label:getLine("sell_price_blank"),data:[],backgroundColor:["rgba(158,147,19,0.7)"],borderColor:["rgba(158,147,19,0.7)"],borderWidth:1,pointRadius:0,pointBackgroundColor:"rgba(158,147,19,0.9)",order:3,lineTension:0,showLine:!1},{type:"line",label:getLine("market_orders"),data:[],backgroundColor:["rgba(255,100,50,0.2)"],borderColor:["rgba(255,100,50,1)"],borderWidth:1,pointRadius:3,pointBackgroundColor:"rgba(250,93,93,0.9)",showLine:!1}]},options:{legend:{display:!1},title:{display:!1,text:getLine("market_text5")},scales:{yAxes:[{ticks:{fontColor:"#000000",fontSize:10,padding:10,maxTicksLimit:5},gridLines:{color:"rgba(255,255,255,0.7)",drawBorder:!1,drawTicks:!1}}],xAxes:[{id:"prices",ticks:{min:20,max:20,maxTicksLimit:10,display:!0,autoSkip:!0,maxRotation:30,minRotation:30,fontColor:"#000000",fontSize:10,padding:10},gridLines:{color:"rgba(255,255,255,0.7)",drawBorder:!1,drawTicks:!1}}]},elements:{line:{cubicInterpolationMode:"monotone"}},maintaintAspectRatio:!1,animation:{duration:0,easing:"easeOutQuart"},chartArea:{backgroundColor:"rgba(251, 85, 85, 0.4)"}}}),this.updateChartData(!0)},updateChartData:function(e){if(void 0!==helperData.marketChart){var t,a,s=helperData.marketChart,r=helperData.chartTypeShown,i=0;s.data.labels=[],t=void 0!==game.state.resources[r]?game.state.resources[r]:game.state.products[r];for(var o=0;o<t.price_history.length;o++){a=t.price_history[o];var n=Math.ceil(a.l.length/2);a.l.slice(0,n),a.l.slice(n);s.data.labels.push(a.l),$.each(s.data.datasets,(function(e,t){if(e<2){0===o&&(t.data=[],0===e&&(i=a.d));var s=0===e?a.sP:a.bP;t.data.push({x:s.d,y:s})}}))}s.data.datasets[2].data=[];for(o=0;o<game.state.tradeHistory.length;o++)a=game.state.tradeHistory[o],i>a.d||helperData.chartTypeShown!==a.type||s.data.datasets[2].data.push({x:a.l,y:a.y});if(e){game.const.products[r];s.update()}}},getMarketPrice:function(e,t){var a=helpers.common.isResource(e),s=a?game.state.resources[e]:game.state.products[e],r=a?game.const.resources[e]:game.const.products[e],i=void 0!==t.demand?t.demand:s.demand,o=i+(void 0!==t.supply?t.supply:s.supply),n=s.baseDSratio,d=r.base_price,c=i/o/n;return c<=1?s.minPrice+c*(d-s.minPrice):d*(2-c)+s.maxPrice*(c-1)},getTradeDetails:function(e,t,a,s){void 0===s&&(s=!1);var r=helpers.common.isResource(e),i=r?game.state.resources[e]:game.state.products[e],o=(r?game.const.resources[e]:game.const.products[e],i.demand),n=i.supply,d=o+n,c=i.baseDSratio,l=i.baseDSratio*d,g=.05*(1-(game.data.continentBoosts.lower_spread-1)),m="buy"===t?1:1-g,u=helpers.market.getMarketPrice(e,{})*m,p=0,h=a,v=0;for(s&&(v=a,h=Number.MAX_VALUE,a=0);h>0||v>0;){var f=h,y=o/d/c,b=!0;"buy"===t?(y<1?f=Math.min(f,(1-y)*l):y>=1&&y<1/c?f=Math.min(f,(1/c-y)*l):b=!1,b&&(o+=f,n-=f)):(y<=0?b=!1:f=y<=1?Math.min(f,y*l):Math.min(f,(y-1)*l),b&&(o-=f,n+=f));var _=1,w=0,x=u*f;0===f&&(_=0),s&&f>0&&(w=Math.min(v,x),_=(w=Math.ceil(100*w)/100)/x);var k=helpers.market.getMarketPrice(e,{demand:o,supply:n})*m,D=(u+(u+(k-u)*_))/2;if(s&&f>0&&(f=Math.floor(w/D*1e10)/1e10,a+=f=Math.floor(f)),p+=D*f,h-=f,v-=w,u=k,0===f)break}var I=p/a;1===(a=Math.max(1,Math.floor(a)))&&(p=u,I=u);return{orderSize:a,avgPrice:I,tradeValue:p=a*I,updatedDemand:o,updatedSupply:n}}},territory:{getAttackableDirections:function(e,t,a){var s,r=[],i=game.data.gameGrids[t];if("regions"===e){var o=helpers.territory.getRegionIDfromRef(t),n=game.state.gameGrids.regions,d=worldGrid[o];$.each(d.neighbours,(function(e,t){if(!1!==t&&!t.water){var a=t.x.toString()+"_"+t.y.toString(),s=helpers.territory.getRegionIDfromRef(a);n[s].enemy||r.push(e)}}))}else if("territories"===e){s=game.data.terNeighbourRefs[t],i=game.data.gameGrids[t],a&&(console.log("TerRefs: "+JSON.stringify(s)),console.log("ThisTer: "+JSON.stringify(i)));for(var c=0;c<s.length;c++){var l=s[c],g=game.data.gameGrids[l];if(a&&console.log("CompareTer: "+JSON.stringify(g)),!g.enemy){var m="";i.x>g.x?m="e":i.x<g.x?m="w":i.y>g.y?m="n":i.y<g.y&&(m="s"),r.push(m)}}}return game.data.attackableDirections.current=r,r},decideForARandomBoost:function(e,t){var a;if("nothing"!==(a="territories"===e?helpers.common.getRandomItemBasedOnWeight(game.const.territory.boostChances):helpers.common.getRandomItemBasedOnWeight(game.const.zone.boostChances)).type&&t.enemy){if(a={type:a.type,subType:a.subType,amount:randomFloatFromInterval(a.min,a.max)},"zones"===e){var s=game.calculateGameTimePowerMX("power");a.amount=Math.round(a.amount*s)}}else a=!1;return a},calculateManhattanDistance:function(e,t){var a=e.split("_"),s=t.split("_");return Math.abs(parseInt(a[0])-parseInt(s[0]))+Math.abs(parseInt(a[1])-parseInt(s[1]))},updateManhattanToClosestFriendly(e){var t,a,s,r=game.const.gameGrids.territories;$.each(e,(function(e,i){e=i.ref,s=9999;for(var o=0;o<game.data.playerOwnedTerRefs.length;o++)t=game.data.playerOwnedTerRefs[o],a=helpers.territory.calculateManhattanDistance(e,t),s>a&&(s=a);if(i.enemy||(s=0),s>=9999){var n=e.split("_");s=helpers.territory.getDistanceFromAttackableDirection({x:parseInt(n[0]),y:parseInt(n[1]),cols:r.cols,rows:r.rows})}i.closestPlayerTer=s}))},getRegionIDfromRef:function(e){var t=e.split("_");return parseInt(t[0])*game.const.gameGrids.regions.rows+parseInt(t[1])},canAttackNewRegion:function(){var e=helpers.territory.getRegionIDfromRef(game.state.currentAttackedRegion);return game.state.gameGrids.regions[e].conqueredTers>=game.const.gameGrids.territories.cols*game.const.gameGrids.territories.rows},canAttackNewContinent:function(){var e=game.state.currentParentGrids.continent,t=game.const.continents[e],a=0;return $.each(t.gridRefs,(function(e,t){var s=helpers.territory.getRegionIDfromRef(t);game.state.gameGrids.regions[s].enemy||a++})),a/t.gridRefs.length>=1},attackRegion:function(e,t){if(game.data.demoOver&&isDemo())gameUI.showMiniPopup(getLine("mini_popup_end_of_demo"));else if(t||game.data.gameGrids[e].attackable&&game.data.canAttackNewRegion){game.state.currentAttackedRegion=e,game.data.gameGrids[e].enemy=!1;var a=helpers.territory.getRegionIDfromRef(e);return game.state.gameGrids.regions[a].enemy=!1,game.const.continents[game.state.gameGrids.regions[a].continent].conqueredGrids.push(e),game.data.canAttackNewRegion=!1,game.data.playerOwnedRegionsRefs.push(e),game.data.playerOwnedRegions+=1,!0}return!1},attackContinent:function(e,t){if(void 0===game.const.continents[e])return!1;game.state.currentParentGrids.continent=e,helpers.territory.unlockContinent(e),game.data.canAttackNewContinent=!1;var a=randomItemFromArray(game.const.continents[e].gridRefs);return helpers.territory.forceConquerGrid("regions",a),game.data.canAttackNewRegion=!0,updateAttackableGrids("regions",game.state.currentParentGrids.continent),forceDrawAll=!0,!0},getDistanceFromAttackableDirection:function(e){for(var t=19,a=0,s=0;s<game.data.attackableDirections.current.length;s++){switch(game.data.attackableDirections.current[s]){case"n":a=e.y+1;break;case"w":case"nw":case"sw":a=e.cols-e.x;break;case"s":a=e.rows-e.y;break;case"e":case"ne":case"se":a=e.x+1}t=Math.min(t,a)}return t},forceConquerGrid:function(e,t){var a=game.data.gameGrids[t];if(void 0!==a){switch(a.enemy=!1,e){case"regions":var s=helpers.territory.getRegionIDfromRef(t);game.state.gameGrids.regions[s].enemy=!1,game.const.continents[game.state.gameGrids.regions[s].continent].conqueredGrids.push(t),game.state.gameGrids.regions[s].conqueredTers=game.const.gameGrids.territories.cols*game.const.gameGrids.territories.rows,"world"===game.data.currentView&&(game.data.gameGrids[t].enemy=!1,game.data.gameGrids[t].conqueredTers=game.const.gameGrids.territories.cols*game.const.gameGrids.territories.rows),game.state.gameStats.conquered.total.regions++,game.state.gameStats.conquered.current.regions++;break;case"territories":game.state.gameGrids.territories[game.state.currentParentGrids.regions][t].enemy=!1;var r=helpers.territory.getRegionIDfromRef(game.state.currentParentGrids.regions);game.state.gameGrids.regions[r].conqueredTers++;for(var i=0;i<Math.ceil(game.const.gameGrids.zones.cols/2);i++)for(var o=0;o<Math.ceil(game.const.gameGrids.zones.rows/2);o++)game.state.gameGrids.territories[game.state.currentParentGrids.regions][t].conqueredTiles.push(i.toString()+"_"+o.toString());refreshUI.currentPopup=!0,game.state.gameStats.conquered.total.territories++,game.state.gameStats.conquered.current.territories++,game.data.canAttackNewRegion=helpers.territory.canAttackNewRegion(),game.data.canAttackNewContinent=helpers.territory.canAttackNewContinent(),helpers.territory.getTerritoryBorders(game.data.playerOwnedTerRefs),game.data.canAttackNewRegion&&(game.state.gameStats.conquered.total.regions++,game.state.gameStats.conquered.current.regions++),game.data.canAttackNewContinent&&(game.state.gameStats.conquered.total.continents++,game.state.gameStats.conquered.current.continents++,gameUI.showPopup("continent_conquer"));break;case"zones":game.state.gameGrids.zones[game.state.currentParentGrids.regions][game.state.currentParentGrids.territories][t].enemy=!1,refreshUI.currentPopup=!0}forceDrawAll=!0}},forceConquerTerritories:function(e,t){var a=helpers.territory.getRegionIDfromRef(e),s=(game.state.gameGrids.regions[a],game.state.gameGrids.territories[e]),r=0;$.each(s,(function(e,a){if(a.enemy&&helpers.territory.forceConquerGrid("territories",e),++r>=t)return!1}))},unlockContinent:function(e){var t=game.state.lockedContinents.indexOf(e);game.state.lockedContinents.splice(t,1)},isLockedContinent:function(e){return game.state.lockedContinents.indexOf(e)>-1},updateTerritoryPrices:function(){console.log("Update territroy prices! - initial or 30 days passed , gameDate: "+game.state.gameDate),game.state.lastTerritoryPriceUpdate=game.state.gameDate;var e,t,a=game.calculateGameTimePowerMX("cost");$.each(game.state.gameGrids.regions,(function(s,r){r.enemy||$.each(game.state.gameGrids.territories[r.ref],(function(s,r){r.enemy&&(e=randomIntFromInterval(1e4,1e5),t=!1!==r.boost?2:1,r.price=e*a*t)}))}))},getTerritoryBorders:function(e,t){var a=[],s={};isUndefined(t)&&(t="territories"),e=[],$.each(game.data.gameGrids,(function(t,a){e.push(t)}));for(var r=game.const.gameGrids[t],i=0;i<e.length;i++){var o=e[i],n=o.split("_");n[0]=parseInt(n[0]),n[1]=parseInt(n[1]);var d=[{x:n[0],y:n[1]},{x:n[0]+1,y:n[1]},{x:n[0]+1,y:n[1]+1},{x:n[0],y:n[1]+1}];s[o]={terRef:o,xPos:n[0],yPos:n[1],corners:d},a.push({terRef:o,xPos:n[0],yPos:n[1],corners:d})}a.sort((function(e,t){return(""+e.terRef).localeCompare(t.terRef)}));for(var c,l=[],g=[],m=0,u=[{xd:0,yd:-1},{xd:0,yd:0},{xd:-1,yd:0},{xd:-1,yd:-1}],p=[{xd:-1,yd:-1,acceptedIndex:0,nextIndex:3},{xd:0,yd:-1,acceptedIndex:0,nextIndex:0},{xd:0,yd:-1,acceptedIndex:1,nextIndex:0},{xd:0,yd:0,acceptedIndex:1,nextIndex:1},{xd:0,yd:0,acceptedIndex:2,nextIndex:1},{xd:-1,yd:0,acceptedIndex:2,nextIndex:2},{xd:-1,yd:0,acceptedIndex:3,nextIndex:2},{xd:-1,yd:-1,acceptedIndex:3,nextIndex:3}];g.length<game.data.playerOwnedTerRefs.length&&!(++m>3);){var h,v=!0;for(i=0;i<a.length;i++)if(-1===g.indexOf(a[i].terRef)){h=a[i];for(var f=0;f<h.corners.length;f++){var y=h.corners[f];if(isUndefined(s[y.x+u[f].xd+"_"+(y.y+u[f].yd)])){v=!1;break}}if(!v)break}var b=h.corners[0],_=0;if(v)break;for(var w=!1,x=0;x<p.length;x++){var k=p[x],D=(b=h.corners[k.acceptedIndex]).x+k.xd+"_"+(b.y+k.yd);if(!isUndefined(s[D])&&g.indexOf(D)>-1){w=!0,g.push(h.terRef);break}}if(w)m--;else{for(var I=b,C=!1,T=[],A=[],P=0;!C;){if(++P>100){console.log("border passes issue!"),console.log("passes: "+m+" accounteD: "+JSON.stringify(g));break}T.push($.extend(!0,{},b));for(var S=!1,L=0;L<p.length;L++){var O=p[L];if(_===O.acceptedIndex&&(!1,!isUndefined(s[c=b.x+O.xd+"_"+(b.y+O.yd)]))){S=!0,h=s[c],_=O.nextIndex;break}}S||++_>3&&(_=0),A.push(h.terRef+":"+b.x+"_"+b.x),b=h.corners[_],-1===g.indexOf(h.terRef)&&g.push(h.terRef),b.x===I.x&&b.y===I.y&&(C=!0)}for(i=0;i<T.length;i++)T[i].x*=r.gridW,T[i].y*=r.gridH;l.push(T)}}game.data.bordersVertices=l},getClosestBiomeData:function(e){var t=e.split("_"),a=game.const.gameGrids.territories,s=parseInt((parseInt(t[0])+.5)*a.gridW),r=parseInt((parseInt(t[1])+.5)*a.gridH),i=a.gridW*(a.cols+2*biomeExtraTerPaddingCols),o=a.gridH*(a.rows+2*biomeExtraTerPaddingRows),n=i/biomeCols,d=o/biomeRows;return{col:Math.floor((s+a.gridW*biomeExtraTerPaddingCols)/n),row:Math.floor((r+a.gridH*biomeExtraTerPaddingRows)/d)}},getDistanceToClosestPlayerRegion:function(e){for(var t,a,s,r=helpers.territory.getRegionIDfromRef(e),i=(game.state.gameGrids.regions[r].continent,game.const.continents.africa.conqueredGrids),o=worldGrid[r],n=9999,d=0;d<i.length;d++){var c=i[d];if(t=helpers.territory.getRegionIDfromRef(c),a=worldGrid[t],(s=o.distance(a))<n&&(n=s),n<=1)break}return n}},plans:{getFormationSize:function(){return Math.min(18,game.const.baseFormationSize+helpers.common.getResearchBoost("army_unlocks","formation_slots"))},getPartData:function(e){return game.state.parts[e-1]},getFullPartData:function(e){return void 0===e.id?this.getPartData(e):e},getActivePlansData:function(e){return game.state.corpuses[e]},getActivePlansDataByRef:function(e){for(var t=0;t<game.state.corpuses.length;t++)if(game.state.corpuses[t].id===e)return game.state.corpuses[t];return!1},getPartsByTypeID:function(e,t){for(var a=0;a<game.state.parts.length;a++)if(game.state.parts[a].type===e&&game.state.parts[a].id===t)return game.state.parts[a];return!1},resetUpgradePoints:function(e){for(var t,a=0;a<game.state.corpuses.length;a++)if(game.state.corpuses[a].id===e){t=game.state.corpuses[a];break}var s=t.upgrades;return $.each(s,(function(e,a){Number.isInteger(a)&&("auraSize"===e?a>1&&(t.upgPoints+=a-1,s[e]=1):(t.upgPoints+=a,s[e]=0))})),page.popupsOpen--,gameUI.showPopup("corpus_upgrades",e),game.refreshCurrentView(),!1},getPartsByID:function(e){for(var t=0;t<game.state.parts.length;t++)if(game.state.parts[t].id===e)return game.state.parts[t];return!1},getPendingPartsByID:function(e){for(var t=0;t<game.state.partsPending.length;t++)if(game.state.partsPending[t].id===e)return game.state.partsPending[t];return!1},checkIfPartUsed:function(e){for(var t,a=0;a<game.state.corpuses.length;a++){var s;t=game.state.corpuses[a].parts;for(var r=0;r<game.const.partTypes.length;r++)if("undefined"!==t[s=game.const.partTypes[r]]&&t[s]===e)return!0}return!1},addCorpus:function(){var e=game.state.corpuses.length,t=$.extend(!0,{},game.const.corpusTemplate),a=helpers.plans.getCorpusLevel();t.level=a.level,t.lastPoints=a.lastPoints,t.nextPoints=a.nextPoints,t.id=e,t.buyAmount=1,game.state.corpuses.push(t)},getCreatedPlansData:function(e){return game.state.corpuses(e)},getPartsByIDs:function(e){for(var t={},a=0;a<e.length;a++){var s=e[a],r=game.state.parts[s-1];t[r.type]=r}return t},getStatsFromParts:function(e){var t={rate_of_fire:1e3};return $.each(e,(function(e,a){a=$.extend(!0,{},helpers.plans.getPartsByID(a)),$.each(a.stats,(function(e,a){void 0!==a.min?void 0!==t[e]?(t[e].min+=a.min,t[e].max+=a.max):t[e]=a:void 0!==t[e]?t[e]+=a:t[e]=a}))})),t},getFullPlanStats:function(e){var t=helpers.plans.getStatsFromParts(e.parts);return $.each(e.upgrades,(function(e,a){if(void 0!==game.const.corpusUpgradesGains[e]){var s=1+game.const.corpusUpgradesGains[e].gain/100*a;switch(e){case"dmg":void 0!==t.dmg&&(t.dmg.min*=s,t.dmg.max*=s);break;case"health":void 0!==t.max_hp&&(t.max_hp.min*=s,t.max_hp.max*=s)}}})),t},getStatsFromPartsByIDs:function(e){var t=this.getPartsByIDs(e);return this.getStatsFromParts(t)},getCostsFromParts:function(e){var t=0,a=0,s={};return $.each(e,(function(e,r){r&&(r=$.extend(!0,{},helpers.plans.getPartsByID(r)),a+=r.crew,$.each(r.costs,(function(e,a){void 0!==s[e]?s[e]+=a:s[e]=a,t+=a})))})),{costs:s,crew:a,buildTime:t/5}},getCostsFromPartsByIDs:function(e){var t=this.getPartsByIDs(e);return this.getCostsFromParts(t)},getProjectileDataForPlan:function(e){},getPlanRefFromParts:function(e){for(var t="",a=0;a<game.const.partTypes.length;a++){var s=game.const.partTypes[a],r=!1!==e?e.parts[s]:e.parts,i=0;!1!==e&&void 0!==r&&(i=void 0===r.id?r:r.id),t+=i+"_"}return t},getCorpusLevel:function(e){var t=0,a=0;if(e<5)a=0;else for(;e>=t+Math.floor(5*Math.pow(game.const.corpusLevelScalingMX,a));)t+=Math.floor(5*Math.pow(game.const.corpusLevelScalingMX,a)),a++;var s=0,r=0,i=0;do{s+=Math.floor(5*Math.pow(game.const.corpusLevelScalingMX,i)),i++}while(i<a);i=0;do{r+=Math.floor(5*Math.pow(game.const.corpusLevelScalingMX,i)),i++}while(i<=a);return 0===a&&(s=0,r=5),{lastPoints:s,nextPoints:r,level:a}},getUpgradesMultiplier:function(e,t){return void 0===game.state.corpuses[e]?1:1+5*game.state.corpuses[e].upgrades[t]/100}},units:{createVehicle:function(e){var t=e.posX,a=e.posY,s=e.corpusID,r=game.state.corpuses[s];if(void 0!==r){e={corpusID:s,hp:1,maxHp:1,parts:{hull:r.parts.hull,turret:r.parts.turret},isLeader:!1,currentTarget:null,type:"vehicle"};var i=new Vehicle(t,a,61,31,e);game.data.currentDrawableVehicle=i,game.data.currentDrawableVehicleID=i.globalID,game.data.draggingTank=!0}},addDynamicUnit:function(e,t){var a=e.corpusID;let s=game.state.corpuses[a];if(game.data.reinitingFormationsFromState||s.tanksAmount>0&&game.state.resources.citizens.idle>=s.crew){for(var r,i=!1,o=0;o<game.data.gameObjects.length;o++)game.data.gameObjects[o].globalID===e.globalID&&(i=!0);if(!i){r=t?{vehicle:e,data:!1}:{vehicle:game.data.currentDrawableVehicle,data:!1};var n={corpusID:a,ref:s.ref,subType:s.subType,crew:s.crew,tanksAmount:1,parts:s.parts,maxHp:s.maxHp,fireRate:s.fireRate,projectileData:s.projectileData};if(r.data=n,n=$.extend(!0,{},r.data),t)void 0!==r.vehicle.tanksAmount&&(n.tanksAmount=r.vehicle.tanksAmount,n.crew=n.tanksAmount*s.crew);else n.tanksAmount=Math.min(s.tanksAmount,game.const.squadronSize[s.upgrades.maxSquadronSize]),n.tanksAmount=Math.min(Math.floor(game.state.resources.citizens.idle/s.crew),n.tanksAmount),n.crew=n.tanksAmount*s.crew,u={x:(m=page.$gameUI.$overlay.find('.battle-menu .corpus-holder .amount-holder[data-type="'+s.id+'"]').offset()).left+30,y:m.top-10,forceDraw:!0,subType:"res_added"},p="-"+n.tanksAmount,game.addAnimation("general_text",p,u),u={x:(m=page.$gameUI.$overlay.find(".battle-menu .utility-widget .crew-fighting").offset()).left,y:m.top,forceDraw:!0,subType:"res_added"},p=getLine("crew_added",n.crew),game.addAnimation("general_text",p,u);var d=r.vehicle,c=helpers.plans.getUpgradesMultiplier(n.corpusID,"dmg"),l=helpers.plans.getUpgradesMultiplier(n.corpusID,"health");if(n.enemy=!1,n.type="vehicle",n.hp=game.state.corpuses[n.corpusID].maxHp*n.tanksAmount*l,isNaN(n.hp)&&console.log("data hp is nan: "),n.maxHp=game.state.corpuses[n.corpusID].maxHp*n.tanksAmount*l,n.formationSlot=o,n.projectileData.damage*=n.tanksAmount*c,n.projectileData.max_dmg_calc=n.projectileData.max_dmg*n.tanksAmount*c,n.projectileData.min_dmg_calc=n.projectileData.min_dmg*n.tanksAmount*c,n.projectileData.dmgAuraMX=1,n.healthAuraMX=1,n.shieldTotal=0,n.shieldUsed=0,n.shieldCurrent=0,n.armor=game.state.corpuses[n.corpusID].stats.armor.min*n.tanksAmount,n.deflection=game.state.corpuses[n.corpusID].stats.deflection.min,n.projectileData.armor_piercing=n.armorPiercing,n.projectileData.armor_piercing=game.state.corpuses[n.corpusID].stats.armor_piercing.min*n.tanksAmount,n.accuracy=game.state.corpuses[n.corpusID].stats.accuracy.min,n.projectileData.specType=game.state.corpuses[n.corpusID].ammoType,n.projectileData.objectsHit=[],$.each(n,(function(e,t){d[e]=t})),game.data.gameObjects.push(d),game.data.reinitingFormationsFromState||(game.state.gameObjects.push({corpusID:n.corpusID,tanksAmount:n.tanksAmount,x:e.x,y:e.y}),s.tanksAmount-=n.tanksAmount,game.change.resource("requires_citizens",-s.crew*n.tanksAmount),game.state.formationCrewTotal+=s.crew*n.tanksAmount),game.data.playerPower=game.calculateArmyPower(!1,{enemy:!1,hpMX:1}),!n.enemy){var g={x:d.x-30,y:d.y+10,parentGlobalID:d.globalID};game.addButton("addMore",g)}if(refreshUI.battleMenu=!0,!game.data.reinitingFormationsFromState&&game.data.gameObjects.length>=helpers.plans.getFormationSize()){var m=page.$gameUI.$overlay.find(".battle-menu .buttons-holder").offset(),u={x:m.left,y:m.top,forceDraw:!0,subType:"fully_filled"},p=getLine("all_spots_filled");audio.playSound("spotsFilled"),game.addAnimation("general_text",p,u)}}return!0}return!1},updateCorpusStats:function(e){console.log("corpus stats will be updated for corpus: "+e);var t=game.state.corpuses[e].parts;$.each(t,(function(e,t){var a=helpers.plans.getPartsByTypeID(e,t);console.log("partData: "+JSON.stringify(a))}))},updateGameObjectStats:function(e){var t=game.state.corpuses[e.corpusID],a=helpers.plans.getUpgradesMultiplier(e.corpusID,"dmg"),s=helpers.plans.getUpgradesMultiplier(e.corpusID,"health");e.hp=game.state.corpuses[e.corpusID].maxHp*e.tanksAmount*s,e.maxHp=game.state.corpuses[e.corpusID].maxHp*e.tanksAmount*s,isNaN(e.hp)&&console.log("object2 hp is nan : "),e.crew=t.crew*e.tanksAmount,e.projectileData.damage*=e.tanksAmount*a,e.projectileData.max_dmg_calc=e.projectileData.max_dmg*e.tanksAmount*a,e.projectileData.min_dmg_calc=e.projectileData.min_dmg*e.tanksAmount*a,e.armor=game.state.corpuses[e.corpusID].stats.armor.min*e.tanksAmount,e.projectileData.armor_piercing=game.state.corpuses[e.corpusID].stats.armor_piercing.min*e.tanksAmount,game.data.playerPower=game.calculateArmyPower(!1,{enemy:!1,hpMX:1}),refreshUI.battleMenu=!0},refreshAfterReductionSquadronSize:function(){for(var e,t,a=0;a<game.data.gameObjects.length;a++)e=game.data.gameObjects[a],t=game.const.squadronSize[game.state.corpuses[e.corpusID].upgrades.maxSquadronSize],game.data.gameObjects[a].tanksAmount>t&&(game.state.corpuses[e.corpusID].tanksAmount+=game.data.gameObjects[a].tanksAmount-t,game.data.gameObjects[a].tanksAmount=t,helpers.units.updateGameObjectStats(game.data.gameObjects[a]));helpers.units.refreshGameObjectsState()},refreshGameObjectsState:function(){var e;game.state.gameObjects=[];for(var t=0;t<game.data.gameObjects.length;t++)e=game.data.gameObjects[t],game.state.gameObjects.push({corpusID:e.corpusID,tanksAmount:e.tanksAmount,isLeader:e.isLeader,x:e.x,y:e.y})},checkSelectableSlots:function(){-1!==game.data.selectedCorpusID&&(0===game.state.corpuses[game.data.selectedCorpusID].tanksAmount?$(".right-column.formations .unit-data").each((function(e){$(this).find(".slot").removeClass("selectable")})):$(".right-column.formations .unit-data").each((function(e){var t=$(this).attr("data-slot-id"),a=game.data.unitFormation[t].corpusID,s=game.state.corpuses[a];game.data.unitFormation[t].corpusID===game.data.selectedCorpusID&&game.data.unitFormation[t].tanksAmount+1<=game.const.squadronSize[s.upgrades.maxSquadronSize]?$(this).find(".slot").addClass("selectable"):game.data.unitFormation[t]?$(this).find(".slot").removeClass("selectable"):$(this).find(".slot").addClass("selectable")})))},resetUnitFormation:function(){game.data.unitFormation=[]},initFormationFromState:function(){var e;game.data.unitFormation=[],game.data.auras=[],game.data.gameObjects=[],game.data.auras=[],game.data.buttons=[],game.data.reinitingFormationsFromState=!0;for(var t=0;t<game.state.gameObjects.length;t++){e=game.state.gameObjects[t];var a=game.state.corpuses[e.corpusID],s={corpusID:e.corpusID,hp:1,maxHp:1,parts:{hull:a.parts.hull,turret:a.parts.turret},tanksAmount:e.tanksAmount,isLeader:e.isLeader,currentTarget:null},r=new Vehicle(e.x,e.y,61,31,s);if(s.isLeader){s.subType=a.upgrades.auraType;var i=e.x+e.w/2-a.upgrades.auraSize*game.const.auraEffectRadius/2,o=e.y+e.h/2-a.upgrades.auraSize*game.const.auraEffectRadius/2,n=new Aura(i-5,o,a.upgrades.auraSize*game.const.auraEffectRadius,a.upgrades.auraSize*game.const.auraEffectRadius,s);game.data.auras.push(n),r.auraRef=n}helpers.units.addDynamicUnit(r,!0)}game.data.reinitingFormationsFromState=!1,game.data.playerPower=game.calculateArmyPower(!1,{enemy:!1,hpMX:1})},getAllowedTankStats:function(){var e={accuracy:!0,armor:!0,armor_piercing:!1,deflection:!1},t=game.state.gameGrids.territories[game.state.currentParentGrids.regions][game.state.currentParentGrids.territories].powerMX;return t>=2&&(e.armor=!0),t>=3&&(e.armor_piercing=!0),game.state.gameStats.conquered.current.territories>=2&&(e.deflection=!0),e},getAllowedAmmoTypes:function(){var e={regular:!0,anti_armor:!1,srapnel:!1,rail:!1};return game.state.gameStats.conquered.current.regions>=1&&(e.deflection=!0),game.state.gameStats.conquered.current.regions>=5&&(e.deflection=!0),game.state.gameStats.conquered.current.regions>=20&&(e.deflection=!0),e}},events:{canFireEventType:function(e){var t=game.const.eventParams[e];if(void 0===t)return!1;var a=t.frequency.minDays*game.const.realToGameTime*24*1e3;if(game.data.activeEventTypes.indexOf(e)>-1)return!1;if(!1!==t.appearCondition){var s=0;switch(t.appearCondition.type){case"after_start_game_time":s=Math.floor((game.state.gameDate-game.const.startTimestamp)/(24*game.const.realToGameTime*1e3));break;case"building_required":var r=helpers.common.getBuildingData(t.appearCondition.subType,0);s=void 0!==r.avl?r.avl:void 0!==r.level?1:0;break;case"resource_required":s=game.state.resources[t.appearCondition.subType].amount}if(t.appearCondition.amount>s)return!1}for(var i=0;i<game.state.events.list.length;i++){var o=game.state.events.list[i];if(o.type===e){if(o.active)return!1;var n=o.startedAt+o.duration+a;if(n>game.state.gameDate)return console.log("Can't start this even yet - min frequency needed! GameDate: "+game.state.gameDate+" allowed: "+n),!1}}return!0},getCurrentEventEffectAmount:function(e,t){var a=game.state.events.list[e],s=game.const.eventParams[a.type],r=(a.threshold,a.intensity);"fixed"===s.frequency.type&&(r=1);var i=s.effects[t],o=1;switch(t){case"effectsBuildings":o=i.bonusEffect;break;case"effectsStat":case"destroyBuildings":o=i.baseChance;break;case"crashMarketPrice":o=1}return o*=r},getEventEffectDetails:function(e,t){var a,s=game.state.events.list[e],r=game.const.eventParams[s.type],i=(s.threshold,s.intensity),o=helpers.events.getCurrentEventEffectAmount(e,t),n="",d=r.effects[t];switch(t){case"effectsBuildings":for(var c=0;c<d.types.length;c++){if("any"===(a=d.types[c])){n+=getLine("all_buildings");break}"winter"===s.type&&"farm"===a&&game.data.continentRewardBoosts.farm_winter_immunity||(game.const.buildings[a],""!==n&&(n+=", "),n+=getLine("buildings_"+a))}n+=(100*o).formatNumber(2,2,!0,!0)+"% "+{gain_mx:"Production Rate"}[d.bonusType];break;case"effectsStat":switch(a=d.type,o*=i,game.const.stats[a],a){case"morale":n+=getLine("morale_effect",getLine("stats_"+a),(100*o).formatNumber(2,2,!0,!0))}break;case"destroyBuildings":for(c=0;c<d.types.length;c++){if("any"===(a=d.types[c])){n+=getLine("all_buildings");break}game.const.buildings[a],c>0&&(n+=", "),n+=getLine("buildings_"+a)}if(n+=getLine("chance_of_burning",(100*o).formatNumber(2,2,!0)),void 0!==d.highRiskTypes){n+=' <span class="high-risk">',n+=getLine("chance_for",(100*o*d.highRiskMX).formatNumber(2,2,!0));for(c=0;c<d.highRiskTypes.length;c++)a=d.highRiskTypes[c],game.const.buildings[a],c>0&&(n+=", "),n+=getLine("buildings_"+a);n+="!</span>"}break;case"crashMarketPrice":o=1;break;case"fireNewEvent":"fire"===d&&(n=getLine("fire_effect"))}return n},getCurrentEventIntensityTrend:function(e){var t=game.state.events.list[e],a=game.const.eventParams[t.type];if("fixed"===a.frequency.type)return 0;var s=t.threshold,r=t.intensity,i=t.duration/24/1e3/game.const.realToGameTime,o=(1-a.startParams.intensity)/i,n=0,d=0;switch(a.startParams.thresholdType){case"policeman":n=game.state.jobs.policeman.workers,d=game.state.resources.citizens.total;break;case"fireman":n=game.state.jobs.fireman.workers,d=game.state.resources.citizens.total}return o=(o*=-(n/Math.max(1,d/s)-1))>0?Math.min(1-r,o):Math.max(-r,o)},isActiveEvent:function(e){return game.data.activeEventTypes.indexOf(e)>-1},getActiveEvent:function(e){for(var t=game.state.events.list.length-1;t>=0;t--){var a=game.state.events.list[t];if(a.active&&a.type===e)return a}return!1}},colonies:{getColonyData:function(e,t){var a,s=game.state.colonies[e][t];if(isUndefined(s)){if(!1!==helperData.tempColony&&helperData.tempColony.grid_ref===t&&helperData.tempColony.type===e)return helperData.tempColony;var r=helpers.territory.getDistanceToClosestPlayerRegion(t),i=game.const.coloniesMaxDistance;r=Math.min(i,r);var o=game.const.coloniesBaseRisk+(r-1)*game.const.coloniesRiskPerDistance,n=game.const.coloniesPayBonusPerDistance,d=1+game.const.coloniesBasePay+n*r,c=d/(1-o),l=game.const.coloniesBaseConquerDays,g=randomFloatFromInterval(0,1)<=o,m=randomFloatFromInterval(0,.999),u=Math.pow(m,2),p=(g?Math.max(.1,u):1+u*game.const.coloniesControlBaseMax*(1+game.const.coloniesControlDistanceMax-r/game.const.coloniesControlDistanceDivisor))/l;a={grid_ref:t,type:e,nearest_dist:r,control_rate:0,investment_min:game.const.coloniesMinInvestment,invested_total:0,investment_left:0,investment_change:game.const.coloniesMinInvestment,risk:o,risk_orig:o,payout:c,profit:(d-1)*game.const.coloniesMinInvestment,control_rate_day:p,automation:!1}}else a=s;return a},updateColonyStats:function(e,t,a){var s=e.invested_total;!0===t&&(s+=e.investment_change);var r=1-e.risk_orig,i=r*(s/e.investment_min);i=Math.min(1,i);var o=(e.profit+s)/s/i;if(!0!==t){if(e.risk=1-i,e.payout=o,!0===a){var n=game.const.coloniesBaseConquerDays,d=randomFloatFromInterval(0,1)<=1-r,c=randomFloatFromInterval(0,.999),l=Math.pow(c,2),g=(d?Math.max(.1,l):1+l*game.const.coloniesControlBaseMax*(1+game.const.coloniesControlDistanceMax-e.nearest_dist/game.const.coloniesControlDistanceDivisor))/n;e.control_rate_day=g}return e}return{risk:1-i,payout:o}},initColoniesFromState:function(){game.data.colonies=[],$.each(game.state.colonies,(function(e,t){$.each(t,(function(t,a){var s=new Colony(0,0,102,89,{subType:e,staticRef:t});s.x=game.data.gameGrids[t].x-1,s.y=game.data.gameGrids[t].y-1,game.data.colonies.push(s)}))}))},addColonyInvestment:function(e){var t;if(t=isUndefined(e.colonyData)?helpers.colonies.getColonyData(e.type,e.gridRef):e.colonyData,game.state.resources.gold.amount<t.investment_change)console.log("not enough gold to invest");else if(t.invested_total+=t.investment_change,t.investment_left+=t.investment_change,t=helpers.colonies.updateColonyStats(t,!1,e.newColony),e.newColony&&(t.investment_change=t.investment_min/10,game.state.colonies[e.type][e.gridRef]=t,helperData.tempColony=!1,forceDrawAll=!0,gameUI.checkDOMrefresh("overlay_refresh")),!0!==e.autoCreated)gameUI.showQuickPopup("colony_details",!1,!1,{gridRef:e.gridRef,type:e.type});else if(helpers.common.isCurrentView("world")){var a=new Colony(0,0,70,70,{subType:e.type,staticRef:e.gridRef}),s=game.data.gameGrids[e.gridRef];a.x=s.vertices[3].x+15,a.y=s.vertices[5].y+10,game.data.colonies.push(a)}},canBeginNewColonyFromColony(e){var t=game.state.currentParentGrids.continent,a=game.const.continents[t];if(0===a.gridRefs.filter((e=>-1===a.conqueredGrids.indexOf(e))).length)return!1;var s=helpers.territory.getRegionIDfromRef(e.grid_ref),r=worldGrid[s],i=!1;if($.each(r.neighbours,(function(e,t){if(!1!==t&&!t.water){var s=t.x.toString()+"_"+t.y.toString(),r=helpers.territory.getRegionIDfromRef(s);if(-1!==a.gridRefs.indexOf(s)&&isUndefined(game.state.colonies.military[hoverCellRef])&&isUndefined(game.state.colonies.economic[hoverCellRef]))return game.state.gameGrids.regions[r].enemy?(i=s,!1):void 0}})),!1!==i){var o=helpers.colonies.getColonyData(e.type,i);return!1===o?(console.log("for some weird reason can't begin a colony here?, grid:"+i),!1):o.investment_min>e.investment_left?(console.log(e.investment_left+" is not enough power/gold left in the froMColony to buy a new one costing "+o.investment_min),!1):(o.investment_change=e.investment_left,o.automation=!0,o)}return!1}},automation:{attackNextSection:function(){if(game.state.gameGrids.territories[game.state.currentParentGrids.regions][game.state.currentParentGrids.territories].enemy){var e=game.data.gameGrids,t=[],a=1e50;$.each(e,(function(e,s){s.enemy&&s.tilePower<=a&&game.checkIfAttackable("zones",s.ref)&&(a=s.tilePower,t.push(s.ref))}));var s=randomItemFromArray(t);game.data.automationData.attackSection=s,game.data.automationData.nextAttackIn=5e3,game.data.automationData.enableAttack=!0}else game.getSettingValue("auto_attack_territory")&&(game.switchTo("territories"),helpers.automation.attackNextTerritory()&&(game.switchTo("battle_select"),helpers.automation.attackNextSection(),game.data.automationData.enableAttack=!0,game.data.automationData.nextTerAttackIn=5e3))},attackNextTerritory:function(){var e=!1;return $.each(game.data.gameGrids,(function(t,a){if(game.checkIfAttackable("territories",t))return game.data.automationData.attackTerritory=t,game.state.currentParentGrids.territories=t,game.state.lastBattledTerritory=t,e=!0,!1})),e},autoRefillFormation:function(){helpers.common.randomizeSquadronsDynamic(),game.data.currentDrawableVehicle=null},checkResourceScavangeNeed:function(e){var t=-game.data.resourceRates[e].absolute/game.data.continentRewardBoosts.scavenging_rate_increase;return t=t<-.99?Math.max(-game.state.resources[e].workers,Math.floor(t)):t>0?Math.min(Math.max(0,game.state.resources.citizens.idle),Math.ceil(t)):0,game.state.resources[e].extra<=0&&(t=-game.state.resources[e].workers),t},autoConquerWorld:function(e){if(stopAllLogic)stopAllLogic=!1;else{void 0!==e.first&&(game.data.canAttackNewRegion=!0,delete e.first);var t=e.timeout,a=game.state.currentParentGrids.continent;if(console.log("performanceStart "+d),game.data.canAttackNewContinent){if(!0!==e.conquerAll)return;if(void 0===(a=randomItemFromArray(game.state.lockedContinents)))return void console.log("world conquered! for real!");helpers.territory.attackContinent(a,!0),console.log("attacking new continent: "+a)}var s,r,i=game.const.continents[a],o=!1,n=0,d=performance.now();performance.now();performance.now();var c=i.gridRefs.filter((e=>-1===i.conqueredGrids.indexOf(e)));if(0===c.length)return game.data.canAttackNewContinent=helpers.territory.canAttackNewContinent(),void(game.data.canAttackNewContinent?(gameUI.showPopup("continent_conquer"),console.log("out of regions to attack ,switch continent!"),helpers.automation.autoConquerWorld(e)):console.log("automation stopped - world should be fully conquered?"));for(;!1===o;){if(s=randomItemFromArray(c),r=helpers.territory.getRegionIDfromRef(s),game.state.gameGrids.regions[r],game.data.gameGrids[s].attackable){o=s;break}if(++n>100)break}performance.now(),o?(helpers.territory.attackRegion(o,!0),helpers.territory.forceConquerGrid("regions",o),updateAttackableGrids("regions",game.state.currentParentGrids.continent),game.data.canAttackNewContinent=helpers.territory.canAttackNewContinent(),game.data.canAttackNewContinent&&gameUI.showPopup("continent_conquer"),setTimeout(helpers.automation.autoConquerWorld.bind(null,e),t)):console.log("no further attackable regions found!")}},getNewTerritoryToExplore:function(){var e=!1,t=game.state.currentParentGrids.regions,a=game.state.gameGrids.territories[t];if(!1===(e=helpers.automation.checkRegionForExplorableTerritory(a,t))){var s=[],r=[],i=[];$.each(game.const.continents,(function(e,t){e===game.state.currentParentGrids.continent?r=t.conqueredGrids:i=i.concat(t.conqueredGrids)})),s=s.concat(r,i);for(var o=0;o<s.length&&(t=s[o],isUndefined(a=game.state.gameGrids.territories[t])||!1===(e=helpers.automation.checkRegionForExplorableTerritory(a,t)));o++);}return e},checkRegionForExplorableTerritory:function(e,t){var a=!1;return $.each(e,(function(e,s){return s.enemy||s.explored_spots>=game.const.exploredSpotsCap?void 0:(a={region:t,territory:e},!1)})),a}},drawing:{data:{transitionType:"",transitionTime:500,lastChangeTime:-1,transitionParams:!1,lastEasedRatio:0},easing:function(e,t){var a=e;switch(t){case"sqrtEaseInOut":a=Math.sqrt(e);break;case"easeInOutQuad":a=e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2;break;case"easeOutQuad":default:a=1-(1-e)*(1-e)}return a},transitionZoom:function(e){if(isUndefined(e)||("zoom"!==helpers.drawing.data.transitionType&&(helpers.drawing.data.transitionParams=!1),!1===helpers.drawing.data.transitionParams?(helpers.drawing.data.lastChangeTime=performance.now(),helpers.drawing.data.transitionParams={startZoom:pixelRatio,finalZoom:e},helpers.drawing.data.transitionTime=100,helpers.drawing.data.lastEasedRatio=0,helpers.drawing.data.transitionType="zoom"):(helpers.drawing.data.transitionParams.finalZoom=e,helpers.drawing.data.transitionTime+=10)),!1!==helpers.drawing.data.transitionParams){var t=performance.now()-helpers.drawing.data.lastChangeTime,a=t/helpers.drawing.data.transitionTime,s=helpers.drawing.easing(a,"easeOutQuad");s=Math.max(s,helpers.drawing.data.lastEasedRatio),helpers.drawing.data.lastEasedRatio=s;var r=pixelRatio,i=s*(helpers.drawing.data.transitionParams.finalZoom-helpers.drawing.data.transitionParams.startZoom),o=helpers.drawing.data.transitionParams.startZoom+i;helpers.common.setZoomRatio(o),forceDrawAll=!0;var n=game.data.centerPoint.x*(r-pixelRatio),d=game.data.centerPoint.y*(r-pixelRatio);if(helpers.common.setCameraOffset(game.data.cameraXoffset+n,game.data.cameraYoffset+d),helpers.common.calculateCenterCoords(),t>helpers.drawing.data.transitionTime||a>=1)return void(helpers.drawing.data.transitionParams=!1)}!1!==helpers.drawing.data.transitionParams&&setTimeout(helpers.drawing.transitionZoom,16)},transitionOffset:function(e){if(!isUndefined(e))if(!1===helpers.drawing.data.transitionParams){helpers.drawing.data.lastChangeTime=performance.now();var t={x:game.data.cameraXoffset+e.x,y:game.data.cameraYoffset+e.y};helpers.drawing.data.transitionParams={startOffset:{x:game.data.cameraXoffset,y:game.data.cameraYoffset},finalOffset:t},helpers.drawing.data.transitionTime=100,helpers.drawing.data.lastEasedRatio=0,helpers.drawing.data.transitionType="offset"}else helpers.drawing.data.transitionParams.finalOffset.x+=e.x,helpers.drawing.data.transitionParams.finalOffset.y+=e.y,helpers.drawing.data.transitionTime+=10;if("offset"===helpers.drawing.data.transitionType){if(!1!==helpers.drawing.data.transitionParams){var a=performance.now()-helpers.drawing.data.lastChangeTime,s=a/helpers.drawing.data.transitionTime,r=helpers.drawing.easing(s,"easeOutQuad");r=Math.max(r,helpers.drawing.data.lastEasedRatio),r=1,helpers.drawing.data.lastEasedRatio=r;game.data.cameraXoffset,game.data.cameraYoffset;var i={x:r*(helpers.drawing.data.transitionParams.finalOffset.x-helpers.drawing.data.transitionParams.startOffset.x),y:r*(helpers.drawing.data.transitionParams.finalOffset.y-helpers.drawing.data.transitionParams.startOffset.y)};t={x:helpers.drawing.data.transitionParams.startOffset.x+i.x,y:helpers.drawing.data.transitionParams.startOffset.y+i.y};if(helpers.common.setCameraOffset(t.x,t.y),helpers.common.calculateCenterCoords(),forceDrawAll=!0,a>helpers.drawing.data.transitionTime||s>=1)return void(helpers.drawing.data.transitionParams=!1)}!1!==helpers.drawing.data.transitionParams&&setTimeout(helpers.drawing.transitionOffset,16)}},addEndBattleAnimation:function(e){var t,a,s=e.corpuses,r=Object.keys(s).length,i=0;$.each(s,(function(s,o){t=o.tankFoughtTotal-o.tanksCurrent;var n=$('.corpus-data-holder[data-type="'+s+'"]');t>0&&(a=n.find(".tanks-lost .amount")).html(t);var d=o.tankFoughtTotal*game.data.continentRewardBoosts.exp_gain_increase;d>0&&((a=n.find(".right-part .exp-points")).removeClass("not-displayed"),a=n.find(".right-part .exp-points .value"),helpers.drawing.addCounterAnimation("general",a,0,d,3e3/parseInt(d)),a.html(d)),a=n;var c=!1;i===r-1&&e.levelsGained>0&&(c=!0),helpers.drawing.addProgressAnimation(a,o,c),o.tanksAmount<=0&&o.tanksCurrent<=0&&setTimeout((function(){audio.playSound("corpusDestroyedExplosion")}),3400),i+=1}))},addCounterAnimation:function(e,t,a,s,r){if(t.length>0){var i=t.offset(),o={x:i.left,y:i.top,forceDraw:!0,subType:"res_added"},n="+"+s;game.addAnimation("general_text",n,o)}},addProgressAnimation:function(e,t,a){var s,r=t.data.expPoints-t.tankFoughtTotal*game.data.continentRewardBoosts.exp_gain_increase,i=t.data.expPoints,o=r,n=helpers.plans.getCorpusLevel(o),d=n.lastPoints,c=n.nextPoints,l=n.level;s=i<c?(i-d)/(c-d):1;var g=!1,m=e.find(".level-widget"),u=m.find(".pre-level-widget.left"),p=m.find(".pre-level-widget.right"),h=e.find(".current-exp-points"),v=e.find(".progress-bar");function f(){g?(n=helpers.plans.getCorpusLevel(o),d=n.lastPoints,c=n.nextPoints,s=i<c?(i-d)/(c-d):1,l=n.level,u.html(getLine("lvl")+l),p.html(getLine("lvl")+(l+1)),h.html((o-n.lastPoints).formatNumber()+"/"+(n.nextPoints-n.lastPoints).formatNumber()+" "+getLine("xp")),setTimeout((function(){o+=1,g=!1,f()}),125)):(v.attr("data-progress",s),o=c)}v.on(transitionEnd,(function(){$(this).hasClass("instant")||(v.addClass("instant"),setTimeout((function(){i>=d&&i<c?(h.html((i-n.lastPoints).formatNumber()+"/"+(n.nextPoints-n.lastPoints).formatNumber()+" "+getLine("xp")),setTimeout((function(){if(t.addedUpgPoints>0){audio.playSound("positiveSound");var a=e.find(".shield-reward");a.removeClass("not-displayed"),a=e.find(".shield-reward .amount"),helpers.drawing.addCounterAnimation("general",a,0,t.addedUpgPoints,3e3/parseInt(t.addedUpgPoints))}}),1e3),setTimeout((function(){a&&(e.parent().parent().find(".extra-gains").removeClass("hidden").addClass("animated"),audio.playSound("endBattleTotalUpg"))}),1400)):(i===c&&setTimeout((function(){setTimeout((function(){if(t.addedUpgPoints>0){audio.playSound("positiveSound");var a=e.find(".shield-reward");a.removeClass("not-displayed"),a=e.find(".shield-reward .amount"),helpers.drawing.addCounterAnimation("general",a,0,t.addedUpgPoints,3e3/parseInt(t.addedUpgPoints))}}),1e3),setTimeout((function(){a&&(e.parent().parent().find(".extra-gains").removeClass("hidden").addClass("animated"),audio.playSound("endBattleTotalUpg"))}),1400)}),50),v.attr("data-progress",0),g=!0,setTimeout((function(){v.removeClass("instant"),setTimeout((function(){f()}),50)}),50))}),50))})),f()}},dev:{compareVersions:function(e,t){var a,s,r=e.split("."),i=t.split("."),o=Math.min(r.length,i.length);for(a=0;a<o;a++)if(s=parseInt(r[a],10)-parseInt(i[a],10))return s;return r.length-i.length},devActions:function(e,t,a){var s=game.data.devSettings[e];switch(e){case"save_game":game.stateHandling.saveGame();break;case"reset_game":game.stateHandling.resetLoad();break;case"export_research_changes":exportResearchNodeChanges();break;case"reveal_categories":$.each(game.const.viewCategories,(function(e,t){t.revealed=s.enabled,"world"===e&&(t.revealed=!0)}));break;case"reveal_views":$.each(game.const.views,(function(e,t){t.revealed=s.enabled,"resources"===e&&(t.revealed=!0)}));break;case"reveal_jobs":$.each(game.const.views,(function(e,t){t.revealed=s.enabled}));break;case"reveal_buildings":$.each(game.const.buildings,(function(e,t){t.unlocked=!0,void 0!==game.state.buildings[e]&&(t.revealed=s.enabled)})),$.each(game.const.resources,(function(e,t){t.revealed=!0}));break;case"buy_all_buildings":$.each(game.const.buildings,(function(e,t){t.unlocked=!0,void 0!==game.state.buildings[e]&&void 0!==game.state.buildings[e].avl&&(game.state.buildings[e].avl+=1)}));break;case"buy_researches":$.each(game.const.researchUpgrades,(function(e,t){game.buyResearchUpgrade(e,!0)}));break;case"add_resources":"research_points"!==t&&"perk_points"!==t&&(game.change.resource(t,a),"citizens"===t&&game.change.resource("population",a));break;case"add_time_saved":game.state.timeSaved+=a*game.const.realToGameTime;break;case"urgent_resources":game.change.resource("citizens",1e7),game.change.resource("food",1e20),game.change.resource("water",1e20),game.change.resource("energy",1e15);break;case"game_speed":looptimeMX=a;break;case"factory_units":game.state.buildings.war_factory[0]={workers:0,working:!1,eff:0,producing:!1,level:1,upgrading:!1},helpers.plans.addCorpus(),game.addPart(0,5,"hull"),game.addPart(0,7,"turret"),game.state.buildings.war_factory[0].workers=180,game.state.corpuses[0].tanksAmount=100;var r=game.state.corpuses[0];r.projectileData={type:"shell_1",speed:1e3,damage:r.stats.dmg.min,min_dmg:r.stats.dmg.min,max_dmg:r.stats.dmg.max},r.fireRate=r.stats.rate_of_fire,r.maxHp=r.stats.max_hp.min,r.upgPoints=20,helpers.plans.addCorpus(),game.addPart(1,6,"hull"),game.addPart(1,8,"turret"),game.state.corpuses[1].tanksAmount=100,(r=game.state.corpuses[1]).projectileData={type:"shell_1",speed:1e3,damage:r.stats.dmg.min,min_dmg:r.stats.dmg.min,max_dmg:r.stats.dmg.max},r.fireRate=r.stats.rate_of_fire,r.maxHp=r.stats.max_hp.min,r.upgPoints=20}}}};function checkLineIntersection(e,t,a,s,r,i,o,n){var d,c,l,g,m={x:null,y:null,onLine1:!1,onLine2:!1};return 0===(d=(n-i)*(a-e)-(o-r)*(s-t))||(g=(a-e)*(c=t-i)-(s-t)*(l=e-r),c=((o-r)*c-(n-i)*l)/d,l=g/d,m.x=e+c*(a-e),m.y=t+c*(s-t),c>0&&c<1&&(m.onLine1=!0),l>0&&l<1&&(m.onLine2=!0)),m}function calculateIntersection(e,t){var a=$.extend(!0,{},e);a=getRectCorners(a,!0);var s=$.extend(!0,{},t);s=getRectCorners(s,!0);var r={},i={};i[0]=checkLineIntersection(a[0].x,a[0].y,a[1].x,a[1].y,s[0].x,s[0].y,s[3].x,s[3].y),i[1]=checkLineIntersection(a[0].x,a[0].y,a[1].x,a[1].y,s[3].x,s[3].y,s[2].x,s[2].y),i[2]=checkLineIntersection(a[0].x,a[0].y,a[1].x,a[1].y,s[0].x,s[0].y,s[1].x,s[1].y),i[3]=checkLineIntersection(a[0].x,a[0].y,a[1].x,a[1].y,s[1].x,s[1].y,s[2].x,s[2].y),r[0]=i,(i={})[0]=checkLineIntersection(a[3].x,a[3].y,a[2].x,a[2].y,s[0].x,s[0].y,s[3].x,s[3].y),i[1]=checkLineIntersection(a[3].x,a[3].y,a[2].x,a[2].y,s[3].x,s[3].y,s[2].x,s[2].y),i[2]=checkLineIntersection(a[3].x,a[3].y,a[2].x,a[2].y,s[0].x,s[0].y,s[1].x,s[1].y),i[3]=checkLineIntersection(a[3].x,a[3].y,a[2].x,a[2].y,s[1].x,s[1].y,s[2].x,s[2].y),r[1]=i;for(var o,n={},d=0;d<2;d++){var c=getHitsCoordinates(r[d]);if(0!==Object.keys(c).length){var l=getDistances(c,a[d]),g=Object.keys(l).sort((function(e,t){return l[e]-l[t]}));g=g[0],n[d]={index:g,x:r[d][g].x,y:r[d][g].y,distance:l[g]}}}if(0===Object.keys(n).length)return!1;if(1===Object.keys(n).length)for(d=0;d<2;d++)void 0!==n[d]&&(o=n[d]);else if(n[0].index===n[1].index)o=n[0].distance>n[1].distance?n[0]:n[1];else{var m,u=n[0].index,p=n[1].index,h={x:(a[1].x+a[2].x)/2,y:(a[1].y+a[2].y)/2};(m=["0","1"]).includes(u)&&m.includes(p)&&(o={x:s[3].x,y:s[3].y,distance:getDistance(h,s[3])}),(m=["0","2"]).includes(u)&&m.includes(p)&&(o={x:s[0].x,y:s[0].y,distance:getDistance(h,s[0])}),(m=["1","3"]).includes(u)&&m.includes(p)&&(o={x:s[1].x,y:s[1].y,distance:getDistance(h,s[1])}),(m=["2","3"]).includes(u)&&m.includes(p)&&(o={x:s[2].x,y:s[2].y,distance:getDistance(h,s[2])})}return o}function getHitsCoordinates(e){var t={};return $.each(e,(function(a,s){e[a].onLine2&&(t[a]={x:e[a].x,y:e[a].y})})),t}function getDistances(e,t){var a={};return $.each(e,(function(e,s){a[e]=Math.sqrt(Math.pow(t.x-s.x,2)+Math.pow(t.y-s.y,2))})),a}function getDistance(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function drawLine(e,t){t=t||"black",context.strokeStyle=t,context.beginPath(),context.moveTo(e.startX,e.startY),context.lineTo(e.endX,e.endY),context.stroke(),drawPoint(e.startX,e.startY,t),drawPoint(e.endX,e.endY,t)}$(document).ready((function(){game.const=gameConstants;var e=null;parent!==window&&(e=document.referrer);var t=document.createElement("a");t.href=e,parsedParentHostname=t.hostname;var a=["gamexgames","192.168","93.103","localhost","armorgames"];console.log("Site domain: "+parsedParentHostname+" parentURL: "+e);for(var s=0;s<a.length;s++)if(parsedParentHostname.indexOf(a[s])>-1){!0;break}if(""===parsedParentHostname&&!0,isSteam()||initGA(),!0)page.init(),audio.init();else{var r='<div id="gameBlocker" style="position:absolute;z-index:5;left:0;top:0;width:100%;height:100%; text-align:center;background:black;font: 14px/16px \'MontserratSemiBold\';color:white;"><p style="margin: 150px 20px 20px 20px;">'+getLine("not_whitelisted")+'</p><p style="margin: 20px;">'+getLine("site_owner")+"</p></div>";$("#mainContent").append(r),GameAnalytics("addErrorEvent","Error","Site not whitlisited "+parsedParentHostname)}}));